<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content-dsl-usage-guidelines" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Content DSL Usage Guidelines | Idle Engine Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hansjm10.github.io/Idle-Game-Engine/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hansjm10.github.io/Idle-Game-Engine/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hansjm10.github.io/Idle-Game-Engine/content-dsl-usage-guidelines"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Content DSL Usage Guidelines | Idle Engine Docs"><meta data-rh="true" name="description" content="Prescriptive workflow for building, validating, and shipping Idle Engine content packs."><meta data-rh="true" property="og:description" content="Prescriptive workflow for building, validating, and shipping Idle Engine content packs."><link data-rh="true" rel="icon" href="/Idle-Game-Engine/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hansjm10.github.io/Idle-Game-Engine/content-dsl-usage-guidelines"><link data-rh="true" rel="alternate" href="https://hansjm10.github.io/Idle-Game-Engine/content-dsl-usage-guidelines" hreflang="en"><link data-rh="true" rel="alternate" href="https://hansjm10.github.io/Idle-Game-Engine/content-dsl-usage-guidelines" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Content DSL Usage Guidelines","item":"https://hansjm10.github.io/Idle-Game-Engine/content-dsl-usage-guidelines"}]}</script><link rel="stylesheet" href="/Idle-Game-Engine/assets/css/styles.ddf7989c.css">
<script src="/Idle-Game-Engine/assets/js/runtime~main.8e44ee95.js" defer="defer"></script>
<script src="/Idle-Game-Engine/assets/js/main.267f9d33.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Idle-Game-Engine/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_li4T" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Idle-Game-Engine/"><div class="navbar__logo"><img src="/Idle-Game-Engine/img/logo.svg" alt="Idle Engine Logo" class="themedComponent_wqtB themedComponent--light_vaEm"><img src="/Idle-Game-Engine/img/logo.svg" alt="Idle Engine Logo" class="themedComponent_wqtB themedComponent--dark_axH8"></div><b class="navbar__title text--truncate">Idle Engine</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Idle-Game-Engine/">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/hansjm10/Idle-Game-Engine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_cYRj"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle__Exw colorModeToggle_Lslw"><button class="clean-btn toggleButton_AMBK toggleButtonDisabled_p4Bd" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_uZx1 lightToggleIcon_p2sk"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_uZx1 darkToggleIcon_B2qX"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_uZx1 systemToggleIcon_PWgn"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_RKai"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_nqaE"><div class="docsWrapper_CSLE"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sOWX" type="button"></button><div class="docRoot_qxtV"><aside class="theme-doc-sidebar-container docSidebarContainer_Xlvo"><div class="sidebarViewport_tjEA"><div class="sidebar_ubOv"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_CfkH"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/Idle-Game-Engine/"><span title="Getting Started" class="categoryLinkLabel_ebxo">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/"><span title="Overview" class="linkLabel_KsAJ">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/contributor-handbook"><span title="Contributor Handbook" class="linkLabel_KsAJ">Contributor Handbook</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/role-index"><span title="Role Index" class="linkLabel_KsAJ">Role Index</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/design-document-template"><span title="Design Document Template" class="linkLabel_KsAJ">Design Document Template</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Idle-Game-Engine/idle-engine-design"><span title="Core Runtime" class="categoryLinkLabel_ebxo">Core Runtime</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Idle-Game-Engine/content-dsl-schema-design"><span title="Content Pipeline" class="categoryLinkLabel_ebxo">Content Pipeline</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/content-dsl-schema-design"><span title="Content DSL Schema Design" class="linkLabel_KsAJ">Content DSL Schema Design</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Idle-Game-Engine/content-dsl-usage-guidelines"><span title="Content DSL Usage Guidelines" class="linkLabel_KsAJ">Content DSL Usage Guidelines</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/content-compiler-design"><span title="Content Compiler Design Document" class="linkLabel_KsAJ">Content Compiler Design Document</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/content-schema-rollout-decisions"><span title="Content Schema Rollout: Decision Log" class="linkLabel_KsAJ">Content Schema Rollout: Decision Log</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/content-validation-cli-design"><span title="Content Validation CLI Design Document" class="linkLabel_KsAJ">Content Validation CLI Design Document</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Idle-Game-Engine/accessibility-smoke-tests-design"><span title="Shell Integration" class="categoryLinkLabel_ebxo">Shell Integration</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Idle-Game-Engine/coverage/"><span title="Diagnostics &amp; Quality" class="categoryLinkLabel_ebxo">Diagnostics &amp; Quality</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Idle-Game-Engine/implementation-plan"><span title="Operations &amp; Process" class="categoryLinkLabel_ebxo">Operations &amp; Process</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_tfRv"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_hyci"><div class="docItemContainer_tcAC"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_bxbs" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Idle-Game-Engine/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_p1A9"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Content Pipeline</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Content DSL Usage Guidelines</span></li></ul></nav><div class="tocCollapsible_WMbj theme-doc-toc-mobile tocMobile_wI3e"><button type="button" class="clean-btn tocCollapsibleButton_rjEa">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Content DSL Usage Guidelines</h1></header><p>This guide turns the Content DSL specification into a step-by-step workflow for
authors and automation agents. It maps back to
<code>docs/content-dsl-usage-guidelines-design.md</code> and the schema behaviour in
<code>packages/content-schema/src/pack.ts</code>, so every directive stays tied to a
contract.</p>
<blockquote>
<p>Need deeper rationale? Read
<a class="" href="/Idle-Game-Engine/content-dsl-schema-design"><code>docs/content-dsl-schema-design.md</code></a>,
<a class="" href="/Idle-Game-Engine/content-compiler-design"><code>docs/content-compiler-design.md</code></a>, and inspect
the canonical examples in <code>packages/content-sample</code>.</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="pipeline-overview">Pipeline Overview<a href="#pipeline-overview" class="hash-link" aria-label="Direct link to Pipeline Overview" title="Direct link to Pipeline Overview" translate="no">​</a></h2>
<p>Authoring flows follow the same control points that the compiler and CLI
enforce:</p>
<div class="language-mermaid codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-mermaid codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token plain">flowchart LR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Author[&quot;Content author or agent&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Guide[&quot;This usage guide&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Schema[&quot;@idle-engine/content-schema&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Compiler[&quot;pnpm generate\n(content compiler)&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Runtime[&quot;@idle-engine/core\nconsumers&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Author --&gt; Guide --&gt; Schema --&gt; Compiler --&gt; Runtime</span><br></span></code></pre></div></div>
<p>The rest of this document walks the pipeline stage-by-stage with checklists,
examples, and validation hooks.</p>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="pack-scaffolding">Pack Scaffolding<a href="#pack-scaffolding" class="hash-link" aria-label="Direct link to Pack Scaffolding" title="Direct link to Pack Scaffolding" translate="no">​</a></h2>
<p>Start from the structure maintained in <code>packages/content-sample</code>:</p>
<ul>
<li class="">Authoring sources live in <code>content/pack.json</code> (or <code>.json5</code> when comments help).</li>
<li class="">Compiler outputs land in <code>content/compiled/</code> and <code>src/generated/</code> via
<code>pnpm generate</code> and <code>tools/content-schema-cli/src/generate.js</code>.</li>
<li class="">Runtime-facing re-exports live in <code>src/index.ts</code>, mirroring
<code>packages/content-sample/src/index.ts</code>.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="author-checklist">Author checklist<a href="#author-checklist" class="hash-link" aria-label="Direct link to Author checklist" title="Direct link to Author checklist" translate="no">​</a></h3>
<ul class="contains-task-list containsTaskList_InQk">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Create a new workspace package (for example <code>packages/&lt;pack-slug&gt;</code>) with a
<code>content/</code> directory that mirrors the layout in
<code>packages/content-sample/README.md</code>.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Copy the latest <code>pnpm</code> scripts and TypeScript config from the sample pack
so <code>pnpm generate</code>, <code>pnpm lint</code>, and tests stay aligned.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Treat <code>content/compiled/</code> and <code>src/generated/</code> as generated outputs—never
hand-edit them; always re-run <code>pnpm generate</code> after source edits.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Commit the generated artifacts alongside <code>content/pack.json</code> so consumers
never regenerate during install.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="sample-pack-prestige--balance-reference">Sample pack (prestige + balance) reference<a href="#sample-pack-prestige--balance-reference" class="hash-link" aria-label="Direct link to Sample pack (prestige + balance) reference" title="Direct link to Sample pack (prestige + balance) reference" translate="no">​</a></h3>
<p>The reference pack in <code>packages/content-sample/content/pack.json</code> embodies the
expanded economy and prestige layer described in
<a class="" href="/Idle-Game-Engine/sample-pack-balance-validation-design-issue-420"><code>docs/sample-pack-balance-validation-design-issue-420.md</code></a>.
Use it as a template when authoring or validating new packs:</p>
<ul>
<li class=""><strong>Resources</strong>: Energy (starts at 10), Crystal (hard currency, unlocks at
Energy ≥ 25), Alloy (tier 2, unlocks at Crystal ≥ 50), Data Core (tier 2,
unlocks at Alloy ≥ 40), and Prestige Flux (prestige-only, hidden until the
prestige layer unlocks).</li>
<li class=""><strong>Generators</strong>: Reactor (Energy), Crystal Harvester (consumes Energy), Forge
(consumes Energy + Crystal → Alloy, linear cost: base 75, slope 12), Research
Lab (consumes Energy + Alloy → Data Core, exponential cost: base 120,
growth 1.12), and Gate Reactor (consumes Data Core → Prestige Flux; only
visible/unlocked after prestige).</li>
<li class=""><strong>Upgrades</strong>: Multi-tier reactor line (Insulation → Overclock → Phase
Cooling), harvester line with repeatable Quantum Sieve, forge cost/rate tuning
(Heat Shield, Auto-Feed), lab rate boosts (Insight Boost + repeatable
Simulation Stack gated on Prestige Flux), and the prestige-centric Ascension
Surge multiplier.</li>
<li class=""><strong>Prestige layer</strong>: <code>sample-pack.ascension-alpha</code> unlocks at Data Core ≥ 500
and Reactor level ≥ 10, resets base resources/generators/upgrades, and grants
Prestige Flux via a clamped reward formula
(<code>floor((energy + crystal + 2 * data-core) / 750)</code> capped to 1–5000). A
minimum of 1 Prestige Flux is retained after each reset.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="prestige-gating-conditions">Prestige gating conditions<a href="#prestige-gating-conditions" class="hash-link" aria-label="Direct link to Prestige gating conditions" title="Direct link to Prestige gating conditions" translate="no">​</a></h3>
<p><code>prestigeUnlocked</code> is easy to misread as &quot;post-prestige&quot;. In the engine it means
&quot;the prestige layer is currently available/unlocked&quot; (i.e., the reset action is
available right now).</p>
<p>For &quot;post-prestige only&quot; content (&quot;the player has prestiged at least once&quot;),
use <code>prestigeCompleted</code>, which evaluates against the <code>{layerId}-prestige-count</code>
resource internally (so you don&#x27;t need magic-string resource IDs).</p>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;prestigeCompleted&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;prestigeLayerId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sample-pack.ascension-alpha&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>If you need a higher threshold (for example &quot;after 5 prestiges&quot;), use
<code>prestigeCountThreshold</code>:</p>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;prestigeCountThreshold&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;prestigeLayerId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sample-pack.ascension-alpha&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;comparator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gte&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;count&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="naming-conventions">Naming Conventions<a href="#naming-conventions" class="hash-link" aria-label="Direct link to Naming Conventions" title="Direct link to Naming Conventions" translate="no">​</a></h2>
<p>The schema enforces naming through <code>packSlugSchema</code>, <code>contentIdSchema</code>, and
related validators (see <code>packages/content-schema/src/pack.ts</code>). Keep these rules
in mind before you run validation:</p>
<ul>
<li class=""><code>metadata.id</code>: lowercase slug (<code>a-z0-9-</code>), ≤32 chars, and stable after publish
(<code>docs/content-dsl-schema-design.md</code> §5.5).</li>
<li class="">Content IDs: reuse the slug casing from <code>contentIdSchema</code> and prefix with the
pack slug to avoid collisions (<code>packages/content-schema/src/pack.ts</code>).</li>
<li class=""><code>metadata.title</code> / <code>summary</code>: provide <code>default</code> copy and locale variants; keep
<code>summary</code> ≤512 chars (<code>docs/content-dsl-schema-design.md</code> §5.5).</li>
<li class=""><code>metadata.tags</code>: slug list (≤24 chars) with no spaces or uppercase characters
(<code>docs/content-dsl-schema-design.md</code> §5.5).</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="naming-checklist">Naming checklist<a href="#naming-checklist" class="hash-link" aria-label="Direct link to Naming checklist" title="Direct link to Naming checklist" translate="no">​</a></h3>
<ul class="contains-task-list containsTaskList_InQk">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Pick a pack slug that matches the directory name and stays unique across
<code>packages/*</code> (collisions surface via <code>ContentSchemaOptions.knownPacks</code> in
<code>packages/content-schema/src/pack.ts</code>).</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Reserve a namespace prefix for content IDs before authoring modules and
apply it consistently.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Populate localized titles and summaries while setting <code>defaultLocale</code> and
<code>supportedLocales</code> to avoid churn later.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Document non-obvious tags or visibility flags in the package README so
reviewers capture intent.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="declaring-dependencies">Declaring Dependencies<a href="#declaring-dependencies" class="hash-link" aria-label="Direct link to Declaring Dependencies" title="Direct link to Declaring Dependencies" translate="no">​</a></h2>
<p>Model relationships through <code>metadata.dependencies</code>:</p>
<ul>
<li class=""><code>requires</code>: hard dependencies that must be installed and activated first.</li>
<li class=""><code>optional</code>: soft integrations flagged as warnings when missing (requires
<code>ContentSchemaOptions.activePackIds</code> during validation).</li>
<li class=""><code>conflicts</code>: mutually exclusive packs that should never load together.</li>
<li class=""><code>provides</code>: capability slugs that downstream tooling can query.</li>
</ul>
<p>Normalization deduplicates entries, sorts them, and blocks self-references (see
<code>docs/content-dsl-schema-design.md</code> §5.5 and
<code>packages/content-schema/src/modules/dependencies.ts</code>).</p>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="dependency-checklist">Dependency checklist<a href="#dependency-checklist" class="hash-link" aria-label="Direct link to Dependency checklist" title="Direct link to Dependency checklist" translate="no">​</a></h3>
<ul class="contains-task-list containsTaskList_InQk">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->List every runtime prerequisite under <code>metadata.dependencies.requires</code>
with a SemVer range that matches the dependency’s <code>metadata.version</code>.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Mark optional integrations only when the pack functions without them and
add contextual <code>message</code> fields for conflicts so tooling can explain why.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Update team installation manifests (if any) whenever you add a new hard
dependency so validation inputs stay aligned.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Re-run <code>pnpm generate</code> and confirm the CLI logs omit
<code>content_pack.dependency_cycle</code> warnings.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="dependency-compatibility-matrix">Dependency compatibility matrix<a href="#dependency-compatibility-matrix" class="hash-link" aria-label="Direct link to Dependency compatibility matrix" title="Direct link to Dependency compatibility matrix" translate="no">​</a></h3>
<table><thead><tr><th>Policy</th><th>Applies When</th><th>Enforcement</th><th>References</th></tr></thead><tbody><tr><td><code>requires</code></td><td>Pack cannot function without another pack</td><td>Validation fails on missing packs; compiler blocks compilation</td><td><code>docs/content-dsl-schema-design.md</code> (§5.5), <code>docs/content-compiler-design.md</code> (§5.6)</td></tr><tr><td><code>optional</code></td><td>Integration enhances behaviour but is not mandatory</td><td>Emits warnings when absent if <code>ContentSchemaOptions.activePackIds</code> supplies the install graph</td><td><code>docs/content-dsl-schema-design.md</code> (§5.5), <code>packages/content-schema/src/modules/dependencies.ts</code></td></tr><tr><td><code>conflicts</code></td><td>Packs must never load together</td><td>Validation errors guard against self-dependency; compiler logs failure with the conflicting slug</td><td><code>docs/content-dsl-schema-design.md</code> (§5.5), <code>docs/content-compiler-design.md</code> (§5.6)</td></tr><tr><td><code>provides</code></td><td>Pack exposes capabilities for discovery tooling</td><td>Normalisation deduplicates entries; workspace summary records capability digests</td><td><code>docs/content-dsl-schema-design.md</code> (§5.5), <code>docs/content-compiler-design.md</code> (§5.4)</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="versioning--release-cadence">Versioning &amp; Release Cadence<a href="#versioning--release-cadence" class="hash-link" aria-label="Direct link to Versioning &amp; Release Cadence" title="Direct link to Versioning &amp; Release Cadence" translate="no">​</a></h2>
<p>Content packs carry both a pack version and a runtime compatibility range:</p>
<ul>
<li class=""><code>metadata.version</code> must follow <a href="https://semver.org/" target="_blank" rel="noopener noreferrer" class="">Semantic Versioning</a> and
increments whenever pack behaviour or data changes.</li>
<li class=""><code>metadata.engine</code> expresses supported engine versions; validation uses
<code>semver.satisfies()</code> and the feature gates in
<code>packages/content-schema/src/runtime-compat.ts</code>.</li>
<li class="">Compiler summaries (<code>src/generated/*summary*</code> in the sample pack) surface the
slug, version, and warning count at import time
(<code>packages/content-sample/src/index.ts:23-44</code>).</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="versioning-checklist">Versioning checklist<a href="#versioning-checklist" class="hash-link" aria-label="Direct link to Versioning checklist" title="Direct link to Versioning checklist" translate="no">​</a></h3>
<ul class="contains-task-list containsTaskList_InQk">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Bump <code>metadata.version</code> for every committed change that alters gameplay,
data tables, or compatibility metadata.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Align <code>metadata.engine</code> with the runtime tested locally (for example
<code>&gt;=0.4.0 &lt;0.6.0</code>); widen ranges only after validating against newer runtimes.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Capture notable changes in your package README or release notes so other
authors can plan migrations.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Inspect the generated summary module to confirm the digest and artifact
hash changed when expected; unexpected stability often means missing source
diffs.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="compatibility-triage">Compatibility Triage<a href="#compatibility-triage" class="hash-link" aria-label="Direct link to Compatibility Triage" title="Direct link to Compatibility Triage" translate="no">​</a></h2>
<p>Feature gates keep packs aligned with runtime capabilities. The current baseline
lives in <code>packages/content-schema/src/runtime-compat.ts</code>:</p>
<table><thead><tr><th>Module</th><th>Introduced in</th><th>Documentation</th></tr></thead><tbody><tr><td><code>automations</code></td><td><code>0.2.0</code></td><td><code>docs/idle-engine-design.md</code> (§6.2)</td></tr><tr><td><code>transforms</code></td><td><code>0.3.0</code></td><td><code>docs/idle-engine-design.md</code> (§6.2)</td></tr><tr><td><code>runtimeEvents</code></td><td><code>0.3.0</code></td><td><code>docs/runtime-event-pubsub-design.md</code></td></tr><tr><td><code>prestigeLayers</code></td><td><code>0.4.0</code></td><td><code>docs/idle-engine-design.md</code> (§6.2)</td></tr><tr><td><code>guildPerks</code></td><td><code>0.5.0</code></td><td><code>docs/idle-engine-design.md</code> (§6.2)</td></tr></tbody></table>
<p>When <code>metadata.engine</code> omits or predates the required version, validation pushes
structured <code>FeatureViolation</code> errors or warnings (see
<code>resolveFeatureViolations</code> in <code>packages/content-schema/src/runtime-compat.ts</code>).</p>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="compatibility-checklist">Compatibility checklist<a href="#compatibility-checklist" class="hash-link" aria-label="Direct link to Compatibility checklist" title="Direct link to Compatibility checklist" translate="no">​</a></h3>
<ul class="contains-task-list containsTaskList_InQk">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Set <code>metadata.engine</code> before authoring gated modules so compatibility
errors appear during <code>pnpm generate</code>.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Treat feature-gate warnings (<code>severity: warning</code>) as TODOs—either upgrade
the runtime target or trim gated modules before shipping.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Include CLI logs from <code>pnpm generate</code> in review artifacts whenever
compatibility adjustments are part of the change.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->If runtime contracts evolve, update this table and the pack metadata in
the same pull request to avoid drift.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="migration-matrix">Migration matrix<a href="#migration-matrix" class="hash-link" aria-label="Direct link to Migration matrix" title="Direct link to Migration matrix" translate="no">​</a></h3>
<p>Use this matrix to plan schema evolution and pack migrations in lockstep with
the compiler and runtime guardrails described in the design docs.</p>
<table><thead><tr><th>Scenario</th><th>Expected action</th><th>References</th></tr></thead><tbody><tr><td>Schema fields added or behaviour changes</td><td>Run <code>pnpm generate</code> and revalidate packs; document the change in package README and update <code>metadata.version</code> to track the migration</td><td><code>docs/content-dsl-schema-design.md</code> (§1, §5.5), <code>docs/content-compiler-design.md</code> (§5.5)</td></tr><tr><td>Dependency graph updates (new <code>requires</code> / <code>optional</code> edges)</td><td>Refresh installation manifests, rerun validation with updated <code>knownPacks</code>, and capture any new warnings in CLI logs</td><td><code>docs/content-dsl-schema-design.md</code> (§5.5), <code>docs/content-compiler-design.md</code> (§5.6)</td></tr><tr><td>Runtime feature gates evolve</td><td>Synchronise this guide’s tables with <code>packages/content-schema/src/runtime-compat.ts</code>, adjust <code>metadata.engine</code>, and rerun schema tests to confirm compatibility</td><td><code>packages/content-schema/src/runtime-compat.ts</code>, <code>docs/content-dsl-schema-design.md</code> (§5.5)</td></tr><tr><td>Compiler format version or digest rules change</td><td>Rebuild generated artifacts, inspect workspace summary digests, and note migration requirements in release notes</td><td><code>docs/content-compiler-design.md</code> (§5.4-§5.5), <code>docs/content-dsl-schema-design.md</code> (§5.5)</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="transform-patterns--cycle-detection">Transform Patterns &amp; Cycle Detection<a href="#transform-patterns--cycle-detection" class="hash-link" aria-label="Direct link to Transform Patterns &amp; Cycle Detection" title="Direct link to Transform Patterns &amp; Cycle Detection" translate="no">​</a></h2>
<p>The content schema validates transform chains and unlock conditions for cycles
at <strong>build time</strong> (during <code>pnpm generate</code>) to prevent content packs that would
cause runaway production loops or deadlocked progression at runtime.
Understanding these validation rules helps authors design safe and functional
transform networks.</p>
<p><strong>Important</strong>: Cycle detection is a <strong>build-time safety check</strong> that runs
during content pack validation. Content packs containing cycles will be
rejected before they can be loaded into the game engine, ensuring problematic
configurations never reach runtime.</p>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="what-constitutes-a-cycle">What Constitutes a Cycle<a href="#what-constitutes-a-cycle" class="hash-link" aria-label="Direct link to What Constitutes a Cycle" title="Direct link to What Constitutes a Cycle" translate="no">​</a></h3>
<p>A <strong>transform cycle</strong> exists when transforms form a closed loop through their
resource dependencies:</p>
<ul>
<li class=""><strong>Direct cycle (A → B → A)</strong>: Transform A produces a resource that Transform B
consumes, and Transform B produces a resource that Transform A consumes.</li>
<li class=""><strong>Indirect cycle (A → B → C → A)</strong>: A chain of transforms that eventually
feeds back to the starting transform through intermediate resources.</li>
<li class=""><strong>Multi-resource cycle</strong>: Transforms with multiple inputs/outputs that create
circular dependencies (for example Transform A consumes X + Y and produces Z,
while Transforms B and C consume Z to produce X and Y respectively).</li>
</ul>
<p>An <strong>unlock condition cycle</strong> exists when entities have circular unlock
dependencies:</p>
<ul>
<li class="">Resource A unlocks when Resource B ≥ threshold</li>
<li class="">Resource B unlocks when Resource A ≥ threshold</li>
<li class="">Similar patterns exist for generators, upgrades, achievements, and other
entities with <code>unlockCondition</code> fields</li>
</ul>
<p>Both types of cycles are <strong>detected automatically</strong> during validation and will
cause <code>pnpm generate</code> to fail with detailed error messages showing the cycle
path.</p>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="safe-transform-patterns">Safe Transform Patterns<a href="#safe-transform-patterns" class="hash-link" aria-label="Direct link to Safe Transform Patterns" title="Direct link to Safe Transform Patterns" translate="no">​</a></h3>
<p>Design transforms using these patterns to avoid cycles:</p>
<h4 class="anchor anchorTargetStickyNavbar_EdDC" id="-linear-transformation-chains">✅ Linear transformation chains<a href="#-linear-transformation-chains" class="hash-link" aria-label="Direct link to ✅ Linear transformation chains" title="Direct link to ✅ Linear transformation chains" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;transforms&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;raw-to-refined&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;inputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;raw-ore&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;outputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;refined-metal&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;refined-to-alloy&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;inputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;refined-metal&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;outputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;alloy&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>This creates a one-way progression: raw-ore → refined-metal → alloy.</p>
<h4 class="anchor anchorTargetStickyNavbar_EdDC" id="-resource-sinks-consumables">✅ Resource sinks (consumables)<a href="#-resource-sinks-consumables" class="hash-link" aria-label="Direct link to ✅ Resource sinks (consumables)" title="Direct link to ✅ Resource sinks (consumables)" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;transforms&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;craft-boost&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;inputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mana&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;essence&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;outputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;boost-item&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Resources are consumed but not regenerated through transforms, creating a
one-way flow.</p>
<h4 class="anchor anchorTargetStickyNavbar_EdDC" id="-convergent-production-trees">✅ Convergent production trees<a href="#-convergent-production-trees" class="hash-link" aria-label="Direct link to ✅ Convergent production trees" title="Direct link to ✅ Convergent production trees" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;transforms&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;wood-to-planks&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;inputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;wood&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;outputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;planks&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;stone-to-bricks&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;inputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;stone&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;outputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bricks&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;build-house&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;inputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;planks&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bricks&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;outputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;house&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Multiple resource streams converge but never loop back to their sources.</p>
<h4 class="anchor anchorTargetStickyNavbar_EdDC" id="-circular-transform-chains">❌ Circular transform chains<a href="#-circular-transform-chains" class="hash-link" aria-label="Direct link to ❌ Circular transform chains" title="Direct link to ❌ Circular transform chains" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;transforms&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;water-to-steam&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;inputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;water&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;outputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;steam&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;steam-to-water&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;inputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;steam&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;outputs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;water&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Validation error</strong>: <code>Transform cycle detected: water-to-steam → steam-to-water → water-to-steam</code></p>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="safe-unlock-condition-patterns">Safe Unlock Condition Patterns<a href="#safe-unlock-condition-patterns" class="hash-link" aria-label="Direct link to Safe Unlock Condition Patterns" title="Direct link to Safe Unlock Condition Patterns" translate="no">​</a></h3>
<p>Design unlock conditions that form directed acyclic graphs (DAGs):</p>
<h4 class="anchor anchorTargetStickyNavbar_EdDC" id="-self-threshold-unlock-after-first-production">✅ Self-threshold (unlock after first production)<a href="#-self-threshold-unlock-after-first-production" class="hash-link" aria-label="Direct link to ✅ Self-threshold (unlock after first production)" title="Direct link to ✅ Self-threshold (unlock after first production)" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;resources&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ore&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;visible&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;unlocked&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;unlockCondition&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resourceThreshold&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ore&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;comparator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gte&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;visibilityCondition&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resourceThreshold&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ore&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;comparator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gte&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>This pattern is supported for resources and does not introduce an unlock-cycle edge. Ensure the resource can still be produced (for example by a generator or transform) while hidden/locked.</p>
<h4 class="anchor anchorTargetStickyNavbar_EdDC" id="-progressive-unlocks">✅ Progressive unlocks<a href="#-progressive-unlocks" class="hash-link" aria-label="Direct link to ✅ Progressive unlocks" title="Direct link to ✅ Progressive unlocks" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;resources&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tier-1-resource&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tier-2-resource&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;unlockCondition&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resourceThreshold&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tier-1-resource&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;comparator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gte&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tier-3-resource&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;unlockCondition&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resourceThreshold&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tier-2-resource&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;comparator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gte&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Clear one-way progression through tiers.</p>
<h4 class="anchor anchorTargetStickyNavbar_EdDC" id="-circular-unlock-dependencies">❌ Circular unlock dependencies<a href="#-circular-unlock-dependencies" class="hash-link" aria-label="Direct link to ❌ Circular unlock dependencies" title="Direct link to ❌ Circular unlock dependencies" translate="no">​</a></h4>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;resources&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resource-a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;unlockCondition&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resourceThreshold&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resource-b&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;comparator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gte&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resource-b&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;unlockCondition&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resourceThreshold&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;resourceId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;resource-a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;comparator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gte&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;amount&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;constant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Validation error</strong>: <code>Unlock condition cycle detected: resource-a → resource-b → resource-a</code></p>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="transform-cycle-detection-checklist">Transform Cycle Detection Checklist<a href="#transform-cycle-detection-checklist" class="hash-link" aria-label="Direct link to Transform Cycle Detection Checklist" title="Direct link to Transform Cycle Detection Checklist" translate="no">​</a></h3>
<ul class="contains-task-list containsTaskList_InQk">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Map out resource flow graphs on paper before implementing complex
transform networks</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Ensure all transform chains have clear &quot;source&quot; resources (from generators
or initial grants) and &quot;sink&quot; resources (consumed but not regenerated)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Avoid bidirectional transforms between the same pair of resources unless
mediated by additional resources or conditions</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Run <code>pnpm generate</code> after adding transforms and address any cycle
detection errors immediately</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test unlock progressions manually to confirm resources become available in
the expected order</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="migrating-existing-content-with-cycles">Migrating Existing Content with Cycles<a href="#migrating-existing-content-with-cycles" class="hash-link" aria-label="Direct link to Migrating Existing Content with Cycles" title="Direct link to Migrating Existing Content with Cycles" translate="no">​</a></h3>
<p>If <code>pnpm generate</code> fails with cycle detection errors after upgrading:</p>
<ol>
<li class="">
<p><strong>Identify the cycle</strong>: Read the error message carefully. It shows the
complete cycle path (e.g., <code>transform-a → transform-b → transform-a</code>).</p>
</li>
<li class="">
<p><strong>Understand the dependencies</strong>: Map out which resources each transform
consumes and produces. Draw a diagram if helpful.</p>
</li>
<li class="">
<p><strong>Break the cycle</strong> using one of these strategies:</p>
<ul>
<li class=""><strong>Add source resources</strong>: Introduce generators or initial grants to provide
resources from outside the cycle</li>
<li class=""><strong>Convert to linear chain</strong>: Redesign bidirectional transforms as one-way
progression (A → B → C instead of A ⇄ B)</li>
<li class=""><strong>Add intermediate resources</strong>: Insert new resources in the chain to create
a clear flow direction</li>
<li class=""><strong>Remove problematic transforms</strong>: If a transform creates an unwanted loop,
consider removing it or replacing it with a different game mechanic</li>
</ul>
</li>
<li class="">
<p><strong>For unlock condition cycles</strong>: Similar approach applies. If Resource A
requires Resource B to unlock, and Resource B requires Resource A, redesign
the unlock progression to be hierarchical (introduce a Resource C that both
depend on, or remove one unlock condition).</p>
</li>
<li class="">
<p><strong>Re-run validation</strong>: After making changes, run <code>pnpm generate</code> again to
verify all cycles are resolved.</p>
</li>
</ol>
<p><strong>Implementation details</strong>: Cycle detection is implemented in
<code>packages/content-schema/src/pack.ts</code> via <code>validateTransformCycles()</code> and
<code>validateUnlockConditionCycles()</code> functions, using depth-first search with path
tracking to provide detailed error messages.</p>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="safety-guardrails">Safety Guardrails<a href="#safety-guardrails" class="hash-link" aria-label="Direct link to Safety Guardrails" title="Direct link to Safety Guardrails" translate="no">​</a></h3>
<p>In addition to cycle detection, transforms include runtime safety limits defined
in the transform schema:</p>
<ul>
<li class=""><code>maxRunsPerTick</code>: Caps executions per simulation step (default and max values
enforced)</li>
<li class=""><code>maxOutstandingBatches</code>: Limits queued batch transforms (prevents unbounded
queue growth)</li>
</ul>
<p>These guards complement cycle detection by preventing runaway transforms even in
edge cases. See <code>packages/content-schema/src/modules/transforms.ts</code> for
enforcement details.</p>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="reference-examples--tooling">Reference Examples &amp; Tooling<a href="#reference-examples--tooling" class="hash-link" aria-label="Direct link to Reference Examples &amp; Tooling" title="Direct link to Reference Examples &amp; Tooling" translate="no">​</a></h2>
<p>Use the sample pack as a living reference:</p>
<ul>
<li class=""><code>packages/content-sample/content/pack.json</code> illustrates metadata layout,
dependency declarations, and module IDs.</li>
<li class=""><code>packages/content-sample/src/generated/@idle-engine/sample-pack.generated.ts</code> shows the
compiler outputs that should accompany every content change.</li>
<li class=""><code>packages/content-sample/src/index.ts</code> demonstrates import-time guards that
throw when compiler warnings slip through.</li>
</ul>
<p>The CLI in <code>tools/content-schema-cli/src/generate.js</code> orchestrates validation,
manifest regeneration, and compilation. It emits structured
<code>content_pack.*</code> log lines—treat any new warning or error as a release blocker.</p>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="balance-validation-defaults--commands">Balance validation defaults &amp; commands<a href="#balance-validation-defaults--commands" class="hash-link" aria-label="Direct link to Balance validation defaults &amp; commands" title="Direct link to Balance validation defaults &amp; commands" translate="no">​</a></h2>
<ul>
<li class=""><code>pnpm generate</code> (or <code>pnpm generate --check</code>) runs schema + balance validation
and logs <code>content_pack.balance_warning</code> / <code>content_pack.balance_failed</code> when
invariants break; balance errors fail the run.</li>
<li class="">Defaults for <code>ContentSchemaOptions.balance</code>: enabled, <code>sampleSize</code> = 100
purchase indices (levels 0–100), <code>maxGrowth</code> = 20× between adjacent
purchases, <code>warnOnly</code> = false. Use <code>warnOnly</code> only for local exploration;
treat any warning as a regression before shipping.</li>
<li class="">Checks cover non-negative rates, non-decreasing costs for generators/upgrades
(including repeatables) and prestige rewards, growth-cap enforcement, and
unlock ordering so consumed resources unlock no later than their dependents.</li>
<li class="">Validation is deterministic; property suites that guard balance and formulas
are seeded (e.g., fast-check seeds in the 422000 range) to keep
<code>vitest-llm-reporter</code> output stable. Keep seeds unchanged unless debugging.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="verification-runbook">Verification Runbook<a href="#verification-runbook" class="hash-link" aria-label="Direct link to Verification Runbook" title="Direct link to Verification Runbook" translate="no">​</a></h2>
<p>Run these commands before requesting review:</p>
<div class="language-bash codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-bash codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token plain">pnpm generate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pnpm exec markdownlint docs/content-dsl-usage-guidelines.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pnpm lint --filter @idle-engine/content-schema</span><br></span></code></pre></div></div>
<p>If you modify shell UI flows or runtime contracts in parallel, extend the
checklist with the relevant test suites (for example <code>pnpm test --filter core</code>).</p>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="see-also">See Also<a href="#see-also" class="hash-link" aria-label="Direct link to See Also" title="Direct link to See Also" translate="no">​</a></h2>
<ul>
<li class=""><code>docs/content-dsl-usage-guidelines-design.md</code> — rationale, scope, and
acceptance criteria for this guide.</li>
<li class=""><code>docs/content-dsl-schema-design.md</code> — field-level reference for the DSL.</li>
<li class=""><code>docs/content-compiler-design.md</code> — details on generated artifacts and
summary modules.</li>
<li class=""><code>packages/content-sample/README.md</code> — regeneration workflow and runtime
manifest integration.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="formula-invariants--cost-semantics">Formula Invariants &amp; Cost Semantics<a href="#formula-invariants--cost-semantics" class="hash-link" aria-label="Direct link to Formula Invariants &amp; Cost Semantics" title="Direct link to Formula Invariants &amp; Cost Semantics" translate="no">​</a></h2>
<p>Content formulas must evaluate to finite, non-negative numbers across deterministic contexts. The schema and CLI suites enforce this via property-based tests (see <code>packages/content-schema/src/base/formulas.property.test.ts</code> and <code>tools/content-schema-cli/src/__tests__/validation.property.test.ts</code>). Authors should follow these rules when declaring rates and costs:</p>
<ul>
<li class="">Generator rates and consumption values: use <code>NumericFormula</code> that remain ≥ 0. Prefer clamping via <code>max(0, …)</code> or the <code>abs</code>/<code>sqrt</code> helpers when composing expressions.</li>
<li class="">Purchase cost calculation: cost = <code>baseCost × evaluate(costCurve, level)</code> where <code>level</code> is the current purchase index (owned count). For upgrades, if <code>repeatable.costCurve</code> is present, multiply that in as well. See <code>docs/progression-coordinator-design.md</code> §6.2.7.</li>
<li class="">Avoid NaN/Infinity: inputs are validated (<code>finiteNumberSchema</code>), and formulas with impossible evaluations are rejected.</li>
<li class="">Piecewise: ensure strictly increasing <code>untilLevel</code> thresholds and a final catch-all segment.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="exponential-cost-curve-formula">Exponential Cost Curve Formula<a href="#exponential-cost-curve-formula" class="hash-link" aria-label="Direct link to Exponential Cost Curve Formula" title="Direct link to Exponential Cost Curve Formula" translate="no">​</a></h3>
<p>The exponential formula evaluates as: <code>base × growth^level + offset</code></p>
<p>When used as a <code>costCurve</code>, this combines with <code>baseCost</code> to produce:</p>
<div class="language-text codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-text codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token plain">totalCost = baseCost × (base × growth^level + offset)</span><br></span></code></pre></div></div>
<p><strong>Important</strong>: The <code>base</code> parameter defaults to <code>1</code>. For the standard idle game cost curve where <code>baseCost</code> alone represents the level-0 cost, simply omit <code>base</code>:</p>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;baseCost&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">120</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;costCurve&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;exponential&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;growth&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.15</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// At level 0: 120 × 1 × 1.15^0 = 120</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// At level 1: 120 × 1 × 1.15^1 = 138</span><br></span></code></pre></div></div>
<p><strong>Common mistake</strong>: Setting <code>base</code> equal to <code>baseCost</code> doubles the multiplier:</p>
<div class="language-json codeBlockContainer_b5Q5 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yI8N"><pre tabindex="0" class="prism-code language-json codeBlock_DEW9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_eNcQ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;baseCost&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;costCurve&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;exponential&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;base&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;growth&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.15</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// At level 0: 50 × 50 × 1.15^0 = 2500 (not 50!)</span><br></span></code></pre></div></div>
<p>Use a non-default <code>base</code> only when you need an additional scaling factor independent of <code>baseCost</code>.</p>
<p>Automation authoring guidance:</p>
<ul>
<li class=""><code>resourceCost.rate</code> represents units per second; keep bounds realistic for your economy to avoid runaway drains.</li>
<li class=""><code>cooldown</code> must be finite (milliseconds). Prefer ≥ 0. Extremely small values can lead to noisy behavior during testing.</li>
<li class="">Keep <code>generate --check</code> warning-free for shipping packs. The sample pack is treated as the reference baseline.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="snapshot-determinism-progression-views">Snapshot Determinism (Progression Views)<a href="#snapshot-determinism-progression-views" class="hash-link" aria-label="Direct link to Snapshot Determinism (Progression Views)" title="Direct link to Snapshot Determinism (Progression Views)" translate="no">​</a></h2>
<p>The progression view (<code>buildProgressionSnapshot</code>) must be deterministic so that UI/state diffs remain stable when content changes. Tests in <code>@idle-engine/content-sample</code> generate a golden snapshot for the sample pack’s generators and upgrades and compare it during CI.</p>
<ul>
<li class="">Fields covered: generator <code>costs</code>, <code>produces</code>/<code>consumes</code> rates, visibility/unlock flags, and upgrade <code>status</code> + <code>costs</code>.</li>
<li class="">Authors changing content should expect golden updates when business logic changes intentionally; otherwise treat diffs as regressions.</li>
</ul>
<p>References:</p>
<ul>
<li class=""><code>docs/build-resource-generator-upgrade-ui-components-design.md</code> (cost examples)</li>
<li class=""><code>docs/content-dsl-schema-design.md</code> (schema contracts)</li>
<li class=""><code>packages/core/src/progression.ts</code> (snapshot construction)</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_QKxP"><a href="https://github.com/hansjm10/Idle-Game-Engine/edit/main/docs/../../docs/content-dsl-usage-guidelines.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_wOWh" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_Basj"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Idle-Game-Engine/content-dsl-schema-design"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Content DSL Schema Design</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Idle-Game-Engine/content-compiler-design"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Content Compiler Design Document</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_AUZ0 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pipeline-overview" class="table-of-contents__link toc-highlight">Pipeline Overview</a></li><li><a href="#pack-scaffolding" class="table-of-contents__link toc-highlight">Pack Scaffolding</a><ul><li><a href="#author-checklist" class="table-of-contents__link toc-highlight">Author checklist</a></li><li><a href="#sample-pack-prestige--balance-reference" class="table-of-contents__link toc-highlight">Sample pack (prestige + balance) reference</a></li><li><a href="#prestige-gating-conditions" class="table-of-contents__link toc-highlight">Prestige gating conditions</a></li></ul></li><li><a href="#naming-conventions" class="table-of-contents__link toc-highlight">Naming Conventions</a><ul><li><a href="#naming-checklist" class="table-of-contents__link toc-highlight">Naming checklist</a></li></ul></li><li><a href="#declaring-dependencies" class="table-of-contents__link toc-highlight">Declaring Dependencies</a><ul><li><a href="#dependency-checklist" class="table-of-contents__link toc-highlight">Dependency checklist</a></li><li><a href="#dependency-compatibility-matrix" class="table-of-contents__link toc-highlight">Dependency compatibility matrix</a></li></ul></li><li><a href="#versioning--release-cadence" class="table-of-contents__link toc-highlight">Versioning &amp; Release Cadence</a><ul><li><a href="#versioning-checklist" class="table-of-contents__link toc-highlight">Versioning checklist</a></li></ul></li><li><a href="#compatibility-triage" class="table-of-contents__link toc-highlight">Compatibility Triage</a><ul><li><a href="#compatibility-checklist" class="table-of-contents__link toc-highlight">Compatibility checklist</a></li><li><a href="#migration-matrix" class="table-of-contents__link toc-highlight">Migration matrix</a></li></ul></li><li><a href="#transform-patterns--cycle-detection" class="table-of-contents__link toc-highlight">Transform Patterns &amp; Cycle Detection</a><ul><li><a href="#what-constitutes-a-cycle" class="table-of-contents__link toc-highlight">What Constitutes a Cycle</a></li><li><a href="#safe-transform-patterns" class="table-of-contents__link toc-highlight">Safe Transform Patterns</a></li><li><a href="#safe-unlock-condition-patterns" class="table-of-contents__link toc-highlight">Safe Unlock Condition Patterns</a></li><li><a href="#transform-cycle-detection-checklist" class="table-of-contents__link toc-highlight">Transform Cycle Detection Checklist</a></li><li><a href="#migrating-existing-content-with-cycles" class="table-of-contents__link toc-highlight">Migrating Existing Content with Cycles</a></li><li><a href="#safety-guardrails" class="table-of-contents__link toc-highlight">Safety Guardrails</a></li></ul></li><li><a href="#reference-examples--tooling" class="table-of-contents__link toc-highlight">Reference Examples &amp; Tooling</a></li><li><a href="#balance-validation-defaults--commands" class="table-of-contents__link toc-highlight">Balance validation defaults &amp; commands</a></li><li><a href="#verification-runbook" class="table-of-contents__link toc-highlight">Verification Runbook</a></li><li><a href="#see-also" class="table-of-contents__link toc-highlight">See Also</a></li><li><a href="#formula-invariants--cost-semantics" class="table-of-contents__link toc-highlight">Formula Invariants &amp; Cost Semantics</a><ul><li><a href="#exponential-cost-curve-formula" class="table-of-contents__link toc-highlight">Exponential Cost Curve Formula</a></li></ul></li><li><a href="#snapshot-determinism-progression-views" class="table-of-contents__link toc-highlight">Snapshot Determinism (Progression Views)</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Idle-Game-Engine/">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/Idle-Game-Engine/contributor-handbook">Contributor Handbook</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hansjm10/Idle-Game-Engine/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issue Tracker<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_cYRj"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hansjm10/Idle-Game-Engine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_cYRj"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Idle Engine.</div></div></div></footer></div>
</body>
</html>