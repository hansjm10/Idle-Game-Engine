"use strict";(globalThis.webpackChunk_idle_engine_docs=globalThis.webpackChunk_idle_engine_docs||[]).push([[6718],{879:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"issue-813-design","title":"renderer-webgpu: validate schema versions and cap untrusted inputs (Issue 813)","description":"Document Control","source":"@site/../../docs/issue-813-design.md","sourceDirName":".","slug":"/issue-813-design","permalink":"/Idle-Game-Engine/issue-813-design","draft":false,"unlisted":false,"editUrl":"https://github.com/hansjm10/Idle-Game-Engine/edit/main/docs/../../docs/issue-813-design.md","tags":[],"version":"current","sidebarPosition":99,"frontMatter":{"title":"renderer-webgpu: validate schema versions and cap untrusted inputs (Issue 813)","sidebar_position":99}}');var i=s(5270),d=s(7678);const l={title:"renderer-webgpu: validate schema versions and cap untrusted inputs (Issue 813)",sidebar_position:99},t="renderer-webgpu: validate schema versions and cap untrusted inputs (Issue 813)",c={},o=[{value:"Document Control",id:"document-control",level:2},{value:"1. Summary",id:"1-summary",level:2},{value:"2. Context &amp; Problem Statement",id:"2-context--problem-statement",level:2},{value:"3. Goals &amp; Non-Goals",id:"3-goals--non-goals",level:2},{value:"4. Stakeholders, Agents &amp; Impacted Surfaces",id:"4-stakeholders-agents--impacted-surfaces",level:2},{value:"5. Current State",id:"5-current-state",level:2},{value:"6. Proposed Solution",id:"6-proposed-solution",level:2},{value:"6.1 Architecture Overview",id:"61-architecture-overview",level:3},{value:"6.2 Detailed Design",id:"62-detailed-design",level:3},{value:"6.3 Operational Considerations",id:"63-operational-considerations",level:3},{value:"7. Work Breakdown &amp; Delivery Plan",id:"7-work-breakdown--delivery-plan",level:2},{value:"7.1 Issue Map",id:"71-issue-map",level:3},{value:"7.2 Milestones",id:"72-milestones",level:3},{value:"7.3 Coordination Notes",id:"73-coordination-notes",level:3},{value:"8. Agent Guidance &amp; Guardrails",id:"8-agent-guidance--guardrails",level:2},{value:"9. Alternatives Considered",id:"9-alternatives-considered",level:2},{value:"10. Testing &amp; Validation Plan",id:"10-testing--validation-plan",level:2},{value:"11. Risks &amp; Mitigations",id:"11-risks--mitigations",level:2},{value:"12. Rollout Plan",id:"12-rollout-plan",level:2},{value:"13. Open Questions",id:"13-open-questions",level:2},{value:"14. Follow-Up Work",id:"14-follow-up-work",level:2},{value:"15. References",id:"15-references",level:2},{value:"Appendix A \u2014 Glossary",id:"appendix-a--glossary",level:2},{value:"Appendix B \u2014 Change Log",id:"appendix-b--change-log",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"renderer-webgpu-validate-schema-versions-and-cap-untrusted-inputs-issue-813",children:"renderer-webgpu: validate schema versions and cap untrusted inputs (Issue 813)"})}),"\n",(0,i.jsx)(n.h2,{id:"document-control",children:"Document Control"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Title"}),": Validate renderer contract schema versions and cap untrusted inputs in ",(0,i.jsx)(n.code,{children:"@idle-engine/renderer-webgpu"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Authors"}),": Codex (AI)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reviewers"}),": @hansjm10"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Status"}),": Draft"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Last Updated"}),": 2026-01-24"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Related Issues"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/hansjm10/Idle-Game-Engine/issues/813",children:"https://github.com/hansjm10/Idle-Game-Engine/issues/813"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Execution Mode"}),": AI-led"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"1-summary",children:"1. Summary"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@idle-engine/renderer-webgpu"})," currently accepts untrusted ",(0,i.jsx)(n.code,{children:"AssetManifest"})," and ",(0,i.jsx)(n.code,{children:"RenderCommandBuffer"})," inputs without validating ",(0,i.jsx)(n.code,{children:"schemaVersion"})," or enforcing basic resource limits (asset count, draws per frame, text length). This creates avoidable failure modes: silent schema mismatches can produce undefined behavior, and oversized inputs can trigger excessive allocations or per-frame work that freezes/crashes the browser (DoS). This design adds fail-fast schema version checks at ",(0,i.jsx)(n.code,{children:"loadAssets()"})," and ",(0,i.jsx)(n.code,{children:"render()"}),", introduces configurable input limits with safe defaults, and adds unit tests + documentation for the default caps."]}),"\n",(0,i.jsx)(n.h2,{id:"2-context--problem-statement",children:"2. Context & Problem Statement"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Background"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The renderer contract lives in ",(0,i.jsx)(n.code,{children:"@idle-engine/renderer-contract"})," and defines ",(0,i.jsx)(n.code,{children:"AssetManifest"}),", ",(0,i.jsx)(n.code,{children:"RenderCommandBuffer"}),", and ",(0,i.jsx)(n.code,{children:"RENDERER_CONTRACT_SCHEMA_VERSION"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The WebGPU backend (",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/src/webgpu-renderer.ts"}),") has two public entry points for untrusted payloads:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"WebGpuRenderer.loadAssets(manifest, assets, ...)"})," (manifest-driven atlas construction)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"WebGpuRenderer.render(rcb)"})," (per-frame draw processing and GPU submission)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"These payloads can originate from content packs, mods, or replay files, and should be treated as untrusted by default."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Problem"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Schema version mismatch"}),": ",(0,i.jsx)(n.code,{children:"loadAssets()"})," does not validate ",(0,i.jsx)(n.code,{children:"manifest.schemaVersion"}),", and ",(0,i.jsx)(n.code,{children:"render()"})," does not validate ",(0,i.jsx)(n.code,{children:"rcb.frame.schemaVersion"}),", despite the contract having an explicit version constant."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Denial of Service"}),": there are no caps on input sizes. Notably:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Huge ",(0,i.jsx)(n.code,{children:"manifest.assets"})," forces large sorts and many async ",(0,i.jsx)(n.code,{children:"loadImage/loadFont"})," calls."]}),"\n",(0,i.jsxs)(n.li,{children:["Huge ",(0,i.jsx)(n.code,{children:"rcb.draws"})," forces sorting/processing and multiple ",(0,i.jsx)(n.code,{children:"Array.prototype.some(...)"})," scans."]}),"\n",(0,i.jsxs)(n.li,{children:["Huge ",(0,i.jsx)(n.code,{children:"TextDraw.text"})," can trigger large instance reservations (",(0,i.jsx)(n.code,{children:"reserveInstances(text.length)"}),") and significant per-frame CPU/memory pressure."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Forces"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Keep the renderer deterministic (especially for atlas layout/hashing)."}),"\n",(0,i.jsx)(n.li,{children:"Keep the public API small and backward-compatible for valid inputs."}),"\n",(0,i.jsx)(n.li,{children:"Fail fast with clear, actionable error messages (no silent corruption)."}),"\n",(0,i.jsx)(n.li,{children:"Avoid adding heavy runtime dependencies (e.g., schema validators) unless necessary."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"3-goals--non-goals",children:"3. Goals & Non-Goals"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Goals"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Reject incompatible schema versions at the earliest entry points:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"manifest.schemaVersion === RENDERER_CONTRACT_SCHEMA_VERSION"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"rcb.frame.schemaVersion === RENDERER_CONTRACT_SCHEMA_VERSION"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Add configurable limits (with defaults) to cap:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"maximum assets per manifest"}),"\n",(0,i.jsx)(n.li,{children:"maximum draws per frame"}),"\n",(0,i.jsxs)(n.li,{children:["maximum text length per ",(0,i.jsx)(n.code,{children:"TextDraw"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Ensure limit violations fail fast before expensive work (sorting, allocations, GPU submission)."}),"\n",(0,i.jsx)(n.li,{children:"Add deterministic unit tests covering schema mismatch and limit enforcement."}),"\n",(0,i.jsx)(n.li,{children:"Document default limits in package docs (README and/or exported JSDoc)."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Non-Goals"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Full structural validation of the entire renderer contract payload (beyond the minimal checks described here)."}),"\n",(0,i.jsx)(n.li,{children:"Introducing per-field numeric validation everywhere (e.g., checking all coordinates are finite) as part of Issue 813."}),"\n",(0,i.jsx)(n.li,{children:"Adding new renderer-contract schema versions or migration tooling."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"4-stakeholders-agents--impacted-surfaces",children:"4. Stakeholders, Agents & Impacted Surfaces"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Primary Stakeholders"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Renderer maintainers (",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Host applications that run untrusted content/replays (",(0,i.jsx)(n.code,{children:"packages/shell-desktop"}),", future web shells)"]}),"\n",(0,i.jsx)(n.li,{children:"Content pack authors (indirectly; they see clearer errors on mismatch)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Agent Roles"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Docs Agent"}),": Maintain this design doc and capture decisions/open questions."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Renderer Implementation Agent"}),": Implement schema checks + caps in ",(0,i.jsx)(n.code,{children:"webgpu-renderer.ts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test Agent"}),": Add unit tests to ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/src/webgpu-renderer.test.ts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Docs/Release Agent"}),": Update ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/README.md"})," to document limits and configuration."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Affected Packages/Services"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/src/webgpu-renderer.ts"})," (validation and limits)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/src/webgpu-renderer.test.ts"})," (new unit tests)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/README.md"})," (document defaults)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/renderer-contract/src/types.ts"})," (reference for schema constant; no changes expected)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compatibility Considerations"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This change is intentionally stricter: callers passing mismatched schema versions or oversized inputs will now receive immediate errors."}),"\n",(0,i.jsx)(n.li,{children:"Limits must be configurable so trusted/controlled environments can raise caps when necessary."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"5-current-state",children:"5. Current State"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Contract schema versioning exists:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/renderer-contract/src/types.ts"})," exports ",(0,i.jsx)(n.code,{children:"RENDERER_CONTRACT_SCHEMA_VERSION"})," and uses it in ",(0,i.jsx)(n.code,{children:"AssetManifest.schemaVersion"})," and ",(0,i.jsx)(n.code,{children:"FrameHeader.schemaVersion"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"WebGpuRenderer.loadAssets(...)"})," behavior:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Builds deterministic atlas layout by filtering/sorting ",(0,i.jsx)(n.code,{children:"manifest.assets"})," (",(0,i.jsx)(n.code,{children:"getSortedRenderableAtlasEntries(...)"}),") and packing sources."]}),"\n",(0,i.jsxs)(n.li,{children:["Does not validate ",(0,i.jsx)(n.code,{children:"manifest.schemaVersion"})," and does not cap ",(0,i.jsx)(n.code,{children:"manifest.assets.length"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Performs some validation (e.g., rejects duplicate ",(0,i.jsx)(n.code,{children:"AssetId"})," among renderable atlas entries), but only after iterating/sorting."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"WebGpuRenderer.render(...)"})," behavior:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Immediately sorts/rewrites draw order via ",(0,i.jsx)(n.code,{children:"orderDrawsByPassAndSortKey(rcb)"})," and then iterates draws to emit instance data + submit GPU work."]}),"\n",(0,i.jsxs)(n.li,{children:["Does not validate ",(0,i.jsx)(n.code,{children:"rcb.frame.schemaVersion"})," and does not cap ",(0,i.jsx)(n.code,{children:"rcb.draws.length"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Text draws can allocate proportional to ",(0,i.jsx)(n.code,{children:"draw.text.length"})," via ",(0,i.jsx)(n.code,{children:"appendBitmapTextInstances(...)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Related prior work:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/renderer-debug/src/rcb-validation.ts"})," includes a ",(0,i.jsx)(n.code,{children:"validateRenderCommandBuffer(...)"})," helper that checks ",(0,i.jsx)(n.code,{children:"frame.schemaVersion"})," and many structural/numeric constraints, but ",(0,i.jsx)(n.code,{children:"renderer-webgpu"})," does not use it today."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"6-proposed-solution",children:"6. Proposed Solution"}),"\n",(0,i.jsx)(n.h3,{id:"61-architecture-overview",children:"6.1 Architecture Overview"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add a small input validation layer at the entry points of ",(0,i.jsx)(n.code,{children:"@idle-engine/renderer-webgpu"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Schema version checks"})," in ",(0,i.jsx)(n.code,{children:"loadAssets()"})," and ",(0,i.jsx)(n.code,{children:"render()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Limit checks"})," in ",(0,i.jsx)(n.code,{children:"loadAssets()"})," and ",(0,i.jsx)(n.code,{children:"render()"})," using renderer-owned caps."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Expose caps via ",(0,i.jsx)(n.code,{children:"WebGpuRendererCreateOptions"})," so hosts can tune limits based on their trust model and performance envelope."]}),"\n",(0,i.jsxs)(n.li,{children:["Keep checks lightweight, synchronous, and fail-fast:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Reject oversized ",(0,i.jsx)(n.code,{children:"manifest.assets"})," before sorting/loading."]}),"\n",(0,i.jsxs)(n.li,{children:["Reject oversized ",(0,i.jsx)(n.code,{children:"rcb.draws"})," before ordering/sorting."]}),"\n",(0,i.jsxs)(n.li,{children:["Reject oversized ",(0,i.jsx)(n.code,{children:"TextDraw.text"})," before instance reservations."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"62-detailed-design",children:"6.2 Detailed Design"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Runtime Changes"}),":","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Import the schema version constant in ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/src/webgpu-renderer.ts"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"RENDERER_CONTRACT_SCHEMA_VERSION"})," to the value imports from ",(0,i.jsx)(n.code,{children:"@idle-engine/renderer-contract"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Add a public limits shape and defaults:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"export interface WebGpuRendererLimits { maxAssets?: number; maxDrawsPerFrame?: number; maxTextLength?: number }"})}),"\n",(0,i.jsxs)(n.li,{children:["Defaults (initial proposal, aligned with Issue 813): ",(0,i.jsx)(n.code,{children:"maxAssets = 10_000"}),", ",(0,i.jsx)(n.code,{children:"maxDrawsPerFrame = 100_000"}),", ",(0,i.jsx)(n.code,{children:"maxTextLength = 10_000"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Defaults should be applied once during ",(0,i.jsx)(n.code,{children:"createWebGpuRenderer(...)"})," / ",(0,i.jsx)(n.code,{children:"WebGpuRendererImpl"})," construction to avoid per-call recomputation."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Extend ",(0,i.jsx)(n.code,{children:"WebGpuRendererCreateOptions"})," with an optional ",(0,i.jsx)(n.code,{children:"limits"})," field:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"readonly limits?: WebGpuRendererLimits;"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Enforce schema + caps:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.code,{children:"loadAssets(manifest, ...)"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Throw if ",(0,i.jsx)(n.code,{children:"manifest.schemaVersion !== RENDERER_CONTRACT_SCHEMA_VERSION"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Throw if ",(0,i.jsx)(n.code,{children:"manifest.assets.length > limits.maxAssets"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Perform these checks before ",(0,i.jsx)(n.code,{children:"getSortedRenderableAtlasEntries(manifest)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.code,{children:"render(rcb)"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Throw if ",(0,i.jsx)(n.code,{children:"rcb.frame.schemaVersion !== RENDERER_CONTRACT_SCHEMA_VERSION"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Throw if ",(0,i.jsx)(n.code,{children:"rcb.draws.length > limits.maxDrawsPerFrame"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Scan draws (only if within draw-count limit) and throw if any ",(0,i.jsx)(n.code,{children:"TextDraw.text.length > limits.maxTextLength"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Perform these checks before ",(0,i.jsx)(n.code,{children:"orderDrawsByPassAndSortKey(rcb)"})," to avoid ",(0,i.jsx)(n.code,{children:"O(n log n)"})," work on rejected inputs."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Error messages:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Prefer stable, descriptive messages that include the actual and expected values, e.g.:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"AssetManifest schemaVersion X is not supported (expected Y)."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"RenderCommandBuffer frame.schemaVersion X is not supported (expected Y)."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Draw count exceeds limit: N > maxDrawsPerFrame"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Text length exceeds limit: N > maxTextLength"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"(Open question) whether to introduce dedicated error classes for hosts to catch/recover without string matching."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data & Schemas"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["No renderer-contract schema changes. This work enforces the existing ",(0,i.jsx)(n.code,{children:"RENDERER_CONTRACT_SCHEMA_VERSION"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"APIs & Contracts"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Adds optional ",(0,i.jsx)(n.code,{children:"limits"})," to ",(0,i.jsx)(n.code,{children:"WebGpuRendererCreateOptions"})," only; no required call-site changes for valid inputs."]}),"\n",(0,i.jsxs)(n.li,{children:["No changes to ",(0,i.jsx)(n.code,{children:"@idle-engine/renderer-contract"})," public types required."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tooling & Automation"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add unit tests under ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/src/webgpu-renderer.test.ts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Update ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/README.md"})," to document default limits and configuration."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"63-operational-considerations",children:"6.3 Operational Considerations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Deployment"}),": Standard package release for ",(0,i.jsx)(n.code,{children:"@idle-engine/renderer-webgpu"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Telemetry & Observability"}),": No new logging in core library paths; hosts can catch and instrument errors as needed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security & Compliance"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reduces availability risk from untrusted content/replays by bounding resource usage at the API boundary."}),"\n",(0,i.jsx)(n.li,{children:"Converts silent schema mismatch into explicit rejection, improving safety and debuggability."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"7-work-breakdown--delivery-plan",children:"7. Work Breakdown & Delivery Plan"}),"\n",(0,i.jsx)(n.h3,{id:"71-issue-map",children:"7.1 Issue Map"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Issue Title"}),(0,i.jsx)(n.th,{children:"Scope Summary"}),(0,i.jsx)(n.th,{children:"Proposed Assignee/Agent"}),(0,i.jsx)(n.th,{children:"Dependencies"}),(0,i.jsx)(n.th,{children:"Acceptance Criteria"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bug(renderer-webgpu): validate schema versions at entry points"})}),(0,i.jsxs)(n.td,{children:["Import ",(0,i.jsx)(n.code,{children:"RENDERER_CONTRACT_SCHEMA_VERSION"})," and enforce ",(0,i.jsx)(n.code,{children:"manifest.schemaVersion"})," and ",(0,i.jsx)(n.code,{children:"rcb.frame.schemaVersion"})," checks"]}),(0,i.jsx)(n.td,{children:"Renderer Implementation Agent"}),(0,i.jsx)(n.td,{children:"Design approval"}),(0,i.jsx)(n.td,{children:"Clear thrown errors for mismatches; unit tests cover both cases"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"feat(renderer-webgpu): add and enforce WebGpuRendererLimits"})}),(0,i.jsxs)(n.td,{children:["Add ",(0,i.jsx)(n.code,{children:"limits"})," to create options, defaults, and enforce ",(0,i.jsx)(n.code,{children:"maxAssets/maxDrawsPerFrame/maxTextLength"})]}),(0,i.jsx)(n.td,{children:"Renderer Implementation Agent"}),(0,i.jsx)(n.td,{children:"Schema checks"}),(0,i.jsx)(n.td,{children:"Oversized inputs rejected before sorting/allocation; tests cover each limit"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"test(renderer-webgpu): add DoS hardening regression tests"})}),(0,i.jsx)(n.td,{children:"Add unit tests for mismatch + limit violations and ensure errors are descriptive"}),(0,i.jsx)(n.td,{children:"Test Agent"}),(0,i.jsx)(n.td,{children:"Implementation"}),(0,i.jsx)(n.td,{children:"Vitest suite covers schema mismatch and caps; tests deterministic"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"docs(renderer-webgpu): document default limits"})}),(0,i.jsxs)(n.td,{children:["Document defaults and how to override in ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/README.md"})," (or exported JSDoc)"]}),(0,i.jsx)(n.td,{children:"Docs/Release Agent"}),(0,i.jsx)(n.td,{children:"Implementation"}),(0,i.jsxs)(n.td,{children:["README includes defaults and ",(0,i.jsx)(n.code,{children:"limits"})," example; no console noise in tests"]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"72-milestones",children:"7.2 Milestones"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Phase 1"}),": Implement schema version validation + unit tests."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Phase 2"}),": Implement caps + unit tests + README/JSDoc documentation."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"73-coordination-notes",children:"7.3 Coordination Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Hand-off Package"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Issue 813: ",(0,i.jsx)(n.a,{href:"https://github.com/hansjm10/Idle-Game-Engine/issues/813",children:"https://github.com/hansjm10/Idle-Game-Engine/issues/813"})]}),"\n",(0,i.jsxs)(n.li,{children:["Entry points: ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/src/webgpu-renderer.ts"})," (",(0,i.jsx)(n.code,{children:"loadAssets"}),", ",(0,i.jsx)(n.code,{children:"render"}),", ",(0,i.jsx)(n.code,{children:"createWebGpuRenderer"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Contract schema: ",(0,i.jsx)(n.code,{children:"packages/renderer-contract/src/types.ts"})]}),"\n",(0,i.jsxs)(n.li,{children:["Existing validation patterns: ",(0,i.jsx)(n.code,{children:"packages/renderer-debug/src/rcb-validation.ts"})]}),"\n",(0,i.jsxs)(n.li,{children:["Test harness: ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/src/webgpu-renderer.test.ts"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Communication Cadence"}),": Single reviewer pass once tests + docs are updated."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"8-agent-guidance--guardrails",children:"8. Agent Guidance & Guardrails"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Context Packets"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Read Issue 813 body and review current ",(0,i.jsx)(n.code,{children:"loadAssets"})," and ",(0,i.jsx)(n.code,{children:"render"})," implementations to identify where expensive work begins."]}),"\n",(0,i.jsxs)(n.li,{children:["Confirm how ",(0,i.jsx)(n.code,{children:"appendBitmapTextInstances"})," allocates/reserves instances so ",(0,i.jsx)(n.code,{children:"maxTextLength"})," blocks worst-case allocations."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Prompting & Constraints"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Do not edit checked-in ",(0,i.jsx)(n.code,{children:"dist/"})," outputs."]}),"\n",(0,i.jsxs)(n.li,{children:["Preserve ES module imports and type-only import/export rules (",(0,i.jsx)(n.code,{children:"import type { ... }"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Keep validation logic small and deterministic; avoid console output that could corrupt ",(0,i.jsx)(n.code,{children:"vitest-llm-reporter"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Safety Rails"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Validation must occur before sorting/packing/allocations whenever possible."}),"\n",(0,i.jsx)(n.li,{children:"Prefer throwing errors (fail-fast) over truncation/clamping for contract violations."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validation Hooks"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pnpm test --filter @idle-engine/renderer-webgpu"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pnpm lint --filter @idle-engine/renderer-webgpu"})," (or ",(0,i.jsx)(n.code,{children:"pnpm lint"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"9-alternatives-considered",children:"9. Alternatives Considered"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Do nothing / rely on TypeScript types"}),": Rejected; does not protect runtime from untrusted JSON/replay inputs."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Full schema validation (e.g., AJV/Zod) for manifests + RCB"}),": More complete but adds runtime overhead and dependencies; can be a follow-up if needed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Reuse ",(0,i.jsx)(n.code,{children:"@idle-engine/renderer-debug"})," validation directly"]}),": Would add an undesirable dependency edge for a production renderer and still doesn\u2019t address asset manifest caps."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Truncate oversized inputs instead of throwing"}),": Avoids hard failures but risks silent corruption and non-obvious rendering differences; not aligned with schema versioning."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"10-testing--validation-plan",children:"10. Testing & Validation Plan"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unit / Integration"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add tests that assert:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"loadAssets()"})," throws when ",(0,i.jsx)(n.code,{children:"manifest.schemaVersion !== RENDERER_CONTRACT_SCHEMA_VERSION"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"render()"})," throws when ",(0,i.jsx)(n.code,{children:"rcb.frame.schemaVersion !== RENDERER_CONTRACT_SCHEMA_VERSION"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"loadAssets()"})," throws when ",(0,i.jsx)(n.code,{children:"manifest.assets.length > maxAssets"})," (and does so before invoking ",(0,i.jsx)(n.code,{children:"assets.loadImage/loadFont"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"render()"})," throws when ",(0,i.jsx)(n.code,{children:"rcb.draws.length > maxDrawsPerFrame"})," (and does so before GPU submission)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"render()"})," throws when any ",(0,i.jsx)(n.code,{children:"TextDraw.text.length > maxTextLength"})," (and does so before instance buffer reservations)."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Validation adds small ",(0,i.jsx)(n.code,{children:"O(n)"})," scanning for text lengths (bounded by ",(0,i.jsx)(n.code,{children:"maxDrawsPerFrame"}),"), while preventing ",(0,i.jsx)(n.code,{children:"O(n log n)"})," sorting and large allocations on rejected inputs."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tooling / A11y"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Manual validation in a WebGPU host (Electron shell) by feeding intentionally malformed replays/packs and confirming error surfacing and no tab freeze."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"11-risks--mitigations",children:"11. Risks & Mitigations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Breaking existing consumers with old schema versions"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Mitigation: clear error message pointing at expected schema version; ensure contract version bumps are coordinated."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Default caps too low for legitimate content"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Mitigation: expose ",(0,i.jsx)(n.code,{children:"limits"})," in ",(0,i.jsx)(n.code,{children:"WebGpuRendererCreateOptions"}),"; document how to raise limits for trusted environments."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validation overhead on hot render loop"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Mitigation: keep checks minimal; only scan for text length after draw-count is within bounds."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"12-rollout-plan",children:"12. Rollout Plan"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Milestones"}),": Ship as a patch/minor update to ",(0,i.jsx)(n.code,{children:"@idle-engine/renderer-webgpu"})," (depending on semver interpretation of \u201cthrows on invalid input\u201d)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Migration Strategy"}),": None for compliant callers; update any replays/content packs that carry stale schema versions."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Communication"}),": Note in release notes and issue comment that the renderer now enforces schema versions and default input caps."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"13-open-questions",children:"13. Open Questions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Should limits be configured only at renderer creation (",(0,i.jsx)(n.code,{children:"createWebGpuRenderer(..., { limits })"}),"), or should ",(0,i.jsx)(n.code,{children:"loadAssets"}),"/",(0,i.jsx)(n.code,{children:"render"})," also accept per-call overrides?"]}),"\n",(0,i.jsxs)(n.li,{children:["Should the library introduce dedicated error classes (e.g., ",(0,i.jsx)(n.code,{children:"WebGpuRendererSchemaMismatchError"}),", ",(0,i.jsx)(n.code,{children:"WebGpuRendererLimitExceededError"}),") to allow safe host-side recovery without string matching?"]}),"\n",(0,i.jsxs)(n.li,{children:["Should ",(0,i.jsx)(n.code,{children:"maxTextLength"})," be defined in terms of JavaScript UTF-16 code units (",(0,i.jsx)(n.code,{children:"text.length"}),") or Unicode code points (iteration count of ",(0,i.jsx)(n.code,{children:"for (const ch of text)"}),")?"]}),"\n",(0,i.jsxs)(n.li,{children:["Should we also cap ",(0,i.jsx)(n.code,{children:"passes.length"})," and/or scissor stack depth to avoid other unbounded structures (follow-up or included in this issue)?"]}),"\n",(0,i.jsxs)(n.li,{children:["Are the proposed defaults (",(0,i.jsx)(n.code,{children:"10k"})," assets, ",(0,i.jsx)(n.code,{children:"100k"})," draws, ",(0,i.jsx)(n.code,{children:"10k"})," chars) appropriate for the intended content scale, or should they be tuned based on empirical packs?"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"14-follow-up-work",children:"14. Follow-Up Work"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Consider promoting a shared, dependency-light validation helper into ",(0,i.jsx)(n.code,{children:"@idle-engine/renderer-contract"})," (so multiple renderers/hosts can reuse it)."]}),"\n",(0,i.jsxs)(n.li,{children:["Add optional stricter validation modes for hosts running fully untrusted content:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"finite number validation for coordinates/dimensions"}),"\n",(0,i.jsx)(n.li,{children:"string non-emptiness checks for IDs"}),"\n",(0,i.jsxs)(n.li,{children:["per-kind draw validation (similar to ",(0,i.jsx)(n.code,{children:"renderer-debug"}),"\u2019s ",(0,i.jsx)(n.code,{children:"validateRenderCommandBuffer"}),")"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Add fuzz/property-based tests that generate random manifests/RCBs within caps to ensure renderer robustness."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"15-references",children:"15. References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Issue 813: ",(0,i.jsx)(n.a,{href:"https://github.com/hansjm10/Idle-Game-Engine/issues/813",children:"https://github.com/hansjm10/Idle-Game-Engine/issues/813"})]}),"\n",(0,i.jsxs)(n.li,{children:["Contract schema version + types: ",(0,i.jsx)(n.code,{children:"packages/renderer-contract/src/types.ts"})]}),"\n",(0,i.jsxs)(n.li,{children:["WebGPU entry points: ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/src/webgpu-renderer.ts"})]}),"\n",(0,i.jsxs)(n.li,{children:["Existing RCB validation helper (debug tooling): ",(0,i.jsx)(n.code,{children:"packages/renderer-debug/src/rcb-validation.ts"})]}),"\n",(0,i.jsxs)(n.li,{children:["WebGPU renderer README example (mentions schema version constant): ",(0,i.jsx)(n.code,{children:"packages/renderer-webgpu/README.md"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"appendix-a--glossary",children:"Appendix A \u2014 Glossary"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AssetManifest"}),": Renderer input that lists asset IDs, kinds, and content hashes to build a sprite atlas."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"RenderCommandBuffer (RCB)"}),": Per-frame renderer input containing passes and ordered draws."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Schema version"}),": Integer constant (",(0,i.jsx)(n.code,{children:"RENDERER_CONTRACT_SCHEMA_VERSION"}),") indicating the expected field layout for contract payloads."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"DoS (Denial of Service)"}),": Attacks/inputs that exhaust CPU/memory or otherwise freeze/crash the host."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"appendix-b--change-log",children:"Appendix B \u2014 Change Log"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Date"}),(0,i.jsx)(n.th,{children:"Author"}),(0,i.jsx)(n.th,{children:"Change Summary"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"2026-01-24"}),(0,i.jsx)(n.td,{children:"Codex (AI)"}),(0,i.jsx)(n.td,{children:"Initial draft"})]})})]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},7678:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var r=s(9430);const i={},d=r.createContext(i);function l(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);