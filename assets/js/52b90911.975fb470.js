"use strict";(globalThis.webpackChunk_idle_engine_docs=globalThis.webpackChunk_idle_engine_docs||[]).push([[518],{6838:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"issue-844-design","title":"build: make workspace scripts run on Windows + Linux (Issue 844)","description":"Document Control","source":"@site/../../docs/issue-844-design.md","sourceDirName":".","slug":"/issue-844-design","permalink":"/Idle-Game-Engine/issue-844-design","draft":false,"unlisted":false,"editUrl":"https://github.com/hansjm10/Idle-Game-Engine/edit/main/docs/../../docs/issue-844-design.md","tags":[],"version":"current","sidebarPosition":99,"frontMatter":{"title":"build: make workspace scripts run on Windows + Linux (Issue 844)","sidebar_position":99}}');var r=s(5270),l=s(7678);const d={title:"build: make workspace scripts run on Windows + Linux (Issue 844)",sidebar_position:99},c="build: make workspace scripts run on Windows + Linux (Issue 844)",o={},t=[{value:"Document Control",id:"document-control",level:2},{value:"1. Summary",id:"1-summary",level:2},{value:"2. Context &amp; Problem Statement",id:"2-context--problem-statement",level:2},{value:"3. Goals &amp; Non-Goals",id:"3-goals--non-goals",level:2},{value:"4. Stakeholders, Agents &amp; Impacted Surfaces",id:"4-stakeholders-agents--impacted-surfaces",level:2},{value:"5. Current State",id:"5-current-state",level:2},{value:"6. Proposed Solution",id:"6-proposed-solution",level:2},{value:"6.1 Architecture Overview",id:"61-architecture-overview",level:3},{value:"6.2 Detailed Design",id:"62-detailed-design",level:3},{value:"6.3 Operational Considerations",id:"63-operational-considerations",level:3},{value:"7. Work Breakdown &amp; Delivery Plan",id:"7-work-breakdown--delivery-plan",level:2},{value:"7.1 Issue Map",id:"71-issue-map",level:3},{value:"7.2 Milestones",id:"72-milestones",level:3},{value:"7.3 Coordination Notes",id:"73-coordination-notes",level:3},{value:"8. Agent Guidance &amp; Guardrails",id:"8-agent-guidance--guardrails",level:2},{value:"9. Alternatives Considered",id:"9-alternatives-considered",level:2},{value:"10. Testing &amp; Validation Plan",id:"10-testing--validation-plan",level:2},{value:"11. Risks &amp; Mitigations",id:"11-risks--mitigations",level:2},{value:"12. Rollout Plan",id:"12-rollout-plan",level:2},{value:"13. Open Questions",id:"13-open-questions",level:2},{value:"14. Follow-Up Work",id:"14-follow-up-work",level:2},{value:"15. References",id:"15-references",level:2},{value:"Appendix A \u2014 Glossary",id:"appendix-a--glossary",level:2},{value:"Appendix B \u2014 Change Log",id:"appendix-b--change-log",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"build-make-workspace-scripts-run-on-windows--linux-issue-844",children:"build: make workspace scripts run on Windows + Linux (Issue 844)"})}),"\n",(0,r.jsx)(n.h2,{id:"document-control",children:"Document Control"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Title"}),": Make root workspace scripts cross-platform (Windows PowerShell + Linux bash) and prevent CRLF regressions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authors"}),": Ralph (AI agent)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reviewers"}),": @hansjm10"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Status"}),": Draft"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Last Updated"}),": 2026-01-25"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Related Issues"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/hansjm10/Idle-Game-Engine/issues/844",children:"https://github.com/hansjm10/Idle-Game-Engine/issues/844"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Execution Mode"}),": AI-led"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"1-summary",children:"1. Summary"}),"\n",(0,r.jsxs)(n.p,{children:["Replace the repo\u2019s root workspace runner scripts (",(0,r.jsx)(n.code,{children:"pnpm build"}),", ",(0,r.jsx)(n.code,{children:"pnpm lint"}),", ",(0,r.jsx)(n.code,{children:"pnpm test"}),", etc.) that currently rely on ",(0,r.jsx)(n.code,{children:"tools/scripts/*.sh"})," with cross-platform Node-based runners, so the commands work out-of-the-box on Linux and on Windows PowerShell without requiring WSL/Git Bash. Add guardrails to prevent CRLF line endings from breaking executable scripts, and extend CI to verify ",(0,r.jsx)(n.code,{children:"pnpm run build"})," on both ",(0,r.jsx)(n.code,{children:"ubuntu-latest"})," and ",(0,r.jsx)(n.code,{children:"windows-latest"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"2-context--problem-statement",children:"2. Context & Problem Statement"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Background"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The repo root ",(0,r.jsx)(n.code,{children:"package.json"})," scripts call ",(0,r.jsx)(n.code,{children:"./tools/scripts/run-workspace-*.sh"})," for common workflows (build/lint/test/coverage/benchmarks)."]}),"\n",(0,r.jsxs)(n.li,{children:["Those scripts are bash-specific (arrays, ",(0,r.jsx)(n.code,{children:"[[ ... ]]"}),", ",(0,r.jsx)(n.code,{children:"set -euo pipefail"}),") and are executed via shebang (",(0,r.jsx)(n.code,{children:"#!/usr/bin/env bash"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["On Windows/WSL checkouts where ",(0,r.jsx)(n.code,{children:"tools/scripts/*.sh"})," end up with CRLF, the shebang line becomes ",(0,r.jsx)(n.code,{children:"#!/usr/bin/env bash\\r"}),", causing ",(0,r.jsx)(n.code,{children:"/usr/bin/env: \u2018bash\\r\u2019: No such file or directory"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["On native Windows (PowerShell/cmd), ",(0,r.jsx)(n.code,{children:".sh"})," scripts are not runnable without a bash environment (WSL/Git Bash), so ",(0,r.jsx)(n.code,{children:"pnpm run build"})," fails immediately."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Forces"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Preserve the existing CLI ergonomics (e.g. ",(0,r.jsx)(n.code,{children:"pnpm build --filter @idle-engine/core -- --help"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Keep runner logic simple and dependency-free (Node stdlib only)."}),"\n",(0,r.jsxs)(n.li,{children:["Avoid introducing shell-dependent behaviour into developer-critical workflows (especially ",(0,r.jsx)(n.code,{children:"build"}),", which Lefthook also runs)."]}),"\n",(0,r.jsx)(n.li,{children:"Make failures actionable (clear error messages when prerequisites are missing)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"3-goals--non-goals",children:"3. Goals & Non-Goals"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Goals"}),":","\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Make ",(0,r.jsx)(n.code,{children:"pnpm run build"})," work out-of-the-box on Linux and on Windows PowerShell without WSL/Git Bash."]}),"\n",(0,r.jsxs)(n.li,{children:["Keep the current argument contract: ",(0,r.jsx)(n.code,{children:"pnpm <cmd> [pnpm args] -- [script args]"})," where pnpm args (like ",(0,r.jsx)(n.code,{children:"--filter"}),") are forwarded to the underlying ",(0,r.jsx)(n.code,{children:"pnpm -r ..."}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Prevent CRLF regressions for executable scripts (via ",(0,r.jsx)(n.code,{children:".gitattributes"})," and/or other repo guardrails)."]}),"\n",(0,r.jsxs)(n.li,{children:["Add CI coverage to verify ",(0,r.jsx)(n.code,{children:"pnpm run build"})," on both ",(0,r.jsx)(n.code,{children:"ubuntu-latest"})," and ",(0,r.jsx)(n.code,{children:"windows-latest"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Non-Goals"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Redesigning per-package ",(0,r.jsx)(n.code,{children:"build"})," scripts (this change is about the root \u201cworkspace runner\u201d entry points)."]}),"\n",(0,r.jsxs)(n.li,{children:["Making every CI step cross-platform (e.g. bash-heavy ",(0,r.jsx)(n.code,{children:"set -o pipefail"})," blocks) in the first iteration."]}),"\n",(0,r.jsx)(n.li,{children:"Supporting Node < 20 (the repo already requires Node \u2265 20.10)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"4-stakeholders-agents--impacted-surfaces",children:"4. Stakeholders, Agents & Impacted Surfaces"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Primary Stakeholders"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Contributors developing on Windows (PowerShell/cmd)"}),"\n",(0,r.jsx)(n.li,{children:"CI maintainers (GitHub Actions workflow owners)"}),"\n",(0,r.jsx)(n.li,{children:"Repo tooling maintainers (Lefthook + workspace scripts)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Agent Roles"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tooling Agent"}),": Replace bash workspace runner scripts with Node equivalents and update ",(0,r.jsx)(n.code,{children:"package.json"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CI Agent"}),": Add ",(0,r.jsx)(n.code,{children:"windows-latest"})," coverage that runs ",(0,r.jsx)(n.code,{children:"pnpm run build"})," (and optionally other smoke commands)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Docs Agent"}),": Update contributor docs/README notes if any workflow changes or prerequisites need clarifying."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Guardrails Agent"}),": Add ",(0,r.jsx)(n.code,{children:".gitattributes"})," (and optional checks) to prevent CRLF regressions for executable scripts."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Affected Packages/Services"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Root ",(0,r.jsx)(n.code,{children:"package.json"})," scripts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tools/scripts/*"})," workspace runner entrypoints"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".github/workflows/ci.yml"})," (add Windows build verification)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lefthook.yml"})," (indirectly impacted because it calls ",(0,r.jsx)(n.code,{children:"pnpm build"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Compatibility Considerations"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Intended to be backwards-compatible from a user perspective (",(0,r.jsx)(n.code,{children:"pnpm build"})," still exists and still accepts ",(0,r.jsx)(n.code,{children:"--filter"})," and ",(0,r.jsx)(n.code,{children:"--"})," forwarding)."]}),"\n",(0,r.jsxs)(n.li,{children:["Script entrypoints change from ",(0,r.jsx)(n.code,{children:".sh"})," to Node, so any tooling that directly invoked ",(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-*.sh"})," may need to migrate (see Rollout Plan)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"5-current-state",children:"5. Current State"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Root scripts in ",(0,r.jsx)(n.code,{children:"package.json"})," reference bash entrypoints:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"build"}),": ",(0,r.jsx)(n.code,{children:"./tools/scripts/run-workspace-build.sh"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lint"}),": ",(0,r.jsx)(n.code,{children:"./tools/scripts/run-workspace-lint.sh"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"test"}),": ",(0,r.jsx)(n.code,{children:"./tools/scripts/run-workspace-test.sh"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"test:ci"}),": ",(0,r.jsx)(n.code,{children:"./tools/scripts/run-workspace-test-ci.sh"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"benchmark"}),": ",(0,r.jsx)(n.code,{children:"./tools/scripts/run-workspace-benchmark.sh"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"coverage:md"}),": ",(0,r.jsx)(n.code,{children:"./tools/scripts/run-workspace-coverage.sh && pnpm tsx tools/coverage-report/index.ts"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:".sh"})," scripts implement:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["arg splitting at ",(0,r.jsx)(n.code,{children:"--"})," so ",(0,r.jsx)(n.code,{children:"pnpm"}),"-level args (",(0,r.jsx)(n.code,{children:"--filter"}),", ",(0,r.jsx)(n.code,{children:"--workspace-concurrency"}),", etc.) are forwarded to a recursive pnpm command, and trailing args are forwarded to the underlying script (e.g. package ",(0,r.jsx)(n.code,{children:"build"})," script)."]}),"\n",(0,r.jsxs)(n.li,{children:["additional behaviour for some commands (e.g. ",(0,r.jsx)(n.code,{children:"test:ci"})," sets ",(0,r.jsx)(n.code,{children:"--workspace-concurrency"})," from ",(0,r.jsx)(n.code,{children:"TEST_CI_WORKSPACE_CONCURRENCY"}),"; coverage runs ",(0,r.jsx)(n.code,{children:"normalize-lcov-paths.mjs"})," afterwards)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["The repo currently has no ",(0,r.jsx)(n.code,{children:".gitattributes"}),", so Windows checkouts may produce CRLF line endings for ",(0,r.jsx)(n.code,{children:".sh"})," files, leading to WSL shebang failures."]}),"\n",(0,r.jsxs)(n.li,{children:["CI currently runs only on ",(0,r.jsx)(n.code,{children:"ubuntu-latest"})," for the main \u201cQuality Gate\u201d job. It runs ",(0,r.jsx)(n.code,{children:"pnpm lint"})," (root script) but does not validate root ",(0,r.jsx)(n.code,{children:"pnpm build"})," on Windows."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"6-proposed-solution",children:"6. Proposed Solution"}),"\n",(0,r.jsx)(n.h3,{id:"61-architecture-overview",children:"6.1 Architecture Overview"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Introduce a cross-platform Node-based \u201cworkspace runner\u201d implementation that:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["preserves the existing ",(0,r.jsx)(n.code,{children:"pnpm <cmd> [pnpm args] -- [script args]"})," UX, and"]}),"\n",(0,r.jsxs)(n.li,{children:["invokes ",(0,r.jsx)(n.code,{children:"pnpm -r ... run <script>"})," with correct flag placement, using ",(0,r.jsx)(n.code,{children:"child_process.spawn"})," with argument arrays (no shell)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Update root scripts to call Node runner entrypoints instead of ",(0,r.jsx)(n.code,{children:".sh"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:".gitattributes"})," rules to enforce LF line endings for executable scripts to prevent shebang breakage on WSL and other Unix environments."]}),"\n",(0,r.jsxs)(n.li,{children:["Add a CI job matrix for ",(0,r.jsx)(n.code,{children:"ubuntu-latest"})," + ",(0,r.jsx)(n.code,{children:"windows-latest"})," that runs ",(0,r.jsx)(n.code,{children:"pnpm install"})," and ",(0,r.jsx)(n.code,{children:"pnpm run build"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"62-detailed-design",children:"6.2 Detailed Design"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Workspace runner implementation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-script.mjs"})," (name TBD) with a simple CLI contract:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"node tools/scripts/run-workspace-script.mjs <scriptName> [pnpm args] -- [script args]"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Parsing rules:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Split ",(0,r.jsx)(n.code,{children:"process.argv"})," at the first ",(0,r.jsx)(n.code,{children:"--"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Everything before ",(0,r.jsx)(n.code,{children:"--"})," (after ",(0,r.jsx)(n.code,{children:"<scriptName>"}),") becomes ",(0,r.jsx)(n.code,{children:"pnpmArgs"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Everything after becomes ",(0,r.jsx)(n.code,{children:"scriptArgs"})," forwarded to ",(0,r.jsx)(n.code,{children:"pnpm ... run <scriptName> -- ..."}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Execution rules:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Default: ",(0,r.jsx)(n.code,{children:"pnpm -r <pnpmArgs> run --if-present <scriptName> [-- <scriptArgs>]"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"test:ci"}),": ",(0,r.jsx)(n.code,{children:"pnpm -r <pnpmArgs> run --no-sort --workspace-concurrency <n> test:ci [-- <scriptArgs>]"})," where ",(0,r.jsx)(n.code,{children:"<n>"})," defaults to ",(0,r.jsx)(n.code,{children:"process.env.TEST_CI_WORKSPACE_CONCURRENCY ?? 4"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"coverage"}),": same as default but followed by ",(0,r.jsx)(n.code,{children:"node tools/scripts/normalize-lcov-paths.mjs --quiet"})," (or integrate this as a \u201cpost step\u201d option in the runner)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"benchmark"}),": preserve existing wrapper help output when ",(0,r.jsx)(n.code,{children:"-h/--help"})," is provided (to document ",(0,r.jsx)(n.code,{children:"--"})," forwarding)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Error handling:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"pnpm"})," cannot be spawned (ENOENT), print a friendly message pointing to repo prerequisites (Node + pnpm/corepack) and exit non-zero."]}),"\n",(0,r.jsx)(n.li,{children:"Preserve pnpm exit codes for CI friendliness."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Package.json updates"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Replace root ",(0,r.jsx)(n.code,{children:".sh"})," invocations with Node runner invocations, for at least:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"build"}),", ",(0,r.jsx)(n.code,{children:"lint"}),", ",(0,r.jsx)(n.code,{children:"test"}),", ",(0,r.jsx)(n.code,{children:"test:ci"}),", ",(0,r.jsx)(n.code,{children:"benchmark"}),", ",(0,r.jsx)(n.code,{children:"coverage:md"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Keep ",(0,r.jsx)(n.code,{children:"lint:fast"})," and ",(0,r.jsx)(n.code,{children:"test:fast"})," as-is (already Node-based)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Shell scripts disposition"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Option A (preferred): remove ",(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-*.sh"})," after migrating ",(0,r.jsx)(n.code,{children:"package.json"})," to Node-based entrypoints."]}),"\n",(0,r.jsxs)(n.li,{children:["Option B: keep ",(0,r.jsx)(n.code,{children:".sh"})," scripts as thin wrappers for POSIX users (they call ",(0,r.jsx)(n.code,{children:"node ..."}),"), but do not reference them from ",(0,r.jsx)(n.code,{children:"package.json"})," so Windows users never need bash."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CRLF guardrails"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add a root ",(0,r.jsx)(n.code,{children:".gitattributes"})," with at least:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tools/scripts/*.sh text eol=lf"})," (if any ",(0,r.jsx)(n.code,{children:".sh"})," remain),"]}),"\n",(0,r.jsxs)(n.li,{children:["plus LF enforcement for any other shebang-driven executables that may be run directly (e.g. ",(0,r.jsx)(n.code,{children:"tools/scripts/*.mjs"}),", ",(0,r.jsx)(n.code,{children:"tools/**/src/*.ts"})," that start with ",(0,r.jsx)(n.code,{children:"#!"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["(Optional) Add a lightweight CI check that fails if tracked script files contain CRLF (TBD; ",(0,r.jsx)(n.code,{children:".gitattributes"})," is the primary defence)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CI changes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add a new job (or a matrix job) that runs on:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ubuntu-latest"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"windows-latest"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Steps:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Checkout"}),"\n",(0,r.jsx)(n.li,{children:"Setup pnpm + Node (same versions as existing workflow)"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"pnpm install --frozen-lockfile"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm run build"})," (or ",(0,r.jsx)(n.code,{children:'pnpm run build --filter "!@idle-engine/docs"'})," if CI time becomes a concern, but the goal is for the default to work everywhere)."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"63-operational-considerations",children:"6.3 Operational Considerations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Deployment"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No production deployment; this is developer/CI tooling. Roll out via normal PR merge."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Telemetry & Observability"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Not applicable (no runtime changes). Optional: print a single-line prefix when the runner starts for easier debugging, but avoid noisy output in CI."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security & Compliance"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"spawn(command, args, { stdio: 'inherit' })"})," and avoid ",(0,r.jsx)(n.code,{children:"shell: true"})," to prevent argument injection and quoting hazards."]}),"\n",(0,r.jsxs)(n.li,{children:["Treat forwarded args as opaque; do not attempt to interpret or eval them beyond ",(0,r.jsx)(n.code,{children:"--"})," splitting."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"7-work-breakdown--delivery-plan",children:"7. Work Breakdown & Delivery Plan"}),"\n",(0,r.jsx)(n.h3,{id:"71-issue-map",children:"7.1 Issue Map"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Issue Title"}),(0,r.jsx)(n.th,{children:"Scope Summary"}),(0,r.jsx)(n.th,{children:"Proposed Assignee/Agent"}),(0,r.jsx)(n.th,{children:"Dependencies"}),(0,r.jsx)(n.th,{children:"Acceptance Criteria"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"feat(tools): add cross-platform workspace runner"})}),(0,r.jsxs)(n.td,{children:["Implement Node-based workspace runner and per-command wiring (build/lint/test/test",":ci","/benchmark/coverage)"]}),(0,r.jsx)(n.td,{children:"Tooling Agent"}),(0,r.jsx)(n.td,{children:"Design doc approved"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"pnpm build"})," works on Windows PowerShell; argument forwarding parity maintained"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"chore(repo): add gitattributes for executable scripts"})}),(0,r.jsx)(n.td,{children:"Prevent CRLF regressions for scripts likely to be executed via shebang"}),(0,r.jsx)(n.td,{children:"Guardrails Agent"}),(0,r.jsxs)(n.td,{children:["Runner merged (if ",(0,r.jsx)(n.code,{children:".sh"})," removed, rules updated accordingly)"]}),(0,r.jsxs)(n.td,{children:["New checkouts keep LF endings; ",(0,r.jsx)(n.code,{children:"bash\\r"})," regression prevented"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ci: validate pnpm build on windows-latest"})}),(0,r.jsxs)(n.td,{children:["Add CI job that runs ",(0,r.jsx)(n.code,{children:"pnpm run build"})," on Ubuntu + Windows"]}),(0,r.jsx)(n.td,{children:"CI Agent"}),(0,r.jsx)(n.td,{children:"Runner merged"}),(0,r.jsx)(n.td,{children:"CI passes on both OS targets and fails if build breaks"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docs: document Windows prerequisites (if needed)"})}),(0,r.jsx)(n.td,{children:"Update README/contributor docs if any requirements remain"}),(0,r.jsx)(n.td,{children:"Docs Agent"}),(0,r.jsx)(n.td,{children:"Runner merged"}),(0,r.jsx)(n.td,{children:"Clear guidance for Windows users; no WSL requirement for build"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"72-milestones",children:"7.2 Milestones"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Phase 1"}),": Add Node runner + update ",(0,r.jsx)(n.code,{children:"package.json"})," so ",(0,r.jsx)(n.code,{children:"pnpm run build"})," works on Windows PowerShell."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Phase 2"}),": Add ",(0,r.jsx)(n.code,{children:".gitattributes"})," guardrails and CI Windows build job."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Phase 3 (optional)"}),": Expand Windows CI smoke coverage for ",(0,r.jsx)(n.code,{children:"pnpm lint"})," / ",(0,r.jsx)(n.code,{children:"pnpm test"})," once confidence is high."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"73-coordination-notes",children:"7.3 Coordination Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hand-off Package"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Issue 844: ",(0,r.jsx)(n.a,{href:"https://github.com/hansjm10/Idle-Game-Engine/issues/844",children:"https://github.com/hansjm10/Idle-Game-Engine/issues/844"})]}),"\n",(0,r.jsxs)(n.li,{children:["Existing scripts:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-build.sh"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-lint.sh"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-test.sh"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-test-ci.sh"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-benchmark.sh"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-coverage.sh"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Call sites:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["root ",(0,r.jsx)(n.code,{children:"package.json"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:".github/workflows/ci.yml"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"lefthook.yml"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Communication Cadence"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["One PR is ideal; if CI + tooling changes get large, split into (1) runner + scripts, (2) CI + ",(0,r.jsx)(n.code,{children:".gitattributes"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"8-agent-guidance--guardrails",children:"8. Agent Guidance & Guardrails"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Context Packets"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Read ",(0,r.jsx)(n.code,{children:"package.json"}),", existing ",(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-*.sh"}),", and ",(0,r.jsx)(n.code,{children:".github/workflows/ci.yml"})," before implementing."]}),"\n",(0,r.jsx)(n.li,{children:"Validate Windows behaviour using PowerShell on CI runners (local Windows validation optional)."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Prompting & Constraints"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Prefer Node stdlib and small, readable scripts; avoid introducing new dependencies just for argument parsing."}),"\n",(0,r.jsxs)(n.li,{children:["Preserve ",(0,r.jsx)(n.code,{children:"--"})," forwarding semantics and help behaviour for ",(0,r.jsx)(n.code,{children:"pnpm benchmark --help"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Safety Rails"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Do not use ",(0,r.jsx)(n.code,{children:"shell: true"})," for subprocesses; avoid manual quoting."]}),"\n",(0,r.jsxs)(n.li,{children:["Keep logs minimal; avoid output that could interfere with downstream JSON-tail parsing conventions (especially for ",(0,r.jsx)(n.code,{children:"generate"}),"/Vitest logs)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation Hooks"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"pnpm run build"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"pnpm run build --filter @idle-engine/core"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"pnpm benchmark --help"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm test:ci"})," (optional, once runners are migrated)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"9-alternatives-considered",children:"9. Alternatives Considered"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Document Git Bash/WSL as a requirement"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pros: minimal code changes."}),"\n",(0,r.jsx)(n.li,{children:"Cons: does not meet \u201cworks out-of-the-box on Windows PowerShell\u201d goal; increases contributor friction."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Add Windows ",(0,r.jsx)(n.code,{children:".cmd"}),"/PowerShell wrappers parallel to ",(0,r.jsx)(n.code,{children:".sh"})]}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pros: avoids Node scripting."}),"\n",(0,r.jsx)(n.li,{children:"Cons: duplicates logic across platforms; harder to keep parity; still needs CRLF guardrails."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Remove root scripts and require contributors to use raw pnpm recursive commands"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pros: no wrappers needed."}),"\n",(0,r.jsxs)(n.li,{children:["Cons: worsens ergonomics; breaks documented patterns like ",(0,r.jsx)(n.code,{children:"pnpm benchmark --filter ... -- ..."}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Use ",(0,r.jsx)(n.code,{children:"cross-env-shell"})," / shell abstraction libraries"]}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pros: familiar to some JS tooling."}),"\n",(0,r.jsx)(n.li,{children:"Cons: still depends on shell semantics; not as robust as argument-array spawning."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"10-testing--validation-plan",children:"10. Testing & Validation Plan"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Unit / Integration"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Rely primarily on CI to validate end-to-end behaviour (",(0,r.jsx)(n.code,{children:"pnpm run build"})," on Windows + Ubuntu)."]}),"\n",(0,r.jsxs)(n.li,{children:["Optional: add a small Node-level unit test for argument splitting (",(0,r.jsx)(n.code,{children:"--"})," placement) if the repo has a suitable test harness for tooling scripts."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Runner overhead should be negligible (one extra Node process). No benchmarks required."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tooling / A11y"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Not applicable."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"11-risks--mitigations",children:"11. Risks & Mitigations"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Argument forwarding parity regressions"})," (filters or ",(0,r.jsx)(n.code,{children:"--"})," forwarding behave differently):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Mitigation: mirror current ",(0,r.jsx)(n.code,{children:".sh"})," semantics; add CI usage that exercises ",(0,r.jsx)(n.code,{children:"--filter"})," and ",(0,r.jsx)(n.code,{children:"--"})," forwarding; keep runner small and covered by smoke checks."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Windows PATH resolution issues for ",(0,r.jsx)(n.code,{children:"pnpm"})]}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Mitigation: use ",(0,r.jsx)(n.code,{children:"spawn('pnpm', ...)"})," and provide a clear error when ",(0,r.jsx)(n.code,{children:"pnpm"})," is missing; CI uses ",(0,r.jsx)(n.code,{children:"pnpm/action-setup"})," to guarantee availability."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["CRLF regressions beyond ",(0,r.jsx)(n.code,{children:".sh"})," scripts"]})," (other shebang executables):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Mitigation: enforce LF via ",(0,r.jsx)(n.code,{children:".gitattributes"})," for all directly-executable scripts with shebangs (scope TBD)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CI job duration increases on Windows"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Mitigation: start with build-only; optionally exclude docs via filter if needed; expand scope incrementally."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"12-rollout-plan",children:"12. Rollout Plan"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Milestones"}),":","\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Land Node runner + switch root scripts from ",(0,r.jsx)(n.code,{children:".sh"})," to ",(0,r.jsx)(n.code,{children:"node tools/scripts/..."}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:".gitattributes"})," enforcing LF for relevant executables."]}),"\n",(0,r.jsx)(n.li,{children:"Add CI build verification on Windows + Ubuntu."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Migration Strategy"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Developers keep using ",(0,r.jsx)(n.code,{children:"pnpm build"})," / ",(0,r.jsx)(n.code,{children:"pnpm lint"})," / ",(0,r.jsx)(n.code,{children:"pnpm test"})," as before."]}),"\n",(0,r.jsxs)(n.li,{children:["If any automation calls ",(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-*.sh"})," directly, migrate it to the new Node entrypoints (or keep ",(0,r.jsx)(n.code,{children:".sh"})," as a compatibility wrapper during a transition window)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Communication"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Update issue/PR description with Windows confirmation steps and any remaining prerequisites (ideally: \u201cno bash required for build\u201d)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"13-open-questions",children:"13. Open Questions"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Should we delete ",(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-*.sh"})," entirely, or keep them as POSIX wrappers for a deprecation period?"]}),"\n",(0,r.jsxs)(n.li,{children:["How broad should ",(0,r.jsx)(n.code,{children:".gitattributes"})," LF enforcement be (only ",(0,r.jsx)(n.code,{children:"tools/scripts/*"}),", or all files with shebangs across ",(0,r.jsx)(n.code,{children:"tools/"})," and ",(0,r.jsx)(n.code,{children:"packages/"}),")?"]}),"\n",(0,r.jsxs)(n.li,{children:["Should Windows CI validate only ",(0,r.jsx)(n.code,{children:"pnpm run build"}),", or also smoke ",(0,r.jsx)(n.code,{children:"pnpm lint"}),"/",(0,r.jsx)(n.code,{children:"pnpm test"})," once runners are migrated?"]}),"\n",(0,r.jsxs)(n.li,{children:["Do we want to add an explicit \u201cpreflight\u201d check in the runner (e.g. detect ",(0,r.jsx)(n.code,{children:"process.platform === 'win32'"})," and confirm ",(0,r.jsx)(n.code,{children:"pnpm"})," is present) with a more structured error message, or is ENOENT handling sufficient?"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"14-follow-up-work",children:"14. Follow-Up Work"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Extend the Windows CI job to run ",(0,r.jsx)(n.code,{children:"pnpm lint"})," and ",(0,r.jsx)(n.code,{children:"pnpm test:ci"})," (once build is stable)."]}),"\n",(0,r.jsxs)(n.li,{children:["Consider adding a lightweight \u201cline endings check\u201d CI step to fail fast when CRLF appears in shebang executables (if ",(0,r.jsx)(n.code,{children:".gitattributes"})," alone proves insufficient)."]}),"\n",(0,r.jsxs)(n.li,{children:["Add a short \u201cWindows setup\u201d section to ",(0,r.jsx)(n.code,{children:"docs/contributor-handbook.md"})," if new contributors continue to hit environment issues."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"15-references",children:"15. References"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Issue 844: ",(0,r.jsx)(n.a,{href:"https://github.com/hansjm10/Idle-Game-Engine/issues/844",children:"https://github.com/hansjm10/Idle-Game-Engine/issues/844"})]}),"\n",(0,r.jsxs)(n.li,{children:["Root scripts: ",(0,r.jsx)(n.code,{children:"package.json"})]}),"\n",(0,r.jsxs)(n.li,{children:["Bash workspace runners: ",(0,r.jsx)(n.code,{children:"tools/scripts/run-workspace-*.sh"})]}),"\n",(0,r.jsxs)(n.li,{children:["CI workflow: ",(0,r.jsx)(n.code,{children:".github/workflows/ci.yml"})]}),"\n",(0,r.jsxs)(n.li,{children:["Lefthook hooks: ",(0,r.jsx)(n.code,{children:"lefthook.yml"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"appendix-a--glossary",children:"Appendix A \u2014 Glossary"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CRLF / LF"}),": Windows (",(0,r.jsx)(n.code,{children:"\\r\\n"}),") vs Unix (",(0,r.jsx)(n.code,{children:"\\n"}),") line endings; CRLF in shebang lines can break Unix execution (",(0,r.jsx)(n.code,{children:"bash\\r"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Shebang"}),": First line of an executable script (e.g. ",(0,r.jsx)(n.code,{children:"#!/usr/bin/env bash"}),") used by Unix-like OSes to select an interpreter."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"WSL"}),": Windows Subsystem for Linux."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"appendix-b--change-log",children:"Appendix B \u2014 Change Log"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Date"}),(0,r.jsx)(n.th,{children:"Author"}),(0,r.jsx)(n.th,{children:"Change Summary"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2026-01-25"}),(0,r.jsx)(n.td,{children:"Ralph"}),(0,r.jsx)(n.td,{children:"Initial draft"})]})})]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},7678:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>c});var i=s(9430);const r={},l=i.createContext(r);function d(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);