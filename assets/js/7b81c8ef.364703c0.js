"use strict";(globalThis.webpackChunk_idle_engine_docs=globalThis.webpackChunk_idle_engine_docs||[]).push([[9061],{4649:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"diagnostic-timeline-design","title":"Diagnostic Timeline Design Document","description":"Document Control","source":"@site/../../docs/diagnostic-timeline-design.md","sourceDirName":".","slug":"/diagnostic-timeline-design","permalink":"/Idle-Game-Engine/diagnostic-timeline-design","draft":false,"unlisted":false,"editUrl":"https://github.com/hansjm10/Idle-Game-Engine/edit/main/docs/../../docs/diagnostic-timeline-design.md","tags":[],"version":"current","frontMatter":{},"sidebar":"developerSidebar","previous":{"title":"Resource State Storage Design","permalink":"/Idle-Game-Engine/resource-state-storage-design"},"next":{"title":"Content DSL Schema Design","permalink":"/Idle-Game-Engine/content-dsl-schema-design"}}');var i=s(5270),r=s(7678);const o={},a="Diagnostic Timeline Design Document",c={},l=[{value:"Document Control",id:"document-control",level:2},{value:"1. Summary",id:"1-summary",level:2},{value:"2. Context &amp; Problem Statement",id:"2-context--problem-statement",level:2},{value:"3. Goals &amp; Non-Goals",id:"3-goals--non-goals",level:2},{value:"4. Stakeholders, Agents &amp; Impacted Surfaces",id:"4-stakeholders-agents--impacted-surfaces",level:2},{value:"5. Current State",id:"5-current-state",level:2},{value:"6. Proposed Solution",id:"6-proposed-solution",level:2},{value:"6.1 Architecture Overview",id:"61-architecture-overview",level:3},{value:"6.2 Detailed Design",id:"62-detailed-design",level:3},{value:"6.3 Operational Considerations",id:"63-operational-considerations",level:3},{value:"7. Work Breakdown &amp; Delivery Plan",id:"7-work-breakdown--delivery-plan",level:2},{value:"7.1 Issue Map",id:"71-issue-map",level:3},{value:"7.2 Milestones",id:"72-milestones",level:3},{value:"7.3 Coordination Notes",id:"73-coordination-notes",level:3},{value:"8. Agent Guidance &amp; Guardrails",id:"8-agent-guidance--guardrails",level:2},{value:"9. Alternatives Considered",id:"9-alternatives-considered",level:2},{value:"10. Testing &amp; Validation Plan",id:"10-testing--validation-plan",level:2},{value:"11. Risks &amp; Mitigations",id:"11-risks--mitigations",level:2},{value:"12. Rollout Plan",id:"12-rollout-plan",level:2},{value:"13. Open Questions",id:"13-open-questions",level:2},{value:"14. Follow-Up Work",id:"14-follow-up-work",level:2},{value:"15. References",id:"15-references",level:2},{value:"Appendix A \u2014 Glossary",id:"appendix-a--glossary",level:2},{value:"Appendix B \u2014 Change Log",id:"appendix-b--change-log",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"diagnostic-timeline-design-document",children:"Diagnostic Timeline Design Document"})}),"\n",(0,i.jsx)(n.h2,{id:"document-control",children:"Document Control"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Title"}),": Diagnostic Timeline Instrumentation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Authors"}),": Jordan Hans"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reviewers"}),": TODO \u2013 Runtime Core + Shell Web maintainers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Status"}),": Draft"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Last Updated"}),": 2025-12-14"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Related Issues"}),": Idle-Game-Engine#9; Idle-Game-Engine#196"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Execution Mode"}),": AI-led"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"1-summary",children:"1. Summary"}),"\n",(0,i.jsxs)(n.p,{children:["The Diagnostic Timeline is the runtime\u2019s structured, structured-clone-safe trace of fixed-step tick execution. It records per-tick wall-clock duration and metadata (queue metrics, event back-pressure counters, per-system spans) so tooling can attribute jitter or over-budget ticks to specific runtime work while keeping the simulation deterministic and the diagnostics payload portable across Workers and Node hosts.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-structured-clone",id:"user-content-fnref-structured-clone","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})]}),"\n",(0,i.jsx)(n.h2,{id:"2-context--problem-statement",children:"2. Context & Problem Statement"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Background"}),": ",(0,i.jsx)(n.code,{children:"packages/core"})," runs a deterministic fixed-step loop (default 100ms) that may process multiple steps per host frame (accumulator catch-up). When ticks slow down, developers need to understand whether the source is command backlog, event pressure, or a single expensive system."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Problem"}),": Coarse per-tick counters do not explain ",(0,i.jsx)(n.em,{children:"why"})," a tick exceeded its budget or ",(0,i.jsx)(n.em,{children:"which"})," system introduced jitter. Without a bounded, queryable timeline, downstream tooling (shell devtools overlays, automated profiling agents, CI verification) cannot surface actionable diagnostics."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Forces"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Diagnostics must not affect simulation determinism; they cannot feed back into game state decisions."}),"\n",(0,i.jsx)(n.li,{children:"Data must be safe to send across structured-clone boundaries (Worker \u2194 main thread) without leaking mutable references."}),"\n",(0,i.jsx)(n.li,{children:"Instrumentation must be bounded in memory and low-overhead enough to keep within tick budgets."}),"\n",(0,i.jsx)(n.li,{children:"Production builds must remain opt-in to avoid payload/telemetry noise."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"3-goals--non-goals",children:"3. Goals & Non-Goals"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Goals"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Capture high-resolution timing per runtime tick, including per-system execution spans."}),"\n",(0,i.jsx)(n.li,{children:"Attribute time spent to individual systems while preserving deterministic execution."}),"\n",(0,i.jsx)(n.li,{children:"Record queue depth / throughput and event-bus counters alongside timing data to contextualize slow ticks."}),"\n",(0,i.jsxs)(n.li,{children:["Provide a ring-buffer snapshot + delta API that is structured-clone safe.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-structured-clone",id:"user-content-fnref-structured-clone-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})]}),"\n",(0,i.jsx)(n.li,{children:"Emit guard-rail warnings (slow ticks, slow systems) through the telemetry facade so Prometheus adapters and logs can alert without devtools attached."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Non-Goals"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Shipping a full visualization layer inside archived presentation shells (UI overlays remain separate follow-up work)."}),"\n",(0,i.jsx)(n.li,{children:"Persisting diagnostics beyond the in-memory ring buffer or exporting them to external observability stacks by default."}),"\n",(0,i.jsx)(n.li,{children:"Replacing existing event bus diagnostics; the timeline consumes snapshots but does not redefine the event-bus data model."}),"\n",(0,i.jsx)(n.li,{children:"Enforcing adaptive scheduling or auto-throttling; scope ends at recording and surfacing metadata."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"4-stakeholders-agents--impacted-surfaces",children:"4. Stakeholders, Agents & Impacted Surfaces"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Primary Stakeholders"}),": Runtime Core maintainers; Tooling/Observability maintainers; partner integrators."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Agent Roles"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Docs Agent"}),": Maintains this design, cross-links, and changelog."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Runtime Diagnostics Agent"}),": Extends runtime instrumentation and keeps diagnostics schemas stable."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Shell Devtools Agent"}),": Builds UI surfaces that consume diagnostics updates from the worker bridge (downstream shells)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Observability Agent"}),": Wires telemetry warnings into Prometheus/exporters and validates signal quality."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Affected Packages/Services"}),": ",(0,i.jsx)(n.code,{children:"packages/core"})," (runtime, diagnostics, telemetry), presentation shell integrations (archived), ",(0,i.jsx)(n.code,{children:"tools/"})," (benchmarks/sim harnesses), ",(0,i.jsx)(n.code,{children:"docs/"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compatibility Considerations"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Diagnostics payloads must remain plain JSON-friendly objects and structured-clone safe (no functions, class instances, cyclic graphs)."}),"\n",(0,i.jsxs)(n.li,{children:["Worker message schemas (",(0,i.jsx)(n.code,{children:"DIAGNOSTICS_UPDATE"}),") must remain backward compatible; large payloads should remain opt-in."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"5-current-state",children:"5. Current State"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/core/src/diagnostics/diagnostic-timeline.ts"})," implements a fixed-capacity ring buffer with a monotonic ",(0,i.jsx)(n.code,{children:"head"})," cursor and ",(0,i.jsx)(n.code,{children:"dropped"})," counter so clients can request deltas and detect buffer rollover.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-otel-delta",id:"user-content-fnref-otel-delta","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/core/src/diagnostics/runtime-diagnostics-controller.ts"})," wraps the recorder with runtime helpers for per-system spans, tick metadata, and telemetry warnings (",(0,i.jsx)(n.code,{children:"TickExecutionSlow"}),", ",(0,i.jsx)(n.code,{children:"SystemExecutionSlow"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/core/src/index.ts"})," records per-tick system spans, command-queue size/capture/execution counts, event bus back-pressure metrics, and accumulator backlog when diagnostics are enabled."]}),"\n",(0,i.jsxs)(n.li,{children:["Archived presentation shells supported ",(0,i.jsx)(n.code,{children:"DIAGNOSTICS_SUBSCRIBE"}),"/",(0,i.jsx)(n.code,{children:"DIAGNOSTICS_UPDATE"}),"; downstream shells must implement their own subscription APIs to opt in to streaming deltas."]}),"\n",(0,i.jsxs)(n.li,{children:["Known gaps:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Named tick phases are supported (",(0,i.jsx)(n.code,{children:"RuntimeTickDiagnostics.addPhase"}),") but the core tick loop does not currently record command/event/publish phases."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ResourcePublishTransport"})," can carry an immutable diagnostics payload, but publish work itself is not timed as a phase today."]}),"\n",(0,i.jsxs)(n.li,{children:["The recorder default capacity is currently short (120 entries) and may need tuning for longer inspection windows.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-performanceobserver-buffer",id:"user-content-fnref-performanceobserver-buffer","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"6-proposed-solution",children:"6. Proposed Solution"}),"\n",(0,i.jsx)(n.h3,{id:"61-architecture-overview",children:"6.1 Architecture Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Record diagnostics alongside the deterministic tick loop, store them in a fixed-capacity ring buffer, and expose a delta API keyed by a monotonic ",(0,i.jsx)(n.code,{children:"head"}),". The worker bridge enables diagnostics only when tooling subscribes, then streams deltas through a dedicated envelope so normal state updates stay lean."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"IdleEngineRuntime.tick()\n  -> diagnostics.beginTick(step)\n  -> execute commands / dispatch events / run systems\n  -> diagnostics.complete() (writes ring-buffer entry)\n\nWorkerBridge (archived)\n  -> DIAGNOSTICS_SUBSCRIBE enables runtime diagnostics\n  -> runtime.readDiagnosticsDelta(lastHead) after ticks\n  -> DIAGNOSTICS_UPDATE streams deltas to UI\n"})}),"\n",(0,i.jsx)(n.h3,{id:"62-detailed-design",children:"6.2 Detailed Design"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data Model & Storage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Each ",(0,i.jsx)(n.code,{children:"DiagnosticTimelineEntry"})," records ",(0,i.jsx)(n.code,{children:"{ tick, startedAt, endedAt, durationMs, budgetMs?, isSlow, overBudgetMs, error?, metadata? }"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"metadata"})," attaches optional, structured-clone-safe payloads: accumulator backlog, queue metrics, event metrics, system spans, and (future) named phases."]}),"\n",(0,i.jsxs)(n.li,{children:["The recorder stores entries in a fixed-capacity circular buffer. Consumers read snapshots via ",(0,i.jsx)(n.code,{children:"readDelta(sinceHead?)"}),", receiving ",(0,i.jsx)(n.code,{children:"{ entries, head, dropped, configuration }"})," so they can detect overwrites.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-otel-delta",id:"user-content-fnref-otel-delta-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})})]}),"\n",(0,i.jsxs)(n.li,{children:["Errors are serialized into a plain ",(0,i.jsx)(n.code,{children:"ErrorLike"})," object to keep worker transfers deterministic across environments.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-mdn-structured-clone",id:"user-content-fnref-mdn-structured-clone","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"4"})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Clock Abstraction"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"HighResolutionClock"})," (",(0,i.jsx)(n.code,{children:"now(): number"}),") backed by ",(0,i.jsx)(n.code,{children:"performance.now()"})," when available, Node ",(0,i.jsx)(n.code,{children:"hrtime.bigint()"})," when available, and ",(0,i.jsx)(n.code,{children:"Date.now()"})," as a last resort."]}),"\n",(0,i.jsx)(n.li,{children:"Allow dependency injection for deterministic tests and benchmark harnesses."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Runtime Integration"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Diagnostics are opt-in via ",(0,i.jsx)(n.code,{children:"IdleEngineRuntimeOptions.diagnostics.timeline"})," or ",(0,i.jsx)(n.code,{children:"runtime.enableDiagnostics()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Each tick uses ",(0,i.jsx)(n.code,{children:"diagnostics.beginTick(step)"})," and records:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Per-system spans via ",(0,i.jsx)(n.code,{children:"tickDiagnostics.startSystem(system.id)"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Queue metrics (size before/after and executed/captured/skipped counts) from the command queue."}),"\n",(0,i.jsxs)(n.li,{children:["Event-bus metrics from ",(0,i.jsx)(n.code,{children:"eventBus.getBackPressureSnapshot()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Accumulator backlog (",(0,i.jsx)(n.code,{children:"this.accumulator"}),") so tooling can correlate catch-up pressure with slow ticks.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-fixed-step-lag",id:"user-content-fnref-fixed-step-lag","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"5"})}),(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-gaffer-accumulator",id:"user-content-fnref-gaffer-accumulator","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"6"})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["The controller emits telemetry warnings:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TickExecutionSlow"})," when a tick exceeds its configured budget."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"SystemExecutionSlow"})," when a system exceeds its configured budget (with rolling history for context).",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-datadog-multi-alert",id:"user-content-fnref-datadog-multi-alert","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"7"})})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Worker & Transport Integration"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Worker enables diagnostics on-demand via ",(0,i.jsx)(n.code,{children:"DIAGNOSTICS_SUBSCRIBE"}),", resets its cursor, and emits an initial baseline ",(0,i.jsx)(n.code,{children:"DIAGNOSTICS_UPDATE"})," so tooling learns configuration immediately."]}),"\n",(0,i.jsxs)(n.li,{children:["After each tick, the worker calls ",(0,i.jsx)(n.code,{children:"runtime.readDiagnosticsDelta(lastHead)"})," and forwards updates only when new entries arrive or drops occurred."]}),"\n",(0,i.jsxs)(n.li,{children:["Resource publishing can optionally attach a diagnostics payload (",(0,i.jsx)(n.code,{children:"diagnostics?: DiagnosticTimelineResult"}),") to transports without affecting consumers when disabled."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Extensibility (Planned)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Record named phases (",(0,i.jsx)(n.code,{children:"commands"}),", ",(0,i.jsx)(n.code,{children:"eventDispatch"}),", ",(0,i.jsx)(n.code,{children:"publish"}),", etc.) via ",(0,i.jsx)(n.code,{children:"RuntimeTickDiagnostics.addPhase(...)"})," so the timeline can attribute time to sub-phases even when system spans are flat."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"63-operational-considerations",children:"6.3 Operational Considerations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Telemetry & Observability"}),": ",(0,i.jsx)(n.code,{children:"packages/core/src/telemetry-prometheus.ts"})," translates slow-tick and slow-system warnings into ",(0,i.jsx)(n.code,{children:"runtime_ticks_over_budget_total"})," and ",(0,i.jsx)(n.code,{children:"runtime_system_slow_total"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance"}),": Keep diagnostics disabled by default in production paths; validate overhead with ",(0,i.jsx)(n.code,{children:"packages/core/benchmarks/diagnostic-timeline-overhead.bench.mjs"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security & Privacy"}),": Diagnostics must not include PII; errors should be serialized and sanitized as needed before crossing process boundaries."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"7-work-breakdown--delivery-plan",children:"7. Work Breakdown & Delivery Plan"}),"\n",(0,i.jsx)(n.h3,{id:"71-issue-map",children:"7.1 Issue Map"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Issue Title"}),(0,i.jsx)(n.th,{children:"Scope Summary"}),(0,i.jsx)(n.th,{children:"Proposed Assignee/Agent"}),(0,i.jsx)(n.th,{children:"Dependencies"}),(0,i.jsx)(n.th,{children:"Acceptance Criteria"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"docs: migrate Diagnostic Timeline design to template"}),(0,i.jsxs)(n.td,{children:["Align ",(0,i.jsx)(n.code,{children:"docs/diagnostic-timeline-design.md"})," with the standard template and add agent guidance"]}),(0,i.jsx)(n.td,{children:"Docs Agent"}),(0,i.jsx)(n.td,{children:"Template stable"}),(0,i.jsx)(n.td,{children:"Document merged; changelog updated; issue map actionable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"feat(core): record tick phases in diagnostics"}),(0,i.jsx)(n.td,{children:"Emit named phases for commands + event dispatch + publish"}),(0,i.jsx)(n.td,{children:"Runtime Diagnostics Agent"}),(0,i.jsx)(n.td,{children:"Doc approval"}),(0,i.jsxs)(n.td,{children:["Phases visible in ",(0,i.jsx)(n.code,{children:"DiagnosticTimelineEntry.metadata.phases"}),"; unit tests cover stability"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"feat(core): capture publish-phase diagnostics"}),(0,i.jsx)(n.td,{children:"Time resource publish/build work and attach phase durations"}),(0,i.jsx)(n.td,{children:"Runtime Diagnostics Agent"}),(0,i.jsx)(n.td,{children:"Phase recording"}),(0,i.jsx)(n.td,{children:"Publish work appears as a phase when enabled; transport remains backward compatible"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"feat(presentation-shell): diagnostics timeline UI panel (archived)"}),(0,i.jsxs)(n.td,{children:["Consume ",(0,i.jsx)(n.code,{children:"DIAGNOSTICS_UPDATE"})," and render recent ticks/systems"]}),(0,i.jsx)(n.td,{children:"Shell Devtools Agent"}),(0,i.jsx)(n.td,{children:"Diagnostics stream stable"}),(0,i.jsx)(n.td,{children:"UI can toggle diagnostics; renders deltas without impacting baseline state updates"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"docs: document enabling diagnostics"}),(0,i.jsxs)(n.td,{children:["Add usage notes to ",(0,i.jsx)(n.code,{children:"docs/runtime-step-lifecycle.md"})," and/or shell guides"]}),(0,i.jsx)(n.td,{children:"Docs Agent"}),(0,i.jsx)(n.td,{children:"Feature stability"}),(0,i.jsx)(n.td,{children:"Docs show how to subscribe/toggle; links are repo-relative and current"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"72-milestones",children:"7.2 Milestones"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Phase 1"}),": Land doc migration + phase recording (target: 1\u20132 weeks)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Phase 2"}),": Publish-phase capture + shell UI surfaces (target: next iteration after Phase 1)."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"73-coordination-notes",children:"7.3 Coordination Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Hand-off Package"}),": ",(0,i.jsx)(n.code,{children:"docs/diagnostic-timeline-design.md"}),", ",(0,i.jsx)(n.code,{children:"packages/core/src/diagnostics/"}),", ",(0,i.jsx)(n.code,{children:"packages/core/src/index.ts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Communication Cadence"}),": Post status updates in the GitHub issue thread for each mapped issue at least twice weekly; escalate schema changes before implementation."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"8-agent-guidance--guardrails",children:"8. Agent Guidance & Guardrails"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Context Packets"}),": ",(0,i.jsx)(n.code,{children:"docs/diagnostic-timeline-design.md"}),", ",(0,i.jsx)(n.code,{children:"docs/design-document-template.md"}),", ",(0,i.jsx)(n.code,{children:"docs/idle-engine-design.md"}),", ",(0,i.jsx)(n.code,{children:"packages/core/src/diagnostics/diagnostic-timeline.ts"}),", ",(0,i.jsx)(n.code,{children:"packages/core/src/diagnostics/runtime-diagnostics-controller.ts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Prompting & Constraints"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Keep the simulation deterministic: diagnostics may observe clocks but must not influence simulation state decisions."}),"\n",(0,i.jsx)(n.li,{children:"Keep diagnostics payloads structured-clone safe (plain objects/arrays; no functions/classes; avoid cyclic graphs)."}),"\n",(0,i.jsxs)(n.li,{children:["Follow workspace TypeScript conventions (",(0,i.jsx)(n.code,{children:"import type"}),", consistent exports) and Conventional Commits."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Safety Rails"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Do not enable diagnostics by default in production code paths without explicit stakeholder sign-off."}),"\n",(0,i.jsx)(n.li,{children:"Do not introduce unbounded allocations; respect ring-buffer capacity and avoid per-tick logging."}),"\n",(0,i.jsxs)(n.li,{children:["Do not modify checked-in ",(0,i.jsx)(n.code,{children:"dist/"})," outputs by hand."]}),"\n",(0,i.jsxs)(n.li,{children:["Avoid history rewrites (",(0,i.jsx)(n.code,{children:"git reset --hard"}),", force pushes) while collaborating."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validation Hooks"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pnpm lint"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pnpm test --filter @idle-engine/core"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pnpm --filter @idle-engine/core run benchmark:diagnostics"})," (when changing capture overhead)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"9-alternatives-considered",children:"9. Alternatives Considered"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Counters-only telemetry"}),": Too coarse to attribute regressions to specific systems/phases."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Browser-only tracing (PerformanceObserver/Long Tasks API)"}),": Helpful for UI thread stalls but not portable to Node hosts and does not map cleanly to deterministic tick steps.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-longtasks",id:"user-content-fnref-longtasks","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"8"})})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Full OpenTelemetry tracing integration"}),": Powerful but adds complexity and exporter concerns; the current design keeps the runtime dependent on a small, stable telemetry facade.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-otel-api-sdk",id:"user-content-fnref-otel-api-sdk","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"9"})})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"10-testing--validation-plan",children:"10. Testing & Validation Plan"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unit / Integration"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ring-buffer behavior, delta semantics, and error serialization (",(0,i.jsx)(n.code,{children:"packages/core/src/diagnostics/diagnostic-timeline.test.ts"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Runtime integration and structured-clone safety (",(0,i.jsx)(n.code,{children:"packages/core/src/command-recorder.test.ts"}),")."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance"}),": Track benchmark deltas for diagnostics overhead; investigate when overhead exceeds budget targets."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tooling / A11y"}),": If downstream shells add new diagnostics UI flows, run their UI test suites."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"11-risks--mitigations",children:"11. Risks & Mitigations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Clock precision variance across environments"}),": Provide explicit clock injection and deterministic tests; fall back to ",(0,i.jsx)(n.code,{children:"Date.now()"})," only when necessary."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Diagnostics flood in production builds"}),": Keep opt-in defaults and stream deltas only while a subscriber is active.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-postmessage-copy",id:"user-content-fnref-postmessage-copy","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"10"})}),(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-transferable-zero-copy",id:"user-content-fnref-transferable-zero-copy","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"11"})})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Telemetry noise from transient spikes"}),": Prefer budgets and rolling history; expose thresholds in configuration so integrators can tune sensitivity.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-datadog-multi-alert",id:"user-content-fnref-datadog-multi-alert-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"7"})})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"12-rollout-plan",children:"12. Rollout Plan"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Milestones"}),": Keep diagnostics disabled by default; enable only via explicit worker/UI subscription; roll out phase recording behind the same opt-in."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Migration Strategy"}),": Maintain backwards compatibility for ",(0,i.jsx)(n.code,{children:"DiagnosticTimelineResult"})," schema; add optional fields (like phases) without breaking consumers."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Communication"}),": Link follow-up issues from ",(0,i.jsx)(n.code,{children:"Idle-Game-Engine#9"})," and update developer docs once phase instrumentation lands."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"13-open-questions",children:"13. Open Questions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Should the default ring-buffer capacity be increased (e.g., from 120 to 512) to provide longer history without drops?",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-performanceobserver-buffer",id:"user-content-fnref-performanceobserver-buffer-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})})]}),"\n",(0,i.jsx)(n.li,{children:"Should downstream shells enable diagnostics automatically in development mode (e.g., behind a debug flag), or remain strictly user-triggered?"}),"\n",(0,i.jsx)(n.li,{children:"Should the timeline include per-command-type spans (high cardinality risk) or remain system/phase focused?"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"14-follow-up-work",children:"14. Follow-Up Work"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Add a devtools overlay/panel in downstream shells that visualizes system spans and slow-tick warnings."}),"\n",(0,i.jsxs)(n.li,{children:["Explore exporting diagnostics to Perfetto/trace-event formats for offline analysis.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-perfetto-track-events",id:"user-content-fnref-perfetto-track-events","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"12"})})]}),"\n",(0,i.jsxs)(n.li,{children:["Add docs coverage in ",(0,i.jsx)(n.code,{children:"docs/runtime-step-lifecycle.md"})," once the phase model is finalized."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"15-references",children:"15. References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"docs/design-document-template.md"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"docs/runtime-step-lifecycle.md"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"packages/core/src/diagnostics/diagnostic-timeline.ts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"packages/core/src/diagnostics/runtime-diagnostics-controller.ts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"packages/core/src/index.ts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"packages/core/src/telemetry-prometheus.ts"})}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n",(0,i.jsx)(n.li,{}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"appendix-a--glossary",children:"Appendix A \u2014 Glossary"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Accumulator"}),": The runtime\u2019s remaining host-time backlog used to decide how many fixed steps to execute on each ",(0,i.jsx)(n.code,{children:"tick()"})," call."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Delta (Diagnostics)"}),": A timeline slice returned by ",(0,i.jsx)(n.code,{children:"readDiagnosticsDelta(lastHead)"})," that includes only entries after a cursor."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Head"}),": A monotonic counter used as the cursor for diagnostic deltas; enables consumers to detect dropped/overwritten entries.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-otel-delta",id:"user-content-fnref-otel-delta-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ring Buffer"}),": Fixed-capacity storage that overwrites oldest entries when full."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Structured Clone"}),": The browser/Worker algorithm used by ",(0,i.jsx)(n.code,{children:"postMessage()"})," to copy objects between threads/contexts.",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-structured-clone",id:"user-content-fnref-structured-clone-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tick"}),": One deterministic fixed-step simulation iteration."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"appendix-b--change-log",children:"Appendix B \u2014 Change Log"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Date"}),(0,i.jsx)(n.th,{children:"Author"}),(0,i.jsx)(n.th,{children:"Change Summary"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"2025-12-14"}),(0,i.jsx)(n.td,{children:"Jordan Hans"}),(0,i.jsx)(n.td,{children:"Migrated document to standard template; added issue map and agent guidance; refreshed references for current diagnostics implementation (Fixes #196)"})]})})]}),"\n","\n",(0,i.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,i.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{id:"user-content-fn-structured-clone",children:["\n",(0,i.jsxs)(n.p,{children:["\u201cStructured clone creates a copy of most types of objects, and the original object is not transferred.\u201d \u2014 ",(0,i.jsx)(n.em,{children:"Structured clone algorithm"}),", MDN Web Docs. ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm",children:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-structured-clone","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})," ",(0,i.jsxs)(n.a,{href:"#user-content-fnref-structured-clone-2","data-footnote-backref":"","aria-label":"Back to reference 1-2",className:"data-footnote-backref",children:["\u21a9",(0,i.jsx)(n.sup,{children:"2"})]})," ",(0,i.jsxs)(n.a,{href:"#user-content-fnref-structured-clone-3","data-footnote-backref":"","aria-label":"Back to reference 1-3",className:"data-footnote-backref",children:["\u21a9",(0,i.jsx)(n.sup,{children:"3"})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-otel-delta",children:["\n",(0,i.jsxs)(n.p,{children:["\u201cMetrics that are input and output with Delta temporality unburden the client from keeping high-cardinality state\u2026 The use of deltas allows downstream services to bear the cost of conversion into cumulative timeseries.\u201d \u2014 ",(0,i.jsx)(n.em,{children:"Metrics Data Model"}),", OpenTelemetry Specification. ",(0,i.jsx)(n.a,{href:"https://raw.githubusercontent.com/open-telemetry/opentelemetry-specification/main/specification/metrics/data-model.md",children:"https://raw.githubusercontent.com/open-telemetry/opentelemetry-specification/main/specification/metrics/data-model.md"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-otel-delta","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})," ",(0,i.jsxs)(n.a,{href:"#user-content-fnref-otel-delta-2","data-footnote-backref":"","aria-label":"Back to reference 2-2",className:"data-footnote-backref",children:["\u21a9",(0,i.jsx)(n.sup,{children:"2"})]})," ",(0,i.jsxs)(n.a,{href:"#user-content-fnref-otel-delta-3","data-footnote-backref":"","aria-label":"Back to reference 2-3",className:"data-footnote-backref",children:["\u21a9",(0,i.jsx)(n.sup,{children:"3"})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-performanceobserver-buffer",children:["\n",(0,i.jsxs)(n.p,{children:["PerformanceObserver constructor docs noting dropped entries when the internal buffer fills and recommending explicit buffer sizing. ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver/PerformanceObserver",children:"https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver/PerformanceObserver"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-performanceobserver-buffer","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"\u21a9"})," ",(0,i.jsxs)(n.a,{href:"#user-content-fnref-performanceobserver-buffer-2","data-footnote-backref":"","aria-label":"Back to reference 3-2",className:"data-footnote-backref",children:["\u21a9",(0,i.jsx)(n.sup,{children:"2"})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-mdn-structured-clone",children:["\n",(0,i.jsxs)(n.p,{children:["\u201cBrowsers must serialize the properties ",(0,i.jsx)(n.code,{children:"name"})," and ",(0,i.jsx)(n.code,{children:"message"}),", and are expected to serialize other \u2018interesting\u2019 properties of the errors such as ",(0,i.jsx)(n.code,{children:"stack"}),"...\u201d \u2014 ",(0,i.jsx)(n.em,{children:"Structured clone algorithm"}),", MDN content repository. ",(0,i.jsx)(n.a,{href:"https://raw.githubusercontent.com/mdn/content/main/files/en-us/web/api/web_workers_api/structured_clone_algorithm/index.md",children:"https://raw.githubusercontent.com/mdn/content/main/files/en-us/web/api/web_workers_api/structured_clone_algorithm/index.md"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-mdn-structured-clone","data-footnote-backref":"","aria-label":"Back to reference 4",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-fixed-step-lag",children:["\n",(0,i.jsxs)(n.p,{children:["Glenn Fiedler, \u201cFix Your Timestep!\u201d, ",(0,i.jsx)(n.em,{children:"Gaffer On Games"}),". Discusses accumulating frame deltas, executing multiple fixed steps during catch-up, and retaining the remainder in an accumulator to reflect real-time lag. ",(0,i.jsx)(n.a,{href:"https://gafferongames.com/post/fix_your_timestep/",children:"https://gafferongames.com/post/fix_your_timestep/"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-fixed-step-lag","data-footnote-backref":"","aria-label":"Back to reference 5",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-gaffer-accumulator",children:["\n",(0,i.jsxs)(n.p,{children:["Glenn Fiedler, \u201cFix Your Timestep!\u201d, ",(0,i.jsx)(n.em,{children:"Gaffer On Games"}),". Notes that the accumulator remainder directly expresses how far the simulation is between fixed steps, making it a reliable backlog signal. ",(0,i.jsx)(n.a,{href:"https://gafferongames.com/post/fix_your_timestep/",children:"https://gafferongames.com/post/fix_your_timestep/"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-gaffer-accumulator","data-footnote-backref":"","aria-label":"Back to reference 6",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-datadog-multi-alert",children:["\n",(0,i.jsxs)(n.p,{children:["\u201cMulti Alert mode,\u201d ",(0,i.jsx)(n.em,{children:"Datadog Monitors Configuration"}),". Highlights emitting one notification per group (dimension) so thresholds evaluate per entity instead of across aggregated series. ",(0,i.jsx)(n.a,{href:"https://docs.datadoghq.com/monitors/configuration/?tab=multi-alert",children:"https://docs.datadoghq.com/monitors/configuration/?tab=multi-alert"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-datadog-multi-alert","data-footnote-backref":"","aria-label":"Back to reference 7",className:"data-footnote-backref",children:"\u21a9"})," ",(0,i.jsxs)(n.a,{href:"#user-content-fnref-datadog-multi-alert-2","data-footnote-backref":"","aria-label":"Back to reference 7-2",className:"data-footnote-backref",children:["\u21a9",(0,i.jsx)(n.sup,{children:"2"})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-longtasks",children:["\n",(0,i.jsxs)(n.p,{children:["Long Tasks API introduction describing 50ms+ main-thread stalls and their impact on responsiveness. ",(0,i.jsx)(n.a,{href:"https://w3c.github.io/longtasks/",children:"https://w3c.github.io/longtasks/"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-longtasks","data-footnote-backref":"","aria-label":"Back to reference 8",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-otel-api-sdk",children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"OpenTelemetry Client Design Principles"}),", OpenTelemetry Specification. Highlights keeping the API (instrumentation) separate from the SDK/exporters so libraries depend only on stable hooks. ",(0,i.jsx)(n.a,{href:"https://raw.githubusercontent.com/open-telemetry/opentelemetry-specification/main/specification/library-guidelines.md",children:"https://raw.githubusercontent.com/open-telemetry/opentelemetry-specification/main/specification/library-guidelines.md"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-otel-api-sdk","data-footnote-backref":"","aria-label":"Back to reference 9",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-postmessage-copy",children:["\n",(0,i.jsxs)(n.p,{children:["\u201cData is sent between workers and the main thread via a system of messages\u2026 The data is copied rather than shared.\u201d \u2014 ",(0,i.jsx)(n.em,{children:"Using Web Workers"}),", MDN Web Docs. ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers",children:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-postmessage-copy","data-footnote-backref":"","aria-label":"Back to reference 10",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-transferable-zero-copy",children:["\n",(0,i.jsxs)(n.p,{children:["\u201cTransferable objects are transferred\u2026 with a zero-copy operation, which results in a vast performance improvement when sending large data sets.\u201d \u2014 ",(0,i.jsx)(n.em,{children:"Using Web Workers"}),", MDN Web Docs. ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers",children:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-transferable-zero-copy","data-footnote-backref":"","aria-label":"Back to reference 11",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{id:"user-content-fn-perfetto-track-events",children:["\n",(0,i.jsxs)(n.p,{children:["\u201cTracing SDK - Perfetto Tracing Docs\u201d, describing time-bounded track events via ",(0,i.jsx)(n.code,{children:"TRACE_EVENT"})," spans to attribute work in profiling traces. ",(0,i.jsx)(n.a,{href:"https://perfetto.dev/docs/instrumentation/tracing-sdk",children:"https://perfetto.dev/docs/instrumentation/tracing-sdk"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-perfetto-track-events","data-footnote-backref":"","aria-label":"Back to reference 12",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},7678:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var t=s(9430);const i={},r=t.createContext(i);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);