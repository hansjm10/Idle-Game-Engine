"use strict";(globalThis.webpackChunk_idle_engine_docs=globalThis.webpackChunk_idle_engine_docs||[]).push([[2229],{5142:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"testing-guidelines","title":"Testing Guidelines","description":"These guidelines keep Vitest suites deterministic, easy to navigate, and safe to","source":"@site/../../docs/testing-guidelines.md","sourceDirName":".","slug":"/testing-guidelines","permalink":"/Idle-Game-Engine/testing-guidelines","draft":false,"unlisted":false,"editUrl":"https://github.com/hansjm10/Idle-Game-Engine/edit/main/docs/../../docs/testing-guidelines.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Testing Guidelines","sidebar_position":4}}');var t=n(5270),r=n(7678);const l={title:"Testing Guidelines",sidebar_position:4},d="Testing Guidelines",o={},c=[{value:"Where tests live",id:"where-tests-live",level:2},{value:"Organization patterns",id:"organization-patterns",level:2},{value:"Fixtures &amp; helpers",id:"fixtures--helpers",level:2},{value:"Determinism &amp; output",id:"determinism--output",level:2},{value:"Running tests",id:"running-tests",level:2}];function a(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"testing-guidelines",children:"Testing Guidelines"})}),"\n",(0,t.jsx)(s.p,{children:"These guidelines keep Vitest suites deterministic, easy to navigate, and safe to\nrun in parallel across the pnpm workspace."}),"\n",(0,t.jsx)(s.h2,{id:"where-tests-live",children:"Where tests live"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Default"}),": co-locate ",(0,t.jsx)(s.code,{children:"*.test.ts"})," next to the implementation under\n",(0,t.jsx)(s.code,{children:"packages/<pkg>/src/"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Large suites"}),": place related files under ",(0,t.jsx)(s.code,{children:"packages/<pkg>/src/__tests__/"}),",\ngrouped by subsystem (for example, ",(0,t.jsx)(s.code,{children:"packages/core/src/__tests__/progression-coordinator/"}),")."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"organization-patterns",children:"Organization patterns"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Prefer multiple small files over single multi-thousand-line suites."}),"\n",(0,t.jsx)(s.li,{children:"Split by concern (trigger evaluation vs. integration wiring vs. edge cases)."}),"\n",(0,t.jsxs)(s.li,{children:["Keep each test file under ",(0,t.jsx)(s.strong,{children:"1,500 lines"})," so failures are easy to isolate and\nreview diffs stay tractable."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"fixtures--helpers",children:"Fixtures & helpers"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Put suite-specific helpers next to the suite (for example,\n",(0,t.jsx)(s.code,{children:"packages/core/src/__tests__/automation-system/"}),")."]}),"\n",(0,t.jsxs)(s.li,{children:["Put helpers shared across multiple suites in ",(0,t.jsx)(s.code,{children:"packages/core/src/__tests__/helpers/"}),"."]}),"\n",(0,t.jsx)(s.li,{children:"Prefer pure helpers that return fresh objects to avoid cross-test shared state."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"determinism--output",children:"Determinism & output"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Avoid wall-clock time (",(0,t.jsx)(s.code,{children:"Date.now"}),") and non-seeded randomness (",(0,t.jsx)(s.code,{children:"Math.random"}),")\ninside runtime tests."]}),"\n",(0,t.jsxs)(s.li,{children:["Do not add ",(0,t.jsx)(s.code,{children:"console.*"})," noise in tests; CI consumes machine-readable Vitest\noutput (",(0,t.jsx)(s.code,{children:"vitest-llm-reporter"}),")."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"running-tests",children:"Running tests"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["While iterating: ",(0,t.jsx)(s.code,{children:"pnpm test --filter @idle-engine/core"})]}),"\n",(0,t.jsxs)(s.li,{children:["Full workspace: ",(0,t.jsx)(s.code,{children:"pnpm test"})]}),"\n",(0,t.jsxs)(s.li,{children:["After changing tests: regenerate coverage docs via ",(0,t.jsx)(s.code,{children:"pnpm coverage:md"})," (updates\n",(0,t.jsx)(s.code,{children:"docs/coverage/index.md"}),")."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},7678:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>d});var i=n(9430);const t={},r=i.createContext(t);function l(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);