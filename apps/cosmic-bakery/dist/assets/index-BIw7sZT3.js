(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();function $T(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function tE(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var r=n.default;if(typeof r=="function"){var a=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};a.prototype=r.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(a,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),a}var Td={exports:{}},hi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function BT(){if(Ky)return hi;Ky=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:n,type:i,key:d,ref:o!==void 0?o:null,props:u}}return hi.Fragment=r,hi.jsx=a,hi.jsxs=a,hi}var Jy;function qT(){return Jy||(Jy=1,Td.exports=BT()),Td.exports}var ce=qT(),wd={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function PT(){if(Wy)return ve;Wy=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function _(O,$,X){this.props=O,this.context=$,this.refs=A,this.updater=X||w}_.prototype.isReactComponent={},_.prototype.setState=function(O,$){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,$,"setState")},_.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function R(){}R.prototype=_.prototype;function M(O,$,X){this.props=O,this.context=$,this.refs=A,this.updater=X||w}var N=M.prototype=new R;N.constructor=M,E(N,_.prototype),N.isPureReactComponent=!0;var U=Array.isArray;function B(){}var q={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function le(O,$,X){var te=X.ref;return{$$typeof:n,type:O,key:$,ref:te!==void 0?te:null,props:X}}function he(O,$){return le(O.type,$,O.props)}function Ae(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function Ue(O){var $={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(X){return $[X]})}var et=/\/+/g;function W(O,$){return typeof O=="object"&&O!==null&&O.key!=null?Ue(""+O.key):$.toString(36)}function K(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(B,B):(O.status="pending",O.then(function($){O.status==="pending"&&(O.status="fulfilled",O.value=$)},function($){O.status==="pending"&&(O.status="rejected",O.reason=$)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function I(O,$,X,te,ue){var be=typeof O;(be==="undefined"||be==="boolean")&&(O=null);var $e=!1;if(O===null)$e=!0;else switch(be){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(O.$$typeof){case n:case r:$e=!0;break;case g:return $e=O._init,I($e(O._payload),$,X,te,ue)}}if($e)return ue=ue(O),$e=te===""?"."+W(O,0):te,U(ue)?(X="",$e!=null&&(X=$e.replace(et,"$&/")+"/"),I(ue,$,X,"",function(Ss){return Ss})):ue!=null&&(Ae(ue)&&(ue=he(ue,X+(ue.key==null||O&&O.key===ue.key?"":(""+ue.key).replace(et,"$&/")+"/")+$e)),$.push(ue)),1;$e=0;var kt=te===""?".":te+":";if(U(O))for(var rt=0;rt<O.length;rt++)te=O[rt],be=kt+W(te,rt),$e+=I(te,$,X,be,ue);else if(rt=T(O),typeof rt=="function")for(O=rt.call(O),rt=0;!(te=O.next()).done;)te=te.value,be=kt+W(te,rt++),$e+=I(te,$,X,be,ue);else if(be==="object"){if(typeof O.then=="function")return I(K(O),$,X,te,ue);throw $=String(O),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return $e}function G(O,$,X){if(O==null)return O;var te=[],ue=0;return I(O,te,"","",function(be){return $.call(X,be,ue++)}),te}function Q(O){if(O._status===-1){var $=O._result;$=$(),$.then(function(X){(O._status===0||O._status===-1)&&(O._status=1,O._result=X)},function(X){(O._status===0||O._status===-1)&&(O._status=2,O._result=X)}),O._status===-1&&(O._status=0,O._result=$)}if(O._status===1)return O._result.default;throw O._result}var ee=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},re={map:G,forEach:function(O,$,X){G(O,function(){$.apply(this,arguments)},X)},count:function(O){var $=0;return G(O,function(){$++}),$},toArray:function(O){return G(O,function($){return $})||[]},only:function(O){if(!Ae(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return ve.Activity=v,ve.Children=re,ve.Component=_,ve.Fragment=a,ve.Profiler=o,ve.PureComponent=M,ve.StrictMode=i,ve.Suspense=h,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,ve.__COMPILER_RUNTIME={__proto__:null,c:function(O){return q.H.useMemoCache(O)}},ve.cache=function(O){return function(){return O.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(O,$,X){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var te=E({},O.props),ue=O.key;if($!=null)for(be in $.key!==void 0&&(ue=""+$.key),$)!F.call($,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&$.ref===void 0||(te[be]=$[be]);var be=arguments.length-2;if(be===1)te.children=X;else if(1<be){for(var $e=Array(be),kt=0;kt<be;kt++)$e[kt]=arguments[kt+2];te.children=$e}return le(O.type,ue,te)},ve.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},ve.createElement=function(O,$,X){var te,ue={},be=null;if($!=null)for(te in $.key!==void 0&&(be=""+$.key),$)F.call($,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ue[te]=$[te]);var $e=arguments.length-2;if($e===1)ue.children=X;else if(1<$e){for(var kt=Array($e),rt=0;rt<$e;rt++)kt[rt]=arguments[rt+2];ue.children=kt}if(O&&O.defaultProps)for(te in $e=O.defaultProps,$e)ue[te]===void 0&&(ue[te]=$e[te]);return le(O,be,ue)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(O){return{$$typeof:m,render:O}},ve.isValidElement=Ae,ve.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:Q}},ve.memo=function(O,$){return{$$typeof:p,type:O,compare:$===void 0?null:$}},ve.startTransition=function(O){var $=q.T,X={};q.T=X;try{var te=O(),ue=q.S;ue!==null&&ue(X,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(B,ee)}catch(be){ee(be)}finally{$!==null&&X.types!==null&&($.types=X.types),q.T=$}},ve.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},ve.use=function(O){return q.H.use(O)},ve.useActionState=function(O,$,X){return q.H.useActionState(O,$,X)},ve.useCallback=function(O,$){return q.H.useCallback(O,$)},ve.useContext=function(O){return q.H.useContext(O)},ve.useDebugValue=function(){},ve.useDeferredValue=function(O,$){return q.H.useDeferredValue(O,$)},ve.useEffect=function(O,$){return q.H.useEffect(O,$)},ve.useEffectEvent=function(O){return q.H.useEffectEvent(O)},ve.useId=function(){return q.H.useId()},ve.useImperativeHandle=function(O,$,X){return q.H.useImperativeHandle(O,$,X)},ve.useInsertionEffect=function(O,$){return q.H.useInsertionEffect(O,$)},ve.useLayoutEffect=function(O,$){return q.H.useLayoutEffect(O,$)},ve.useMemo=function(O,$){return q.H.useMemo(O,$)},ve.useOptimistic=function(O,$){return q.H.useOptimistic(O,$)},ve.useReducer=function(O,$,X){return q.H.useReducer(O,$,X)},ve.useRef=function(O){return q.H.useRef(O)},ve.useState=function(O){return q.H.useState(O)},ve.useSyncExternalStore=function(O,$,X){return q.H.useSyncExternalStore(O,$,X)},ve.useTransition=function(){return q.H.useTransition()},ve.version="19.2.0",ve}var ev;function _m(){return ev||(ev=1,wd.exports=PT()),wd.exports}var _n=_m(),kd={exports:{}},pi={},Od={exports:{}},Ad={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function GT(){return tv||(tv=1,(function(n){function r(I,G){var Q=I.length;I.push(G);e:for(;0<Q;){var ee=Q-1>>>1,re=I[ee];if(0<o(re,G))I[ee]=G,I[Q]=re,Q=ee;else break e}}function a(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var G=I[0],Q=I.pop();if(Q!==G){I[0]=Q;e:for(var ee=0,re=I.length,O=re>>>1;ee<O;){var $=2*(ee+1)-1,X=I[$],te=$+1,ue=I[te];if(0>o(X,Q))te<re&&0>o(ue,X)?(I[ee]=ue,I[te]=Q,ee=te):(I[ee]=X,I[$]=Q,ee=$);else if(te<re&&0>o(ue,Q))I[ee]=ue,I[te]=Q,ee=te;else break e}}return G}function o(I,G){var Q=I.sortIndex-G.sortIndex;return Q!==0?Q:I.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var h=[],p=[],g=1,v=null,b=3,T=!1,w=!1,E=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function N(I){for(var G=a(p);G!==null;){if(G.callback===null)i(p);else if(G.startTime<=I)i(p),G.sortIndex=G.expirationTime,r(h,G);else break;G=a(p)}}function U(I){if(E=!1,N(I),!w)if(a(h)!==null)w=!0,B||(B=!0,Ue());else{var G=a(p);G!==null&&K(U,G.startTime-I)}}var B=!1,q=-1,F=5,le=-1;function he(){return A?!0:!(n.unstable_now()-le<F)}function Ae(){if(A=!1,B){var I=n.unstable_now();le=I;var G=!0;try{e:{w=!1,E&&(E=!1,R(q),q=-1),T=!0;var Q=b;try{t:{for(N(I),v=a(h);v!==null&&!(v.expirationTime>I&&he());){var ee=v.callback;if(typeof ee=="function"){v.callback=null,b=v.priorityLevel;var re=ee(v.expirationTime<=I);if(I=n.unstable_now(),typeof re=="function"){v.callback=re,N(I),G=!0;break t}v===a(h)&&i(h),N(I)}else i(h);v=a(h)}if(v!==null)G=!0;else{var O=a(p);O!==null&&K(U,O.startTime-I),G=!1}}break e}finally{v=null,b=Q,T=!1}G=void 0}}finally{G?Ue():B=!1}}}var Ue;if(typeof M=="function")Ue=function(){M(Ae)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,W=et.port2;et.port1.onmessage=Ae,Ue=function(){W.postMessage(null)}}else Ue=function(){_(Ae,0)};function K(I,G){q=_(function(){I(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(I){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var Q=b;b=G;try{return I()}finally{b=Q}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(I,G){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Q=b;b=I;try{return G()}finally{b=Q}},n.unstable_scheduleCallback=function(I,G,Q){var ee=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ee+Q:ee):Q=ee,I){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Q+re,I={id:g++,callback:G,priorityLevel:I,startTime:Q,expirationTime:re,sortIndex:-1},Q>ee?(I.sortIndex=Q,r(p,I),a(h)===null&&I===a(p)&&(E?(R(q),q=-1):E=!0,K(U,Q-ee))):(I.sortIndex=re,r(h,I),w||T||(w=!0,B||(B=!0,Ue()))),I},n.unstable_shouldYield=he,n.unstable_wrapCallback=function(I){var G=b;return function(){var Q=b;b=G;try{return I.apply(this,arguments)}finally{b=Q}}}})(Ad)),Ad}var nv;function VT(){return nv||(nv=1,Od.exports=GT()),Od.exports}var Rd={exports:{}},Et={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function HT(){if(rv)return Et;rv=1;var n=_m();function r(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(h,p,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:h,containerInfo:p,implementation:g}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Et.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(r(299));return u(h,p,null,g)},Et.flushSync=function(h){var p=d.T,g=i.p;try{if(d.T=null,i.p=2,h)return h()}finally{d.T=p,i.p=g,i.d.f()}},Et.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(h,p))},Et.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Et.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,v=m(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:T}):g==="script"&&i.d.X(h,{crossOrigin:v,integrity:b,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Et.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=m(p.as,p.crossOrigin);i.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(h)},Et.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,v=m(g,p.crossOrigin);i.d.L(h,g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Et.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=m(p.as,p.crossOrigin);i.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(h)},Et.requestFormReset=function(h){i.d.r(h)},Et.unstable_batchedUpdates=function(h,p){return h(p)},Et.useFormState=function(h,p,g){return d.H.useFormState(h,p,g)},Et.useFormStatus=function(){return d.H.useHostTransitionStatus()},Et.version="19.2.0",Et}var av;function YT(){if(av)return Rd.exports;av=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),Rd.exports=HT(),Rd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function ZT(){if(sv)return pi;sv=1;var n=VT(),r=_m(),a=YT();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(u(e)!==e)throw Error(i(188))}function p(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var s=e,c=t;;){var l=s.return;if(l===null)break;var f=l.alternate;if(f===null){if(c=l.return,c!==null){s=c;continue}break}if(l.child===f.child){for(f=l.child;f;){if(f===s)return h(l),e;if(f===c)return h(l),t;f=f.sibling}throw Error(i(188))}if(s.return!==c.return)s=l,c=f;else{for(var y=!1,S=l.child;S;){if(S===s){y=!0,s=l,c=f;break}if(S===c){y=!0,c=l,s=f;break}S=S.sibling}if(!y){for(S=f.child;S;){if(S===s){y=!0,s=f,c=l;break}if(S===c){y=!0,c=f,s=l;break}S=S.sibling}if(!y)throw Error(i(189))}}if(s.alternate!==c)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),M=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),Ae=Symbol.iterator;function Ue(e){return e===null||typeof e!="object"?null:(e=Ae&&e[Ae]||e["@@iterator"],typeof e=="function"?e:null)}var et=Symbol.for("react.client.reference");function W(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===et?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case _:return"Profiler";case A:return"StrictMode";case U:return"Suspense";case B:return"SuspenseList";case le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case M:return e.displayName||"Context";case R:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q:return t=e.displayName||null,t!==null?t:W(e.type)||"Memo";case F:t=e._payload,e=e._init;try{return W(e(t))}catch{}}return null}var K=Array.isArray,I=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ee=[],re=-1;function O(e){return{current:e}}function $(e){0>re||(e.current=ee[re],ee[re]=null,re--)}function X(e,t){re++,ee[re]=e.current,e.current=t}var te=O(null),ue=O(null),be=O(null),$e=O(null);function kt(e,t){switch(X(be,t),X(ue,e),X(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ey(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ey(t),e=Sy(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(te),X(te,e)}function rt(){$(te),$(ue),$(be)}function Ss(e){e.memoizedState!==null&&X($e,e);var t=te.current,s=Sy(t,e.type);t!==s&&(X(ue,e),X(te,s))}function Gi(e){ue.current===e&&($(te),$(ue)),$e.current===e&&($($e),li._currentValue=Q)}var su,Qm;function Hr(e){if(su===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);su=t&&t[1]||"",Qm=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+su+e+Qm}var iu=!1;function ou(e,t){if(!e||iu)return"";iu=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(t){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(P){var j=P}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(P){j=P}e.call(Y.prototype)}}else{try{throw Error()}catch(P){j=P}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(P){if(P&&j&&typeof P.stack=="string")return[P.stack,j.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=c.DetermineComponentFrameRoot(),y=f[0],S=f[1];if(y&&S){var k=y.split(`
`),D=S.split(`
`);for(l=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;if(c===k.length||l===D.length)for(c=k.length-1,l=D.length-1;1<=c&&0<=l&&k[c]!==D[l];)l--;for(;1<=c&&0<=l;c--,l--)if(k[c]!==D[l]){if(c!==1||l!==1)do if(c--,l--,0>l||k[c]!==D[l]){var V=`
`+k[c].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=c&&0<=l);break}}}finally{iu=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Hr(s):""}function gS(e,t){switch(e.tag){case 26:case 27:case 5:return Hr(e.type);case 16:return Hr("Lazy");case 13:return e.child!==t&&t!==null?Hr("Suspense Fallback"):Hr("Suspense");case 19:return Hr("SuspenseList");case 0:case 15:return ou(e.type,!1);case 11:return ou(e.type.render,!1);case 1:return ou(e.type,!0);case 31:return Hr("Activity");default:return""}}function Km(e){try{var t="",s=null;do t+=gS(e,s),s=e,e=e.return;while(e);return t}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var cu=Object.prototype.hasOwnProperty,uu=n.unstable_scheduleCallback,lu=n.unstable_cancelCallback,yS=n.unstable_shouldYield,vS=n.unstable_requestPaint,Vt=n.unstable_now,bS=n.unstable_getCurrentPriorityLevel,Jm=n.unstable_ImmediatePriority,Wm=n.unstable_UserBlockingPriority,Vi=n.unstable_NormalPriority,ES=n.unstable_LowPriority,eh=n.unstable_IdlePriority,SS=n.log,_S=n.unstable_setDisableYieldValue,_s=null,Ht=null;function mr(e){if(typeof SS=="function"&&_S(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(_s,e)}catch{}}var Yt=Math.clz32?Math.clz32:kS,TS=Math.log,wS=Math.LN2;function kS(e){return e>>>=0,e===0?32:31-(TS(e)/wS|0)|0}var Hi=256,Yi=262144,Zi=4194304;function Yr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fi(e,t,s){var c=e.pendingLanes;if(c===0)return 0;var l=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var S=c&134217727;return S!==0?(c=S&~f,c!==0?l=Yr(c):(y&=S,y!==0?l=Yr(y):s||(s=S&~e,s!==0&&(l=Yr(s))))):(S=c&~f,S!==0?l=Yr(S):y!==0?l=Yr(y):s||(s=c&~e,s!==0&&(l=Yr(s)))),l===0?0:t!==0&&t!==l&&(t&f)===0&&(f=l&-l,s=t&-t,f>=s||f===32&&(s&4194048)!==0)?t:l}function Ts(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function OS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function th(){var e=Zi;return Zi<<=1,(Zi&62914560)===0&&(Zi=4194304),e}function du(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ws(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function AS(e,t,s,c,l,f){var y=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var S=e.entanglements,k=e.expirationTimes,D=e.hiddenUpdates;for(s=y&~s;0<s;){var V=31-Yt(s),Y=1<<V;S[V]=0,k[V]=-1;var j=D[V];if(j!==null)for(D[V]=null,V=0;V<j.length;V++){var P=j[V];P!==null&&(P.lane&=-536870913)}s&=~Y}c!==0&&nh(e,c,0),f!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function nh(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var c=31-Yt(t);e.entangledLanes|=t,e.entanglements[c]=e.entanglements[c]|1073741824|s&261930}function rh(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var c=31-Yt(s),l=1<<c;l&t|e[c]&t&&(e[c]|=t),s&=~l}}function ah(e,t){var s=t&-t;return s=(s&42)!==0?1:fu(s),(s&(e.suspendedLanes|t))!==0?0:s}function fu(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mu(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function sh(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Vy(e.type))}function ih(e,t){var s=G.p;try{return G.p=e,t()}finally{G.p=s}}var hr=Math.random().toString(36).slice(2),ht="__reactFiber$"+hr,Nt="__reactProps$"+hr,_a="__reactContainer$"+hr,hu="__reactEvents$"+hr,RS="__reactListeners$"+hr,CS="__reactHandles$"+hr,oh="__reactResources$"+hr,ks="__reactMarker$"+hr;function pu(e){delete e[ht],delete e[Nt],delete e[hu],delete e[RS],delete e[CS]}function Ta(e){var t=e[ht];if(t)return t;for(var s=e.parentNode;s;){if(t=s[_a]||s[ht]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Ry(e);e!==null;){if(s=e[ht])return s;e=Ry(e)}return t}e=s,s=e.parentNode}return null}function wa(e){if(e=e[ht]||e[_a]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Os(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function ka(e){var t=e[oh];return t||(t=e[oh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ft(e){e[ks]=!0}var ch=new Set,uh={};function Zr(e,t){Oa(e,t),Oa(e+"Capture",t)}function Oa(e,t){for(uh[e]=t,e=0;e<t.length;e++)ch.add(t[e])}var NS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lh={},dh={};function MS(e){return cu.call(dh,e)?!0:cu.call(lh,e)?!1:NS.test(e)?dh[e]=!0:(lh[e]=!0,!1)}function Xi(e,t,s){if(MS(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var c=t.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Qi(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Pn(e,t,s,c){if(c===null)e.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+c)}}function rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function IS(e,t,s){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var l=c.get,f=c.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(y){s=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:c.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gu(e){if(!e._valueTracker){var t=fh(e)?"checked":"value";e._valueTracker=IS(e,t,""+e[t])}}function mh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),c="";return e&&(c=fh(e)?e.checked?"true":"false":e.value),e=c,e!==s?(t.setValue(e),!0):!1}function Ki(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var xS=/[\n"\\]/g;function an(e){return e.replace(xS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function yu(e,t,s,c,l,f,y,S){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+rn(t)):e.value!==""+rn(t)&&(e.value=""+rn(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?vu(e,y,rn(t)):s!=null?vu(e,y,rn(s)):c!=null&&e.removeAttribute("value"),l==null&&f!=null&&(e.defaultChecked=!!f),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+rn(S):e.removeAttribute("name")}function hh(e,t,s,c,l,f,y,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){gu(e);return}s=s!=null?""+rn(s):"",t=t!=null?""+rn(t):s,S||t===e.value||(e.value=t),e.defaultValue=t}c=c??l,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=S?e.checked:!!c,e.defaultChecked=!!c,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),gu(e)}function vu(e,t,s){t==="number"&&Ki(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Aa(e,t,s,c){if(e=e.options,t){t={};for(var l=0;l<s.length;l++)t["$"+s[l]]=!0;for(s=0;s<e.length;s++)l=t.hasOwnProperty("$"+e[s].value),e[s].selected!==l&&(e[s].selected=l),l&&c&&(e[s].defaultSelected=!0)}else{for(s=""+rn(s),t=null,l=0;l<e.length;l++){if(e[l].value===s){e[l].selected=!0,c&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ph(e,t,s){if(t!=null&&(t=""+rn(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+rn(s):""}function gh(e,t,s,c){if(t==null){if(c!=null){if(s!=null)throw Error(i(92));if(K(c)){if(1<c.length)throw Error(i(93));c=c[0]}s=c}s==null&&(s=""),t=s}s=rn(t),e.defaultValue=s,c=e.textContent,c===s&&c!==""&&c!==null&&(e.value=c),gu(e)}function Ra(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var zS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yh(e,t,s){var c=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?c?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":c?e.setProperty(t,s):typeof s!="number"||s===0||zS.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function vh(e,t,s){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,s!=null){for(var c in s)!s.hasOwnProperty(c)||t!=null&&t.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var l in t)c=t[l],t.hasOwnProperty(l)&&s[l]!==c&&yh(e,l,c)}else for(var f in t)t.hasOwnProperty(f)&&yh(e,f,t[f])}function bu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),DS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ji(e){return DS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Gn(){}var Eu=null;function Su(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ca=null,Na=null;function bh(e){var t=wa(e);if(t&&(e=t.stateNode)){var s=e[Nt]||null;e:switch(e=t.stateNode,t.type){case"input":if(yu(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+an(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var c=s[t];if(c!==e&&c.form===e.form){var l=c[Nt]||null;if(!l)throw Error(i(90));yu(c,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<s.length;t++)c=s[t],c.form===e.form&&mh(c)}break e;case"textarea":ph(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Aa(e,!!s.multiple,t,!1)}}}var _u=!1;function Eh(e,t,s){if(_u)return e(t,s);_u=!0;try{var c=e(t);return c}finally{if(_u=!1,(Ca!==null||Na!==null)&&(Bo(),Ca&&(t=Ca,e=Na,Na=Ca=null,bh(t),e)))for(t=0;t<e.length;t++)bh(e[t])}}function As(e,t){var s=e.stateNode;if(s===null)return null;var c=s[Nt]||null;if(c===null)return null;s=c[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,t,typeof s));return s}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=!1;if(Vn)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){Tu=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{Tu=!1}var pr=null,wu=null,Wi=null;function Sh(){if(Wi)return Wi;var e,t=wu,s=t.length,c,l="value"in pr?pr.value:pr.textContent,f=l.length;for(e=0;e<s&&t[e]===l[e];e++);var y=s-e;for(c=1;c<=y&&t[s-c]===l[f-c];c++);return Wi=l.slice(e,1<c?1-c:void 0)}function eo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function to(){return!0}function _h(){return!1}function Mt(e){function t(s,c,l,f,y){this._reactName=s,this._targetInst=l,this.type=c,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(s=e[S],this[S]=s?s(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?to:_h,this.isPropagationStopped=_h,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=to)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=to)},persist:function(){},isPersistent:to}),t}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Mt(Fr),Cs=v({},Fr,{view:0,detail:0}),jS=Mt(Cs),ku,Ou,Ns,ro=v({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ns&&(Ns&&e.type==="mousemove"?(ku=e.screenX-Ns.screenX,Ou=e.screenY-Ns.screenY):Ou=ku=0,Ns=e),ku)},movementY:function(e){return"movementY"in e?e.movementY:Ou}}),Th=Mt(ro),US=v({},ro,{dataTransfer:0}),$S=Mt(US),BS=v({},Cs,{relatedTarget:0}),Au=Mt(BS),qS=v({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),PS=Mt(qS),GS=v({},Fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),VS=Mt(GS),HS=v({},Fr,{data:0}),wh=Mt(HS),YS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=FS[e])?!!t[e]:!1}function Ru(){return XS}var QS=v({},Cs,{key:function(e){if(e.key){var t=YS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=eo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ZS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(e){return e.type==="keypress"?eo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?eo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),KS=Mt(QS),JS=v({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=Mt(JS),WS=v({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),e_=Mt(WS),t_=v({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),n_=Mt(t_),r_=v({},ro,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),a_=Mt(r_),s_=v({},Fr,{newState:0,oldState:0}),i_=Mt(s_),o_=[9,13,27,32],Cu=Vn&&"CompositionEvent"in window,Ms=null;Vn&&"documentMode"in document&&(Ms=document.documentMode);var c_=Vn&&"TextEvent"in window&&!Ms,Oh=Vn&&(!Cu||Ms&&8<Ms&&11>=Ms),Ah=" ",Rh=!1;function Ch(e,t){switch(e){case"keyup":return o_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ma=!1;function u_(e,t){switch(e){case"compositionend":return Nh(t);case"keypress":return t.which!==32?null:(Rh=!0,Ah);case"textInput":return e=t.data,e===Ah&&Rh?null:e;default:return null}}function l_(e,t){if(Ma)return e==="compositionend"||!Cu&&Ch(e,t)?(e=Sh(),Wi=wu=pr=null,Ma=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Oh&&t.locale!=="ko"?null:t.data;default:return null}}var d_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!d_[e.type]:t==="textarea"}function Ih(e,t,s,c){Ca?Na?Na.push(c):Na=[c]:Ca=c,t=Zo(t,"onChange"),0<t.length&&(s=new no("onChange","change",null,s,c),e.push({event:s,listeners:t}))}var Is=null,xs=null;function f_(e){hy(e,0)}function ao(e){var t=Os(e);if(mh(t))return e}function xh(e,t){if(e==="change")return t}var zh=!1;if(Vn){var Nu;if(Vn){var Mu="oninput"in document;if(!Mu){var Lh=document.createElement("div");Lh.setAttribute("oninput","return;"),Mu=typeof Lh.oninput=="function"}Nu=Mu}else Nu=!1;zh=Nu&&(!document.documentMode||9<document.documentMode)}function Dh(){Is&&(Is.detachEvent("onpropertychange",jh),xs=Is=null)}function jh(e){if(e.propertyName==="value"&&ao(xs)){var t=[];Ih(t,xs,e,Su(e)),Eh(f_,t)}}function m_(e,t,s){e==="focusin"?(Dh(),Is=t,xs=s,Is.attachEvent("onpropertychange",jh)):e==="focusout"&&Dh()}function h_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(xs)}function p_(e,t){if(e==="click")return ao(t)}function g_(e,t){if(e==="input"||e==="change")return ao(t)}function y_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:y_;function zs(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),c=Object.keys(t);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var l=s[c];if(!cu.call(t,l)||!Zt(e[l],t[l]))return!1}return!0}function Uh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $h(e,t){var s=Uh(e);e=0;for(var c;s;){if(s.nodeType===3){if(c=e+s.textContent.length,e<=t&&c>=t)return{node:s,offset:t-e};e=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Uh(s)}}function Bh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ki(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ki(e.document)}return t}function Iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var v_=Vn&&"documentMode"in document&&11>=document.documentMode,Ia=null,xu=null,Ls=null,zu=!1;function Ph(e,t,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;zu||Ia==null||Ia!==Ki(c)||(c=Ia,"selectionStart"in c&&Iu(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ls&&zs(Ls,c)||(Ls=c,c=Zo(xu,"onSelect"),0<c.length&&(t=new no("onSelect","select",null,t,s),e.push({event:t,listeners:c}),t.target=Ia)))}function Xr(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var xa={animationend:Xr("Animation","AnimationEnd"),animationiteration:Xr("Animation","AnimationIteration"),animationstart:Xr("Animation","AnimationStart"),transitionrun:Xr("Transition","TransitionRun"),transitionstart:Xr("Transition","TransitionStart"),transitioncancel:Xr("Transition","TransitionCancel"),transitionend:Xr("Transition","TransitionEnd")},Lu={},Gh={};Vn&&(Gh=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function Qr(e){if(Lu[e])return Lu[e];if(!xa[e])return e;var t=xa[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Gh)return Lu[e]=t[s];return e}var Vh=Qr("animationend"),Hh=Qr("animationiteration"),Yh=Qr("animationstart"),b_=Qr("transitionrun"),E_=Qr("transitionstart"),S_=Qr("transitioncancel"),Zh=Qr("transitionend"),Fh=new Map,Du="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Du.push("scrollEnd");function vn(e,t){Fh.set(e,t),Zr(t,[e])}var so=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},sn=[],za=0,ju=0;function io(){for(var e=za,t=ju=za=0;t<e;){var s=sn[t];sn[t++]=null;var c=sn[t];sn[t++]=null;var l=sn[t];sn[t++]=null;var f=sn[t];if(sn[t++]=null,c!==null&&l!==null){var y=c.pending;y===null?l.next=l:(l.next=y.next,y.next=l),c.pending=l}f!==0&&Xh(s,l,f)}}function oo(e,t,s,c){sn[za++]=e,sn[za++]=t,sn[za++]=s,sn[za++]=c,ju|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Uu(e,t,s,c){return oo(e,t,s,c),co(e)}function Kr(e,t){return oo(e,null,null,t),co(e)}function Xh(e,t,s){e.lanes|=s;var c=e.alternate;c!==null&&(c.lanes|=s);for(var l=!1,f=e.return;f!==null;)f.childLanes|=s,c=f.alternate,c!==null&&(c.childLanes|=s),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(l=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,l&&t!==null&&(l=31-Yt(s),e=f.hiddenUpdates,c=e[l],c===null?e[l]=[t]:c.push(t),t.lane=s|536870912),f):null}function co(e){if(50<ri)throw ri=0,Zl=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var La={};function __(e,t,s,c){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(e,t,s,c){return new __(e,t,s,c)}function $u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hn(e,t){var s=e.alternate;return s===null?(s=Ft(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Qh(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function uo(e,t,s,c,l,f){var y=0;if(c=e,typeof e=="function")$u(e)&&(y=1);else if(typeof e=="string")y=AT(e,s,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case le:return e=Ft(31,s,t,l),e.elementType=le,e.lanes=f,e;case E:return Jr(s.children,l,f,t);case A:y=8,l|=24;break;case _:return e=Ft(12,s,t,l|2),e.elementType=_,e.lanes=f,e;case U:return e=Ft(13,s,t,l),e.elementType=U,e.lanes=f,e;case B:return e=Ft(19,s,t,l),e.elementType=B,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:y=10;break e;case R:y=9;break e;case N:y=11;break e;case q:y=14;break e;case F:y=16,c=null;break e}y=29,s=Error(i(130,e===null?"null":typeof e,"")),c=null}return t=Ft(y,s,t,l),t.elementType=e,t.type=c,t.lanes=f,t}function Jr(e,t,s,c){return e=Ft(7,e,c,t),e.lanes=s,e}function Bu(e,t,s){return e=Ft(6,e,null,t),e.lanes=s,e}function Kh(e){var t=Ft(18,null,null,0);return t.stateNode=e,t}function qu(e,t,s){return t=Ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Jh=new WeakMap;function on(e,t){if(typeof e=="object"&&e!==null){var s=Jh.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Km(t)},Jh.set(e,t),t)}return{value:e,source:t,stack:Km(t)}}var Da=[],ja=0,lo=null,Ds=0,cn=[],un=0,gr=null,Cn=1,Nn="";function Yn(e,t){Da[ja++]=Ds,Da[ja++]=lo,lo=e,Ds=t}function Wh(e,t,s){cn[un++]=Cn,cn[un++]=Nn,cn[un++]=gr,gr=e;var c=Cn;e=Nn;var l=32-Yt(c)-1;c&=~(1<<l),s+=1;var f=32-Yt(t)+l;if(30<f){var y=l-l%5;f=(c&(1<<y)-1).toString(32),c>>=y,l-=y,Cn=1<<32-Yt(t)+l|s<<l|c,Nn=f+e}else Cn=1<<f|s<<l|c,Nn=e}function Pu(e){e.return!==null&&(Yn(e,1),Wh(e,1,0))}function Gu(e){for(;e===lo;)lo=Da[--ja],Da[ja]=null,Ds=Da[--ja],Da[ja]=null;for(;e===gr;)gr=cn[--un],cn[un]=null,Nn=cn[--un],cn[un]=null,Cn=cn[--un],cn[un]=null}function ep(e,t){cn[un++]=Cn,cn[un++]=Nn,cn[un++]=gr,Cn=t.id,Nn=t.overflow,gr=e}var pt=null,Ye=null,Me=!1,yr=null,ln=!1,Vu=Error(i(519));function vr(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw js(on(t,e)),Vu}function tp(e){var t=e.stateNode,s=e.type,c=e.memoizedProps;switch(t[ht]=e,t[Nt]=c,s){case"dialog":ke("cancel",t),ke("close",t);break;case"iframe":case"object":case"embed":ke("load",t);break;case"video":case"audio":for(s=0;s<si.length;s++)ke(si[s],t);break;case"source":ke("error",t);break;case"img":case"image":case"link":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"input":ke("invalid",t),hh(t,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ke("invalid",t);break;case"textarea":ke("invalid",t),gh(t,c.value,c.defaultValue,c.children)}s=c.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||c.suppressHydrationWarning===!0||vy(t.textContent,s)?(c.popover!=null&&(ke("beforetoggle",t),ke("toggle",t)),c.onScroll!=null&&ke("scroll",t),c.onScrollEnd!=null&&ke("scrollend",t),c.onClick!=null&&(t.onclick=Gn),t=!0):t=!1,t||vr(e,!0)}function np(e){for(pt=e.return;pt;)switch(pt.tag){case 5:case 31:case 13:ln=!1;return;case 27:case 3:ln=!0;return;default:pt=pt.return}}function Ua(e){if(e!==pt)return!1;if(!Me)return np(e),Me=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||cd(e.type,e.memoizedProps)),s=!s),s&&Ye&&vr(e),np(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ye=Ay(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ye=Ay(e)}else t===27?(t=Ye,Ir(e.type)?(e=md,md=null,Ye=e):Ye=t):Ye=pt?fn(e.stateNode.nextSibling):null;return!0}function Wr(){Ye=pt=null,Me=!1}function Hu(){var e=yr;return e!==null&&(Lt===null?Lt=e:Lt.push.apply(Lt,e),yr=null),e}function js(e){yr===null?yr=[e]:yr.push(e)}var Yu=O(null),ea=null,Zn=null;function br(e,t,s){X(Yu,t._currentValue),t._currentValue=s}function Fn(e){e._currentValue=Yu.current,$(Yu)}function Zu(e,t,s){for(;e!==null;){var c=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,c!==null&&(c.childLanes|=t)):c!==null&&(c.childLanes&t)!==t&&(c.childLanes|=t),e===s)break;e=e.return}}function Fu(e,t,s,c){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var f=l.dependencies;if(f!==null){var y=l.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=l;for(var k=0;k<t.length;k++)if(S.context===t[k]){f.lanes|=s,S=f.alternate,S!==null&&(S.lanes|=s),Zu(f.return,s,e),c||(y=null);break e}f=S.next}}else if(l.tag===18){if(y=l.return,y===null)throw Error(i(341));y.lanes|=s,f=y.alternate,f!==null&&(f.lanes|=s),Zu(y,s,e),y=null}else y=l.child;if(y!==null)y.return=l;else for(y=l;y!==null;){if(y===e){y=null;break}if(l=y.sibling,l!==null){l.return=y.return,y=l;break}y=y.return}l=y}}function $a(e,t,s,c){e=null;for(var l=t,f=!1;l!==null;){if(!f){if((l.flags&524288)!==0)f=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var y=l.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var S=l.type;Zt(l.pendingProps.value,y.value)||(e!==null?e.push(S):e=[S])}}else if(l===$e.current){if(y=l.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(li):e=[li])}l=l.return}e!==null&&Fu(t,e,s,c),t.flags|=262144}function fo(e){for(e=e.firstContext;e!==null;){if(!Zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ta(e){ea=e,Zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return rp(ea,e)}function mo(e,t){return ea===null&&ta(e),rp(e,t)}function rp(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Zn===null){if(e===null)throw Error(i(308));Zn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Zn=Zn.next=t;return s}var T_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,c){e.push(c)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},w_=n.unstable_scheduleCallback,k_=n.unstable_NormalPriority,it={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xu(){return{controller:new T_,data:new Map,refCount:0}}function Us(e){e.refCount--,e.refCount===0&&w_(k_,function(){e.controller.abort()})}var $s=null,Qu=0,Ba=0,qa=null;function O_(e,t){if($s===null){var s=$s=[];Qu=0,Ba=Wl(),qa={status:"pending",value:void 0,then:function(c){s.push(c)}}}return Qu++,t.then(ap,ap),t}function ap(){if(--Qu===0&&$s!==null){qa!==null&&(qa.status="fulfilled");var e=$s;$s=null,Ba=0,qa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function A_(e,t){var s=[],c={status:"pending",value:null,reason:null,then:function(l){s.push(l)}};return e.then(function(){c.status="fulfilled",c.value=t;for(var l=0;l<s.length;l++)(0,s[l])(t)},function(l){for(c.status="rejected",c.reason=l,l=0;l<s.length;l++)(0,s[l])(void 0)}),c}var sp=I.S;I.S=function(e,t){Pg=Vt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&O_(e,t),sp!==null&&sp(e,t)};var na=O(null);function Ku(){var e=na.current;return e!==null?e:He.pooledCache}function ho(e,t){t===null?X(na,na.current):X(na,t.pool)}function ip(){var e=Ku();return e===null?null:{parent:it._currentValue,pool:e}}var Pa=Error(i(460)),Ju=Error(i(474)),po=Error(i(542)),go={then:function(){}};function op(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cp(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Gn,Gn),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lp(e),e;default:if(typeof t.status=="string")t.then(Gn,Gn);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(c){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=c}},function(c){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=c}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lp(e),e}throw aa=t,Pa}}function ra(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(aa=s,Pa):s}}var aa=null;function up(){if(aa===null)throw Error(i(459));var e=aa;return aa=null,e}function lp(e){if(e===Pa||e===po)throw Error(i(483))}var Ga=null,Bs=0;function yo(e){var t=Bs;return Bs+=1,Ga===null&&(Ga=[]),cp(Ga,e,t)}function qs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function vo(e,t){throw t.$$typeof===b?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function dp(e){function t(x,C){if(e){var L=x.deletions;L===null?(x.deletions=[C],x.flags|=16):L.push(C)}}function s(x,C){if(!e)return null;for(;C!==null;)t(x,C),C=C.sibling;return null}function c(x){for(var C=new Map;x!==null;)x.key!==null?C.set(x.key,x):C.set(x.index,x),x=x.sibling;return C}function l(x,C){return x=Hn(x,C),x.index=0,x.sibling=null,x}function f(x,C,L){return x.index=L,e?(L=x.alternate,L!==null?(L=L.index,L<C?(x.flags|=67108866,C):L):(x.flags|=67108866,C)):(x.flags|=1048576,C)}function y(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function S(x,C,L,H){return C===null||C.tag!==6?(C=Bu(L,x.mode,H),C.return=x,C):(C=l(C,L),C.return=x,C)}function k(x,C,L,H){var me=L.type;return me===E?V(x,C,L.props.children,H,L.key):C!==null&&(C.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===F&&ra(me)===C.type)?(C=l(C,L.props),qs(C,L),C.return=x,C):(C=uo(L.type,L.key,L.props,null,x.mode,H),qs(C,L),C.return=x,C)}function D(x,C,L,H){return C===null||C.tag!==4||C.stateNode.containerInfo!==L.containerInfo||C.stateNode.implementation!==L.implementation?(C=qu(L,x.mode,H),C.return=x,C):(C=l(C,L.children||[]),C.return=x,C)}function V(x,C,L,H,me){return C===null||C.tag!==7?(C=Jr(L,x.mode,H,me),C.return=x,C):(C=l(C,L),C.return=x,C)}function Y(x,C,L){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Bu(""+C,x.mode,L),C.return=x,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case T:return L=uo(C.type,C.key,C.props,null,x.mode,L),qs(L,C),L.return=x,L;case w:return C=qu(C,x.mode,L),C.return=x,C;case F:return C=ra(C),Y(x,C,L)}if(K(C)||Ue(C))return C=Jr(C,x.mode,L,null),C.return=x,C;if(typeof C.then=="function")return Y(x,yo(C),L);if(C.$$typeof===M)return Y(x,mo(x,C),L);vo(x,C)}return null}function j(x,C,L,H){var me=C!==null?C.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return me!==null?null:S(x,C,""+L,H);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case T:return L.key===me?k(x,C,L,H):null;case w:return L.key===me?D(x,C,L,H):null;case F:return L=ra(L),j(x,C,L,H)}if(K(L)||Ue(L))return me!==null?null:V(x,C,L,H,null);if(typeof L.then=="function")return j(x,C,yo(L),H);if(L.$$typeof===M)return j(x,C,mo(x,L),H);vo(x,L)}return null}function P(x,C,L,H,me){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return x=x.get(L)||null,S(C,x,""+H,me);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return x=x.get(H.key===null?L:H.key)||null,k(C,x,H,me);case w:return x=x.get(H.key===null?L:H.key)||null,D(C,x,H,me);case F:return H=ra(H),P(x,C,L,H,me)}if(K(H)||Ue(H))return x=x.get(L)||null,V(C,x,H,me,null);if(typeof H.then=="function")return P(x,C,L,yo(H),me);if(H.$$typeof===M)return P(x,C,L,mo(C,H),me);vo(C,H)}return null}function oe(x,C,L,H){for(var me=null,ze=null,de=C,_e=C=0,Ce=null;de!==null&&_e<L.length;_e++){de.index>_e?(Ce=de,de=null):Ce=de.sibling;var Le=j(x,de,L[_e],H);if(Le===null){de===null&&(de=Ce);break}e&&de&&Le.alternate===null&&t(x,de),C=f(Le,C,_e),ze===null?me=Le:ze.sibling=Le,ze=Le,de=Ce}if(_e===L.length)return s(x,de),Me&&Yn(x,_e),me;if(de===null){for(;_e<L.length;_e++)de=Y(x,L[_e],H),de!==null&&(C=f(de,C,_e),ze===null?me=de:ze.sibling=de,ze=de);return Me&&Yn(x,_e),me}for(de=c(de);_e<L.length;_e++)Ce=P(de,x,_e,L[_e],H),Ce!==null&&(e&&Ce.alternate!==null&&de.delete(Ce.key===null?_e:Ce.key),C=f(Ce,C,_e),ze===null?me=Ce:ze.sibling=Ce,ze=Ce);return e&&de.forEach(function(jr){return t(x,jr)}),Me&&Yn(x,_e),me}function pe(x,C,L,H){if(L==null)throw Error(i(151));for(var me=null,ze=null,de=C,_e=C=0,Ce=null,Le=L.next();de!==null&&!Le.done;_e++,Le=L.next()){de.index>_e?(Ce=de,de=null):Ce=de.sibling;var jr=j(x,de,Le.value,H);if(jr===null){de===null&&(de=Ce);break}e&&de&&jr.alternate===null&&t(x,de),C=f(jr,C,_e),ze===null?me=jr:ze.sibling=jr,ze=jr,de=Ce}if(Le.done)return s(x,de),Me&&Yn(x,_e),me;if(de===null){for(;!Le.done;_e++,Le=L.next())Le=Y(x,Le.value,H),Le!==null&&(C=f(Le,C,_e),ze===null?me=Le:ze.sibling=Le,ze=Le);return Me&&Yn(x,_e),me}for(de=c(de);!Le.done;_e++,Le=L.next())Le=P(de,x,_e,Le.value,H),Le!==null&&(e&&Le.alternate!==null&&de.delete(Le.key===null?_e:Le.key),C=f(Le,C,_e),ze===null?me=Le:ze.sibling=Le,ze=Le);return e&&de.forEach(function(UT){return t(x,UT)}),Me&&Yn(x,_e),me}function Ve(x,C,L,H){if(typeof L=="object"&&L!==null&&L.type===E&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case T:e:{for(var me=L.key;C!==null;){if(C.key===me){if(me=L.type,me===E){if(C.tag===7){s(x,C.sibling),H=l(C,L.props.children),H.return=x,x=H;break e}}else if(C.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===F&&ra(me)===C.type){s(x,C.sibling),H=l(C,L.props),qs(H,L),H.return=x,x=H;break e}s(x,C);break}else t(x,C);C=C.sibling}L.type===E?(H=Jr(L.props.children,x.mode,H,L.key),H.return=x,x=H):(H=uo(L.type,L.key,L.props,null,x.mode,H),qs(H,L),H.return=x,x=H)}return y(x);case w:e:{for(me=L.key;C!==null;){if(C.key===me)if(C.tag===4&&C.stateNode.containerInfo===L.containerInfo&&C.stateNode.implementation===L.implementation){s(x,C.sibling),H=l(C,L.children||[]),H.return=x,x=H;break e}else{s(x,C);break}else t(x,C);C=C.sibling}H=qu(L,x.mode,H),H.return=x,x=H}return y(x);case F:return L=ra(L),Ve(x,C,L,H)}if(K(L))return oe(x,C,L,H);if(Ue(L)){if(me=Ue(L),typeof me!="function")throw Error(i(150));return L=me.call(L),pe(x,C,L,H)}if(typeof L.then=="function")return Ve(x,C,yo(L),H);if(L.$$typeof===M)return Ve(x,C,mo(x,L),H);vo(x,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,C!==null&&C.tag===6?(s(x,C.sibling),H=l(C,L),H.return=x,x=H):(s(x,C),H=Bu(L,x.mode,H),H.return=x,x=H),y(x)):s(x,C)}return function(x,C,L,H){try{Bs=0;var me=Ve(x,C,L,H);return Ga=null,me}catch(de){if(de===Pa||de===po)throw de;var ze=Ft(29,de,null,x.mode);return ze.lanes=H,ze.return=x,ze}finally{}}}var sa=dp(!0),fp=dp(!1),Er=!1;function Wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function el(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Sr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _r(e,t,s){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(De&2)!==0){var l=c.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),c.pending=t,t=co(e),Xh(e,null,s),t}return oo(e,c,t,s),co(e)}function Ps(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var c=t.lanes;c&=e.pendingLanes,s|=c,t.lanes=s,rh(e,s)}}function tl(e,t){var s=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var l=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var y={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?l=f=y:f=f.next=y,s=s.next}while(s!==null);f===null?l=f=t:f=f.next=t}else l=f=t;s={baseState:c.baseState,firstBaseUpdate:l,lastBaseUpdate:f,shared:c.shared,callbacks:c.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var nl=!1;function Gs(){if(nl){var e=qa;if(e!==null)throw e}}function Vs(e,t,s,c){nl=!1;var l=e.updateQueue;Er=!1;var f=l.firstBaseUpdate,y=l.lastBaseUpdate,S=l.shared.pending;if(S!==null){l.shared.pending=null;var k=S,D=k.next;k.next=null,y===null?f=D:y.next=D,y=k;var V=e.alternate;V!==null&&(V=V.updateQueue,S=V.lastBaseUpdate,S!==y&&(S===null?V.firstBaseUpdate=D:S.next=D,V.lastBaseUpdate=k))}if(f!==null){var Y=l.baseState;y=0,V=D=k=null,S=f;do{var j=S.lane&-536870913,P=j!==S.lane;if(P?(Re&j)===j:(c&j)===j){j!==0&&j===Ba&&(nl=!0),V!==null&&(V=V.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var oe=e,pe=S;j=t;var Ve=s;switch(pe.tag){case 1:if(oe=pe.payload,typeof oe=="function"){Y=oe.call(Ve,Y,j);break e}Y=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=pe.payload,j=typeof oe=="function"?oe.call(Ve,Y,j):oe,j==null)break e;Y=v({},Y,j);break e;case 2:Er=!0}}j=S.callback,j!==null&&(e.flags|=64,P&&(e.flags|=8192),P=l.callbacks,P===null?l.callbacks=[j]:P.push(j))}else P={lane:j,tag:S.tag,payload:S.payload,callback:S.callback,next:null},V===null?(D=V=P,k=Y):V=V.next=P,y|=j;if(S=S.next,S===null){if(S=l.shared.pending,S===null)break;P=S,S=P.next,P.next=null,l.lastBaseUpdate=P,l.shared.pending=null}}while(!0);V===null&&(k=Y),l.baseState=k,l.firstBaseUpdate=D,l.lastBaseUpdate=V,f===null&&(l.shared.lanes=0),Ar|=y,e.lanes=y,e.memoizedState=Y}}function mp(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function hp(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)mp(s[e],t)}var Va=O(null),bo=O(0);function pp(e,t){e=rr,X(bo,e),X(Va,t),rr=e|t.baseLanes}function rl(){X(bo,rr),X(Va,Va.current)}function al(){rr=bo.current,$(Va),$(bo)}var Xt=O(null),dn=null;function Tr(e){var t=e.alternate;X(at,at.current&1),X(Xt,e),dn===null&&(t===null||Va.current!==null||t.memoizedState!==null)&&(dn=e)}function sl(e){X(at,at.current),X(Xt,e),dn===null&&(dn=e)}function gp(e){e.tag===22?(X(at,at.current),X(Xt,e),dn===null&&(dn=e)):wr()}function wr(){X(at,at.current),X(Xt,Xt.current)}function Qt(e){$(Xt),dn===e&&(dn=null),$(at)}var at=O(0);function Eo(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||dd(s)||fd(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xn=0,Se=null,Pe=null,ot=null,So=!1,Ha=!1,ia=!1,_o=0,Hs=0,Ya=null,R_=0;function tt(){throw Error(i(321))}function il(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Zt(e[s],t[s]))return!1;return!0}function ol(e,t,s,c,l,f){return Xn=f,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?Wp:_l,ia=!1,f=s(c,l),ia=!1,Ha&&(f=vp(t,s,c,l)),yp(e),f}function yp(e){I.H=Fs;var t=Pe!==null&&Pe.next!==null;if(Xn=0,ot=Pe=Se=null,So=!1,Hs=0,Ya=null,t)throw Error(i(300));e===null||ct||(e=e.dependencies,e!==null&&fo(e)&&(ct=!0))}function vp(e,t,s,c){Se=e;var l=0;do{if(Ha&&(Ya=null),Hs=0,Ha=!1,25<=l)throw Error(i(301));if(l+=1,ot=Pe=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}I.H=eg,f=t(s,c)}while(Ha);return f}function C_(){var e=I.H,t=e.useState()[0];return t=typeof t.then=="function"?Ys(t):t,e=e.useState()[0],(Pe!==null?Pe.memoizedState:null)!==e&&(Se.flags|=1024),t}function cl(){var e=_o!==0;return _o=0,e}function ul(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function ll(e){if(So){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}So=!1}Xn=0,ot=Pe=Se=null,Ha=!1,Hs=_o=0,Ya=null}function Ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Se.memoizedState=ot=e:ot=ot.next=e,ot}function st(){if(Pe===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=ot===null?Se.memoizedState:ot.next;if(t!==null)ot=t,Pe=e;else{if(e===null)throw Se.alternate===null?Error(i(467)):Error(i(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},ot===null?Se.memoizedState=ot=e:ot=ot.next=e}return ot}function To(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ys(e){var t=Hs;return Hs+=1,Ya===null&&(Ya=[]),e=cp(Ya,e,t),t=Se,(ot===null?t.memoizedState:ot.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?Wp:_l),e}function wo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ys(e);if(e.$$typeof===M)return gt(e)}throw Error(i(438,String(e)))}function dl(e){var t=null,s=Se.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var c=Se.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(t={data:c.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=To(),Se.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),c=0;c<e;c++)s[c]=he;return t.index++,s}function Qn(e,t){return typeof t=="function"?t(e):t}function ko(e){var t=st();return fl(t,Pe,e)}function fl(e,t,s){var c=e.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var l=e.baseQueue,f=c.pending;if(f!==null){if(l!==null){var y=l.next;l.next=f.next,f.next=y}t.baseQueue=l=f,c.pending=null}if(f=e.baseState,l===null)e.memoizedState=f;else{t=l.next;var S=y=null,k=null,D=t,V=!1;do{var Y=D.lane&-536870913;if(Y!==D.lane?(Re&Y)===Y:(Xn&Y)===Y){var j=D.revertLane;if(j===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),Y===Ba&&(V=!0);else if((Xn&j)===j){D=D.next,j===Ba&&(V=!0);continue}else Y={lane:0,revertLane:D.revertLane,gesture:null,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},k===null?(S=k=Y,y=f):k=k.next=Y,Se.lanes|=j,Ar|=j;Y=D.action,ia&&s(f,Y),f=D.hasEagerState?D.eagerState:s(f,Y)}else j={lane:Y,revertLane:D.revertLane,gesture:D.gesture,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},k===null?(S=k=j,y=f):k=k.next=j,Se.lanes|=Y,Ar|=Y;D=D.next}while(D!==null&&D!==t);if(k===null?y=f:k.next=S,!Zt(f,e.memoizedState)&&(ct=!0,V&&(s=qa,s!==null)))throw s;e.memoizedState=f,e.baseState=y,e.baseQueue=k,c.lastRenderedState=f}return l===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function ml(e){var t=st(),s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var c=s.dispatch,l=s.pending,f=t.memoizedState;if(l!==null){s.pending=null;var y=l=l.next;do f=e(f,y.action),y=y.next;while(y!==l);Zt(f,t.memoizedState)||(ct=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,c]}function bp(e,t,s){var c=Se,l=st(),f=Me;if(f){if(s===void 0)throw Error(i(407));s=s()}else s=t();var y=!Zt((Pe||l).memoizedState,s);if(y&&(l.memoizedState=s,ct=!0),l=l.queue,gl(_p.bind(null,c,l,e),[e]),l.getSnapshot!==t||y||ot!==null&&ot.memoizedState.tag&1){if(c.flags|=2048,Za(9,{destroy:void 0},Sp.bind(null,c,l,s,t),null),He===null)throw Error(i(349));f||(Xn&127)!==0||Ep(c,t,s)}return s}function Ep(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Se.updateQueue,t===null?(t=To(),Se.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Sp(e,t,s,c){t.value=s,t.getSnapshot=c,Tp(t)&&wp(e)}function _p(e,t,s){return s(function(){Tp(t)&&wp(e)})}function Tp(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Zt(e,s)}catch{return!0}}function wp(e){var t=Kr(e,2);t!==null&&Dt(t,e,2)}function hl(e){var t=Ot();if(typeof e=="function"){var s=e;if(e=s(),ia){mr(!0);try{s()}finally{mr(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:e},t}function kp(e,t,s,c){return e.baseState=s,fl(e,Pe,typeof c=="function"?c:Qn)}function N_(e,t,s,c,l){if(Ro(e))throw Error(i(485));if(e=t.action,e!==null){var f={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};I.T!==null?s(!0):f.isTransition=!1,c(f),s=t.pending,s===null?(f.next=t.pending=f,Op(t,f)):(f.next=s.next,t.pending=s.next=f)}}function Op(e,t){var s=t.action,c=t.payload,l=e.state;if(t.isTransition){var f=I.T,y={};I.T=y;try{var S=s(l,c),k=I.S;k!==null&&k(y,S),Ap(e,t,S)}catch(D){pl(e,t,D)}finally{f!==null&&y.types!==null&&(f.types=y.types),I.T=f}}else try{f=s(l,c),Ap(e,t,f)}catch(D){pl(e,t,D)}}function Ap(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(c){Rp(e,t,c)},function(c){return pl(e,t,c)}):Rp(e,t,s)}function Rp(e,t,s){t.status="fulfilled",t.value=s,Cp(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Op(e,s)))}function pl(e,t,s){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do t.status="rejected",t.reason=s,Cp(t),t=t.next;while(t!==c)}e.action=null}function Cp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Np(e,t){return t}function Mp(e,t){if(Me){var s=He.formState;if(s!==null){e:{var c=Se;if(Me){if(Ye){t:{for(var l=Ye,f=ln;l.nodeType!==8;){if(!f){l=null;break t}if(l=fn(l.nextSibling),l===null){l=null;break t}}f=l.data,l=f==="F!"||f==="F"?l:null}if(l){Ye=fn(l.nextSibling),c=l.data==="F!";break e}}vr(c)}c=!1}c&&(t=s[0])}}return s=Ot(),s.memoizedState=s.baseState=t,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Np,lastRenderedState:t},s.queue=c,s=Qp.bind(null,Se,c),c.dispatch=s,c=hl(!1),f=Sl.bind(null,Se,!1,c.queue),c=Ot(),l={state:t,dispatch:null,action:e,pending:null},c.queue=l,s=N_.bind(null,Se,l,f,s),l.dispatch=s,c.memoizedState=e,[t,s,!1]}function Ip(e){var t=st();return xp(t,Pe,e)}function xp(e,t,s){if(t=fl(e,t,Np)[0],e=ko(Qn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var c=Ys(t)}catch(y){throw y===Pa?po:y}else c=t;t=st();var l=t.queue,f=l.dispatch;return s!==t.memoizedState&&(Se.flags|=2048,Za(9,{destroy:void 0},M_.bind(null,l,s),null)),[c,f,e]}function M_(e,t){e.action=t}function zp(e){var t=st(),s=Pe;if(s!==null)return xp(t,s,e);st(),t=t.memoizedState,s=st();var c=s.queue.dispatch;return s.memoizedState=e,[t,c,!1]}function Za(e,t,s,c){return e={tag:e,create:s,deps:c,inst:t,next:null},t=Se.updateQueue,t===null&&(t=To(),Se.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(c=s.next,s.next=e,e.next=c,t.lastEffect=e),e}function Lp(){return st().memoizedState}function Oo(e,t,s,c){var l=Ot();Se.flags|=e,l.memoizedState=Za(1|t,{destroy:void 0},s,c===void 0?null:c)}function Ao(e,t,s,c){var l=st();c=c===void 0?null:c;var f=l.memoizedState.inst;Pe!==null&&c!==null&&il(c,Pe.memoizedState.deps)?l.memoizedState=Za(t,f,s,c):(Se.flags|=e,l.memoizedState=Za(1|t,f,s,c))}function Dp(e,t){Oo(8390656,8,e,t)}function gl(e,t){Ao(2048,8,e,t)}function I_(e){Se.flags|=4;var t=Se.updateQueue;if(t===null)t=To(),Se.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function jp(e){var t=st().memoizedState;return I_({ref:t,nextImpl:e}),function(){if((De&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Up(e,t){return Ao(4,2,e,t)}function $p(e,t){return Ao(4,4,e,t)}function Bp(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qp(e,t,s){s=s!=null?s.concat([e]):null,Ao(4,4,Bp.bind(null,t,e),s)}function yl(){}function Pp(e,t){var s=st();t=t===void 0?null:t;var c=s.memoizedState;return t!==null&&il(t,c[1])?c[0]:(s.memoizedState=[e,t],e)}function Gp(e,t){var s=st();t=t===void 0?null:t;var c=s.memoizedState;if(t!==null&&il(t,c[1]))return c[0];if(c=e(),ia){mr(!0);try{e()}finally{mr(!1)}}return s.memoizedState=[c,t],c}function vl(e,t,s){return s===void 0||(Xn&1073741824)!==0&&(Re&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=Vg(),Se.lanes|=e,Ar|=e,s)}function Vp(e,t,s,c){return Zt(s,t)?s:Va.current!==null?(e=vl(e,s,c),Zt(e,t)||(ct=!0),e):(Xn&42)===0||(Xn&1073741824)!==0&&(Re&261930)===0?(ct=!0,e.memoizedState=s):(e=Vg(),Se.lanes|=e,Ar|=e,t)}function Hp(e,t,s,c,l){var f=G.p;G.p=f!==0&&8>f?f:8;var y=I.T,S={};I.T=S,Sl(e,!1,t,s);try{var k=l(),D=I.S;if(D!==null&&D(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var V=A_(k,c);Zs(e,t,V,Wt(e))}else Zs(e,t,c,Wt(e))}catch(Y){Zs(e,t,{then:function(){},status:"rejected",reason:Y},Wt())}finally{G.p=f,y!==null&&S.types!==null&&(y.types=S.types),I.T=y}}function x_(){}function bl(e,t,s,c){if(e.tag!==5)throw Error(i(476));var l=Yp(e).queue;Hp(e,l,t,Q,s===null?x_:function(){return Zp(e),s(c)})}function Yp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:Q},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Zp(e){var t=Yp(e);t.next===null&&(t=e.alternate.memoizedState),Zs(e,t.next.queue,{},Wt())}function El(){return gt(li)}function Fp(){return st().memoizedState}function Xp(){return st().memoizedState}function z_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Wt();e=Sr(s);var c=_r(t,e,s);c!==null&&(Dt(c,t,s),Ps(c,t,s)),t={cache:Xu()},e.payload=t;return}t=t.return}}function L_(e,t,s){var c=Wt();s={lane:c,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ro(e)?Kp(t,s):(s=Uu(e,t,s,c),s!==null&&(Dt(s,e,c),Jp(s,t,c)))}function Qp(e,t,s){var c=Wt();Zs(e,t,s,c)}function Zs(e,t,s,c){var l={lane:c,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ro(e))Kp(t,l);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,S=f(y,s);if(l.hasEagerState=!0,l.eagerState=S,Zt(S,y))return oo(e,t,l,0),He===null&&io(),!1}catch{}finally{}if(s=Uu(e,t,l,c),s!==null)return Dt(s,e,c),Jp(s,t,c),!0}return!1}function Sl(e,t,s,c){if(c={lane:2,revertLane:Wl(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ro(e)){if(t)throw Error(i(479))}else t=Uu(e,s,c,2),t!==null&&Dt(t,e,2)}function Ro(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function Kp(e,t){Ha=So=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Jp(e,t,s){if((s&4194048)!==0){var c=t.lanes;c&=e.pendingLanes,s|=c,t.lanes=s,rh(e,s)}}var Fs={readContext:gt,use:wo,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};Fs.useEffectEvent=tt;var Wp={readContext:gt,use:wo,useCallback:function(e,t){return Ot().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Dp,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Oo(4194308,4,Bp.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){Oo(4,2,e,t)},useMemo:function(e,t){var s=Ot();t=t===void 0?null:t;var c=e();if(ia){mr(!0);try{e()}finally{mr(!1)}}return s.memoizedState=[c,t],c},useReducer:function(e,t,s){var c=Ot();if(s!==void 0){var l=s(t);if(ia){mr(!0);try{s(t)}finally{mr(!1)}}}else l=t;return c.memoizedState=c.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},c.queue=e,e=e.dispatch=L_.bind(null,Se,e),[c.memoizedState,e]},useRef:function(e){var t=Ot();return e={current:e},t.memoizedState=e},useState:function(e){e=hl(e);var t=e.queue,s=Qp.bind(null,Se,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:yl,useDeferredValue:function(e,t){var s=Ot();return vl(s,e,t)},useTransition:function(){var e=hl(!1);return e=Hp.bind(null,Se,e.queue,!0,!1),Ot().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var c=Se,l=Ot();if(Me){if(s===void 0)throw Error(i(407));s=s()}else{if(s=t(),He===null)throw Error(i(349));(Re&127)!==0||Ep(c,t,s)}l.memoizedState=s;var f={value:s,getSnapshot:t};return l.queue=f,Dp(_p.bind(null,c,f,e),[e]),c.flags|=2048,Za(9,{destroy:void 0},Sp.bind(null,c,f,s,t),null),s},useId:function(){var e=Ot(),t=He.identifierPrefix;if(Me){var s=Nn,c=Cn;s=(c&~(1<<32-Yt(c)-1)).toString(32)+s,t="_"+t+"R_"+s,s=_o++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=R_++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:El,useFormState:Mp,useActionState:Mp,useOptimistic:function(e){var t=Ot();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Sl.bind(null,Se,!0,s),s.dispatch=t,[e,t]},useMemoCache:dl,useCacheRefresh:function(){return Ot().memoizedState=z_.bind(null,Se)},useEffectEvent:function(e){var t=Ot(),s={impl:e};return t.memoizedState=s,function(){if((De&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},_l={readContext:gt,use:wo,useCallback:Pp,useContext:gt,useEffect:gl,useImperativeHandle:qp,useInsertionEffect:Up,useLayoutEffect:$p,useMemo:Gp,useReducer:ko,useRef:Lp,useState:function(){return ko(Qn)},useDebugValue:yl,useDeferredValue:function(e,t){var s=st();return Vp(s,Pe.memoizedState,e,t)},useTransition:function(){var e=ko(Qn)[0],t=st().memoizedState;return[typeof e=="boolean"?e:Ys(e),t]},useSyncExternalStore:bp,useId:Fp,useHostTransitionStatus:El,useFormState:Ip,useActionState:Ip,useOptimistic:function(e,t){var s=st();return kp(s,Pe,e,t)},useMemoCache:dl,useCacheRefresh:Xp};_l.useEffectEvent=jp;var eg={readContext:gt,use:wo,useCallback:Pp,useContext:gt,useEffect:gl,useImperativeHandle:qp,useInsertionEffect:Up,useLayoutEffect:$p,useMemo:Gp,useReducer:ml,useRef:Lp,useState:function(){return ml(Qn)},useDebugValue:yl,useDeferredValue:function(e,t){var s=st();return Pe===null?vl(s,e,t):Vp(s,Pe.memoizedState,e,t)},useTransition:function(){var e=ml(Qn)[0],t=st().memoizedState;return[typeof e=="boolean"?e:Ys(e),t]},useSyncExternalStore:bp,useId:Fp,useHostTransitionStatus:El,useFormState:zp,useActionState:zp,useOptimistic:function(e,t){var s=st();return Pe!==null?kp(s,Pe,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:dl,useCacheRefresh:Xp};eg.useEffectEvent=jp;function Tl(e,t,s,c){t=e.memoizedState,s=s(c,t),s=s==null?t:v({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var wl={enqueueSetState:function(e,t,s){e=e._reactInternals;var c=Wt(),l=Sr(c);l.payload=t,s!=null&&(l.callback=s),t=_r(e,l,c),t!==null&&(Dt(t,e,c),Ps(t,e,c))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var c=Wt(),l=Sr(c);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=_r(e,l,c),t!==null&&(Dt(t,e,c),Ps(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Wt(),c=Sr(s);c.tag=2,t!=null&&(c.callback=t),t=_r(e,c,s),t!==null&&(Dt(t,e,s),Ps(t,e,s))}};function tg(e,t,s,c,l,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,f,y):t.prototype&&t.prototype.isPureReactComponent?!zs(s,c)||!zs(l,f):!0}function ng(e,t,s,c){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,c),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,c),t.state!==e&&wl.enqueueReplaceState(t,t.state,null)}function oa(e,t){var s=t;if("ref"in t){s={};for(var c in t)c!=="ref"&&(s[c]=t[c])}if(e=e.defaultProps){s===t&&(s=v({},s));for(var l in e)s[l]===void 0&&(s[l]=e[l])}return s}function rg(e){so(e)}function ag(e){console.error(e)}function sg(e){so(e)}function Co(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(c){setTimeout(function(){throw c})}}function ig(e,t,s){try{var c=e.onCaughtError;c(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function kl(e,t,s){return s=Sr(s),s.tag=3,s.payload={element:null},s.callback=function(){Co(e,t)},s}function og(e){return e=Sr(e),e.tag=3,e}function cg(e,t,s,c){var l=s.type.getDerivedStateFromError;if(typeof l=="function"){var f=c.value;e.payload=function(){return l(f)},e.callback=function(){ig(t,s,c)}}var y=s.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){ig(t,s,c),typeof l!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function D_(e,t,s,c,l){if(s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(t=s.alternate,t!==null&&$a(t,s,l,!0),s=Xt.current,s!==null){switch(s.tag){case 31:case 13:return dn===null?qo():s.alternate===null&&nt===0&&(nt=3),s.flags&=-257,s.flags|=65536,s.lanes=l,c===go?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([c]):t.add(c),Ql(e,c,l)),!1;case 22:return s.flags|=65536,c===go?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([c])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([c]):s.add(c)),Ql(e,c,l)),!1}throw Error(i(435,s.tag))}return Ql(e,c,l),qo(),!1}if(Me)return t=Xt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,c!==Vu&&(e=Error(i(422),{cause:c}),js(on(e,s)))):(c!==Vu&&(t=Error(i(423),{cause:c}),js(on(t,s))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,c=on(c,s),l=kl(e.stateNode,c,l),tl(e,l),nt!==4&&(nt=2)),!1;var f=Error(i(520),{cause:c});if(f=on(f,s),ni===null?ni=[f]:ni.push(f),nt!==4&&(nt=2),t===null)return!0;c=on(c,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=l&-l,s.lanes|=e,e=kl(s.stateNode,c,e),tl(s,e),!1;case 1:if(t=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Rr===null||!Rr.has(f))))return s.flags|=65536,l&=-l,s.lanes|=l,l=og(l),cg(l,e,s,c),tl(s,l),!1}s=s.return}while(s!==null);return!1}var Ol=Error(i(461)),ct=!1;function yt(e,t,s,c){t.child=e===null?fp(t,null,s,c):sa(t,e.child,s,c)}function ug(e,t,s,c,l){s=s.render;var f=t.ref;if("ref"in c){var y={};for(var S in c)S!=="ref"&&(y[S]=c[S])}else y=c;return ta(t),c=ol(e,t,s,y,f,l),S=cl(),e!==null&&!ct?(ul(e,t,l),Kn(e,t,l)):(Me&&S&&Pu(t),t.flags|=1,yt(e,t,c,l),t.child)}function lg(e,t,s,c,l){if(e===null){var f=s.type;return typeof f=="function"&&!$u(f)&&f.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=f,dg(e,t,f,c,l)):(e=uo(s.type,null,c,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!zl(e,l)){var y=f.memoizedProps;if(s=s.compare,s=s!==null?s:zs,s(y,c)&&e.ref===t.ref)return Kn(e,t,l)}return t.flags|=1,e=Hn(f,c),e.ref=t.ref,e.return=t,t.child=e}function dg(e,t,s,c,l){if(e!==null){var f=e.memoizedProps;if(zs(f,c)&&e.ref===t.ref)if(ct=!1,t.pendingProps=c=f,zl(e,l))(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,Kn(e,t,l)}return Al(e,t,s,c,l)}function fg(e,t,s,c){var l=c.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|s:s,e!==null){for(c=t.child=e.child,l=0;c!==null;)l=l|c.lanes|c.childLanes,c=c.sibling;c=l&~f}else c=0,t.child=null;return mg(e,t,f,s,c)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ho(t,f!==null?f.cachePool:null),f!==null?pp(t,f):rl(),gp(t);else return c=t.lanes=536870912,mg(e,t,f!==null?f.baseLanes|s:s,s,c)}else f!==null?(ho(t,f.cachePool),pp(t,f),wr(),t.memoizedState=null):(e!==null&&ho(t,null),rl(),wr());return yt(e,t,l,s),t.child}function Xs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function mg(e,t,s,c,l){var f=Ku();return f=f===null?null:{parent:it._currentValue,pool:f},t.memoizedState={baseLanes:s,cachePool:f},e!==null&&ho(t,null),rl(),gp(t),e!==null&&$a(e,t,c,!0),t.childLanes=l,null}function No(e,t){return t=Io({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function hg(e,t,s){return sa(t,e.child,null,s),e=No(t,t.pendingProps),e.flags|=2,Qt(t),t.memoizedState=null,e}function j_(e,t,s){var c=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(c.mode==="hidden")return e=No(t,c),t.lanes=536870912,Xs(null,e);if(sl(t),(e=Ye)?(e=Oy(e,ln),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:gr!==null?{id:Cn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},s=Kh(e),s.return=t,t.child=s,pt=t,Ye=null)):e=null,e===null)throw vr(t);return t.lanes=536870912,null}return No(t,c)}var f=e.memoizedState;if(f!==null){var y=f.dehydrated;if(sl(t),l)if(t.flags&256)t.flags&=-257,t=hg(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(ct||$a(e,t,s,!1),l=(s&e.childLanes)!==0,ct||l){if(c=He,c!==null&&(y=ah(c,s),y!==0&&y!==f.retryLane))throw f.retryLane=y,Kr(e,y),Dt(c,e,y),Ol;qo(),t=hg(e,t,s)}else e=f.treeContext,Ye=fn(y.nextSibling),pt=t,Me=!0,yr=null,ln=!1,e!==null&&ep(t,e),t=No(t,c),t.flags|=4096;return t}return e=Hn(e.child,{mode:c.mode,children:c.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Mo(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Al(e,t,s,c,l){return ta(t),s=ol(e,t,s,c,void 0,l),c=cl(),e!==null&&!ct?(ul(e,t,l),Kn(e,t,l)):(Me&&c&&Pu(t),t.flags|=1,yt(e,t,s,l),t.child)}function pg(e,t,s,c,l,f){return ta(t),t.updateQueue=null,s=vp(t,c,s,l),yp(e),c=cl(),e!==null&&!ct?(ul(e,t,f),Kn(e,t,f)):(Me&&c&&Pu(t),t.flags|=1,yt(e,t,s,f),t.child)}function gg(e,t,s,c,l){if(ta(t),t.stateNode===null){var f=La,y=s.contextType;typeof y=="object"&&y!==null&&(f=gt(y)),f=new s(c,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wl,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=c,f.state=t.memoizedState,f.refs={},Wu(t),y=s.contextType,f.context=typeof y=="object"&&y!==null?gt(y):La,f.state=t.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Tl(t,s,y,c),f.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&wl.enqueueReplaceState(f,f.state,null),Vs(t,c,f,l),Gs(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),c=!0}else if(e===null){f=t.stateNode;var S=t.memoizedProps,k=oa(s,S);f.props=k;var D=f.context,V=s.contextType;y=La,typeof V=="object"&&V!==null&&(y=gt(V));var Y=s.getDerivedStateFromProps;V=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=t.pendingProps!==S,V||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||D!==y)&&ng(t,f,c,y),Er=!1;var j=t.memoizedState;f.state=j,Vs(t,c,f,l),Gs(),D=t.memoizedState,S||j!==D||Er?(typeof Y=="function"&&(Tl(t,s,Y,c),D=t.memoizedState),(k=Er||tg(t,s,k,c,j,D,y))?(V||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=c,t.memoizedState=D),f.props=c,f.state=D,f.context=y,c=k):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),c=!1)}else{f=t.stateNode,el(e,t),y=t.memoizedProps,V=oa(s,y),f.props=V,Y=t.pendingProps,j=f.context,D=s.contextType,k=La,typeof D=="object"&&D!==null&&(k=gt(D)),S=s.getDerivedStateFromProps,(D=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==Y||j!==k)&&ng(t,f,c,k),Er=!1,j=t.memoizedState,f.state=j,Vs(t,c,f,l),Gs();var P=t.memoizedState;y!==Y||j!==P||Er||e!==null&&e.dependencies!==null&&fo(e.dependencies)?(typeof S=="function"&&(Tl(t,s,S,c),P=t.memoizedState),(V=Er||tg(t,s,V,c,j,P,k)||e!==null&&e.dependencies!==null&&fo(e.dependencies))?(D||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(c,P,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(c,P,k)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),t.memoizedProps=c,t.memoizedState=P),f.props=c,f.state=P,f.context=k,c=V):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),c=!1)}return f=c,Mo(e,t),c=(t.flags&128)!==0,f||c?(f=t.stateNode,s=c&&typeof s.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&c?(t.child=sa(t,e.child,null,l),t.child=sa(t,null,s,l)):yt(e,t,s,l),t.memoizedState=f.state,e=t.child):e=Kn(e,t,l),e}function yg(e,t,s,c){return Wr(),t.flags|=256,yt(e,t,s,c),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cl(e){return{baseLanes:e,cachePool:ip()}}function Nl(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Jt),e}function vg(e,t,s){var c=t.pendingProps,l=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(at.current&2)!==0),y&&(l=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(l?Tr(t):wr(),(e=Ye)?(e=Oy(e,ln),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:gr!==null?{id:Cn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},s=Kh(e),s.return=t,t.child=s,pt=t,Ye=null)):e=null,e===null)throw vr(t);return fd(e)?t.lanes=32:t.lanes=536870912,null}var S=c.children;return c=c.fallback,l?(wr(),l=t.mode,S=Io({mode:"hidden",children:S},l),c=Jr(c,l,s,null),S.return=t,c.return=t,S.sibling=c,t.child=S,c=t.child,c.memoizedState=Cl(s),c.childLanes=Nl(e,y,s),t.memoizedState=Rl,Xs(null,c)):(Tr(t),Ml(t,S))}var k=e.memoizedState;if(k!==null&&(S=k.dehydrated,S!==null)){if(f)t.flags&256?(Tr(t),t.flags&=-257,t=Il(e,t,s)):t.memoizedState!==null?(wr(),t.child=e.child,t.flags|=128,t=null):(wr(),S=c.fallback,l=t.mode,c=Io({mode:"visible",children:c.children},l),S=Jr(S,l,s,null),S.flags|=2,c.return=t,S.return=t,c.sibling=S,t.child=c,sa(t,e.child,null,s),c=t.child,c.memoizedState=Cl(s),c.childLanes=Nl(e,y,s),t.memoizedState=Rl,t=Xs(null,c));else if(Tr(t),fd(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var D=y.dgst;y=D,c=Error(i(419)),c.stack="",c.digest=y,js({value:c,source:null,stack:null}),t=Il(e,t,s)}else if(ct||$a(e,t,s,!1),y=(s&e.childLanes)!==0,ct||y){if(y=He,y!==null&&(c=ah(y,s),c!==0&&c!==k.retryLane))throw k.retryLane=c,Kr(e,c),Dt(y,e,c),Ol;dd(S)||qo(),t=Il(e,t,s)}else dd(S)?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,Ye=fn(S.nextSibling),pt=t,Me=!0,yr=null,ln=!1,e!==null&&ep(t,e),t=Ml(t,c.children),t.flags|=4096);return t}return l?(wr(),S=c.fallback,l=t.mode,k=e.child,D=k.sibling,c=Hn(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,D!==null?S=Hn(D,S):(S=Jr(S,l,s,null),S.flags|=2),S.return=t,c.return=t,c.sibling=S,t.child=c,Xs(null,c),c=t.child,S=e.child.memoizedState,S===null?S=Cl(s):(l=S.cachePool,l!==null?(k=it._currentValue,l=l.parent!==k?{parent:k,pool:k}:l):l=ip(),S={baseLanes:S.baseLanes|s,cachePool:l}),c.memoizedState=S,c.childLanes=Nl(e,y,s),t.memoizedState=Rl,Xs(e.child,c)):(Tr(t),s=e.child,e=s.sibling,s=Hn(s,{mode:"visible",children:c.children}),s.return=t,s.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=s,t.memoizedState=null,s)}function Ml(e,t){return t=Io({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Io(e,t){return e=Ft(22,e,null,t),e.lanes=0,e}function Il(e,t,s){return sa(t,e.child,null,s),e=Ml(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bg(e,t,s){e.lanes|=t;var c=e.alternate;c!==null&&(c.lanes|=t),Zu(e.return,t,s)}function xl(e,t,s,c,l,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:l,treeForkCount:f}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=s,y.tailMode=l,y.treeForkCount=f)}function Eg(e,t,s){var c=t.pendingProps,l=c.revealOrder,f=c.tail;c=c.children;var y=at.current,S=(y&2)!==0;if(S?(y=y&1|2,t.flags|=128):y&=1,X(at,y),yt(e,t,c,s),c=Me?Ds:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bg(e,s,t);else if(e.tag===19)bg(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(s=t.child,l=null;s!==null;)e=s.alternate,e!==null&&Eo(e)===null&&(l=s),s=s.sibling;s=l,s===null?(l=t.child,t.child=null):(l=s.sibling,s.sibling=null),xl(t,!1,l,s,f,c);break;case"backwards":case"unstable_legacy-backwards":for(s=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Eo(e)===null){t.child=l;break}e=l.sibling,l.sibling=s,s=l,l=e}xl(t,!0,s,null,f,c);break;case"together":xl(t,!1,null,null,void 0,c);break;default:t.memoizedState=null}return t.child}function Kn(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ar|=t.lanes,(s&t.childLanes)===0)if(e!==null){if($a(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,s=Hn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Hn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function zl(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&fo(e)))}function U_(e,t,s){switch(t.tag){case 3:kt(t,t.stateNode.containerInfo),br(t,it,e.memoizedState.cache),Wr();break;case 27:case 5:Ss(t);break;case 4:kt(t,t.stateNode.containerInfo);break;case 10:br(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,sl(t),null;break;case 13:var c=t.memoizedState;if(c!==null)return c.dehydrated!==null?(Tr(t),t.flags|=128,null):(s&t.child.childLanes)!==0?vg(e,t,s):(Tr(t),e=Kn(e,t,s),e!==null?e.sibling:null);Tr(t);break;case 19:var l=(e.flags&128)!==0;if(c=(s&t.childLanes)!==0,c||($a(e,t,s,!1),c=(s&t.childLanes)!==0),l){if(c)return Eg(e,t,s);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),X(at,at.current),c)break;return null;case 22:return t.lanes=0,fg(e,t,s,t.pendingProps);case 24:br(t,it,e.memoizedState.cache)}return Kn(e,t,s)}function Sg(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)ct=!0;else{if(!zl(e,s)&&(t.flags&128)===0)return ct=!1,U_(e,t,s);ct=(e.flags&131072)!==0}else ct=!1,Me&&(t.flags&1048576)!==0&&Wh(t,Ds,t.index);switch(t.lanes=0,t.tag){case 16:e:{var c=t.pendingProps;if(e=ra(t.elementType),t.type=e,typeof e=="function")$u(e)?(c=oa(e,c),t.tag=1,t=gg(null,t,e,c,s)):(t.tag=0,t=Al(null,t,e,c,s));else{if(e!=null){var l=e.$$typeof;if(l===N){t.tag=11,t=ug(null,t,e,c,s);break e}else if(l===q){t.tag=14,t=lg(null,t,e,c,s);break e}}throw t=W(e)||e,Error(i(306,t,""))}}return t;case 0:return Al(e,t,t.type,t.pendingProps,s);case 1:return c=t.type,l=oa(c,t.pendingProps),gg(e,t,c,l,s);case 3:e:{if(kt(t,t.stateNode.containerInfo),e===null)throw Error(i(387));c=t.pendingProps;var f=t.memoizedState;l=f.element,el(e,t),Vs(t,c,null,s);var y=t.memoizedState;if(c=y.cache,br(t,it,c),c!==f.cache&&Fu(t,[it],s,!0),Gs(),c=y.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=yg(e,t,c,s);break e}else if(c!==l){l=on(Error(i(424)),t),js(l),t=yg(e,t,c,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ye=fn(e.firstChild),pt=t,Me=!0,yr=null,ln=!0,s=fp(t,null,c,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Wr(),c===l){t=Kn(e,t,s);break e}yt(e,t,c,s)}t=t.child}return t;case 26:return Mo(e,t),e===null?(s=Iy(t.type,null,t.pendingProps,null))?t.memoizedState=s:Me||(s=t.type,e=t.pendingProps,c=Fo(be.current).createElement(s),c[ht]=t,c[Nt]=e,vt(c,s,e),ft(c),t.stateNode=c):t.memoizedState=Iy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ss(t),e===null&&Me&&(c=t.stateNode=Cy(t.type,t.pendingProps,be.current),pt=t,ln=!0,l=Ye,Ir(t.type)?(md=l,Ye=fn(c.firstChild)):Ye=l),yt(e,t,t.pendingProps.children,s),Mo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((l=c=Ye)&&(c=hT(c,t.type,t.pendingProps,ln),c!==null?(t.stateNode=c,pt=t,Ye=fn(c.firstChild),ln=!1,l=!0):l=!1),l||vr(t)),Ss(t),l=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,c=f.children,cd(l,f)?c=null:y!==null&&cd(l,y)&&(t.flags|=32),t.memoizedState!==null&&(l=ol(e,t,C_,null,null,s),li._currentValue=l),Mo(e,t),yt(e,t,c,s),t.child;case 6:return e===null&&Me&&((e=s=Ye)&&(s=pT(s,t.pendingProps,ln),s!==null?(t.stateNode=s,pt=t,Ye=null,e=!0):e=!1),e||vr(t)),null;case 13:return vg(e,t,s);case 4:return kt(t,t.stateNode.containerInfo),c=t.pendingProps,e===null?t.child=sa(t,null,c,s):yt(e,t,c,s),t.child;case 11:return ug(e,t,t.type,t.pendingProps,s);case 7:return yt(e,t,t.pendingProps,s),t.child;case 8:return yt(e,t,t.pendingProps.children,s),t.child;case 12:return yt(e,t,t.pendingProps.children,s),t.child;case 10:return c=t.pendingProps,br(t,t.type,c.value),yt(e,t,c.children,s),t.child;case 9:return l=t.type._context,c=t.pendingProps.children,ta(t),l=gt(l),c=c(l),t.flags|=1,yt(e,t,c,s),t.child;case 14:return lg(e,t,t.type,t.pendingProps,s);case 15:return dg(e,t,t.type,t.pendingProps,s);case 19:return Eg(e,t,s);case 31:return j_(e,t,s);case 22:return fg(e,t,s,t.pendingProps);case 24:return ta(t),c=gt(it),e===null?(l=Ku(),l===null&&(l=He,f=Xu(),l.pooledCache=f,f.refCount++,f!==null&&(l.pooledCacheLanes|=s),l=f),t.memoizedState={parent:c,cache:l},Wu(t),br(t,it,l)):((e.lanes&s)!==0&&(el(e,t),Vs(t,null,null,s),Gs()),l=e.memoizedState,f=t.memoizedState,l.parent!==c?(l={parent:c,cache:c},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),br(t,it,c)):(c=f.cache,br(t,it,c),c!==l.cache&&Fu(t,[it],s,!0))),yt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Jn(e){e.flags|=4}function Ll(e,t,s,c,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Fg())e.flags|=8192;else throw aa=go,Ju}else e.flags&=-16777217}function _g(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jy(t))if(Fg())e.flags|=8192;else throw aa=go,Ju}function xo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?th():536870912,e.lanes|=t,Ka|=t)}function Qs(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,c=0;if(t)for(var l=e.child;l!==null;)s|=l.lanes|l.childLanes,c|=l.subtreeFlags&65011712,c|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)s|=l.lanes|l.childLanes,c|=l.subtreeFlags,c|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=c,e.childLanes=s,t}function $_(e,t,s){var c=t.pendingProps;switch(Gu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return Ze(t),null;case 3:return s=t.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),t.memoizedState.cache!==c&&(t.flags|=2048),Fn(it),rt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ua(t)?Jn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Hu())),Ze(t),null;case 26:var l=t.type,f=t.memoizedState;return e===null?(Jn(t),f!==null?(Ze(t),_g(t,f)):(Ze(t),Ll(t,l,null,c,s))):f?f!==e.memoizedState?(Jn(t),Ze(t),_g(t,f)):(Ze(t),t.flags&=-16777217):(e=e.memoizedProps,e!==c&&Jn(t),Ze(t),Ll(t,l,e,c,s)),null;case 27:if(Gi(t),s=be.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==c&&Jn(t);else{if(!c){if(t.stateNode===null)throw Error(i(166));return Ze(t),null}e=te.current,Ua(t)?tp(t):(e=Cy(l,c,s),t.stateNode=e,Jn(t))}return Ze(t),null;case 5:if(Gi(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==c&&Jn(t);else{if(!c){if(t.stateNode===null)throw Error(i(166));return Ze(t),null}if(f=te.current,Ua(t))tp(t);else{var y=Fo(be.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof c.is=="string"?y.createElement("select",{is:c.is}):y.createElement("select"),c.multiple?f.multiple=!0:c.size&&(f.size=c.size);break;default:f=typeof c.is=="string"?y.createElement(l,{is:c.is}):y.createElement(l)}}f[ht]=t,f[Nt]=c;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=f;e:switch(vt(f,l,c),l){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Jn(t)}}return Ze(t),Ll(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==c&&Jn(t);else{if(typeof c!="string"&&t.stateNode===null)throw Error(i(166));if(e=be.current,Ua(t)){if(e=t.stateNode,s=t.memoizedProps,c=null,l=pt,l!==null)switch(l.tag){case 27:case 5:c=l.memoizedProps}e[ht]=t,e=!!(e.nodeValue===s||c!==null&&c.suppressHydrationWarning===!0||vy(e.nodeValue,s)),e||vr(t,!0)}else e=Fo(e).createTextNode(c),e[ht]=t,t.stateNode=e}return Ze(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(c=Ua(t),s!==null){if(e===null){if(!c)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[ht]=t}else Wr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),e=!1}else s=Hu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(Qt(t),t):(Qt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Ze(t),null;case 13:if(c=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Ua(t),c!==null&&c.dehydrated!==null){if(e===null){if(!l)throw Error(i(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));l[ht]=t}else Wr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),l=!1}else l=Hu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(Qt(t),t):(Qt(t),null)}return Qt(t),(t.flags&128)!==0?(t.lanes=s,t):(s=c!==null,e=e!==null&&e.memoizedState!==null,s&&(c=t.child,l=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(l=c.alternate.memoizedState.cachePool.pool),f=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==l&&(c.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),xo(t,t.updateQueue),Ze(t),null);case 4:return rt(),e===null&&rd(t.stateNode.containerInfo),Ze(t),null;case 10:return Fn(t.type),Ze(t),null;case 19:if($(at),c=t.memoizedState,c===null)return Ze(t),null;if(l=(t.flags&128)!==0,f=c.rendering,f===null)if(l)Qs(c,!1);else{if(nt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Eo(e),f!==null){for(t.flags|=128,Qs(c,!1),e=f.updateQueue,t.updateQueue=e,xo(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Qh(s,e),s=s.sibling;return X(at,at.current&1|2),Me&&Yn(t,c.treeForkCount),t.child}e=e.sibling}c.tail!==null&&Vt()>Uo&&(t.flags|=128,l=!0,Qs(c,!1),t.lanes=4194304)}else{if(!l)if(e=Eo(f),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,xo(t,e),Qs(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Me)return Ze(t),null}else 2*Vt()-c.renderingStartTime>Uo&&s!==536870912&&(t.flags|=128,l=!0,Qs(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(e=c.last,e!==null?e.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Vt(),e.sibling=null,s=at.current,X(at,l?s&1|2:s&1),Me&&Yn(t,c.treeForkCount),e):(Ze(t),null);case 22:case 23:return Qt(t),al(),c=t.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(t.flags|=8192):c&&(t.flags|=8192),c?(s&536870912)!==0&&(t.flags&128)===0&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),s=t.updateQueue,s!==null&&xo(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),c=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),c!==s&&(t.flags|=2048),e!==null&&$(na),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Fn(it),Ze(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function B_(e,t){switch(Gu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fn(it),rt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Gi(t),null;case 31:if(t.memoizedState!==null){if(Qt(t),t.alternate===null)throw Error(i(340));Wr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Wr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $(at),null;case 4:return rt(),null;case 10:return Fn(t.type),null;case 22:case 23:return Qt(t),al(),e!==null&&$(na),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Fn(it),null;case 25:return null;default:return null}}function Tg(e,t){switch(Gu(t),t.tag){case 3:Fn(it),rt();break;case 26:case 27:case 5:Gi(t);break;case 4:rt();break;case 31:t.memoizedState!==null&&Qt(t);break;case 13:Qt(t);break;case 19:$(at);break;case 10:Fn(t.type);break;case 22:case 23:Qt(t),al(),e!==null&&$(na);break;case 24:Fn(it)}}function Ks(e,t){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var l=c.next;s=l;do{if((s.tag&e)===e){c=void 0;var f=s.create,y=s.inst;c=f(),y.destroy=c}s=s.next}while(s!==l)}}catch(S){qe(t,t.return,S)}}function kr(e,t,s){try{var c=t.updateQueue,l=c!==null?c.lastEffect:null;if(l!==null){var f=l.next;c=f;do{if((c.tag&e)===e){var y=c.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,l=t;var k=s,D=S;try{D()}catch(V){qe(l,k,V)}}}c=c.next}while(c!==f)}}catch(V){qe(t,t.return,V)}}function wg(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{hp(t,s)}catch(c){qe(e,e.return,c)}}}function kg(e,t,s){s.props=oa(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(c){qe(e,t,c)}}function Js(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof s=="function"?e.refCleanup=s(c):s.current=c}}catch(l){qe(e,t,l)}}function Mn(e,t){var s=e.ref,c=e.refCleanup;if(s!==null)if(typeof c=="function")try{c()}catch(l){qe(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(l){qe(e,t,l)}else s.current=null}function Og(e){var t=e.type,s=e.memoizedProps,c=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&c.focus();break e;case"img":s.src?c.src=s.src:s.srcSet&&(c.srcset=s.srcSet)}}catch(l){qe(e,e.return,l)}}function Dl(e,t,s){try{var c=e.stateNode;cT(c,e.type,s,t),c[Nt]=t}catch(l){qe(e,e.return,l)}}function Ag(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ir(e.type)||e.tag===4}function jl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ag(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ir(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ul(e,t,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Gn));else if(c!==4&&(c===27&&Ir(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Ul(e,t,s),e=e.sibling;e!==null;)Ul(e,t,s),e=e.sibling}function zo(e,t,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(c!==4&&(c===27&&Ir(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(zo(e,t,s),e=e.sibling;e!==null;)zo(e,t,s),e=e.sibling}function Rg(e){var t=e.stateNode,s=e.memoizedProps;try{for(var c=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);vt(t,c,s),t[ht]=e,t[Nt]=s}catch(f){qe(e,e.return,f)}}var Wn=!1,ut=!1,$l=!1,Cg=typeof WeakSet=="function"?WeakSet:Set,mt=null;function q_(e,t){if(e=e.containerInfo,id=tc,e=qh(e),Iu(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var y=0,S=-1,k=-1,D=0,V=0,Y=e,j=null;t:for(;;){for(var P;Y!==s||l!==0&&Y.nodeType!==3||(S=y+l),Y!==f||c!==0&&Y.nodeType!==3||(k=y+c),Y.nodeType===3&&(y+=Y.nodeValue.length),(P=Y.firstChild)!==null;)j=Y,Y=P;for(;;){if(Y===e)break t;if(j===s&&++D===l&&(S=y),j===f&&++V===c&&(k=y),(P=Y.nextSibling)!==null)break;Y=j,j=Y.parentNode}Y=P}s=S===-1||k===-1?null:{start:S,end:k}}else s=null}s=s||{start:0,end:0}}else s=null;for(od={focusedElem:e,selectionRange:s},tc=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){switch(t=mt,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)l=e[s],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,s=t,l=f.memoizedProps,f=f.memoizedState,c=s.stateNode;try{var oe=oa(s.type,l);e=c.getSnapshotBeforeUpdate(oe,f),c.__reactInternalSnapshotBeforeUpdate=e}catch(pe){qe(s,s.return,pe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)ld(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ld(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}}function Ng(e,t,s){var c=s.flags;switch(s.tag){case 0:case 11:case 15:tr(e,s),c&4&&Ks(5,s);break;case 1:if(tr(e,s),c&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(y){qe(s,s.return,y)}else{var l=oa(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){qe(s,s.return,y)}}c&64&&wg(s),c&512&&Js(s,s.return);break;case 3:if(tr(e,s),c&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{hp(e,t)}catch(y){qe(s,s.return,y)}}break;case 27:t===null&&c&4&&Rg(s);case 26:case 5:tr(e,s),t===null&&c&4&&Og(s),c&512&&Js(s,s.return);break;case 12:tr(e,s);break;case 31:tr(e,s),c&4&&xg(e,s);break;case 13:tr(e,s),c&4&&zg(e,s),c&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Q_.bind(null,s),gT(e,s))));break;case 22:if(c=s.memoizedState!==null||Wn,!c){t=t!==null&&t.memoizedState!==null||ut,l=Wn;var f=ut;Wn=c,(ut=t)&&!f?nr(e,s,(s.subtreeFlags&8772)!==0):tr(e,s),Wn=l,ut=f}break;case 30:break;default:tr(e,s)}}function Mg(e){var t=e.alternate;t!==null&&(e.alternate=null,Mg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&pu(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fe=null,It=!1;function er(e,t,s){for(s=s.child;s!==null;)Ig(e,t,s),s=s.sibling}function Ig(e,t,s){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(_s,s)}catch{}switch(s.tag){case 26:ut||Mn(s,t),er(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ut||Mn(s,t);var c=Fe,l=It;Ir(s.type)&&(Fe=s.stateNode,It=!1),er(e,t,s),oi(s.stateNode),Fe=c,It=l;break;case 5:ut||Mn(s,t);case 6:if(c=Fe,l=It,Fe=null,er(e,t,s),Fe=c,It=l,Fe!==null)if(It)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(s.stateNode)}catch(f){qe(s,t,f)}else try{Fe.removeChild(s.stateNode)}catch(f){qe(s,t,f)}break;case 18:Fe!==null&&(It?(e=Fe,wy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),ss(e)):wy(Fe,s.stateNode));break;case 4:c=Fe,l=It,Fe=s.stateNode.containerInfo,It=!0,er(e,t,s),Fe=c,It=l;break;case 0:case 11:case 14:case 15:kr(2,s,t),ut||kr(4,s,t),er(e,t,s);break;case 1:ut||(Mn(s,t),c=s.stateNode,typeof c.componentWillUnmount=="function"&&kg(s,t,c)),er(e,t,s);break;case 21:er(e,t,s);break;case 22:ut=(c=ut)||s.memoizedState!==null,er(e,t,s),ut=c;break;default:er(e,t,s)}}function xg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ss(e)}catch(s){qe(t,t.return,s)}}}function zg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ss(e)}catch(s){qe(t,t.return,s)}}function P_(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Cg),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Cg),t;default:throw Error(i(435,e.tag))}}function Lo(e,t){var s=P_(e);t.forEach(function(c){if(!s.has(c)){s.add(c);var l=K_.bind(null,e,c);c.then(l,l)}})}function xt(e,t){var s=t.deletions;if(s!==null)for(var c=0;c<s.length;c++){var l=s[c],f=e,y=t,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(Ir(S.type)){Fe=S.stateNode,It=!1;break e}break;case 5:Fe=S.stateNode,It=!1;break e;case 3:case 4:Fe=S.stateNode.containerInfo,It=!0;break e}S=S.return}if(Fe===null)throw Error(i(160));Ig(f,y,l),Fe=null,It=!1,f=l.alternate,f!==null&&(f.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Lg(t,e),t=t.sibling}var bn=null;function Lg(e,t){var s=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xt(t,e),zt(e),c&4&&(kr(3,e,e.return),Ks(3,e),kr(5,e,e.return));break;case 1:xt(t,e),zt(e),c&512&&(ut||s===null||Mn(s,s.return)),c&64&&Wn&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?c:s.concat(c))));break;case 26:var l=bn;if(xt(t,e),zt(e),c&512&&(ut||s===null||Mn(s,s.return)),c&4){var f=s!==null?s.memoizedState:null;if(c=e.memoizedState,s===null)if(c===null)if(e.stateNode===null){e:{c=e.type,s=e.memoizedProps,l=l.ownerDocument||l;t:switch(c){case"title":f=l.getElementsByTagName("title")[0],(!f||f[ks]||f[ht]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=l.createElement(c),l.head.insertBefore(f,l.querySelector("head > title"))),vt(f,c,s),f[ht]=e,ft(f),c=f;break e;case"link":var y=Ly("link","href",l).get(c+(s.href||""));if(y){for(var S=0;S<y.length;S++)if(f=y[S],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){y.splice(S,1);break t}}f=l.createElement(c),vt(f,c,s),l.head.appendChild(f);break;case"meta":if(y=Ly("meta","content",l).get(c+(s.content||""))){for(S=0;S<y.length;S++)if(f=y[S],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){y.splice(S,1);break t}}f=l.createElement(c),vt(f,c,s),l.head.appendChild(f);break;default:throw Error(i(468,c))}f[ht]=e,ft(f),c=f}e.stateNode=c}else Dy(l,e.type,e.stateNode);else e.stateNode=zy(l,c,e.memoizedProps);else f!==c?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,c===null?Dy(l,e.type,e.stateNode):zy(l,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Dl(e,e.memoizedProps,s.memoizedProps)}break;case 27:xt(t,e),zt(e),c&512&&(ut||s===null||Mn(s,s.return)),s!==null&&c&4&&Dl(e,e.memoizedProps,s.memoizedProps);break;case 5:if(xt(t,e),zt(e),c&512&&(ut||s===null||Mn(s,s.return)),e.flags&32){l=e.stateNode;try{Ra(l,"")}catch(oe){qe(e,e.return,oe)}}c&4&&e.stateNode!=null&&(l=e.memoizedProps,Dl(e,l,s!==null?s.memoizedProps:l)),c&1024&&($l=!0);break;case 6:if(xt(t,e),zt(e),c&4){if(e.stateNode===null)throw Error(i(162));c=e.memoizedProps,s=e.stateNode;try{s.nodeValue=c}catch(oe){qe(e,e.return,oe)}}break;case 3:if(Ko=null,l=bn,bn=Xo(t.containerInfo),xt(t,e),bn=l,zt(e),c&4&&s!==null&&s.memoizedState.isDehydrated)try{ss(t.containerInfo)}catch(oe){qe(e,e.return,oe)}$l&&($l=!1,Dg(e));break;case 4:c=bn,bn=Xo(e.stateNode.containerInfo),xt(t,e),zt(e),bn=c;break;case 12:xt(t,e),zt(e);break;case 31:xt(t,e),zt(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Lo(e,c)));break;case 13:xt(t,e),zt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(jo=Vt()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Lo(e,c)));break;case 22:l=e.memoizedState!==null;var k=s!==null&&s.memoizedState!==null,D=Wn,V=ut;if(Wn=D||l,ut=V||k,xt(t,e),ut=V,Wn=D,zt(e),c&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(s===null||k||Wn||ut||ca(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){k=s=t;try{if(f=k.stateNode,l)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=k.stateNode;var Y=k.memoizedProps.style,j=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;S.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(oe){qe(k,k.return,oe)}}}else if(t.tag===6){if(s===null){k=t;try{k.stateNode.nodeValue=l?"":k.memoizedProps}catch(oe){qe(k,k.return,oe)}}}else if(t.tag===18){if(s===null){k=t;try{var P=k.stateNode;l?ky(P,!0):ky(k.stateNode,!1)}catch(oe){qe(k,k.return,oe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}c&4&&(c=e.updateQueue,c!==null&&(s=c.retryQueue,s!==null&&(c.retryQueue=null,Lo(e,s))));break;case 19:xt(t,e),zt(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Lo(e,c)));break;case 30:break;case 21:break;default:xt(t,e),zt(e)}}function zt(e){var t=e.flags;if(t&2){try{for(var s,c=e.return;c!==null;){if(Ag(c)){s=c;break}c=c.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var l=s.stateNode,f=jl(e);zo(e,f,l);break;case 5:var y=s.stateNode;s.flags&32&&(Ra(y,""),s.flags&=-33);var S=jl(e);zo(e,S,y);break;case 3:case 4:var k=s.stateNode.containerInfo,D=jl(e);Ul(e,D,k);break;default:throw Error(i(161))}}catch(V){qe(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Dg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function tr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ng(e,t.alternate,t),t=t.sibling}function ca(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:kr(4,t,t.return),ca(t);break;case 1:Mn(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&kg(t,t.return,s),ca(t);break;case 27:oi(t.stateNode);case 26:case 5:Mn(t,t.return),ca(t);break;case 22:t.memoizedState===null&&ca(t);break;case 30:ca(t);break;default:ca(t)}e=e.sibling}}function nr(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var c=t.alternate,l=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:nr(l,f,s),Ks(4,f);break;case 1:if(nr(l,f,s),c=f,l=c.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(D){qe(c,c.return,D)}if(c=f,l=c.updateQueue,l!==null){var S=c.stateNode;try{var k=l.shared.hiddenCallbacks;if(k!==null)for(l.shared.hiddenCallbacks=null,l=0;l<k.length;l++)mp(k[l],S)}catch(D){qe(c,c.return,D)}}s&&y&64&&wg(f),Js(f,f.return);break;case 27:Rg(f);case 26:case 5:nr(l,f,s),s&&c===null&&y&4&&Og(f),Js(f,f.return);break;case 12:nr(l,f,s);break;case 31:nr(l,f,s),s&&y&4&&xg(l,f);break;case 13:nr(l,f,s),s&&y&4&&zg(l,f);break;case 22:f.memoizedState===null&&nr(l,f,s),Js(f,f.return);break;case 30:break;default:nr(l,f,s)}t=t.sibling}}function Bl(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Us(s))}function ql(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Us(e))}function En(e,t,s,c){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jg(e,t,s,c),t=t.sibling}function jg(e,t,s,c){var l=t.flags;switch(t.tag){case 0:case 11:case 15:En(e,t,s,c),l&2048&&Ks(9,t);break;case 1:En(e,t,s,c);break;case 3:En(e,t,s,c),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Us(e)));break;case 12:if(l&2048){En(e,t,s,c),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,S=f.onPostCommit;typeof S=="function"&&S(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){qe(t,t.return,k)}}else En(e,t,s,c);break;case 31:En(e,t,s,c);break;case 13:En(e,t,s,c);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?En(e,t,s,c):Ws(e,t):f._visibility&2?En(e,t,s,c):(f._visibility|=2,Fa(e,t,s,c,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Bl(y,t);break;case 24:En(e,t,s,c),l&2048&&ql(t.alternate,t);break;default:En(e,t,s,c)}}function Fa(e,t,s,c,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,y=t,S=s,k=c,D=y.flags;switch(y.tag){case 0:case 11:case 15:Fa(f,y,S,k,l),Ks(8,y);break;case 23:break;case 22:var V=y.stateNode;y.memoizedState!==null?V._visibility&2?Fa(f,y,S,k,l):Ws(f,y):(V._visibility|=2,Fa(f,y,S,k,l)),l&&D&2048&&Bl(y.alternate,y);break;case 24:Fa(f,y,S,k,l),l&&D&2048&&ql(y.alternate,y);break;default:Fa(f,y,S,k,l)}t=t.sibling}}function Ws(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,c=t,l=c.flags;switch(c.tag){case 22:Ws(s,c),l&2048&&Bl(c.alternate,c);break;case 24:Ws(s,c),l&2048&&ql(c.alternate,c);break;default:Ws(s,c)}t=t.sibling}}var ei=8192;function Xa(e,t,s){if(e.subtreeFlags&ei)for(e=e.child;e!==null;)Ug(e,t,s),e=e.sibling}function Ug(e,t,s){switch(e.tag){case 26:Xa(e,t,s),e.flags&ei&&e.memoizedState!==null&&RT(s,bn,e.memoizedState,e.memoizedProps);break;case 5:Xa(e,t,s);break;case 3:case 4:var c=bn;bn=Xo(e.stateNode.containerInfo),Xa(e,t,s),bn=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=ei,ei=16777216,Xa(e,t,s),ei=c):Xa(e,t,s));break;default:Xa(e,t,s)}}function $g(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ti(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var c=t[s];mt=c,qg(c,e)}$g(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Bg(e),e=e.sibling}function Bg(e){switch(e.tag){case 0:case 11:case 15:ti(e),e.flags&2048&&kr(9,e,e.return);break;case 3:ti(e);break;case 12:ti(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Do(e)):ti(e);break;default:ti(e)}}function Do(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var c=t[s];mt=c,qg(c,e)}$g(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:kr(8,t,t.return),Do(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Do(t));break;default:Do(t)}e=e.sibling}}function qg(e,t){for(;mt!==null;){var s=mt;switch(s.tag){case 0:case 11:case 15:kr(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var c=s.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Us(s.memoizedState.cache)}if(c=s.child,c!==null)c.return=s,mt=c;else e:for(s=e;mt!==null;){c=mt;var l=c.sibling,f=c.return;if(Mg(c),c===s){mt=null;break e}if(l!==null){l.return=f,mt=l;break e}mt=f}}}var G_={getCacheForType:function(e){var t=gt(it),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return gt(it).controller.signal}},V_=typeof WeakMap=="function"?WeakMap:Map,De=0,He=null,we=null,Re=0,Be=0,Kt=null,Or=!1,Qa=!1,Pl=!1,rr=0,nt=0,Ar=0,ua=0,Gl=0,Jt=0,Ka=0,ni=null,Lt=null,Vl=!1,jo=0,Pg=0,Uo=1/0,$o=null,Rr=null,dt=0,Cr=null,Ja=null,ar=0,Hl=0,Yl=null,Gg=null,ri=0,Zl=null;function Wt(){return(De&2)!==0&&Re!==0?Re&-Re:I.T!==null?Wl():sh()}function Vg(){if(Jt===0)if((Re&536870912)===0||Me){var e=Yi;Yi<<=1,(Yi&3932160)===0&&(Yi=262144),Jt=e}else Jt=536870912;return e=Xt.current,e!==null&&(e.flags|=32),Jt}function Dt(e,t,s){(e===He&&(Be===2||Be===9)||e.cancelPendingCommit!==null)&&(Wa(e,0),Nr(e,Re,Jt,!1)),ws(e,s),((De&2)===0||e!==He)&&(e===He&&((De&2)===0&&(ua|=s),nt===4&&Nr(e,Re,Jt,!1)),In(e))}function Hg(e,t,s){if((De&6)!==0)throw Error(i(327));var c=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Ts(e,t),l=c?Z_(e,t):Xl(e,t,!0),f=c;do{if(l===0){Qa&&!c&&Nr(e,t,0,!1);break}else{if(s=e.current.alternate,f&&!H_(s)){l=Xl(e,t,!1),f=!1;continue}if(l===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var S=e;l=ni;var k=S.current.memoizedState.isDehydrated;if(k&&(Wa(S,y).flags|=256),y=Xl(S,y,!1),y!==2){if(Pl&&!k){S.errorRecoveryDisabledLanes|=f,ua|=f,l=4;break e}f=Lt,Lt=l,f!==null&&(Lt===null?Lt=f:Lt.push.apply(Lt,f))}l=y}if(f=!1,l!==2)continue}}if(l===1){Wa(e,0),Nr(e,t,0,!0);break}e:{switch(c=e,f=l,f){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Nr(c,t,Jt,!Or);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(l=jo+300-Vt(),10<l)){if(Nr(c,t,Jt,!Or),Fi(c,0,!0)!==0)break e;ar=t,c.timeoutHandle=_y(Yg.bind(null,c,s,Lt,$o,Vl,t,Jt,ua,Ka,Or,f,"Throttled",-0,0),l);break e}Yg(c,s,Lt,$o,Vl,t,Jt,ua,Ka,Or,f,null,-0,0)}}break}while(!0);In(e)}function Yg(e,t,s,c,l,f,y,S,k,D,V,Y,j,P){if(e.timeoutHandle=-1,Y=t.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},Ug(t,f,Y);var oe=(f&62914560)===f?jo-Vt():(f&4194048)===f?Pg-Vt():0;if(oe=CT(Y,oe),oe!==null){ar=f,e.cancelPendingCommit=oe(ey.bind(null,e,t,f,s,c,l,y,S,k,V,Y,null,j,P)),Nr(e,f,y,!D);return}}ey(e,t,f,s,c,l,y,S,k)}function H_(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var c=0;c<s.length;c++){var l=s[c],f=l.getSnapshot;l=l.value;try{if(!Zt(f(),l))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nr(e,t,s,c){t&=~Gl,t&=~ua,e.suspendedLanes|=t,e.pingedLanes&=~t,c&&(e.warmLanes|=t),c=e.expirationTimes;for(var l=t;0<l;){var f=31-Yt(l),y=1<<f;c[f]=-1,l&=~y}s!==0&&nh(e,s,t)}function Bo(){return(De&6)===0?(ai(0),!1):!0}function Fl(){if(we!==null){if(Be===0)var e=we.return;else e=we,Zn=ea=null,ll(e),Ga=null,Bs=0,e=we;for(;e!==null;)Tg(e.alternate,e),e=e.return;we=null}}function Wa(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,dT(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),ar=0,Fl(),He=e,we=s=Hn(e.current,null),Re=t,Be=0,Kt=null,Or=!1,Qa=Ts(e,t),Pl=!1,Ka=Jt=Gl=ua=Ar=nt=0,Lt=ni=null,Vl=!1,(t&8)!==0&&(t|=t&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=t;0<c;){var l=31-Yt(c),f=1<<l;t|=e[l],c&=~f}return rr=t,io(),s}function Zg(e,t){Se=null,I.H=Fs,t===Pa||t===po?(t=up(),Be=3):t===Ju?(t=up(),Be=4):Be=t===Ol?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Kt=t,we===null&&(nt=1,Co(e,on(t,e.current)))}function Fg(){var e=Xt.current;return e===null?!0:(Re&4194048)===Re?dn===null:(Re&62914560)===Re||(Re&536870912)!==0?e===dn:!1}function Xg(){var e=I.H;return I.H=Fs,e===null?Fs:e}function Qg(){var e=I.A;return I.A=G_,e}function qo(){nt=4,Or||(Re&4194048)!==Re&&Xt.current!==null||(Qa=!0),(Ar&134217727)===0&&(ua&134217727)===0||He===null||Nr(He,Re,Jt,!1)}function Xl(e,t,s){var c=De;De|=2;var l=Xg(),f=Qg();(He!==e||Re!==t)&&($o=null,Wa(e,t)),t=!1;var y=nt;e:do try{if(Be!==0&&we!==null){var S=we,k=Kt;switch(Be){case 8:Fl(),y=6;break e;case 3:case 2:case 9:case 6:Xt.current===null&&(t=!0);var D=Be;if(Be=0,Kt=null,es(e,S,k,D),s&&Qa){y=0;break e}break;default:D=Be,Be=0,Kt=null,es(e,S,k,D)}}Y_(),y=nt;break}catch(V){Zg(e,V)}while(!0);return t&&e.shellSuspendCounter++,Zn=ea=null,De=c,I.H=l,I.A=f,we===null&&(He=null,Re=0,io()),y}function Y_(){for(;we!==null;)Kg(we)}function Z_(e,t){var s=De;De|=2;var c=Xg(),l=Qg();He!==e||Re!==t?($o=null,Uo=Vt()+500,Wa(e,t)):Qa=Ts(e,t);e:do try{if(Be!==0&&we!==null){t=we;var f=Kt;t:switch(Be){case 1:Be=0,Kt=null,es(e,t,f,1);break;case 2:case 9:if(op(f)){Be=0,Kt=null,Jg(t);break}t=function(){Be!==2&&Be!==9||He!==e||(Be=7),In(e)},f.then(t,t);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:op(f)?(Be=0,Kt=null,Jg(t)):(Be=0,Kt=null,es(e,t,f,7));break;case 5:var y=null;switch(we.tag){case 26:y=we.memoizedState;case 5:case 27:var S=we;if(y?jy(y):S.stateNode.complete){Be=0,Kt=null;var k=S.sibling;if(k!==null)we=k;else{var D=S.return;D!==null?(we=D,Po(D)):we=null}break t}}Be=0,Kt=null,es(e,t,f,5);break;case 6:Be=0,Kt=null,es(e,t,f,6);break;case 8:Fl(),nt=6;break e;default:throw Error(i(462))}}F_();break}catch(V){Zg(e,V)}while(!0);return Zn=ea=null,I.H=c,I.A=l,De=s,we!==null?0:(He=null,Re=0,io(),nt)}function F_(){for(;we!==null&&!yS();)Kg(we)}function Kg(e){var t=Sg(e.alternate,e,rr);e.memoizedProps=e.pendingProps,t===null?Po(e):we=t}function Jg(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=pg(s,t,t.pendingProps,t.type,void 0,Re);break;case 11:t=pg(s,t,t.pendingProps,t.type.render,t.ref,Re);break;case 5:ll(t);default:Tg(s,t),t=we=Qh(t,rr),t=Sg(s,t,rr)}e.memoizedProps=e.pendingProps,t===null?Po(e):we=t}function es(e,t,s,c){Zn=ea=null,ll(t),Ga=null,Bs=0;var l=t.return;try{if(D_(e,l,t,s,Re)){nt=1,Co(e,on(s,e.current)),we=null;return}}catch(f){if(l!==null)throw we=l,f;nt=1,Co(e,on(s,e.current)),we=null;return}t.flags&32768?(Me||c===1?e=!0:Qa||(Re&536870912)!==0?e=!1:(Or=e=!0,(c===2||c===9||c===3||c===6)&&(c=Xt.current,c!==null&&c.tag===13&&(c.flags|=16384))),Wg(t,e)):Po(t)}function Po(e){var t=e;do{if((t.flags&32768)!==0){Wg(t,Or);return}e=t.return;var s=$_(t.alternate,t,rr);if(s!==null){we=s;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);nt===0&&(nt=5)}function Wg(e,t){do{var s=B_(e.alternate,e);if(s!==null){s.flags&=32767,we=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){we=e;return}we=e=s}while(e!==null);nt=6,we=null}function ey(e,t,s,c,l,f,y,S,k){e.cancelPendingCommit=null;do Go();while(dt!==0);if((De&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(f=t.lanes|t.childLanes,f|=ju,AS(e,s,f,y,S,k),e===He&&(we=He=null,Re=0),Ja=t,Cr=e,ar=s,Hl=f,Yl=l,Gg=c,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,J_(Vi,function(){return sy(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||c){c=I.T,I.T=null,l=G.p,G.p=2,y=De,De|=4;try{q_(e,t,s)}finally{De=y,G.p=l,I.T=c}}dt=1,ty(),ny(),ry()}}function ty(){if(dt===1){dt=0;var e=Cr,t=Ja,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=I.T,I.T=null;var c=G.p;G.p=2;var l=De;De|=4;try{Lg(t,e);var f=od,y=qh(e.containerInfo),S=f.focusedElem,k=f.selectionRange;if(y!==S&&S&&S.ownerDocument&&Bh(S.ownerDocument.documentElement,S)){if(k!==null&&Iu(S)){var D=k.start,V=k.end;if(V===void 0&&(V=D),"selectionStart"in S)S.selectionStart=D,S.selectionEnd=Math.min(V,S.value.length);else{var Y=S.ownerDocument||document,j=Y&&Y.defaultView||window;if(j.getSelection){var P=j.getSelection(),oe=S.textContent.length,pe=Math.min(k.start,oe),Ve=k.end===void 0?pe:Math.min(k.end,oe);!P.extend&&pe>Ve&&(y=Ve,Ve=pe,pe=y);var x=$h(S,pe),C=$h(S,Ve);if(x&&C&&(P.rangeCount!==1||P.anchorNode!==x.node||P.anchorOffset!==x.offset||P.focusNode!==C.node||P.focusOffset!==C.offset)){var L=Y.createRange();L.setStart(x.node,x.offset),P.removeAllRanges(),pe>Ve?(P.addRange(L),P.extend(C.node,C.offset)):(L.setEnd(C.node,C.offset),P.addRange(L))}}}}for(Y=[],P=S;P=P.parentNode;)P.nodeType===1&&Y.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Y.length;S++){var H=Y[S];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}tc=!!id,od=id=null}finally{De=l,G.p=c,I.T=s}}e.current=t,dt=2}}function ny(){if(dt===2){dt=0;var e=Cr,t=Ja,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=I.T,I.T=null;var c=G.p;G.p=2;var l=De;De|=4;try{Ng(e,t.alternate,t)}finally{De=l,G.p=c,I.T=s}}dt=3}}function ry(){if(dt===4||dt===3){dt=0,vS();var e=Cr,t=Ja,s=ar,c=Gg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?dt=5:(dt=0,Ja=Cr=null,ay(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Rr=null),mu(s),t=t.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(_s,t,void 0,(t.current.flags&128)===128)}catch{}if(c!==null){t=I.T,l=G.p,G.p=2,I.T=null;try{for(var f=e.onRecoverableError,y=0;y<c.length;y++){var S=c[y];f(S.value,{componentStack:S.stack})}}finally{I.T=t,G.p=l}}(ar&3)!==0&&Go(),In(e),l=e.pendingLanes,(s&261930)!==0&&(l&42)!==0?e===Zl?ri++:(ri=0,Zl=e):ri=0,ai(0)}}function ay(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Us(t)))}function Go(){return ty(),ny(),ry(),sy()}function sy(){if(dt!==5)return!1;var e=Cr,t=Hl;Hl=0;var s=mu(ar),c=I.T,l=G.p;try{G.p=32>s?32:s,I.T=null,s=Yl,Yl=null;var f=Cr,y=ar;if(dt=0,Ja=Cr=null,ar=0,(De&6)!==0)throw Error(i(331));var S=De;if(De|=4,Bg(f.current),jg(f,f.current,y,s),De=S,ai(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(_s,f)}catch{}return!0}finally{G.p=l,I.T=c,ay(e,t)}}function iy(e,t,s){t=on(s,t),t=kl(e.stateNode,t,2),e=_r(e,t,2),e!==null&&(ws(e,2),In(e))}function qe(e,t,s){if(e.tag===3)iy(e,e,s);else for(;t!==null;){if(t.tag===3){iy(t,e,s);break}else if(t.tag===1){var c=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Rr===null||!Rr.has(c))){e=on(s,e),s=og(2),c=_r(t,s,2),c!==null&&(cg(s,c,t,e),ws(c,2),In(c));break}}t=t.return}}function Ql(e,t,s){var c=e.pingCache;if(c===null){c=e.pingCache=new V_;var l=new Set;c.set(t,l)}else l=c.get(t),l===void 0&&(l=new Set,c.set(t,l));l.has(s)||(Pl=!0,l.add(s),e=X_.bind(null,e,t,s),t.then(e,e))}function X_(e,t,s){var c=e.pingCache;c!==null&&c.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,He===e&&(Re&s)===s&&(nt===4||nt===3&&(Re&62914560)===Re&&300>Vt()-jo?(De&2)===0&&Wa(e,0):Gl|=s,Ka===Re&&(Ka=0)),In(e)}function oy(e,t){t===0&&(t=th()),e=Kr(e,t),e!==null&&(ws(e,t),In(e))}function Q_(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),oy(e,s)}function K_(e,t){var s=0;switch(e.tag){case 31:case 13:var c=e.stateNode,l=e.memoizedState;l!==null&&(s=l.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(t),oy(e,s)}function J_(e,t){return uu(e,t)}var Vo=null,ts=null,Kl=!1,Ho=!1,Jl=!1,Mr=0;function In(e){e!==ts&&e.next===null&&(ts===null?Vo=ts=e:ts=ts.next=e),Ho=!0,Kl||(Kl=!0,eT())}function ai(e,t){if(!Jl&&Ho){Jl=!0;do for(var s=!1,c=Vo;c!==null;){if(e!==0){var l=c.pendingLanes;if(l===0)var f=0;else{var y=c.suspendedLanes,S=c.pingedLanes;f=(1<<31-Yt(42|e)+1)-1,f&=l&~(y&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,dy(c,f))}else f=Re,f=Fi(c,c===He?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(f&3)===0||Ts(c,f)||(s=!0,dy(c,f));c=c.next}while(s);Jl=!1}}function W_(){cy()}function cy(){Ho=Kl=!1;var e=0;Mr!==0&&lT()&&(e=Mr);for(var t=Vt(),s=null,c=Vo;c!==null;){var l=c.next,f=uy(c,t);f===0?(c.next=null,s===null?Vo=l:s.next=l,l===null&&(ts=s)):(s=c,(e!==0||(f&3)!==0)&&(Ho=!0)),c=l}dt!==0&&dt!==5||ai(e),Mr!==0&&(Mr=0)}function uy(e,t){for(var s=e.suspendedLanes,c=e.pingedLanes,l=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-Yt(f),S=1<<y,k=l[y];k===-1?((S&s)===0||(S&c)!==0)&&(l[y]=OS(S,t)):k<=t&&(e.expiredLanes|=S),f&=~S}if(t=He,s=Re,s=Fi(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,s===0||e===t&&(Be===2||Be===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&lu(c),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Ts(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(c!==null&&lu(c),mu(s)){case 2:case 8:s=Wm;break;case 32:s=Vi;break;case 268435456:s=eh;break;default:s=Vi}return c=ly.bind(null,e),s=uu(s,c),e.callbackPriority=t,e.callbackNode=s,t}return c!==null&&c!==null&&lu(c),e.callbackPriority=2,e.callbackNode=null,2}function ly(e,t){if(dt!==0&&dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Go()&&e.callbackNode!==s)return null;var c=Re;return c=Fi(e,e===He?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Hg(e,c,t),uy(e,Vt()),e.callbackNode!=null&&e.callbackNode===s?ly.bind(null,e):null)}function dy(e,t){if(Go())return null;Hg(e,t,!0)}function eT(){fT(function(){(De&6)!==0?uu(Jm,W_):cy()})}function Wl(){if(Mr===0){var e=Ba;e===0&&(e=Hi,Hi<<=1,(Hi&261888)===0&&(Hi=256)),Mr=e}return Mr}function fy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ji(""+e)}function my(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function tT(e,t,s,c,l){if(t==="submit"&&s&&s.stateNode===l){var f=fy((l[Nt]||null).action),y=c.submitter;y&&(t=(t=y[Nt]||null)?fy(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var S=new no("action","action",null,c,l);e.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Mr!==0){var k=y?my(l,y):new FormData(l);bl(s,{pending:!0,data:k,method:l.method,action:f},null,k)}}else typeof f=="function"&&(S.preventDefault(),k=y?my(l,y):new FormData(l),bl(s,{pending:!0,data:k,method:l.method,action:f},f,k))},currentTarget:l}]})}}for(var ed=0;ed<Du.length;ed++){var td=Du[ed],nT=td.toLowerCase(),rT=td[0].toUpperCase()+td.slice(1);vn(nT,"on"+rT)}vn(Vh,"onAnimationEnd"),vn(Hh,"onAnimationIteration"),vn(Yh,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(b_,"onTransitionRun"),vn(E_,"onTransitionStart"),vn(S_,"onTransitionCancel"),vn(Zh,"onTransitionEnd"),Oa("onMouseEnter",["mouseout","mouseover"]),Oa("onMouseLeave",["mouseout","mouseover"]),Oa("onPointerEnter",["pointerout","pointerover"]),Oa("onPointerLeave",["pointerout","pointerover"]),Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(si));function hy(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var c=e[s],l=c.event;c=c.listeners;e:{var f=void 0;if(t)for(var y=c.length-1;0<=y;y--){var S=c[y],k=S.instance,D=S.currentTarget;if(S=S.listener,k!==f&&l.isPropagationStopped())break e;f=S,l.currentTarget=D;try{f(l)}catch(V){so(V)}l.currentTarget=null,f=k}else for(y=0;y<c.length;y++){if(S=c[y],k=S.instance,D=S.currentTarget,S=S.listener,k!==f&&l.isPropagationStopped())break e;f=S,l.currentTarget=D;try{f(l)}catch(V){so(V)}l.currentTarget=null,f=k}}}}function ke(e,t){var s=t[hu];s===void 0&&(s=t[hu]=new Set);var c=e+"__bubble";s.has(c)||(py(t,e,2,!1),s.add(c))}function nd(e,t,s){var c=0;t&&(c|=4),py(s,e,c,t)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function rd(e){if(!e[Yo]){e[Yo]=!0,ch.forEach(function(s){s!=="selectionchange"&&(aT.has(s)||nd(s,!1,e),nd(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yo]||(t[Yo]=!0,nd("selectionchange",!1,t))}}function py(e,t,s,c){switch(Vy(t)){case 2:var l=IT;break;case 8:l=xT;break;default:l=vd}s=l.bind(null,t,s,e),l=void 0,!Tu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),c?l!==void 0?e.addEventListener(t,s,{capture:!0,passive:l}):e.addEventListener(t,s,!0):l!==void 0?e.addEventListener(t,s,{passive:l}):e.addEventListener(t,s,!1)}function ad(e,t,s,c,l){var f=c;if((t&1)===0&&(t&2)===0&&c!==null)e:for(;;){if(c===null)return;var y=c.tag;if(y===3||y===4){var S=c.stateNode.containerInfo;if(S===l)break;if(y===4)for(y=c.return;y!==null;){var k=y.tag;if((k===3||k===4)&&y.stateNode.containerInfo===l)return;y=y.return}for(;S!==null;){if(y=Ta(S),y===null)return;if(k=y.tag,k===5||k===6||k===26||k===27){c=f=y;continue e}S=S.parentNode}}c=c.return}Eh(function(){var D=f,V=Su(s),Y=[];e:{var j=Fh.get(e);if(j!==void 0){var P=no,oe=e;switch(e){case"keypress":if(eo(s)===0)break e;case"keydown":case"keyup":P=KS;break;case"focusin":oe="focus",P=Au;break;case"focusout":oe="blur",P=Au;break;case"beforeblur":case"afterblur":P=Au;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=$S;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=e_;break;case Vh:case Hh:case Yh:P=PS;break;case Zh:P=n_;break;case"scroll":case"scrollend":P=jS;break;case"wheel":P=a_;break;case"copy":case"cut":case"paste":P=VS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=kh;break;case"toggle":case"beforetoggle":P=i_}var pe=(t&4)!==0,Ve=!pe&&(e==="scroll"||e==="scrollend"),x=pe?j!==null?j+"Capture":null:j;pe=[];for(var C=D,L;C!==null;){var H=C;if(L=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||L===null||x===null||(H=As(C,x),H!=null&&pe.push(ii(C,H,L))),Ve)break;C=C.return}0<pe.length&&(j=new P(j,oe,null,s,V),Y.push({event:j,listeners:pe}))}}if((t&7)===0){e:{if(j=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",j&&s!==Eu&&(oe=s.relatedTarget||s.fromElement)&&(Ta(oe)||oe[_a]))break e;if((P||j)&&(j=V.window===V?V:(j=V.ownerDocument)?j.defaultView||j.parentWindow:window,P?(oe=s.relatedTarget||s.toElement,P=D,oe=oe?Ta(oe):null,oe!==null&&(Ve=u(oe),pe=oe.tag,oe!==Ve||pe!==5&&pe!==27&&pe!==6)&&(oe=null)):(P=null,oe=D),P!==oe)){if(pe=Th,H="onMouseLeave",x="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(pe=kh,H="onPointerLeave",x="onPointerEnter",C="pointer"),Ve=P==null?j:Os(P),L=oe==null?j:Os(oe),j=new pe(H,C+"leave",P,s,V),j.target=Ve,j.relatedTarget=L,H=null,Ta(V)===D&&(pe=new pe(x,C+"enter",oe,s,V),pe.target=L,pe.relatedTarget=Ve,H=pe),Ve=H,P&&oe)t:{for(pe=sT,x=P,C=oe,L=0,H=x;H;H=pe(H))L++;H=0;for(var me=C;me;me=pe(me))H++;for(;0<L-H;)x=pe(x),L--;for(;0<H-L;)C=pe(C),H--;for(;L--;){if(x===C||C!==null&&x===C.alternate){pe=x;break t}x=pe(x),C=pe(C)}pe=null}else pe=null;P!==null&&gy(Y,j,P,pe,!1),oe!==null&&Ve!==null&&gy(Y,Ve,oe,pe,!0)}}e:{if(j=D?Os(D):window,P=j.nodeName&&j.nodeName.toLowerCase(),P==="select"||P==="input"&&j.type==="file")var ze=xh;else if(Mh(j))if(zh)ze=g_;else{ze=h_;var de=m_}else P=j.nodeName,!P||P.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?D&&bu(D.elementType)&&(ze=xh):ze=p_;if(ze&&(ze=ze(e,D))){Ih(Y,ze,s,V);break e}de&&de(e,j,D),e==="focusout"&&D&&j.type==="number"&&D.memoizedProps.value!=null&&vu(j,"number",j.value)}switch(de=D?Os(D):window,e){case"focusin":(Mh(de)||de.contentEditable==="true")&&(Ia=de,xu=D,Ls=null);break;case"focusout":Ls=xu=Ia=null;break;case"mousedown":zu=!0;break;case"contextmenu":case"mouseup":case"dragend":zu=!1,Ph(Y,s,V);break;case"selectionchange":if(v_)break;case"keydown":case"keyup":Ph(Y,s,V)}var _e;if(Cu)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Ma?Ch(e,s)&&(Ce="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ce="onCompositionStart");Ce&&(Oh&&s.locale!=="ko"&&(Ma||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Ma&&(_e=Sh()):(pr=V,wu="value"in pr?pr.value:pr.textContent,Ma=!0)),de=Zo(D,Ce),0<de.length&&(Ce=new wh(Ce,e,null,s,V),Y.push({event:Ce,listeners:de}),_e?Ce.data=_e:(_e=Nh(s),_e!==null&&(Ce.data=_e)))),(_e=c_?u_(e,s):l_(e,s))&&(Ce=Zo(D,"onBeforeInput"),0<Ce.length&&(de=new wh("onBeforeInput","beforeinput",null,s,V),Y.push({event:de,listeners:Ce}),de.data=_e)),tT(Y,e,D,s,V)}hy(Y,t)})}function ii(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Zo(e,t){for(var s=t+"Capture",c=[];e!==null;){var l=e,f=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||f===null||(l=As(e,s),l!=null&&c.unshift(ii(e,l,f)),l=As(e,t),l!=null&&c.push(ii(e,l,f))),e.tag===3)return c;e=e.return}return[]}function sT(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gy(e,t,s,c,l){for(var f=t._reactName,y=[];s!==null&&s!==c;){var S=s,k=S.alternate,D=S.stateNode;if(S=S.tag,k!==null&&k===c)break;S!==5&&S!==26&&S!==27||D===null||(k=D,l?(D=As(s,f),D!=null&&y.unshift(ii(s,D,k))):l||(D=As(s,f),D!=null&&y.push(ii(s,D,k)))),s=s.return}y.length!==0&&e.push({event:t,listeners:y})}var iT=/\r\n?/g,oT=/\u0000|\uFFFD/g;function yy(e){return(typeof e=="string"?e:""+e).replace(iT,`
`).replace(oT,"")}function vy(e,t){return t=yy(t),yy(e)===t}function Ge(e,t,s,c,l,f){switch(s){case"children":typeof c=="string"?t==="body"||t==="textarea"&&c===""||Ra(e,c):(typeof c=="number"||typeof c=="bigint")&&t!=="body"&&Ra(e,""+c);break;case"className":Qi(e,"class",c);break;case"tabIndex":Qi(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Qi(e,s,c);break;case"style":vh(e,c,f);break;case"data":if(t!=="object"){Qi(e,"data",c);break}case"src":case"href":if(c===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(s);break}c=Ji(""+c),e.setAttribute(s,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(t!=="input"&&Ge(e,t,"name",l.name,l,null),Ge(e,t,"formEncType",l.formEncType,l,null),Ge(e,t,"formMethod",l.formMethod,l,null),Ge(e,t,"formTarget",l.formTarget,l,null)):(Ge(e,t,"encType",l.encType,l,null),Ge(e,t,"method",l.method,l,null),Ge(e,t,"target",l.target,l,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(s);break}c=Ji(""+c),e.setAttribute(s,c);break;case"onClick":c!=null&&(e.onclick=Gn);break;case"onScroll":c!=null&&ke("scroll",e);break;case"onScrollEnd":c!=null&&ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(s=c.__html,s!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}s=Ji(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,""+c):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":c===!0?e.setAttribute(s,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,c):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(s,c):e.removeAttribute(s);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(s):e.setAttribute(s,c);break;case"popover":ke("beforetoggle",e),ke("toggle",e),Xi(e,"popover",c);break;case"xlinkActuate":Pn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Pn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Pn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Pn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Pn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Pn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Pn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Pn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Pn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Xi(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=LS.get(s)||s,Xi(e,s,c))}}function sd(e,t,s,c,l,f){switch(s){case"style":vh(e,c,f);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(s=c.__html,s!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"children":typeof c=="string"?Ra(e,c):(typeof c=="number"||typeof c=="bigint")&&Ra(e,""+c);break;case"onScroll":c!=null&&ke("scroll",e);break;case"onScrollEnd":c!=null&&ke("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uh.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(l=s.endsWith("Capture"),t=s.slice(2,l?s.length-7:void 0),f=e[Nt]||null,f=f!=null?f[s]:null,typeof f=="function"&&e.removeEventListener(t,f,l),typeof c=="function")){typeof f!="function"&&f!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,c,l);break e}s in e?e[s]=c:c===!0?e.setAttribute(s,""):Xi(e,s,c)}}}function vt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",e),ke("load",e);var c=!1,l=!1,f;for(f in s)if(s.hasOwnProperty(f)){var y=s[f];if(y!=null)switch(f){case"src":c=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ge(e,t,f,y,s,null)}}l&&Ge(e,t,"srcSet",s.srcSet,s,null),c&&Ge(e,t,"src",s.src,s,null);return;case"input":ke("invalid",e);var S=f=y=l=null,k=null,D=null;for(c in s)if(s.hasOwnProperty(c)){var V=s[c];if(V!=null)switch(c){case"name":l=V;break;case"type":y=V;break;case"checked":k=V;break;case"defaultChecked":D=V;break;case"value":f=V;break;case"defaultValue":S=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,t));break;default:Ge(e,t,c,V,s,null)}}hh(e,f,S,k,D,y,l,!1);return;case"select":ke("invalid",e),c=y=f=null;for(l in s)if(s.hasOwnProperty(l)&&(S=s[l],S!=null))switch(l){case"value":f=S;break;case"defaultValue":y=S;break;case"multiple":c=S;default:Ge(e,t,l,S,s,null)}t=f,s=y,e.multiple=!!c,t!=null?Aa(e,!!c,t,!1):s!=null&&Aa(e,!!c,s,!0);return;case"textarea":ke("invalid",e),f=l=c=null;for(y in s)if(s.hasOwnProperty(y)&&(S=s[y],S!=null))switch(y){case"value":c=S;break;case"defaultValue":l=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:Ge(e,t,y,S,s,null)}gh(e,c,l,f);return;case"option":for(k in s)if(s.hasOwnProperty(k)&&(c=s[k],c!=null))switch(k){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ge(e,t,k,c,s,null)}return;case"dialog":ke("beforetoggle",e),ke("toggle",e),ke("cancel",e),ke("close",e);break;case"iframe":case"object":ke("load",e);break;case"video":case"audio":for(c=0;c<si.length;c++)ke(si[c],e);break;case"image":ke("error",e),ke("load",e);break;case"details":ke("toggle",e);break;case"embed":case"source":case"link":ke("error",e),ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in s)if(s.hasOwnProperty(D)&&(c=s[D],c!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ge(e,t,D,c,s,null)}return;default:if(bu(t)){for(V in s)s.hasOwnProperty(V)&&(c=s[V],c!==void 0&&sd(e,t,V,c,s,void 0));return}}for(S in s)s.hasOwnProperty(S)&&(c=s[S],c!=null&&Ge(e,t,S,c,s,null))}function cT(e,t,s,c){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,f=null,y=null,S=null,k=null,D=null,V=null;for(P in s){var Y=s[P];if(s.hasOwnProperty(P)&&Y!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":k=Y;default:c.hasOwnProperty(P)||Ge(e,t,P,null,c,Y)}}for(var j in c){var P=c[j];if(Y=s[j],c.hasOwnProperty(j)&&(P!=null||Y!=null))switch(j){case"type":f=P;break;case"name":l=P;break;case"checked":D=P;break;case"defaultChecked":V=P;break;case"value":y=P;break;case"defaultValue":S=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,t));break;default:P!==Y&&Ge(e,t,j,P,c,Y)}}yu(e,y,S,k,D,V,f,l);return;case"select":P=y=S=j=null;for(f in s)if(k=s[f],s.hasOwnProperty(f)&&k!=null)switch(f){case"value":break;case"multiple":P=k;default:c.hasOwnProperty(f)||Ge(e,t,f,null,c,k)}for(l in c)if(f=c[l],k=s[l],c.hasOwnProperty(l)&&(f!=null||k!=null))switch(l){case"value":j=f;break;case"defaultValue":S=f;break;case"multiple":y=f;default:f!==k&&Ge(e,t,l,f,c,k)}t=S,s=y,c=P,j!=null?Aa(e,!!s,j,!1):!!c!=!!s&&(t!=null?Aa(e,!!s,t,!0):Aa(e,!!s,s?[]:"",!1));return;case"textarea":P=j=null;for(S in s)if(l=s[S],s.hasOwnProperty(S)&&l!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ge(e,t,S,null,c,l)}for(y in c)if(l=c[y],f=s[y],c.hasOwnProperty(y)&&(l!=null||f!=null))switch(y){case"value":j=l;break;case"defaultValue":P=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(i(91));break;default:l!==f&&Ge(e,t,y,l,c,f)}ph(e,j,P);return;case"option":for(var oe in s)if(j=s[oe],s.hasOwnProperty(oe)&&j!=null&&!c.hasOwnProperty(oe))switch(oe){case"selected":e.selected=!1;break;default:Ge(e,t,oe,null,c,j)}for(k in c)if(j=c[k],P=s[k],c.hasOwnProperty(k)&&j!==P&&(j!=null||P!=null))switch(k){case"selected":e.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Ge(e,t,k,j,c,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in s)j=s[pe],s.hasOwnProperty(pe)&&j!=null&&!c.hasOwnProperty(pe)&&Ge(e,t,pe,null,c,j);for(D in c)if(j=c[D],P=s[D],c.hasOwnProperty(D)&&j!==P&&(j!=null||P!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,t));break;default:Ge(e,t,D,j,c,P)}return;default:if(bu(t)){for(var Ve in s)j=s[Ve],s.hasOwnProperty(Ve)&&j!==void 0&&!c.hasOwnProperty(Ve)&&sd(e,t,Ve,void 0,c,j);for(V in c)j=c[V],P=s[V],!c.hasOwnProperty(V)||j===P||j===void 0&&P===void 0||sd(e,t,V,j,c,P);return}}for(var x in s)j=s[x],s.hasOwnProperty(x)&&j!=null&&!c.hasOwnProperty(x)&&Ge(e,t,x,null,c,j);for(Y in c)j=c[Y],P=s[Y],!c.hasOwnProperty(Y)||j===P||j==null&&P==null||Ge(e,t,Y,j,c,P)}function by(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uT(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),c=0;c<s.length;c++){var l=s[c],f=l.transferSize,y=l.initiatorType,S=l.duration;if(f&&S&&by(y)){for(y=0,S=l.responseEnd,c+=1;c<s.length;c++){var k=s[c],D=k.startTime;if(D>S)break;var V=k.transferSize,Y=k.initiatorType;V&&by(Y)&&(k=k.responseEnd,y+=V*(k<S?1:(S-D)/(k-D)))}if(--c,t+=8*(f+y)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var id=null,od=null;function Fo(e){return e.nodeType===9?e:e.ownerDocument}function Ey(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sy(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ud=null;function lT(){var e=window.event;return e&&e.type==="popstate"?e===ud?!1:(ud=e,!0):(ud=null,!1)}var _y=typeof setTimeout=="function"?setTimeout:void 0,dT=typeof clearTimeout=="function"?clearTimeout:void 0,Ty=typeof Promise=="function"?Promise:void 0,fT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ty<"u"?function(e){return Ty.resolve(null).then(e).catch(mT)}:_y;function mT(e){setTimeout(function(){throw e})}function Ir(e){return e==="head"}function wy(e,t){var s=t,c=0;do{var l=s.nextSibling;if(e.removeChild(s),l&&l.nodeType===8)if(s=l.data,s==="/$"||s==="/&"){if(c===0){e.removeChild(l),ss(t);return}c--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")c++;else if(s==="html")oi(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,oi(s);for(var f=s.firstChild;f;){var y=f.nextSibling,S=f.nodeName;f[ks]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&f.rel.toLowerCase()==="stylesheet"||s.removeChild(f),f=y}}else s==="body"&&oi(e.ownerDocument.body);s=l}while(s);ss(t)}function ky(e,t){var s=e;e=0;do{var c=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=c}while(s)}function ld(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":ld(s),pu(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function hT(e,t,s,c){for(;e.nodeType===1;){var l=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[ks])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=fn(e.nextSibling),e===null)break}return null}function pT(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=fn(e.nextSibling),e===null))return null;return e}function Oy(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=fn(e.nextSibling),e===null))return null;return e}function dd(e){return e.data==="$?"||e.data==="$~"}function fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function gT(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var c=function(){t(),s.removeEventListener("DOMContentLoaded",c)};s.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var md=null;function Ay(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return fn(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Ry(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function Cy(e,t,s){switch(t=Fo(s),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function oi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);pu(e)}var mn=new Map,Ny=new Set;function Xo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var sr=G.d;G.d={f:yT,r:vT,D:bT,C:ET,L:ST,m:_T,X:wT,S:TT,M:kT};function yT(){var e=sr.f(),t=Bo();return e||t}function vT(e){var t=wa(e);t!==null&&t.tag===5&&t.type==="form"?Zp(t):sr.r(e)}var ns=typeof document>"u"?null:document;function My(e,t,s){var c=ns;if(c&&typeof t=="string"&&t){var l=an(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof s=="string"&&(l+='[crossorigin="'+s+'"]'),Ny.has(l)||(Ny.add(l),e={rel:e,crossOrigin:s,href:t},c.querySelector(l)===null&&(t=c.createElement("link"),vt(t,"link",e),ft(t),c.head.appendChild(t)))}}function bT(e){sr.D(e),My("dns-prefetch",e,null)}function ET(e,t){sr.C(e,t),My("preconnect",e,t)}function ST(e,t,s){sr.L(e,t,s);var c=ns;if(c&&e&&t){var l='link[rel="preload"][as="'+an(t)+'"]';t==="image"&&s&&s.imageSrcSet?(l+='[imagesrcset="'+an(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(l+='[imagesizes="'+an(s.imageSizes)+'"]')):l+='[href="'+an(e)+'"]';var f=l;switch(t){case"style":f=rs(e);break;case"script":f=as(e)}mn.has(f)||(e=v({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),mn.set(f,e),c.querySelector(l)!==null||t==="style"&&c.querySelector(ci(f))||t==="script"&&c.querySelector(ui(f))||(t=c.createElement("link"),vt(t,"link",e),ft(t),c.head.appendChild(t)))}}function _T(e,t){sr.m(e,t);var s=ns;if(s&&e){var c=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+an(c)+'"][href="'+an(e)+'"]',f=l;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=as(e)}if(!mn.has(f)&&(e=v({rel:"modulepreload",href:e},t),mn.set(f,e),s.querySelector(l)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ui(f)))return}c=s.createElement("link"),vt(c,"link",e),ft(c),s.head.appendChild(c)}}}function TT(e,t,s){sr.S(e,t,s);var c=ns;if(c&&e){var l=ka(c).hoistableStyles,f=rs(e);t=t||"default";var y=l.get(f);if(!y){var S={loading:0,preload:null};if(y=c.querySelector(ci(f)))S.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},s),(s=mn.get(f))&&hd(e,s);var k=y=c.createElement("link");ft(k),vt(k,"link",e),k._p=new Promise(function(D,V){k.onload=D,k.onerror=V}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Qo(y,t,c)}y={type:"stylesheet",instance:y,count:1,state:S},l.set(f,y)}}}function wT(e,t){sr.X(e,t);var s=ns;if(s&&e){var c=ka(s).hoistableScripts,l=as(e),f=c.get(l);f||(f=s.querySelector(ui(l)),f||(e=v({src:e,async:!0},t),(t=mn.get(l))&&pd(e,t),f=s.createElement("script"),ft(f),vt(f,"link",e),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(l,f))}}function kT(e,t){sr.M(e,t);var s=ns;if(s&&e){var c=ka(s).hoistableScripts,l=as(e),f=c.get(l);f||(f=s.querySelector(ui(l)),f||(e=v({src:e,async:!0,type:"module"},t),(t=mn.get(l))&&pd(e,t),f=s.createElement("script"),ft(f),vt(f,"link",e),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(l,f))}}function Iy(e,t,s,c){var l=(l=be.current)?Xo(l):null;if(!l)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=rs(s.href),s=ka(l).hoistableStyles,c=s.get(t),c||(c={type:"style",instance:null,count:0,state:null},s.set(t,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=rs(s.href);var f=ka(l).hoistableStyles,y=f.get(e);if(y||(l=l.ownerDocument||l,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=l.querySelector(ci(e)))&&!f._p&&(y.instance=f,y.state.loading=5),mn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},mn.set(e,s),f||OT(l,e,s,y.state))),t&&c===null)throw Error(i(528,""));return y}if(t&&c!==null)throw Error(i(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=as(s),s=ka(l).hoistableScripts,c=s.get(t),c||(c={type:"script",instance:null,count:0,state:null},s.set(t,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function rs(e){return'href="'+an(e)+'"'}function ci(e){return'link[rel="stylesheet"]['+e+"]"}function xy(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function OT(e,t,s,c){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?c.loading=1:(t=e.createElement("link"),c.preload=t,t.addEventListener("load",function(){return c.loading|=1}),t.addEventListener("error",function(){return c.loading|=2}),vt(t,"link",s),ft(t),e.head.appendChild(t))}function as(e){return'[src="'+an(e)+'"]'}function ui(e){return"script[async]"+e}function zy(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var c=e.querySelector('style[data-href~="'+an(s.href)+'"]');if(c)return t.instance=c,ft(c),c;var l=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),ft(c),vt(c,"style",l),Qo(c,s.precedence,e),t.instance=c;case"stylesheet":l=rs(s.href);var f=e.querySelector(ci(l));if(f)return t.state.loading|=4,t.instance=f,ft(f),f;c=xy(s),(l=mn.get(l))&&hd(c,l),f=(e.ownerDocument||e).createElement("link"),ft(f);var y=f;return y._p=new Promise(function(S,k){y.onload=S,y.onerror=k}),vt(f,"link",c),t.state.loading|=4,Qo(f,s.precedence,e),t.instance=f;case"script":return f=as(s.src),(l=e.querySelector(ui(f)))?(t.instance=l,ft(l),l):(c=s,(l=mn.get(f))&&(c=v({},s),pd(c,l)),e=e.ownerDocument||e,l=e.createElement("script"),ft(l),vt(l,"link",c),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(c=t.instance,t.state.loading|=4,Qo(c,s.precedence,e));return t.instance}function Qo(e,t,s){for(var c=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=c.length?c[c.length-1]:null,f=l,y=0;y<c.length;y++){var S=c[y];if(S.dataset.precedence===t)f=S;else if(f!==l)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function hd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function pd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ko=null;function Ly(e,t,s){if(Ko===null){var c=new Map,l=Ko=new Map;l.set(s,c)}else l=Ko,c=l.get(s),c||(c=new Map,l.set(s,c));if(c.has(e))return c;for(c.set(e,null),s=s.getElementsByTagName(e),l=0;l<s.length;l++){var f=s[l];if(!(f[ks]||f[ht]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var S=c.get(y);S?S.push(f):c.set(y,[f])}}return c}function Dy(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function AT(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function jy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function RT(e,t,s,c){if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var l=rs(c.href),f=t.querySelector(ci(l));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Jo.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=f,ft(f);return}f=t.ownerDocument||t,c=xy(c),(l=mn.get(l))&&hd(c,l),f=f.createElement("link"),ft(f);var y=f;y._p=new Promise(function(S,k){y.onload=S,y.onerror=k}),vt(f,"link",c),s.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Jo.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var gd=0;function CT(e,t){return e.stylesheets&&e.count===0&&ec(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var c=setTimeout(function(){if(e.stylesheets&&ec(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&gd===0&&(gd=62500*uT());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ec(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>gd?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(l)}}:null}function Jo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ec(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wo=null;function ec(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wo=new Map,t.forEach(NT,e),Wo=null,Jo.call(e))}function NT(e,t){if(!(t.state.loading&4)){var s=Wo.get(e);if(s)var c=s.get(null);else{s=new Map,Wo.set(e,s);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<l.length;f++){var y=l[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(s.set(y.dataset.precedence,y),c=y)}c&&s.set(null,c)}l=t.instance,y=l.getAttribute("data-precedence"),f=s.get(y)||c,f===c&&s.set(null,l),s.set(y,l),this.count++,c=Jo.bind(this),l.addEventListener("load",c),l.addEventListener("error",c),f?f.parentNode.insertBefore(l,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var li={$$typeof:M,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function MT(e,t,s,c,l,f,y,S,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=du(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=du(0),this.hiddenUpdates=du(null),this.identifierPrefix=c,this.onUncaughtError=l,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Uy(e,t,s,c,l,f,y,S,k,D,V,Y){return e=new MT(e,t,s,y,k,D,V,Y,S),t=1,f===!0&&(t|=24),f=Ft(3,null,null,t),e.current=f,f.stateNode=e,t=Xu(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:c,isDehydrated:s,cache:t},Wu(f),e}function $y(e){return e?(e=La,e):La}function By(e,t,s,c,l,f){l=$y(l),c.context===null?c.context=l:c.pendingContext=l,c=Sr(t),c.payload={element:s},f=f===void 0?null:f,f!==null&&(c.callback=f),s=_r(e,c,t),s!==null&&(Dt(s,e,t),Ps(s,e,t))}function qy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function yd(e,t){qy(e,t),(e=e.alternate)&&qy(e,t)}function Py(e){if(e.tag===13||e.tag===31){var t=Kr(e,67108864);t!==null&&Dt(t,e,67108864),yd(e,67108864)}}function Gy(e){if(e.tag===13||e.tag===31){var t=Wt();t=fu(t);var s=Kr(e,t);s!==null&&Dt(s,e,t),yd(e,t)}}var tc=!0;function IT(e,t,s,c){var l=I.T;I.T=null;var f=G.p;try{G.p=2,vd(e,t,s,c)}finally{G.p=f,I.T=l}}function xT(e,t,s,c){var l=I.T;I.T=null;var f=G.p;try{G.p=8,vd(e,t,s,c)}finally{G.p=f,I.T=l}}function vd(e,t,s,c){if(tc){var l=bd(c);if(l===null)ad(e,t,c,nc,s),Hy(e,c);else if(LT(l,e,t,s,c))c.stopPropagation();else if(Hy(e,c),t&4&&-1<zT.indexOf(e)){for(;l!==null;){var f=wa(l);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=Yr(f.pendingLanes);if(y!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var k=1<<31-Yt(y);S.entanglements[1]|=k,y&=~k}In(f),(De&6)===0&&(Uo=Vt()+500,ai(0))}}break;case 31:case 13:S=Kr(f,2),S!==null&&Dt(S,f,2),Bo(),yd(f,2)}if(f=bd(c),f===null&&ad(e,t,c,nc,s),f===l)break;l=f}l!==null&&c.stopPropagation()}else ad(e,t,c,null,s)}}function bd(e){return e=Su(e),Ed(e)}var nc=null;function Ed(e){if(nc=null,e=Ta(e),e!==null){var t=u(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=d(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return nc=e,null}function Vy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bS()){case Jm:return 2;case Wm:return 8;case Vi:case ES:return 32;case eh:return 268435456;default:return 32}default:return 32}}var Sd=!1,xr=null,zr=null,Lr=null,di=new Map,fi=new Map,Dr=[],zT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hy(e,t){switch(e){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":di.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(t.pointerId)}}function mi(e,t,s,c,l,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:c,nativeEvent:f,targetContainers:[l]},t!==null&&(t=wa(t),t!==null&&Py(t)),e):(e.eventSystemFlags|=c,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function LT(e,t,s,c,l){switch(t){case"focusin":return xr=mi(xr,e,t,s,c,l),!0;case"dragenter":return zr=mi(zr,e,t,s,c,l),!0;case"mouseover":return Lr=mi(Lr,e,t,s,c,l),!0;case"pointerover":var f=l.pointerId;return di.set(f,mi(di.get(f)||null,e,t,s,c,l)),!0;case"gotpointercapture":return f=l.pointerId,fi.set(f,mi(fi.get(f)||null,e,t,s,c,l)),!0}return!1}function Yy(e){var t=Ta(e.target);if(t!==null){var s=u(t);if(s!==null){if(t=s.tag,t===13){if(t=d(s),t!==null){e.blockedOn=t,ih(e.priority,function(){Gy(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,ih(e.priority,function(){Gy(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=bd(e.nativeEvent);if(s===null){s=e.nativeEvent;var c=new s.constructor(s.type,s);Eu=c,s.target.dispatchEvent(c),Eu=null}else return t=wa(s),t!==null&&Py(t),e.blockedOn=s,!1;t.shift()}return!0}function Zy(e,t,s){rc(e)&&s.delete(t)}function DT(){Sd=!1,xr!==null&&rc(xr)&&(xr=null),zr!==null&&rc(zr)&&(zr=null),Lr!==null&&rc(Lr)&&(Lr=null),di.forEach(Zy),fi.forEach(Zy)}function ac(e,t){e.blockedOn===t&&(e.blockedOn=null,Sd||(Sd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,DT)))}var sc=null;function Fy(e){sc!==e&&(sc=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sc===e&&(sc=null);for(var t=0;t<e.length;t+=3){var s=e[t],c=e[t+1],l=e[t+2];if(typeof c!="function"){if(Ed(c||s)===null)continue;break}var f=wa(s);f!==null&&(e.splice(t,3),t-=3,bl(f,{pending:!0,data:l,method:s.method,action:c},c,l))}}))}function ss(e){function t(k){return ac(k,e)}xr!==null&&ac(xr,e),zr!==null&&ac(zr,e),Lr!==null&&ac(Lr,e),di.forEach(t),fi.forEach(t);for(var s=0;s<Dr.length;s++){var c=Dr[s];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Dr.length&&(s=Dr[0],s.blockedOn===null);)Yy(s),s.blockedOn===null&&Dr.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(c=0;c<s.length;c+=3){var l=s[c],f=s[c+1],y=l[Nt]||null;if(typeof f=="function")y||Fy(s);else if(y){var S=null;if(f&&f.hasAttribute("formAction")){if(l=f,y=f[Nt]||null)S=y.formAction;else if(Ed(l)!==null)continue}else S=y.action;typeof S=="function"?s[c+1]=S:(s.splice(c,3),c-=3),Fy(s)}}}function Xy(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return l=y})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),c||setTimeout(s,20)}function s(){if(!c&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function _d(e){this._internalRoot=e}ic.prototype.render=_d.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var s=t.current,c=Wt();By(s,c,e,t,null,null)},ic.prototype.unmount=_d.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;By(e.current,2,null,e,null,null),Bo(),t[_a]=null}};function ic(e){this._internalRoot=e}ic.prototype.unstable_scheduleHydration=function(e){if(e){var t=sh();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Dr.length&&t!==0&&t<Dr[s].priority;s++);Dr.splice(s,0,e),s===0&&Yy(e)}};var Qy=r.version;if(Qy!=="19.2.0")throw Error(i(527,Qy,"19.2.0"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var jT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{_s=oc.inject(jT),Ht=oc}catch{}}return pi.createRoot=function(e,t){if(!o(e))throw Error(i(299));var s=!1,c="",l=rg,f=ag,y=sg;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(c=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=Uy(e,1,!1,null,null,s,c,null,l,f,y,Xy),e[_a]=t.current,rd(e),new _d(t)},pi.hydrateRoot=function(e,t,s){if(!o(e))throw Error(i(299));var c=!1,l="",f=rg,y=ag,S=sg,k=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.formState!==void 0&&(k=s.formState)),t=Uy(e,1,!0,t,s??null,c,l,k,f,y,S,Xy),t.context=$y(null),s=t.current,c=Wt(),c=fu(c),l=Sr(c),l.callback=null,_r(s,l,c),s=c,t.current.lanes=s,ws(t,s),In(t),e[_a]=t.current,rd(e),new ic(t)},pi.version="19.2.0",pi}var iv;function FT(){if(iv)return kd.exports;iv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),kd.exports=ZT(),kd.exports}var XT=FT();function ms(){return globalThis.process?.env?.NODE_ENV!=="production"}function QT(n){const r={type:n.type,tick:n.tick,issuedAt:n.issuedAt,payload:n.payload};return ms()?WT(r):r}function KT(n){const a=[...n.entries].sort((o,u)=>o.channel!==u.channel?o.channel-u.channel:o.type!==u.type?o.type<u.type?-1:1:o.version-u.version).map(o=>`${o.channel}:${o.type}:${o.version}`).join("|");return`${JT(a).toString(16).padStart(8,"0")}`}function JT(n){let r=2166136261;for(let a=0;a<n.length;a+=1)r^=n.charCodeAt(a),r=Math.imul(r,16777619),r>>>=0;return r}function WT(n){return typeof n.payload=="object"&&n.payload!==null&&Rc(n.payload),Object.freeze(n)}function Rc(n){if(typeof n!="object"||n===null||Object.isFrozen(n))return;if(Object.freeze(n),Array.isArray(n)){for(const i of n)Rc(i);return}const r=Object.getOwnPropertyNames(n);for(const i of r)Rc(n[i]);const a=Object.getOwnPropertySymbols(n);for(const i of a)Rc(n[i])}const e1={recordError(){},recordWarning(){},recordProgress(){},recordCounters(){},recordTick(){}};let gi=e1;const J={recordError(n,r){yi(gi,"recordError",n,r)},recordWarning(n,r){yi(gi,"recordWarning",n,r)},recordProgress(n,r){yi(gi,"recordProgress",n,r)},recordCounters(n,r){yi(gi,"recordCounters",n,r)},recordTick(){yi(gi,"recordTick")}};function yi(n,r,...a){try{n[r].call(n,...a)}catch(i){console.error("[telemetry] invocation failed",i)}}const t1=1e3,n1=2;class r1{constructor(r){Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.channels=r.map(a=>a?{config:a,timestamps:[],startIndex:0,nextLogTick:0,currentCooldown:a.cooldownTicks,cooldownTicksRemaining:0,breaches:0,eventsPerSecond:0}:null)}beginTick(r){for(const a of this.channels)a&&(r>a.nextLogTick&&(a.currentCooldown=a.config.cooldownTicks),a.cooldownTicksRemaining=Math.max(0,a.nextLogTick-r))}recordPublish(r,a,i,o){const u=this.channels[r];if(!u)return;const{timestamps:d}=u;d.push(i);const m=i-t1;for(;u.startIndex<d.length&&d[u.startIndex]<=m;)u.startIndex+=1;u.startIndex>64&&(d.splice(0,u.startIndex),u.startIndex=0);const h=d.length-u.startIndex;u.eventsPerSecond=h;const p=u.config.maxEventsPerSecond;typeof p=="number"&&p>0&&h>=p&&this.logBreach({channel:r,tick:a,eventType:o,timestamp:i,reason:"rate-per-second",eventsPerSecond:h,maxEventsPerSecond:p})}handleSoftLimit(r){const{channel:a}=r;this.channels[a]&&this.logBreach({...r,reason:"soft-limit"})}getChannelSnapshot(r,a){const i=this.channels[r];if(!i)return null;const o=Math.max(0,i.nextLogTick-a);return{channel:r,cooldownTicksRemaining:o,breaches:i.breaches,eventsPerSecond:i.eventsPerSecond}}logBreach(r){const a=this.channels[r.channel];if(!a)return;const{tick:i}=r;if(i<a.nextLogTick){a.cooldownTicksRemaining=Math.max(0,a.nextLogTick-i);return}J.recordWarning("EventSoftLimitBreach",{channel:r.channel,tick:r.tick,reason:r.reason,eventType:r.eventType,bufferSize:r.bufferSize,capacity:r.capacity,softLimit:r.softLimit,remainingCapacity:r.remainingCapacity,eventsPerSecond:r.eventsPerSecond,maxEventsPerSecond:r.maxEventsPerSecond,cooldownTicks:a.currentCooldown}),J.recordCounters("events.soft_limit_breaches",{[`channel:${r.channel}`]:1}),a.breaches+=1,a.nextLogTick=i+a.currentCooldown,a.cooldownTicksRemaining=a.currentCooldown,a.currentCooldown=Math.min(a.currentCooldown*n1,a.config.maxCooldownTicks)}}const a1=256,s1=2;class i1{constructor(r,a={}){if(Object.defineProperty(this,"history",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"windowLength",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"densityThreshold",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channelCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"featureFlagEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"historyIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"historySize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"runningTotal",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"currentFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!Number.isFinite(r)||r<=0)throw new Error(`RuntimeEventFrameFormatController requires a positive channel count (received ${r}).`);const i=a.defaultFormat??"struct-of-arrays",o=a.autoFallback??{enabled:!1},u=o.windowLength??a1,d=o.densityThreshold??s1;if(!Number.isFinite(u)||u<=0)throw new Error(`RuntimeEventFrameFormatController window length must be a positive number (received ${u}).`);if(!Number.isFinite(d)||d<0)throw new Error(`RuntimeEventFrameFormatController density threshold must be non-negative (received ${d}).`);this.channelCount=r,this.currentFormat=i,this.featureFlagEnabled=o.enabled===!0,this.windowLength=Math.floor(u),this.densityThreshold=d,this.history=new Array(this.windowLength).fill(0)}beginTick(r,a){if(!Number.isFinite(r)||r<0)throw new Error(`RuntimeEventFrameFormatController cannot record negative events for a tick (received ${r}).`);if(!this.featureFlagEnabled)return this.recordSample(r),null;const i=this.currentFormat;this.recordSample(r);const o=this.getDiagnostics(),u=o.averageEventsPerChannel<this.densityThreshold;return this.currentFormat=u?"object-array":"struct-of-arrays",this.currentFormat===i?null:(J.recordWarning("RuntimeEventFrameFormatChanged",{tick:a,previousFormat:i,nextFormat:this.currentFormat,averageEventsPerChannel:o.averageEventsPerChannel,densityThreshold:o.densityThreshold,windowLength:o.windowLength,samples:o.samples,featureFlagEnabled:o.featureFlagEnabled}),{previousFormat:i,nextFormat:this.currentFormat,diagnostics:o})}getExportState(){return{format:this.currentFormat,diagnostics:this.getDiagnostics()}}recordSample(r){const a=this.channelCount===0?0:r/this.channelCount;if(this.historySize===this.windowLength){const i=this.history[this.historyIndex];this.runningTotal-=i}else this.historySize+=1;this.history[this.historyIndex]=a,this.runningTotal+=a,this.historyIndex=(this.historyIndex+1)%this.windowLength}getDiagnostics(){const r=this.historySize,a=r===0?0:this.runningTotal/r;return{windowLength:this.windowLength,samples:r,averageEventsPerChannel:a,densityThreshold:this.densityThreshold,featureFlagEnabled:this.featureFlagEnabled}}}const o1=256,c1=.75,u1=1,l1=16,d1=4;class ov extends Error{constructor(r,a,i){super(`Event buffer overflow on channel ${a} for ${r} (capacity ${i}).`),Object.defineProperty(this,"eventType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"capacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="EventBufferOverflowError",this.eventType=r,this.channel=a,this.capacity=i}}class f1{constructor(){Object.defineProperty(this,"pool",{enumerable:!0,configurable:!0,writable:!0,value:[]})}acquire(){const r=this.pool.pop();return r!==void 0?r:{type:"",tick:0,issuedAt:0,payload:void 0,dispatchOrder:0}}release(r){r.type="",r.tick=0,r.issuedAt=0,r.payload=void 0,r.dispatchOrder=0,this.pool.push(r)}}class cv{constructor(r,a){Object.defineProperty(this,"pool",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"capacity",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"slots",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"lengthValue",{enumerable:!0,configurable:!0,writable:!0,value:0})}get length(){return this.lengthValue}getCapacity(){return this.capacity}isAtCapacity(){return this.lengthValue>=this.capacity}push(r){this.slots[this.lengthValue]=r,this.lengthValue+=1}at(r){if(r<0||r>=this.lengthValue)throw new RangeError(`EventBuffer index ${r} is out of bounds (${this.lengthValue}).`);return this.slots[r]}reset(){for(let r=0;r<this.lengthValue;r+=1){const a=this.slots[r];this.pool.release(a),this.slots[r]=void 0}this.lengthValue=0}}class m1{constructor(r,a={}){Object.defineProperty(this,"descriptors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"byType",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"manifest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manifestHash",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.descriptors=r.map((o,u)=>{const d=a[o.definition.type],m=d?.capacity??o.capacity??o1;if(!Number.isFinite(m)||m<=0)throw new Error(`Invalid capacity for channel ${o.definition.type}: ${m}.`);const h=d?.softLimit??o.softLimit??Math.max(1,Math.floor(m*c1));if(!Number.isFinite(h)||h<=0)throw new Error(`Invalid soft limit for channel ${o.definition.type}: ${h}.`);if(h>m)throw new Error(`Soft limit ${h} exceeds capacity ${m} for channel ${o.definition.type}.`);const p={index:u,definition:o.definition,capacity:m,softLimit:h,diagnostics:h1(o,d,h),onSoftLimit:o.onSoftLimit},g=this.byType.get(o.definition.type);if(g!==void 0)throw new Error(`Duplicate event type registered: ${o.definition.type} (${g.index} vs ${u}).`);return this.byType.set(o.definition.type,p),p});const i=this.descriptors.map(o=>({type:o.definition.type,channel:o.index,version:o.definition.version}));this.manifest={entries:i},this.manifestHash=KT(this.manifest)}getDescriptor(r){const a=this.byType.get(r);if(!a)throw new Error(`Unknown runtime event type: ${r}`);return a}getDescriptors(){return this.descriptors}getManifest(){return this.manifest}getManifestHash(){return this.manifestHash}}function h1(n,r,a){const i={...n.diagnostics??{},...r?.diagnostics??{}},o=i.maxEventsPerTick??a;if(!Number.isFinite(o)||o<=0)throw new Error(`Invalid diagnostics maxEventsPerTick for channel ${n.definition.type}: ${o}.`);const u=Math.max(1,Math.floor(o)),d=i.maxEventsPerSecond??u*d1,m=Number.isFinite(d)&&d>0?d:void 0,h=i.cooldownTicks??u1;if(!Number.isFinite(h)||h<=0)throw new Error(`Invalid diagnostics cooldownTicks for channel ${n.definition.type}: ${h}.`);const p=Math.max(1,Math.floor(h)),g=i.maxCooldownTicks??p*l1;if(!Number.isFinite(g)||g<=0)throw new Error(`Invalid diagnostics maxCooldownTicks for channel ${n.definition.type}: ${g}.`);const v=Math.max(p,Math.floor(g));return{maxEventsPerTick:u,maxEventsPerSecond:m,cooldownTicks:p,maxCooldownTicks:v}}class p1{constructor(r){if(Object.defineProperty(this,"registry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"slotPool",{enumerable:!0,configurable:!0,writable:!0,value:new f1}),Object.defineProperty(this,"channelStates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"slowHandlerThresholdMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onSlowHandler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"diagnostics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frameFormatController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"telemetryCounters",{enumerable:!0,configurable:!0,writable:!0,value:{published:0,softLimited:0,overflowed:0,subscribers:0}}),Object.defineProperty(this,"currentTick",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"dispatchCounter",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"tickAborted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lastOverflowError",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"eventsPublishedThisTick",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"firstTickPending",{enumerable:!0,configurable:!0,writable:!0,value:!0}),r.channels.length===0)throw new Error("EventBus requires at least one channel configuration.");this.registry=new m1(r.channels,r.channelConfigs),this.channelStates=this.registry.getDescriptors().map(i=>({descriptor:i,internalBuffer:new cv(this.slotPool,i.capacity),outboundBuffer:new cv(this.slotPool,i.capacity),subscribers:[],softLimitActive:!1,currentOccupancy:0,highWaterMark:0})),this.clock=r.clock??g1;const a=this.registry.getDescriptors().map(i=>i.diagnostics??null);this.diagnostics=a.some(i=>i!==null)?new r1(a):null,this.slowHandlerThresholdMs=typeof r.slowHandlerThresholdMs=="number"?Math.max(0,r.slowHandlerThresholdMs):2,this.onSlowHandler=r.onSlowHandler,this.frameFormatController=new i1(this.channelStates.length,r.frameExport)}getManifest(){return this.registry.getManifest()}getManifestHash(){return this.registry.getManifestHash()}getFrameExportState(){return this.frameFormatController.getExportState()}beginTick(r,a){const{resetOutbound:i=!0}=a??{},o=!this.firstTickPending&&r===this.currentTick;this.firstTickPending?this.firstTickPending=!1:o||this.frameFormatController.beginTick(this.eventsPublishedThisTick,r),o||(this.eventsPublishedThisTick=0),this.currentTick=r,this.dispatchCounter=0,this.tickAborted=!1,this.lastOverflowError=null,this.telemetryCounters={published:0,softLimited:0,overflowed:0,subscribers:0},this.diagnostics?.beginTick(r);for(const u of this.channelStates)u.internalBuffer.reset(),i&&u.outboundBuffer.reset(),u.softLimitActive=!1,u.currentOccupancy=0,u.highWaterMark=0,this.compactSubscribers(u)}publish(r,a,i){const o=this.registry.getDescriptor(r),u=this.channelStates[o.index];if(this.tickAborted)throw this.lastOverflowError??new ov(r,o.index,o.capacity);if(u.internalBuffer.isAtCapacity()||u.outboundBuffer.isAtCapacity()){const w=new ov(r,o.index,o.capacity);throw this.tickAborted=!0,this.lastOverflowError=w,this.telemetryCounters.overflowed+=1,J.recordWarning("EventBufferOverflow",{type:r,channel:o.index,capacity:o.capacity,tick:this.currentTick}),w}const d=i?.issuedAt??this.clock.now(),m=this.dispatchCounter;this.dispatchCounter+=1;const h=o.definition.validator;h?.(a);const p=this.slotPool.acquire();p.type=r,p.tick=this.currentTick,p.issuedAt=d,p.payload=a,p.dispatchOrder=m,u.internalBuffer.push(p);const g=this.slotPool.acquire();g.type=r,g.tick=this.currentTick,g.issuedAt=d,g.payload=a,g.dispatchOrder=m,u.outboundBuffer.push(g);const v=u.internalBuffer.length,b=Math.max(0,o.capacity-v);u.currentOccupancy=v,u.highWaterMark=Math.max(u.highWaterMark,v),this.telemetryCounters.published+=1,this.eventsPublishedThisTick+=1,this.diagnostics?.recordPublish(o.index,this.currentTick,d,r);let T="accepted";return v>=o.softLimit&&(T="soft-limit",this.telemetryCounters.softLimited+=1,u.softLimitActive||(u.softLimitActive=!0,o.onSoftLimit?.({type:r,channel:o.index,bufferSize:v,capacity:o.capacity,softLimit:o.softLimit,remainingCapacity:b}),this.diagnostics?.handleSoftLimit({channel:o.index,tick:this.currentTick,eventType:r,timestamp:d,reason:"soft-limit",bufferSize:v,capacity:o.capacity,softLimit:o.softLimit,remainingCapacity:b}))),{accepted:!0,state:T,type:r,channel:o.index,bufferSize:v,remainingCapacity:b,dispatchOrder:m,softLimitActive:u.softLimitActive}}dispatch(r){const a=new Array(this.channelStates.length).fill(0);for(;;){let i=-1,o;for(let m=0;m<this.channelStates.length;m+=1){const h=this.channelStates[m],p=a[m],g=h.internalBuffer;if(p>=g.length)continue;const v=g.at(p);(o===void 0||v.dispatchOrder<o.dispatchOrder)&&(o=v,i=m)}if(o===void 0||i===-1)break;const u=this.channelStates[i],d=QT({type:o.type,tick:o.tick,issuedAt:o.issuedAt,payload:o.payload});for(const m of u.subscribers)if(m.active)if(this.slowHandlerThresholdMs>0){const h=this.clock.now();try{m.handler(d,r)}finally{const p=this.clock.now()-h;if(p>this.slowHandlerThresholdMs){const g={type:d.type,channel:i,tick:d.tick,dispatchOrder:o.dispatchOrder,durationMs:p,thresholdMs:this.slowHandlerThresholdMs,handlerLabel:m.label};this.onSlowHandler?.(g),J.recordWarning("EventHandlerSlow",{eventType:d.type,channel:i,tick:d.tick,dispatchOrder:o.dispatchOrder,durationMs:p,thresholdMs:this.slowHandlerThresholdMs,handler:m.label})}}}else m.handler(d,r);a[i]+=1}for(const i of this.channelStates)i.internalBuffer.reset(),i.currentOccupancy=0}getBackPressureSnapshot(){const r=this.channelStates.map(o=>{const u=o.subscribers.reduce((h,p)=>p.active?h+1:h,0),d=Math.max(0,o.descriptor.capacity-o.currentOccupancy),m=this.diagnostics?.getChannelSnapshot(o.descriptor.index,this.currentTick)??null;return{type:o.descriptor.definition.type,channel:o.descriptor.index,capacity:o.descriptor.capacity,softLimit:o.descriptor.softLimit,inUse:o.currentOccupancy,remainingCapacity:d,highWaterMark:o.highWaterMark,softLimitActive:o.softLimitActive,subscribers:u,cooldownTicksRemaining:m?.cooldownTicksRemaining??0,softLimitBreaches:m?.breaches??0,eventsPerSecond:m?.eventsPerSecond??0}}),a=r.reduce((o,u)=>o+u.subscribers,0),i={published:this.telemetryCounters.published,softLimited:this.telemetryCounters.softLimited,overflowed:this.telemetryCounters.overflowed,subscribers:a};return this.telemetryCounters=i,{tick:this.currentTick,channels:r,counters:{...i}}}on(r,a,i){const o=this.registry.getDescriptor(r),u=this.channelStates[o.index],d={handler:a,active:!0,label:i?.label};return u.subscribers.push(d),{unsubscribe:()=>{d.active=!1}}}getOutboundBuffer(r){const a=this.channelStates[r];if(!a)throw new Error(`Unknown channel index ${r}`);const i=a.outboundBuffer;return{get length(){return i.length},at(o){const u=i.at(o);return{type:u.type,tick:u.tick,issuedAt:u.issuedAt,payload:u.payload,dispatchOrder:u.dispatchOrder}}}}compactSubscribers(r){if(r.subscribers.length===0)return;let a=0;for(const i of r.subscribers)i.active&&(r.subscribers[a]=i,a+=1);r.subscribers.length=a}}const g1={now(){return performance.now()}},y1=[{definition:{type:"sample:reactor-primed",version:2}}];function v1(n){if(typeof n.resourceId!="string"||n.resourceId.length===0)throw new Error("resourceId must be a non-empty string.");if(!Number.isFinite(n.threshold))throw new Error("threshold must be a finite number.")}function b1(n){if(typeof n.automationId!="string"||n.automationId.length===0)throw new Error("automationId must be a non-empty string.");if(typeof n.enabled!="boolean")throw new Error("enabled must be a boolean.")}const E1=[{definition:{type:"resource:threshold-reached",version:1,validator:v1}},{definition:{type:"automation:toggled",version:1,validator:b1}}],S1=[...E1,...y1],_1={channels:S1,slowHandlerThresholdMs:2};var At;(function(n){n[n.SYSTEM=0]="SYSTEM",n[n.PLAYER=1]="PLAYER",n[n.AUTOMATION=2]="AUTOMATION"})(At||(At={}));const $r=Object.freeze([At.SYSTEM,At.PLAYER,At.AUTOMATION]),St=Object.freeze({PURCHASE_GENERATOR:"PURCHASE_GENERATOR",PURCHASE_UPGRADE:"PURCHASE_UPGRADE",TOGGLE_GENERATOR:"TOGGLE_GENERATOR",TOGGLE_AUTOMATION:"TOGGLE_AUTOMATION",COLLECT_RESOURCE:"COLLECT_RESOURCE",PRESTIGE_RESET:"PRESTIGE_RESET",OFFLINE_CATCHUP:"OFFLINE_CATCHUP",APPLY_MIGRATION:"APPLY_MIGRATION"}),T1=Object.freeze({PURCHASE_GENERATOR:{type:St.PURCHASE_GENERATOR,allowedPriorities:$r,rationale:"Purchases are gated by resource costs; any priority may attempt them."},PURCHASE_UPGRADE:{type:St.PURCHASE_UPGRADE,allowedPriorities:$r,rationale:"Upgrades share the purchase gating model and may originate from any priority."},TOGGLE_GENERATOR:{type:St.TOGGLE_GENERATOR,allowedPriorities:$r,rationale:"Generator toggles can originate from automation, player, or system flows."},TOGGLE_AUTOMATION:{type:St.TOGGLE_AUTOMATION,allowedPriorities:$r,rationale:"Automation toggles can originate from any priority tier for manual or programmatic control."},COLLECT_RESOURCE:{type:St.COLLECT_RESOURCE,allowedPriorities:$r,rationale:"Manual and automation-driven collection share the same execution path."},PRESTIGE_RESET:{type:St.PRESTIGE_RESET,allowedPriorities:Object.freeze([At.SYSTEM,At.PLAYER]),rationale:"Automation may not trigger prestige; only player/system contexts are permitted.",unauthorizedEvent:"AutomationPrestigeBlocked"},OFFLINE_CATCHUP:{type:St.OFFLINE_CATCHUP,allowedPriorities:Object.freeze([At.SYSTEM,At.AUTOMATION]),rationale:"Offline reconciliation is engine-driven; automations may also trigger catchup logic.",unauthorizedEvent:"UnauthorizedSystemCommand"},APPLY_MIGRATION:{type:St.APPLY_MIGRATION,allowedPriorities:Object.freeze([At.SYSTEM]),rationale:"Schema migrations run exclusively under system authority for integrity.",unauthorizedEvent:"UnauthorizedSystemCommand"}}),w1="CommandPriorityViolation";function k1(n){return T1[n]}function nE(n,r={}){const a=k1(n.type);if(!a||a.allowedPriorities.includes(n.priority))return!0;const i=a.unauthorizedEvent??w1,o={type:n.type,attemptedPriority:n.priority,allowedPriorities:a.allowedPriorities,phase:r.phase??"live"};return r.reason&&(o.reason=r.reason),J.recordWarning(i,o),!1}class O1{constructor(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"eventPublisher",{enumerable:!0,configurable:!0,writable:!0,value:R1})}register(r,a){this.handlers.set(r,a)}setEventPublisher(r){this.eventPublisher=r}getHandler(r){return this.handlers.get(r)}forEachHandler(r){for(const[a,i]of this.handlers.entries())r(a,i)}execute(r){const a=this.handlers.get(r.type);if(!a){J.recordError("UnknownCommandType",{type:r.type});return}if(!nE(r,{phase:"live",reason:"dispatcher"}))return;const i={step:r.step,timestamp:r.timestamp,priority:r.priority,events:this.eventPublisher};try{const o=a(r.payload,i);A1(o)&&o.catch(u=>{J.recordError("CommandExecutionFailed",{type:r.type,error:u instanceof Error?u.message:String(u)})})}catch(o){J.recordError("CommandExecutionFailed",{type:r.type,error:o instanceof Error?o.message:String(o)})}}}function A1(n){return typeof n=="object"&&n!==null&&typeof n.then=="function"}const R1={publish(){throw new Error("Event publisher has not been configured on this CommandDispatcher instance.")}},C1=1e4;class N1{constructor(r={}){Object.defineProperty(this,"lanes",{enumerable:!0,configurable:!0,writable:!0,value:new Map([[At.SYSTEM,[]],[At.PLAYER,[]],[At.AUTOMATION,[]]])}),Object.defineProperty(this,"nextSequence",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"totalSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const a=r.maxSize??C1;if(!Number.isFinite(a)||a<=0)throw new Error("maxSize must be a positive finite number");this.maxSize=a}enqueue(r){if(!nE(r,{phase:"live",reason:"queue"}))return;const a=this.lanes.get(r.priority);if(!a)throw new Error(`Invalid command priority: ${r.priority}`);if(this.totalSize>=this.maxSize&&(J.recordWarning("CommandQueueOverflow",{size:this.totalSize,maxSize:this.maxSize,priority:r.priority}),!this.dropLowestPriorityUpTo(r.priority))){J.recordWarning("CommandRejected",{type:r.type,priority:r.priority,timestamp:r.timestamp,size:this.totalSize,maxSize:this.maxSize});return}const i={command:Z1(r),sequence:this.nextSequence++};let o=0,u=a.length;for(;o<u;){const d=o+u>>>1,m=a[d];m.command.timestamp<i.command.timestamp||m.command.timestamp===i.command.timestamp&&m.sequence<i.sequence?o=d+1:u=d}a.splice(o,0,i),this.totalSize+=1}dequeueAll(){return this.dequeueUpToStep(Number.POSITIVE_INFINITY)}dequeueUpToStep(r){if(this.totalSize===0)return[];const a=[];let i=0;for(const o of $r){const u=this.lanes.get(o);if(!u||u.length===0)continue;let d=0;for(let m=0;m<u.length;m+=1){const h=u[m];if(h.command.step<=r){a.push(h.command),i+=1;continue}d!==m&&(u[d]=h),d+=1}d===0?u.length=0:d<u.length&&(u.length=d)}return this.totalSize-=i,a}clear(){if(this.totalSize!==0){for(const r of this.lanes.values())this.totalSize-=r.length,r.length=0;this.totalSize=0}}get size(){return this.totalSize}dropLowestPriorityUpTo(r){for(let a=$r.length-1;a>=0;a-=1){const i=$r[a];if(i<r)continue;const o=this.lanes.get(i);if(!o||o.length===0)continue;const u=o.shift();if(u)return this.totalSize-=1,J.recordWarning("CommandDropped",{type:u.command.type,priority:i,timestamp:u.command.timestamp}),!0}return!1}}const M1=new Set(["set","delete","clear"]),I1=new Set(["add","delete","clear"]),x1=new Set(["copyWithin","fill","reverse","set","sort"]),z1=new Set(["every","filter","find","findIndex","findLast","findLastIndex","forEach","map","reduce","reduceRight","some"]),L1=new Set(["setInt8","setUint8","setInt16","setUint16","setInt32","setUint32","setBigInt64","setBigUint64","setFloat32","setFloat64"]),en=globalThis.SharedArrayBuffer;function D1(n){return Ri(n,new WeakMap)}function Ri(n,r){if(!n||typeof n!="object")return n;const a=r.get(n);return a||(n instanceof Map?j1(n,r):n instanceof Set?U1(n,r):n instanceof Date?$1(n,r):n instanceof ArrayBuffer?rE(n,r):typeof en=="function"&&n instanceof en?aE(n,r):n instanceof RegExp?B1(n,r):ArrayBuffer.isView(n)?tm(n,r):G1(n,r))}function j1(n,r){const a=new Map,i=new Proxy(a,q1());r.set(n,i);for(const[o,u]of n.entries()){const d=Ri(o,r),m=Ri(u,r);a.set(d,m)}return i}function U1(n,r){const a=new Set,i=new Proxy(a,P1());r.set(n,i);for(const o of n.values()){const u=Ri(o,r);a.add(u)}return i}function $1(n,r){const a=new Date(n.getTime()),i=new Proxy(a,{get(o,u,d){if(typeof u=="string"&&u.startsWith("set"))return()=>{throw new TypeError("Cannot mutate immutable Date snapshot")};const m=Reflect.get(o,u,d);return typeof m=="function"?m.bind(o):m},set(){throw new TypeError("Cannot mutate immutable Date snapshot")},defineProperty(){throw new TypeError("Cannot mutate immutable Date snapshot")},deleteProperty(){throw new TypeError("Cannot mutate immutable Date snapshot")}});return r.set(n,i),i}function rE(n,r){const a=n.slice(0),i=sE(a);return r.set(n,i),i}function aE(n,r){if(typeof en!="function")throw new Error("SharedArrayBuffer is not supported in this environment.");const a=new en(n.byteLength);new Uint8Array(a).set(new Uint8Array(n));const i=iE(a);return r.set(n,i),i}function B1(n,r){const a=new RegExp(n.source,n.flags);return a.lastIndex=n.lastIndex,r.set(n,a),a}function tm(n,r){let a;if(n instanceof DataView){const o=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);a=new DataView(o,0,n.byteLength)}else{const o=n,u=o.constructor;if(typeof en=="function"&&o.buffer instanceof en){const d=oE(o.buffer);a=new u(d,o.byteOffset,o.length)}else{const d=o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength);a=new u(d)}}const i=new Proxy(a,V1(n,r));return r.set(n,i),i}function q1(){return{get(n,r,a){if(r==="valueOf")return()=>a;if(r==="forEach"){const o=n.forEach;return(u,d)=>typeof u!="function"?o.call(n,u,d):o.call(n,(m,h)=>{u.call(d,m,h,a)},d)}if(M1.has(r))return()=>{throw new TypeError("Cannot mutate immutable Map snapshot")};const i=Reflect.get(n,r,a);return typeof i=="function"?i.bind(n):i},set(){throw new TypeError("Cannot mutate immutable Map snapshot")},defineProperty(){throw new TypeError("Cannot mutate immutable Map snapshot")},deleteProperty(){throw new TypeError("Cannot mutate immutable Map snapshot")}}}function P1(){return{get(n,r,a){if(r==="valueOf")return()=>a;if(r==="forEach"){const o=n.forEach;return(u,d)=>typeof u!="function"?o.call(n,u,d):o.call(n,(m,h)=>{u.call(d,m,h,a)},d)}if(I1.has(r))return()=>{throw new TypeError("Cannot mutate immutable Set snapshot")};const i=Reflect.get(n,r,a);return typeof i=="function"?i.bind(n):i},set(){throw new TypeError("Cannot mutate immutable Set snapshot")},defineProperty(){throw new TypeError("Cannot mutate immutable Set snapshot")},deleteProperty(){throw new TypeError("Cannot mutate immutable Set snapshot")}}}function G1(n,r){const a=Object.getPrototypeOf(n),i=Array.isArray(n)?[]:Object.create(a===null?null:a);r.set(n,i);const o=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const u of o){const d=Object.getOwnPropertyDescriptor(n,u);d&&("value"in d&&(d.value=Ri(d.value,r)),Object.defineProperty(i,u,d))}return Object.freeze(i),i}function V1(n,r){const a=n instanceof DataView,i=a?"DataView":n.constructor.name||"TypedArray";return{get(o,u,d){if(u==="buffer"){const h=o.buffer;return h instanceof ArrayBuffer?rE(h,r):typeof en=="function"&&h instanceof en?aE(h,r):h}if(u==="valueOf")return()=>d;if(a&&(u==="byteOffset"||u==="byteLength"))return Reflect.get(o,u,o);if(typeof u=="string"&&z1.has(u)&&!a){const h=Reflect.get(o,u,d);if(typeof h=="function"){const p=h;return(...g)=>{const[v,...b]=g;if(typeof v!="function")return p.call(o,v,...b);const T=function(...E){return E.length>0&&(E[E.length-1]=d),v.apply(this,E)},w=p.call(o,T,...b);return ArrayBuffer.isView(w)&&!(w instanceof DataView)?tm(w,r):w}}}if(!a&&u==="subarray")return(...h)=>{const g=o.subarray(...h);return tm(g,r)};if(typeof u=="string"&&(a&&L1.has(u)||!a&&x1.has(u)))return()=>{throw new TypeError(`Cannot mutate immutable ${i} snapshot`)};const m=Reflect.get(o,u,d);return typeof m=="function"?m.bind(o):m},set(){throw new TypeError(`Cannot mutate immutable ${i} snapshot`)},defineProperty(){throw new TypeError(`Cannot mutate immutable ${i} snapshot`)},deleteProperty(){throw new TypeError(`Cannot mutate immutable ${i} snapshot`)}}}function sE(n){const r=n;return Object.freeze({get byteLength(){return r.byteLength},slice(i,o){const u=r.slice(i??0,o??r.byteLength);return sE(u)},toArrayBuffer(){return r.slice(0)},toDataView(){return new DataView(r.slice(0))},toUint8Array(){return new Uint8Array(r.slice(0))},valueOf(){return r.slice(0)},[Symbol.toStringTag]:"ImmutableArrayBufferSnapshot"})}function iE(n){if(typeof en!="function")throw new Error("SharedArrayBuffer is not supported in this environment.");const r=n;return Object.freeze({get byteLength(){return r.byteLength},slice(i,o){const u=H1(r,i,o);return iE(u)},toSharedArrayBuffer(){return oE(r)},toArrayBuffer(){return Cd(r)},toDataView(){return new DataView(Cd(r))},toUint8Array(){return new Uint8Array(Cd(r))},valueOf(){return this.toSharedArrayBuffer()},[Symbol.toStringTag]:"ImmutableSharedArrayBufferSnapshot"})}function H1(n,r,a){if(typeof en!="function")throw new Error("SharedArrayBuffer is not supported in this environment.");const{start:i,finish:o}=Y1(r,a,n.byteLength),u=new en(o-i),d=new Uint8Array(n,i,o-i);return new Uint8Array(u).set(d),u}function Y1(n,r,a){const i=uv(n,a,0),o=uv(r,a,a);return{start:i,finish:Math.max(o,i)}}function uv(n,r,a){if(n===void 0)return a;const i=Number(n);if(Number.isNaN(i))return a;if(!Number.isFinite(i))return i<0?0:r;const o=Math.trunc(i);return o<0?Math.max(r+o,0):Math.min(o,r)}function oE(n){if(typeof en!="function")throw new Error("SharedArrayBuffer is not supported in this environment.");const r=new en(n.byteLength);return new Uint8Array(r).set(new Uint8Array(n)),r}function Cd(n){const r=new Uint8Array(n),a=new ArrayBuffer(r.byteLength);return new Uint8Array(a).set(r),a}function Z1(n){const r=F1(n);return D1(r)}function F1(n){const r=globalThis.structuredClone;if(typeof r!="function")throw new Error("structuredClone is required for deterministic command queue snapshots.");return r(n)}const X1=120,Q1=50,nm=Object.freeze([]),Nd=globalThis.performance;function cE(){if(Nd&&typeof Nd.now=="function")return{now:()=>Nd.now()};const n=globalThis.process,r=n?.hrtime?.bigint;if(typeof r=="function"){const a=r.call(n);return{now:()=>{const i=r.call(n)-a;return Number(i)/1e6}}}return{now:()=>Date.now()}}const K1=cE();function J1(n={}){const r=n.capacity,a=typeof r=="number"&&Number.isFinite(r)&&r>=0?Math.floor(r):X1,i=n.slowTickBudgetMs??Q1,o=n.clock??K1,u=new Array(a);let d=0,m=0,h=0,p=0,g;const v=Object.freeze({capacity:a,slowTickBudgetMs:i});function b(N){const U=u[N];if(U!==void 0)return U;const B={tick:0,head:0,startedAt:0,endedAt:0,durationMs:0,budgetMs:void 0,isSlow:!1,overBudgetMs:0,error:void 0,metadata:void 0};return u[N]=B,B}function T(N){m===a?h+=1:m+=1,a>0&&(d=(d+1)%a),g=N.tick}function w(N,U){const B=o.now(),q=U?.budgetMs??i;let F=!1;const le={tick:N,startedAt:B,end(he){if(F)return;F=!0;const Ae=he?.endedAt??o.now(),Ue=Ae>=B?Ae-B:0,et=he?.budgetMs??q,W=p+1;if(p=W,a===0){h+=1,g=N;return}const I=b(d);I.tick=N,I.head=W,I.startedAt=B,I.endedAt=Ae,I.durationMs=Ue,I.budgetMs=et,I.isSlow=et!==void 0&&Ue>et,I.overBudgetMs=I.isSlow&&et!==void 0?Ue-et:0,I.error=uE(he?.error),I.metadata=tw(he?.metadata),T(I)},fail(he,Ae){le.end({...Ae,error:he})}};return le}function E(N){const U=N.error===void 0?void 0:Object.freeze({name:N.error.name,message:N.error.message,stack:N.error.stack});return Object.freeze({tick:N.tick,startedAt:N.startedAt,endedAt:N.endedAt,durationMs:N.durationMs,budgetMs:N.budgetMs,isSlow:N.isSlow,overBudgetMs:N.overBudgetMs,error:U,metadata:N.metadata})}function A(N){if(m===0||a===0)return nm;const U=[],B=m===a?d:0;for(let q=0;q<m;q+=1){const F=(B+q)%a,le=u[F];le&&(N!==void 0&&le.head<=N||U.push(E(le)))}return Object.freeze(U)}function _(N){const U=p,B=typeof N=="number"&&Number.isFinite(N)&&N>=0?N:void 0,q=B!==void 0&&B>U,F=A(q?void 0:B);let le=B===void 0||q?h:0;if(B!==void 0&&!q){const he=B>=U?0:U-B;le=Math.max(0,he-F.length)}return Object.freeze({entries:F,head:U,dropped:le,configuration:v})}function R(){const N=_();return Object.freeze({capacity:a,size:m,droppedEntries:h,lastTick:g,entries:N.entries})}function M(){d=0,m=0,h=0,p=0,g=void 0;for(let N=0;N<a;N+=1){const U=u[N];U&&(U.metadata=void 0)}}return{startTick:w,snapshot:R,readDelta:_,clear:M}}function W1(){const n=Object.freeze({capacity:0,slowTickBudgetMs:void 0,enabled:!1}),r=Object.freeze({capacity:0,size:0,droppedEntries:0,lastTick:void 0,entries:nm}),a=Object.freeze({entries:nm,head:0,dropped:0,configuration:n});return{startTick(i){return{tick:i,startedAt:0,end(){},fail(){}}},snapshot(){return r},readDelta(){return a},clear(){}}}function uE(n){if(n!=null){if(ew(n)){const r={};return n.name!==void 0&&(r.name=n.name),n.message!==void 0&&(r.message=n.message),n.stack!==void 0&&(r.stack=n.stack),r}return typeof n=="string"?{message:n}:{message:String(n)}}}function ew(n){return!n||typeof n!="object"?!1:typeof n.message=="string"||typeof n.name=="string"||typeof n.stack=="string"}function tw(n){if(!n)return;const r=n.queue?Object.freeze({...n.queue}):void 0,a=n.events?Object.freeze({counters:Object.freeze({...n.events.counters}),channels:Object.freeze(n.events.channels.map(u=>Object.freeze({...u})))}):void 0,i=n.systems?Object.freeze(n.systems.map(u=>Object.freeze({id:u.id,durationMs:u.durationMs,budgetMs:u.budgetMs,isSlow:u.isSlow,overBudgetMs:u.overBudgetMs,history:u.history?Object.freeze({...u.history}):void 0,error:u.error?Object.freeze({...u.error}):void 0}))):void 0,o=n.phases?Object.freeze(n.phases.map(u=>Object.freeze({name:u.name,durationMs:u.durationMs,offsetMs:u.offsetMs}))):void 0;return Object.freeze({accumulatorBacklogMs:n.accumulatorBacklogMs,queue:r,events:a,systems:i,phases:o})}const nw=16,rw=60,Md=W1(),aw={end(){},fail(n){throw n}},sw={tick:-1,recordQueueMetrics(){},recordEventMetrics(){},setAccumulatorBacklogMs(){},addPhase(){},startSystem(){return aw},complete(){},fail(n){throw n}};class iw{constructor(r,a){Object.defineProperty(this,"isEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"timeline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"slowSystemBudgetMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"systemHistorySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tickBudgetMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"systemHistory",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"resolvedConfiguration",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const i=r.clock??cE();this.clock=i;const o={capacity:r.capacity,slowTickBudgetMs:r.slowTickBudgetMs,clock:i};this.timeline=J1(o);const u=typeof r.slowSystemBudgetMs=="number"&&Number.isFinite(r.slowSystemBudgetMs)&&r.slowSystemBudgetMs>0?r.slowSystemBudgetMs:Math.min(a.stepSizeMs,nw);this.slowSystemBudgetMs=u>0?u:void 0;const d=typeof r.systemHistorySize=="number"&&Number.isFinite(r.systemHistorySize)&&r.systemHistorySize>0?Math.floor(r.systemHistorySize):rw;this.systemHistorySize=Math.max(1,d);const m=typeof r.slowTickBudgetMs=="number"&&Number.isFinite(r.slowTickBudgetMs)&&r.slowTickBudgetMs>0?r.slowTickBudgetMs:a.stepSizeMs;this.tickBudgetMs=m>0?m:void 0;const h=this.timeline.readDelta().configuration;this.resolvedConfiguration=Object.freeze({...h,enabled:!0,slowSystemBudgetMs:this.slowSystemBudgetMs,systemHistorySize:this.systemHistorySize,tickBudgetMs:this.tickBudgetMs})}beginTick(r){const a=this.timeline.startTick(r,{budgetMs:this.tickBudgetMs});return new ow({tick:r,handle:a,clock:this.clock,controller:this,tickBudgetMs:this.tickBudgetMs})}readDelta(r){const a=this.timeline.readDelta(r);return a.configuration===this.resolvedConfiguration?a:Object.freeze({entries:a.entries,head:a.head,dropped:a.dropped,configuration:this.resolvedConfiguration})}getConfiguration(){return this.resolvedConfiguration}snapshot(){return this.readDelta()}clear(){this.timeline.clear(),this.systemHistory.clear()}completeSystemSpan(r,a,i,o){const u=this.recordSystemHistory(r,i),d=this.slowSystemBudgetMs,m=typeof d=="number"&&i>d,h=m&&typeof d=="number"?i-d:0;return m&&d!==void 0&&J.recordWarning("SystemExecutionSlow",{systemId:r,tick:a,durationMs:i,budgetMs:d,overBudgetMs:h,averageDurationMs:u.averageMs,maxDurationMs:u.maxMs,sampleCount:u.sampleCount}),{id:r,durationMs:i,budgetMs:d,isSlow:m,overBudgetMs:h,history:u,error:uE(o)}}recordSystemHistory(r,a){let i=this.systemHistory.get(r);i||(i={values:[]},this.systemHistory.set(r,i)),i.values.push(a),i.values.length>this.systemHistorySize&&i.values.shift();const{values:o}=i;let u=0,d=0;for(const p of o)u+=p,p>d&&(d=p);const m=o.length,h=m>0?u/m:0;return{sampleCount:m,averageMs:h,maxMs:d}}maybeRecordSlowTickWarning(r,a,i){const o=this.tickBudgetMs;if(typeof o!="number"||o<=0||a<=o)return;const u=a-o,d=i.systems?i.systems.reduce((m,h)=>!m||h.durationMs>m.durationMs?h:m,void 0):void 0;J.recordWarning("TickExecutionSlow",{tick:r,durationMs:a,budgetMs:o,overBudgetMs:u,accumulatorBacklogMs:i.accumulatorBacklogMs,queueCaptured:i.queue?.captured,queueExecuted:i.queue?.executed,queueSkipped:i.queue?.skipped,slowestSystemId:d?.id,slowestSystemDurationMs:d?.durationMs,slowestSystemOverBudgetMs:d?.overBudgetMs})}}class ow{constructor(r){Object.defineProperty(this,"tick",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tickBudgetMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"queueMetrics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"eventMetrics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"accumulatorBacklogMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"systemSpans",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"phases",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.tick=r.tick,this.handle=r.handle,this.clock=r.clock,this.controller=r.controller,this.tickBudgetMs=r.tickBudgetMs}recordQueueMetrics(r){this.queueMetrics={...r}}recordEventMetrics(r){this.eventMetrics={counters:{...r.counters},channels:r.channels.map(a=>({...a}))}}setAccumulatorBacklogMs(r){this.accumulatorBacklogMs=r}addPhase(r,a,i){if(!Number.isFinite(a)||a<0)return;const o=Number.isFinite(i??NaN)?i:void 0,u=o===void 0?{name:r,durationMs:a}:{name:r,durationMs:a,offsetMs:o};this.phases.push(u)}startSystem(r){return new cw({systemId:r,tick:this.tick,controller:this.controller,parent:this,clock:this.clock})}complete(){if(this.completed)return;this.completed=!0;const r=this.clock.now(),a=this.buildMetadata();this.handle.end({endedAt:r,budgetMs:this.tickBudgetMs,metadata:a}),this.controller.maybeRecordSlowTickWarning(this.tick,r-this.handle.startedAt,a)}fail(r){if(!this.completed){this.completed=!0;const a=this.clock.now(),i=this.buildMetadata();this.handle.fail(r,{endedAt:a,budgetMs:this.tickBudgetMs,metadata:i})}throw r}addSystemSpan(r){this.systemSpans.push(r)}buildMetadata(){return{accumulatorBacklogMs:this.accumulatorBacklogMs,queue:this.queueMetrics,events:this.eventMetrics,systems:this.systemSpans.slice(),phases:this.phases.length>0?this.phases.map(a=>({name:a.name,durationMs:a.durationMs,offsetMs:a.offsetMs})):void 0}}}class cw{constructor(r){Object.defineProperty(this,"systemId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tick",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startedAt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.systemId=r.systemId,this.tick=r.tick,this.controller=r.controller,this.parent=r.parent,this.clock=r.clock,this.startedAt=r.clock.now()}end(){this.finish(void 0)}fail(r){throw this.finish(r),r}finish(r){if(this.completed)return;this.completed=!0;const a=this.clock.now(),i=a>=this.startedAt?a-this.startedAt:0,o=this.controller.completeSystemSpan(this.systemId,this.tick,i,r);this.parent.addSystemSpan(o)}}const uw=Object.freeze({capacity:0,slowTickBudgetMs:void 0,enabled:!1});class lw{constructor(r,a){Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"active",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"timelineRecorder",{enumerable:!0,configurable:!0,writable:!0,value:Md}),Object.defineProperty(this,"configuration",{enumerable:!0,configurable:!0,writable:!0,value:uw}),Object.defineProperty(this,"preservedOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.context=a;const i=r?.timeline;i!==void 0&&i!==!1&&(i.enabled===!1?(this.preservedOptions=this.normalizeRequestedOptions(i),this.disable()):this.enable(i))}get isEnabled(){return this.active!==null}get timeline(){return this.timelineRecorder}beginTick(r){return this.active?this.active.beginTick(r):sw}readDelta(r){if(!this.active){const i=Md.readDelta(r);return i.configuration===this.configuration?i:Object.freeze({entries:i.entries,head:i.head,dropped:i.dropped,configuration:this.configuration})}const a=this.active.readDelta(r);return a.configuration===this.configuration?a:Object.freeze({entries:a.entries,head:a.head,dropped:a.dropped,configuration:this.configuration})}snapshot(){return this.readDelta()}enable(r){const a=this.preservedOptions!==void 0?{...this.preservedOptions}:{},i=r!==void 0?{...a,...r}:a;if(i.enabled===!1){this.preservedOptions=this.normalizeRequestedOptions(i),this.disable();return}const o={...i,enabled:!0};this.active=new iw(o,this.context),this.timelineRecorder=this.active.timeline,this.configuration=this.active.getConfiguration(),this.preservedOptions=this.mergePreservedOptions(o,this.configuration)}disable(){const r=this.configuration;if(this.active){const a=this.preservedOptions!==void 0?this.preservedOptions:{};this.preservedOptions=this.mergePreservedOptions(a,r)}this.active=null,this.timelineRecorder=Md,this.configuration=Object.freeze({...r,enabled:!1})}getConfiguration(){return this.configuration}clear(){this.active?.clear()}normalizeRequestedOptions(r){return{...r,enabled:!0}}mergePreservedOptions(r,a){const{capacity:i,slowTickBudgetMs:o,slowSystemBudgetMs:u,systemHistorySize:d,enabled:m,...h}=r;return{...h,enabled:!0,capacity:i??a.capacity,slowTickBudgetMs:o??a.slowTickBudgetMs,slowSystemBudgetMs:u??a.slowSystemBudgetMs,systemHistorySize:d??a.systemHistorySize}}}function dw(n,r){return new lw(n,r)}const fw=new Set(["copyWithin","fill","reverse","set","sort"]),mw=new Set(["every","filter","find","findIndex","findLast","findLastIndex","forEach","map","reduce","reduceRight","some"]),lv=Object.getPrototypeOf(Int8Array.prototype),fa=globalThis.SharedArrayBuffer,dv=new WeakMap,fv=fa?new WeakMap:void 0,hw=new WeakSet,vi="Immutable typed array snapshots are read-only. Clone the array before mutating.";function lE(n){const r=dv.get(n);if(r)return r;const a={get byteLength(){return n.byteLength},slice(i,o){const u=n.slice(i??0,o??n.byteLength);return lE(u)},toArrayBuffer(){return n.slice(0)},toDataView(){return new DataView(n.slice(0))},toUint8Array(){return new Uint8Array(n.slice(0))},valueOf(){return n.slice(0)},[Symbol.toStringTag]:"ImmutableArrayBufferSnapshot"};return dv.set(n,a),a}function mv(n){if(!fa)throw new TypeError("SharedArrayBuffer is not supported in this environment");const r=new fa(n.byteLength),a=new Uint8Array(n);return new Uint8Array(r).set(a),r}function pw(n,r,a){const i=r===void 0?0:r<0?Math.max(n+r,0):Math.min(r,n),o=a===void 0?n:a<0?Math.max(n+a,0):Math.min(a,n),u=Math.max(0,Math.min(o,n));return[i,Math.max(i,u)]}function dE(n){const r=fv?.get(n);if(r)return r;if(!fa)throw new TypeError("SharedArrayBuffer is not supported in this environment");const a={get byteLength(){return n.byteLength},slice(i,o){const[u,d]=pw(n.byteLength,i,o),m=new fa(d-u),h=new Uint8Array(n,u,d-u);return new Uint8Array(m).set(h),dE(m)},toSharedArrayBuffer(){return mv(n)},toArrayBuffer(){const i=new ArrayBuffer(n.byteLength);return new Uint8Array(i).set(new Uint8Array(n)),i},toDataView(){const i=new ArrayBuffer(n.byteLength);return new Uint8Array(i).set(new Uint8Array(n)),new DataView(i)},toUint8Array(){const i=new Uint8Array(n.byteLength);return i.set(new Uint8Array(n)),i},valueOf(){return mv(n)},[Symbol.toStringTag]:"ImmutableSharedArrayBufferSnapshot"};return fv?.set(n,a),a}function gw(n,r){return function(...a){return a.length>0&&(a[a.length-1]=n),r.apply(this,a)}}function Id(n,r,a){return r&&n===r&&a?a:ArrayBuffer.isView(n)&&!(n instanceof DataView)?Tm(n):n}function yw(n){return lv?Object.prototype.hasOwnProperty.call(lv,n):!1}function Tm(n){const r=n.buffer,a=fa&&r instanceof fa?dE(r):void 0,i=a===void 0?lE(r):void 0,o=new Proxy(n,{get(u,d,m){if(d==="buffer")return a??i;if(d==="valueOf")return()=>m;if(typeof d=="string"&&fw.has(d))return()=>{throw new TypeError(vi)};if(typeof d=="string"&&d==="subarray")return(...p)=>{const v=u.subarray(...p);return Tm(v)};if(typeof d=="string"&&mw.has(d)){const p=Reflect.get(u,d,u);if(typeof p=="function")return(...g)=>{if(g.length>0&&typeof g[0]=="function"){const[b,...T]=g,w=gw(m,b),E=p.apply(u,[w,...T]);return Id(E,u,m)}const v=p.apply(u,g);return Id(v,u,m)}}const h=Reflect.get(u,d);return typeof h=="function"?d==="constructor"?h:yw(d)||ArrayBuffer.isView(u)?(...p)=>{const g=h.apply(u,p);return Id(g,u,m)}:h.bind(u):h},set(){throw new TypeError(vi)},defineProperty(){throw new TypeError(vi)},deleteProperty(){throw new TypeError(vi)},setPrototypeOf(){throw new TypeError(vi)}});return hw.add(o),o}const Ci=1e-9,vw=1e-9,wm=.001,hv=.5,Cc=1,Nc=2,qt=4,Vc=-1,pv=-2,bw="ResourceDirtyToleranceSaturated",Ew="ResourceForceClearDirtyState",Sw="ResourceSaveLengthMismatch",xd="ResourceHydrationMismatch",hn="ResourceHydrationInvalidData",_w="SNAPSHOT_GUARDS";var wn;(function(n){n[n.Idle=0]="Idle",n[n.Finalized=1]="Finalized",n[n.Published=2]="Published"})(wn||(wn={}));const fE=new WeakMap;function Tw(n){const r=n.length,a=new Array(r),i=new Map,o=new Set;for(let q=0;q<r;q+=1){const le=n[q]?.id;if(!le)throw J.recordError("ResourceDefinitionMissingId",{index:q}),new Error(`Resource definition at index ${q} is missing an id.`);if(o.has(le))throw J.recordError("ResourceDefinitionDuplicateId",{id:le}),new Error(`Resource definition with id "${le}" is duplicated.`);o.add(le),a[q]=le,i.set(le,q)}const u=Object.freeze([...a]),d=Aw(i),m=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT*7*Math.max(1,r)),h=r*Float64Array.BYTES_PER_ELEMENT,p=new Float64Array(m,0*h,r),g=new Float64Array(m,1*h,r),v=new Float64Array(m,2*h,r),b=new Float64Array(m,3*h,r),T=new Float64Array(m,4*h,r),w=new Float64Array(m,5*h,r),E=new Float64Array(m,6*h,r),A=new Uint8Array(r),_=[yv(r),yv(r)],R=new Uint32Array(r),M=new Int32Array(r);M.fill(Vc);const N={ids:u,indexById:d,amounts:p,capacities:g,incomePerSecond:v,expensePerSecond:b,netPerSecond:T,tickDelta:w,flags:A,dirtyTolerance:E,publish:_,dirtyIndexScratch:R,dirtyIndexPositions:M};ww(N,n);const U={buffers:N,activePublishIndex:0,dirtyIndexCount:0,publishGuardState:wn.Idle,definitionDigest:rm(u)},B=Rw(U);return fE.set(B,U),B}function gv(n,r,a){const i=fE.get(n);if(i===void 0)throw J.recordError("ResourceStateInternalUnavailable"),new Error("ResourceState internals are unavailable for the provided instance.");xw(i,r,a)}function ww(n,r){const{amounts:a,capacities:i,incomePerSecond:o,expensePerSecond:u,netPerSecond:d,tickDelta:m,flags:h,dirtyTolerance:p,publish:g}=n,v=g[0],b=g[1],{resources:T}=kw(r);for(let w=0;w<T.length;w+=1){const E=T[w];a[w]=E.amount,i[w]=E.capacity,o[w]=0,u[w]=0,d[w]=E.netPerSecond,m[w]=0,h[w]=E.flags,p[w]=E.dirtyTolerance,v.amounts[w]=E.amount,v.capacities[w]=E.capacity,v.incomePerSecond[w]=0,v.expensePerSecond[w]=0,v.netPerSecond[w]=E.netPerSecond,v.tickDelta[w]=0,v.flags[w]=E.flags&~qt,v.dirtyTolerance[w]=E.dirtyTolerance,b.amounts[w]=E.amount,b.capacities[w]=E.capacity,b.incomePerSecond[w]=0,b.expensePerSecond[w]=0,b.netPerSecond[w]=E.netPerSecond,b.tickDelta[w]=0,b.flags[w]=E.flags&~qt,b.dirtyTolerance[w]=E.dirtyTolerance}v.dirtyCount=0,b.dirtyCount=0}function kw(n){return{resources:n.map((a,i)=>{const o=a.startAmount??0,u=a.capacity??Number.POSITIVE_INFINITY,d=a.unlocked??!0,m=a.visible??!0,h=a.dirtyTolerance??wm;if(!Number.isFinite(o))throw J.recordError("ResourceDefinitionInvalidStartAmount",{id:a.id,value:o}),new Error(`Resource definition "${a.id}" has a non-finite startAmount.`);let p;if(u===null)p=Number.POSITIVE_INFINITY;else if(typeof u=="number"){if(Number.isNaN(u)||u<0)throw J.recordError("ResourceDefinitionInvalidCapacity",{id:a.id,value:u}),new Error(`Resource definition "${a.id}" has an invalid capacity.`);p=u}else p=Number.POSITIVE_INFINITY;let g=o;g<0&&(J.recordWarning("ResourceInitialAmountClampLow",{id:a.id,value:g}),g=0),g>p&&(J.recordWarning("ResourceInitialAmountClampHigh",{id:a.id,value:g,capacity:p}),g=p);const v=Ow(h,a.id),b=(m?Cc:0)|(d?Nc:0);return{amount:g,capacity:p,flags:b,netPerSecond:0,dirtyTolerance:v}})}}function Ow(n,r){return Number.isFinite(n)?n<Ci?Ci:n>hv?(J.recordWarning("ResourceDirtyToleranceClamped",{resourceId:r,value:n}),hv):n:wm}function yv(n){const r=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT*7*Math.max(1,n)),a=n*Float64Array.BYTES_PER_ELEMENT,i=new Float64Array(r,0*a,n),o=new Float64Array(r,1*a,n),u=new Float64Array(r,2*a,n),d=new Float64Array(r,3*a,n),m=new Float64Array(r,4*a,n),h=new Float64Array(r,5*a,n),p=new Float64Array(r,6*a,n),g=new Uint8Array(n),v=new Uint32Array(n);return{amounts:i,capacities:o,incomePerSecond:u,expensePerSecond:d,netPerSecond:m,tickDelta:h,flags:g,dirtyTolerance:p,dirtyIndices:v,dirtyCount:0}}function Aw(n){const r=new Map(n);return new Proxy(r,{get(a,i,o){if(i==="set"||i==="delete"||i==="clear")return()=>{throw new Error("ResourceState index map is immutable once created.")};const u=Reflect.get(a,i,o);return typeof u=="function"?u.bind(a):u}})}function Rw(n){const{buffers:r}=n;return{getIndex:a=>n.buffers.indexById.get(a),requireIndex:a=>Cw(n,a),getAmount:a=>(Tn(n,a),r.amounts[a]),getCapacity:a=>(Tn(n,a),r.capacities[a]),getNetPerSecond:a=>(Tn(n,a),r.netPerSecond[a]),isUnlocked:a=>(Tn(n,a),(r.flags[a]&Nc)!==0),isVisible:a=>(Tn(n,a),(r.flags[a]&Cc)!==0),grantVisibility:a=>{Ev(n,a,Cc)},unlock:a=>{Ev(n,a,Nc)},setCapacity:(a,i)=>Nw(n,a,i),addAmount:(a,i)=>Mw(n,a,i),spendAmount:(a,i,o)=>Iw(n,a,i,o),applyIncome:(a,i)=>vv(n,a,i,"income"),applyExpense:(a,i)=>vv(n,a,i,"expense"),finalizeTick:a=>zw(n,a),resetPerTickAccumulators:()=>Lw(n),forceClearDirtyState:()=>Dw(n),clearDirtyScratch:()=>mE(n),snapshot:a=>Uw(n,a??{}),exportForSave:a=>Vw(n,a),getDefinitionDigest:()=>n.definitionDigest}}function Cw(n,r){const a=n.buffers.indexById.get(r);if(a===void 0)throw J.recordError("ResourceUnknownId",{id:r}),new Error(`Resource with id "${r}" does not exist.`);return a}function Tn(n,r){if(!Number.isInteger(r)||r<0||r>=n.buffers.ids.length)throw J.recordError("ResourceIndexViolation",{index:r}),new Error(`Resource index ${r} is out of bounds.`)}function Nw(n,r,a){if(Tn(n,r),(Number.isNaN(a)||a<0)&&a!==Number.POSITIVE_INFINITY)throw J.recordError("ResourceCapacityInvalidInput",{index:r,value:a}),new Error("Capacity must be a finite, non-negative number or Infinity.");const{buffers:i}=n,o=a===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:a,u=i.capacities[r];Object.is(u,o)||Pr(n,i.capacities,m=>m.capacities,r,o,"capacity");const d=i.amounts[r];if(d>o){const m=o,h=m-d;Pr(n,i.amounts,p=>p.amounts,r,m,"amount"),Hc(n,r,h)}return i.capacities[r]}function Mw(n,r,a){if(Tn(n,r),!Number.isFinite(a))throw J.recordError("ResourceAddAmountNonFinite",{index:r,amount:a}),new Error("addAmount requires a finite input.");if(a<0)throw J.recordError("ResourceAddAmountNegativeInput",{index:r,amount:a}),new Error("addAmount cannot receive a negative value.");if(a===0)return 0;const{buffers:i}=n,o=i.amounts[r],u=i.capacities[r],d=o+a,m=Math.min(d,u),h=m-o;return h===0?0:(Pr(n,i.amounts,p=>p.amounts,r,m,"amount"),Hc(n,r,h),h)}function Iw(n,r,a,i){if(Tn(n,r),!Number.isFinite(a))throw J.recordError("ResourceSpendAmountNonFinite",{index:r,amount:a}),new Error("spendAmount requires a finite input.");if(a<0)throw J.recordError("ResourceSpendAmountNegativeInput",{index:r,amount:a}),new Error("spendAmount cannot receive a negative value.");if(a===0)return!0;const{buffers:o}=n,u=o.amounts[r];if(u<a)return J.recordWarning("ResourceSpendFailed",{index:r,amount:a,available:u,commandId:i?.commandId,systemId:i?.systemId}),!1;const d=u-a;return Pr(n,o.amounts,m=>m.amounts,r,d,"amount"),Hc(n,r,-a),!0}function xw(n,r,a){if(Tn(n,r),!Number.isFinite(a))throw J.recordError("ResourceWriteAmountDirectNonFinite",{index:r,amount:a}),new Error("writeAmountDirect requires a finite amount.");Pr(n,n.buffers.amounts,i=>i.amounts,r,a,"amount")}function vv(n,r,a,i){if(Tn(n,r),!Number.isFinite(a)||a<0)throw J.recordError("ResourceRateInvalidInput",{index:r,amountPerSecond:a,field:i}),new Error(`${i} amount must be a finite, non-negative value.`);if(a===0)return;const{buffers:o}=n,u=i==="income"?o.incomePerSecond:o.expensePerSecond,d=i==="income"?"incomePerSecond":"expensePerSecond",m=u[r]+a;Pr(n,u,h=>i==="income"?h.incomePerSecond:h.expensePerSecond,r,m,d)}function zw(n,r){if(!Number.isFinite(r)||r<0)throw J.recordError("ResourceFinalizeInvalidDelta",{deltaMs:r}),new Error("finalizeTick requires a finite, non-negative deltaMs.");const{buffers:a}=n,i=r/1e3,o=a.ids.length;for(let u=0;u<o;u+=1){const d=a.incomePerSecond[u],m=a.expensePerSecond[u],h=a.amounts[u],p=a.capacities[u],g=d*i,v=m*i,b=g-v,T=ek(h+b,p),w=T-h;Object.is(h,T)||Pr(n,a.amounts,A=>A.amounts,u,T,"amount"),w!==0&&Hc(n,u,w);const E=d-m;Pr(n,a.netPerSecond,A=>A.netPerSecond,u,E,"netPerSecond")}n.publishGuardState=wn.Finalized}function Lw(n){if(n.publishGuardState!==wn.Published)throw J.recordError("ResourceResetOutOfOrder"),new Error("resetPerTickAccumulators requires a publish snapshot before clearing.");const{buffers:r}=n;r.incomePerSecond.fill(0),r.expensePerSecond.fill(0),r.tickDelta.fill(0),n.publishGuardState=wn.Idle}function mE(n){n.dirtyIndexCount=0,n.buffers.dirtyIndexPositions.fill(Vc);const{flags:r}=n.buffers;for(let a=0;a<r.length;a+=1)r[a]&=~qt}function Dw(n){const r=n.dirtyIndexCount,a=n.publishGuardState;mE(n),n.buffers.incomePerSecond.fill(0),n.buffers.expensePerSecond.fill(0),n.buffers.tickDelta.fill(0),n.publishGuardState=wn.Idle,J.recordProgress(Ew,{dirtyCountBefore:r,publishGuardState:jw(a)})}function jw(n){switch(n){case wn.Idle:return"idle";case wn.Finalized:return"finalized";case wn.Published:return"published";default:return"idle"}}function Uw(n,r){return r.mode==="recorder"?$w(n):Bw(n)}function $w(n){const{buffers:r}=n,a=r.ids.length,i=u=>{const d=u.constructor,m=new d(u.length);return m.set(u),m},o=new Uint32Array(a);return o.set(r.dirtyIndexScratch.subarray(0,n.dirtyIndexCount)),{ids:r.ids,amounts:i(r.amounts),capacities:i(r.capacities),incomePerSecond:i(r.incomePerSecond),expensePerSecond:i(r.expensePerSecond),netPerSecond:i(r.netPerSecond),tickDelta:i(r.tickDelta),flags:i(r.flags),dirtyTolerance:i(r.dirtyTolerance),dirtyIndices:o,dirtyCount:n.dirtyIndexCount}}function Bw(n){const{buffers:r}=n,a=r.publish[n.activePublishIndex],i=n.activePublishIndex^1,o=r.publish[i],u=[],d=h=>r.dirtyIndexPositions[h]===pv?!1:(u.push(h),r.dirtyIndexPositions[h]=pv,!0);for(let h=0;h<a.dirtyCount;h+=1){const p=a.dirtyIndices[h];d(p)&&(o.tickDelta[p]=0)}for(let h=0;h<n.dirtyIndexCount;h+=1){const p=r.dirtyIndexScratch[h];d(p)&&(o.tickDelta[p]=0)}for(let h=0;h<a.dirtyCount;h+=1){const p=a.dirtyIndices[h];is(o.amounts,a.amounts,p),is(o.capacities,a.capacities,p),is(o.incomePerSecond,a.incomePerSecond,p),is(o.expensePerSecond,a.expensePerSecond,p),is(o.netPerSecond,a.netPerSecond,p),o.flags[p]=a.flags[p]&~qt,is(o.dirtyTolerance,a.dirtyTolerance,p)}const m=qw(n,a,o);o.dirtyCount=m;for(const h of u)r.dirtyIndexPositions[h]=Vc;return n.dirtyIndexCount=0,n.activePublishIndex=i,bv(r.flags,u),bv(o.flags,u),n.publishGuardState=wn.Published,{ids:r.ids,amounts:ir(o.amounts),capacities:ir(o.capacities),incomePerSecond:ir(o.incomePerSecond),expensePerSecond:ir(o.expensePerSecond),netPerSecond:ir(o.netPerSecond),tickDelta:ir(o.tickDelta),flags:ir(o.flags),dirtyTolerance:ir(o.dirtyTolerance),dirtyIndices:ir(o.dirtyIndices),dirtyCount:o.dirtyCount}}function is(n,r,a){n[a]=r[a]}function qw(n,r,a){let i=0;for(let o=0;o<n.dirtyIndexCount;o+=1){const u=n.buffers.dirtyIndexScratch[o];Pw(n,r,u)&&(Gw(n,a,u),a.dirtyIndices[i]=u,i+=1)}return i}function Pw(n,r,a){const i=n.buffers.dirtyTolerance[a],{buffers:o}=n;if(!_t(o.amounts[a],r.amounts[a],i,Bt(n,a,"amount",i))||!_t(o.capacities[a],r.capacities[a],i,Bt(n,a,"capacity",i))||!_t(o.incomePerSecond[a],r.incomePerSecond[a],i,Bt(n,a,"incomePerSecond",i))||!_t(o.expensePerSecond[a],r.expensePerSecond[a],i,Bt(n,a,"expensePerSecond",i))||!_t(o.netPerSecond[a],r.netPerSecond[a],i,Bt(n,a,"netPerSecond",i))||!_t(o.tickDelta[a],r.tickDelta[a],i,Bt(n,a,"tickDelta",i))||!_t(o.dirtyTolerance[a],r.dirtyTolerance[a],Ci))return!0;const u=o.flags[a]&~qt,d=r.flags[a]&~qt;return u!==d}function Gw(n,r,a){const{buffers:i}=n;r.amounts[a]=i.amounts[a],r.capacities[a]=i.capacities[a],r.incomePerSecond[a]=i.incomePerSecond[a],r.expensePerSecond[a]=i.expensePerSecond[a],r.netPerSecond[a]=i.netPerSecond[a],r.tickDelta[a]=i.tickDelta[a],r.flags[a]=i.flags[a]&~qt,r.dirtyTolerance[a]=i.dirtyTolerance[a]}function bv(n,r){for(const a of r)n[a]&=~qt}function Vw(n,r){const{buffers:a}=n,i=a.ids.length,o=new Array(i),u=new Array(i),d=new Array(i),m=new Array(i),h=new Array(i);for(let g=0;g<i;g+=1)o[g]=a.amounts[g],u[g]=a.capacities[g]===Number.POSITIVE_INFINITY?null:a.capacities[g],d[g]=a.flags[g],m[g]=(a.flags[g]&Nc)!==0,h[g]=(a.flags[g]&Cc)!==0;const p={ids:a.ids,amounts:o,capacities:u,unlocked:m,visible:h,flags:d,definitionDigest:n.definitionDigest};if(r&&r.size>0){const g=Array.from(r.values()).map(v=>({id:v.id,enabled:v.enabled,lastFiredStep:Number.isFinite(v.lastFiredStep)?v.lastFiredStep:null,cooldownExpiresStep:v.cooldownExpiresStep,unlocked:v.unlocked,lastThresholdSatisfied:v.lastThresholdSatisfied}));return{...p,automationState:g}}return p}function Hw(n,r){const a=n.ids.length;bi("amounts",n.amounts.length,a),bi("capacities",n.capacities.length,a),bi("flags",n.flags.length,a),n.unlocked!==void 0&&bi("unlocked",n.unlocked.length,a),n.visible!==void 0&&bi("visible",n.visible.length,a),Yw(n.ids),n.definitionDigest==null&&J.recordWarning(hn,{reason:"missing-digest",ids:n.ids,recovery:"reconstructed"});const i=n.definitionDigest??rm(n.ids);Zw(i,n.ids),Fw(n,a);const{liveIds:o,indexById:u}=Xw(r),d=[],m=[],h=new Set,p=new Map;for(let T=0;T<a;T+=1){const w=n.ids[T],E=p.get(w);if(E!==void 0)throw J.recordError(hn,{reason:"duplicate-id",id:w,firstIndex:E,duplicateIndex:T}),new Error(`Serialized resource id "${w}" appears multiple times.`);h.add(w),p.set(w,T);const A=u.get(w);if(A===void 0){m.push(w);continue}d.push(A)}const g=o.filter(T=>!h.has(T)),v=rm(o),b=i.hash===v.hash&&i.version===v.version;if(m.length>0)throw J.recordError(xd,{addedIds:g,removedIds:m,expectedDigest:v,receivedDigest:i}),new Error("Serialized resource definitions are incompatible with live definitions.");return g.length>0&&J.recordProgress(xd,{addedIds:g,removedIds:m,expectedDigest:v,receivedDigest:i,reason:"definitions-added"}),b||J.recordProgress(xd,{addedIds:g,removedIds:m,expectedDigest:v,receivedDigest:i,reason:"digest-mismatch"}),{remap:Object.freeze(d),addedIds:Object.freeze(g),removedIds:Object.freeze(m),digestsMatch:b}}function bi(n,r,a){if(r!==a)throw J.recordError(Sw,{field:n,expected:a,actual:r}),new Error(`Serialized resource state field "${n}" length (${r}) does not match ids length (${a}).`)}function Yw(n){for(let r=0;r<n.length;r+=1){const a=n[r];if(typeof a!="string"||a.length===0)throw J.recordError(hn,{reason:"invalid-id",index:r,value:a}),new Error("Serialized resource ids must be non-empty strings.")}}function Zw(n,r){if(!Number.isInteger(n.version)||n.version<0)throw J.recordError(hn,{reason:"invalid-digest-version",version:n.version}),new Error("Serialized resource digest has an invalid version.");if(n.version!==r.length)throw J.recordError(hn,{reason:"digest-version-mismatch",version:n.version,idsLength:r.length}),new Error("Serialized resource digest version does not match saved ids length.");if(!Qw(n.ids,r))throw J.recordError(hn,{reason:"digest-ids-mismatch",digestIds:n.ids,ids:r}),new Error("Serialized resource digest ids diverge from the saved ids.");const a=hE(r);if(n.hash!==a)throw J.recordError(hn,{reason:"digest-hash-mismatch",digestHash:n.hash,expectedHash:a}),new Error(`Serialized resource digest hash mismatch: expected "${a}" but got "${n.hash}". This may indicate a corrupted or tampered save file.`)}function Fw(n,r){for(let a=0;a<r;a+=1){const i=n.amounts[a];if(!Number.isFinite(i))throw J.recordError(hn,{reason:"invalid-amount",index:a,value:i}),new Error("Serialized resource amounts must be finite numbers.");const o=n.capacities[a];if(o!==null&&(!Number.isFinite(o)||o<0))throw J.recordError(hn,{reason:"invalid-capacity",index:a,value:o}),new Error("Serialized resource capacities must be null or finite, non-negative numbers.");const u=n.flags[a];if(!Number.isInteger(u)||u<0||u>255)throw J.recordError(hn,{reason:"invalid-flag",index:a,value:u}),new Error("Serialized resource flags must be integers between 0 and 255.");if(n.unlocked!==void 0){const d=n.unlocked[a];if(typeof d!="boolean")throw J.recordError(hn,{reason:"invalid-unlocked",index:a,value:d}),new Error("Serialized resource unlocked values must be boolean when provided.")}if(n.visible!==void 0){const d=n.visible[a];if(typeof d!="boolean")throw J.recordError(hn,{reason:"invalid-visible",index:a,value:d}),new Error("Serialized resource visible values must be boolean when provided.")}}}function Xw(n){const r=new Array(n.length),a=new Map,i=new Set;for(let o=0;o<n.length;o+=1){const d=n[o]?.id;if(!d)throw J.recordError("ResourceDefinitionMissingId",{index:o}),new Error(`Resource definition at index ${o} is missing an id.`);if(i.has(d))throw J.recordError("ResourceDefinitionDuplicateId",{id:d}),new Error(`Resource definition with id "${d}" is duplicated.`);i.add(d),r[o]=d,a.set(d,o)}return{liveIds:r,indexById:a}}function Qw(n,r){if(n===r)return!0;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a+=1)if(n[a]!==r[a])return!1;return!0}function Pr(n,r,a,i,o,u){const d=r[i];Object.is(d,o)||(r[i]=o,km(n,i,o,a(n.buffers.publish[n.activePublishIndex])[i],u))}function Ev(n,r,a,i){Tn(n,r);const{buffers:o}=n,u=o.flags[r],d=u|a;if(u===d)return;o.flags[r]=d;const m=n.buffers.publish[n.activePublishIndex].flags[r];km(n,r,d&~qt,m&~qt,"flags")}function Bt(n,r,a,i){const o=n.buffers.ids[r];if(o!==void 0)return{resourceId:o,field:a,hasOverride:!Object.is(i,wm)}}function km(n,r,a,i,o){const u=n.buffers.dirtyTolerance[r];if(!_t(a,i,u,Bt(n,r,o,u))){Kw(n,r);return}Jw(n,r)}function Kw(n,r){const{buffers:a}=n,i=a.dirtyIndexPositions[r];if(a.flags[r]|=qt,i>=0)return;const o=n.dirtyIndexCount;a.dirtyIndexScratch[o]=r,a.dirtyIndexPositions[r]=o,n.dirtyIndexCount+=1}function Jw(n,r){if(!Ww(n,r))return;const{buffers:a}=n,i=a.dirtyIndexPositions[r];if(i>=0){const o=n.dirtyIndexCount-1,u=a.dirtyIndexScratch[o];a.dirtyIndexScratch[i]=u,a.dirtyIndexPositions[u]=i,a.dirtyIndexPositions[r]=Vc,n.dirtyIndexCount-=1}a.flags[r]&=~qt}function Ww(n,r){const a=n.buffers.publish[n.activePublishIndex],i=n.buffers.dirtyTolerance[r],{buffers:o}=n;return!(!_t(o.amounts[r],a.amounts[r],i,Bt(n,r,"amount",i))||!_t(o.capacities[r],a.capacities[r],i,Bt(n,r,"capacity",i))||!_t(o.incomePerSecond[r],a.incomePerSecond[r],i,Bt(n,r,"incomePerSecond",i))||!_t(o.expensePerSecond[r],a.expensePerSecond[r],i,Bt(n,r,"expensePerSecond",i))||!_t(o.netPerSecond[r],a.netPerSecond[r],i,Bt(n,r,"netPerSecond",i))||!_t(o.tickDelta[r],a.tickDelta[r],i,Bt(n,r,"tickDelta",i))||!_t(o.dirtyTolerance[r],a.dirtyTolerance[r],Ci)||(o.flags[r]&~qt)!==(a.flags[r]&~qt))}function Hc(n,r,a){if(a===0)return;const{buffers:i}=n,o=i.tickDelta[r],u=o+a,d=i.dirtyTolerance[r],m=Bt(n,r,"tickDelta",d),h=_t(u,0,d,m,{floorToleranceOverride:!1})?0:u;Object.is(o,h)||(i.tickDelta[r]=h,km(n,r,h,n.buffers.publish[n.activePublishIndex].tickDelta[r],"tickDelta"))}function ek(n,r){return n<0?0:n>r?r:n}function _t(n,r,a,i,o){if(Object.is(n,r))return!0;const u=Math.abs(n-r);if(Number.isNaN(u))return!1;const d=Math.max(Math.abs(n),Math.abs(r)),m=vw*d,h=Math.min(a,m),p=Math.max(Ci,h),g=i?.hasOverride===!0,b=o?.floorToleranceOverride??g?Math.max(p,a):p;return i?.hasOverride&&Number.isFinite(m)&&Number.isFinite(a)&&m>a&&J.recordWarning(bw,{resourceId:i.resourceId,field:i.field,difference:u,toleranceCeiling:a,relativeTolerance:m,magnitude:d}),u<=b}function rm(n){return{ids:n,version:n.length,hash:hE(n)}}function hE(n){let r=2166136261;for(const a of n){for(let i=0;i<a.length;i+=1)r^=a.charCodeAt(i),r=Math.imul(r,16777619),r>>>=0;r^=255,r=Math.imul(r,16777619),r>>>=0}return`fnv1a-${r.toString(16).padStart(8,"0")}`}function ir(n){return tk()?Tm(n):n}function tk(){const n=nk();return n==="force-on"?!0:n==="force-off"?!1:rk()!=="production"}function nk(){const r=globalThis.process?.env?.[_w];return r==="force-on"||r==="force-off"||r==="auto"?r:"auto"}function rk(){return globalThis.process?.env?.NODE_ENV}const ak="automation";function sk(n){const{dispatcher:r,resources:a,generatorPurchases:i}=n,o=n.automationSystemId??ak;r.register(St.COLLECT_RESOURCE,ik(a)),r.register(St.PURCHASE_GENERATOR,ok(a,i,{automationSystemId:o})),n.upgradePurchases&&r.register(St.PURCHASE_UPGRADE,ck(a,n.upgradePurchases,{automationSystemId:o})),n.prestigeSystem&&r.register(St.PRESTIGE_RESET,uk(n.prestigeSystem))}function ik(n){return(r,a)=>{const i=n.requireIndex(r.resourceId),o=n.addAmount(i,r.amount);o!==r.amount&&J.recordWarning("ResourceCollectClamped",{command:St.COLLECT_RESOURCE,resourceId:r.resourceId,requested:r.amount,applied:o,step:a.step,priority:a.priority})}}function ok(n,r,a){const{automationSystemId:i}=a;return(o,u)=>{if(!lk(o.count)){J.recordError("GeneratorPurchaseInvalidCount",{generatorId:o.generatorId,count:o.count,step:u.step,priority:u.priority});return}const d=r.getPurchaseQuote(o.generatorId,o.count);if(!d){J.recordError("GeneratorPurchaseUnknown",{generatorId:o.generatorId,count:o.count,step:u.step,priority:u.priority});return}if(!Array.isArray(d.costs)||d.costs.length===0){J.recordError("GeneratorPurchaseInvalidQuote",{generatorId:o.generatorId,count:o.count,reason:"costs-empty"});return}const m={commandId:St.PURCHASE_GENERATOR,systemId:u.priority===At.AUTOMATION?i:void 0},h=[];for(const p of d.costs){if(!pE(p.amount)){J.recordError("GeneratorPurchaseInvalidQuote",{generatorId:o.generatorId,count:o.count,reason:"cost-invalid",resourceId:p.resourceId,amount:p.amount}),qr(n,m,h);return}let g;try{g=n.requireIndex(p.resourceId)}catch(b){throw qr(n,m,h),b}if(p.amount===0)continue;if(!n.spendAmount(g,p.amount,m)){J.recordWarning("InsufficientResources",{generatorId:o.generatorId,resourceId:p.resourceId,required:p.amount,count:o.count,step:u.step,priority:u.priority}),qr(n,m,h);return}h.push({index:g,amount:p.amount})}try{r.applyPurchase(o.generatorId,o.count)}catch(p){throw J.recordError("GeneratorPurchaseApplyFailed",{generatorId:o.generatorId,count:o.count,message:p instanceof Error?p.message:String(p)}),qr(n,m,h),p}}}function ck(n,r,a){const{automationSystemId:i}=a;return(o,u)=>{if(typeof o.upgradeId!="string"||o.upgradeId.trim().length===0){J.recordError("UpgradePurchaseInvalidId",{upgradeId:o.upgradeId,step:u.step,priority:u.priority});return}const d=o.upgradeId.trim(),m=r.getPurchaseQuote(d);if(!m){J.recordError("UpgradePurchaseUnknown",{upgradeId:d,step:u.step,priority:u.priority});return}if(m.status==="purchased"){J.recordWarning("UpgradePurchaseAlreadyOwned",{upgradeId:d,step:u.step,priority:u.priority});return}if(m.status==="locked"){J.recordWarning("UpgradePurchaseLocked",{upgradeId:d,step:u.step,priority:u.priority});return}if(!Array.isArray(m.costs)){J.recordError("UpgradePurchaseInvalidQuote",{upgradeId:d,reason:"costs-missing"});return}const h={commandId:St.PURCHASE_UPGRADE,systemId:u.priority===At.AUTOMATION?i:void 0},p=[];for(const g of m.costs){if(!pE(g.amount)){J.recordError("UpgradePurchaseInvalidQuote",{upgradeId:d,reason:"cost-invalid",resourceId:g.resourceId,amount:g.amount}),qr(n,h,p);return}if(g.amount===0)continue;let v;try{v=n.requireIndex(g.resourceId)}catch(T){throw qr(n,h,p),T}if(!n.spendAmount(v,g.amount,h)){J.recordWarning("UpgradePurchaseDenied",{upgradeId:d,resourceId:g.resourceId,required:g.amount,step:u.step,priority:u.priority,reason:"insufficient-resources"}),qr(n,h,p);return}p.push({index:v,amount:g.amount})}try{r.applyPurchase(d,{metadata:o.metadata})}catch(g){throw J.recordError("UpgradePurchaseApplyFailed",{upgradeId:d,message:g instanceof Error?g.message:String(g)}),qr(n,h,p),g}J.recordProgress("UpgradePurchaseConfirmed",{upgradeId:d,step:u.step,priority:u.priority})}}function uk(n){return(r,a)=>{if(typeof r.layerId!="string"||r.layerId.trim().length===0){J.recordError("PrestigeResetInvalidLayer",{layerId:r.layerId,step:a.step,priority:a.priority});return}const i=r.layerId.trim(),o=n.getPrestigeQuote(i);if(!o){J.recordError("PrestigeResetUnknown",{layerId:i,step:a.step,priority:a.priority});return}if(o.status==="locked"){J.recordWarning("PrestigeResetLocked",{layerId:i,step:a.step,priority:a.priority});return}try{n.applyPrestige(i,r.confirmationToken)}catch(u){throw J.recordError("PrestigeResetApplyFailed",{layerId:i,message:u instanceof Error?u.message:String(u),step:a.step,priority:a.priority}),u}J.recordProgress("PrestigeResetConfirmed",{layerId:i,step:a.step,priority:a.priority})}}function qr(n,r,a){if(a.length!==0)for(let i=a.length-1;i>=0;i-=1){const{index:o,amount:u}=a[i],d=n.addAmount(o,u);d!==u&&J.recordError("GeneratorPurchaseRefundMismatch",{index:o,attempted:u,applied:d,commandId:r.commandId})}}function lk(n){return Number.isInteger(n)&&n>0}function pE(n){return Number.isFinite(n)&&n>=0}const wt=Object.freeze([]),dk=1,fk=2;function Sv(n,r,a){const i=a?.stepDurationMs??100,o=mk(i,a?.resources),u=hk(n,a?.generators,a?.generatorPurchases),d=pk(a?.upgrades,a?.upgradePurchases),m=Ek(a?.prestigeLayers,a?.prestigeSystem);return Object.freeze({step:n,publishedAt:r,resources:o,generators:u,upgrades:d,prestigeLayers:m})}function mk(n,r){if(!r)return wt;if(r.state){const a=r.state.snapshot({mode:"publish"}),i=[];for(let o=0;o<a.ids.length;o+=1){const u=a.ids[o],d=r.metadata?.get(u)?.displayName??u,m=r.state.getCapacity(o),h=Number.isFinite(m)&&m>=0?m:void 0,g=r.state.getNetPerSecond(o)*(n/1e3),v=Object.freeze({id:u,displayName:d,amount:a.amounts[o]??0,isUnlocked:r.state.isUnlocked(o),isVisible:r.state.isVisible(o),...h!==void 0?{capacity:h}:{},perTick:g});i.push(v)}return Object.freeze(i)}if(r.serialized){const{serialized:a}=r,i=[];for(let o=0;o<a.ids.length;o+=1){const u=a.ids[o],d=r.metadata?.get(u)?.displayName??u,m=a.capacities[o]??void 0,h=m??void 0,p=a.unlocked?.[o]??((a.flags[o]??0)&fk)!==0,g=a.visible?.[o]??((a.flags[o]??0)&dk)!==0,v=Object.freeze({id:u,displayName:d,amount:a.amounts[o]??0,isUnlocked:!!p,isVisible:!!g,...h!==void 0?{capacity:h}:{},perTick:0});i.push(v)}return Object.freeze(i)}return wt}function hk(n,r,a){if(!r||r.length===0)return wt;const i=[];for(const o of r){const u=gk(a,o.id),d=_v(o.produces),m=_v(o.consumes),h=o.nextPurchaseReadyAtStep??n+1,p=Object.freeze({id:o.id,displayName:o.displayName??o.id,owned:Number.isFinite(o.owned)?o.owned:0,isUnlocked:!!o.isUnlocked,isVisible:!!o.isVisible,costs:u,produces:d,consumes:m,nextPurchaseReadyAtStep:h});i.push(p)}return Object.freeze(i)}function pk(n,r){if(!n||n.length===0)return wt;const a=[];for(const i of n){const o=vk(r,i.id),u=o?.costs??i.costs??wt,d=bk(u),m=o?.status??i.status??"locked",h=Object.freeze({id:i.id,displayName:i.displayName??i.id,status:m,costs:d.length>0?d:void 0,unlockHint:i.unlockHint,isVisible:!!i.isVisible});a.push(h)}return Object.freeze(a)}function _v(n){return!n||n.length===0?wt:Object.freeze(n.map(r=>Object.freeze({resourceId:r.resourceId,rate:Number.isFinite(r.rate)?r.rate:0})))}function gk(n,r){if(!n)return wt;let a;try{a=n.getPurchaseQuote(r,1)}catch{return wt}return!a||!Array.isArray(a.costs)?wt:yk(a.costs)}function yk(n){if(!n||n.length===0)return wt;const r=[];for(const a of n){if(typeof a.resourceId!="string")continue;const i=Number(a.amount);!Number.isFinite(i)||i<0||r.push(Object.freeze({resourceId:a.resourceId,amount:i}))}return r.length>0?Object.freeze(r):wt}function vk(n,r){if(n)try{return n.getPurchaseQuote(r)}catch{return}}function bk(n){if(!n||n.length===0)return wt;const r=[];for(const a of n){if(typeof a?.resourceId!="string")continue;const i=Number(a.amount);!Number.isFinite(i)||i<0||r.push(Object.freeze({resourceId:a.resourceId,amount:i}))}return r.length>0?Object.freeze(r):wt}function Ek(n,r){if(!n||n.length===0)return wt;const a=[];for(const i of n){const o=Sk(r,i.id),u=Object.freeze({id:i.id,displayName:i.displayName??i.id,summary:i.summary,status:o?.status??"locked",unlockHint:i.unlockHint,isVisible:!!i.isVisible,rewardPreview:o?.reward,resetTargets:o?.resetTargets??wt,retainedTargets:o?.retainedTargets??wt});a.push(u)}return Object.freeze(a)}function Sk(n,r){if(n)try{return n.getPrestigeQuote(r)}catch{return}}var zd={},cc={exports:{}},Sn={},Tv;function dr(){if(Tv)return Sn;Tv=1,Sn.getValueAsString=function(o){return Number.isNaN(o)?"Nan":Number.isFinite(o)?`${o}`:o<0?"-Inf":"+Inf"},Sn.removeLabels=function(o,u,d){const m=r(u,d);delete o[m]},Sn.setValue=function(o,u,d){const m=r(d);return o[m]={value:typeof u=="number"?u:0,labels:d||{}},o},Sn.setValueDelta=function(o,u,d,m=""){const h=typeof u=="number"?u:0;return o[m]?o[m].value+=h:o[m]={value:h,labels:d},o},Sn.getLabels=function(i,o){if(typeof o[0]=="object")return o[0];if(i.length!==o.length)throw new Error(`Invalid number of arguments (${o.length}): "${o.join(", ")}" for label names (${i.length}): "${i.join(", ")}".`);const u={};for(let d=0;d<i.length;d++)u[i[d]]=o[d];return u};function n(i,o){if(i.length===0)return"";let u="";for(let d=0;d<i.length;d++){const m=i[d],h=o[m];h!==void 0&&(u+=`${m}:${h},`)}return u}function r(i,o){if(o)return n(o,i);const u=Object.keys(i);return u.length>1&&u.sort(),n(u,i)}Sn.hashObject=r,Sn.isObject=function(o){return o!==null&&typeof o=="object"},Sn.nowTimestamp=function(){return Date.now()/1e3};class a extends Map{add(o,u){this.has(o)?this.get(o).push(u):this.set(o,[u])}}return Sn.Grouper=a,Sn}var wv;function Ni(){if(wv)return cc.exports;wv=1;const{getValueAsString:n}=dr();class r{static get PROMETHEUS_CONTENT_TYPE(){return"text/plain; version=0.0.4; charset=utf-8"}static get OPENMETRICS_CONTENT_TYPE(){return"application/openmetrics-text; version=1.0.0; charset=utf-8"}constructor(p=r.PROMETHEUS_CONTENT_TYPE){if(this._metrics={},this._collectors=[],this._defaultLabels={},p!==r.PROMETHEUS_CONTENT_TYPE&&p!==r.OPENMETRICS_CONTENT_TYPE)throw new TypeError(`Content type ${p} is unsupported`);this._contentType=p}getMetricsAsArray(){return Object.values(this._metrics)}async getMetricsAsString(p){const g=typeof p.getForPromString=="function"?await p.getForPromString():await p.get(),v=d(g.name),b=`# HELP ${v} ${d(g.help)}`,T=`# TYPE ${v} ${g.type}`,w=[b,T],E=Object.keys(this._defaultLabels).length>0?this._defaultLabels:null,A=this.contentType===r.OPENMETRICS_CONTENT_TYPE;for(const _ of g.values||[]){let{metricName:R=v,labels:M={}}=_;const{sharedLabels:N={}}=_;A&&g.type==="counter"&&(R=`${R}_total`),E&&(M={...M,...E,...M});const U=a(M,N),B=o(N),q=[...U,B].filter(Boolean),F=q.length?`{${q.join(",")}}`:"";let le=`${R}${F} ${n(_.value)}`;const{exemplar:he}=_;if(he&&A){const Ae=a(he.labelSet);le+=` # {${Ae.join(",")}} ${n(he.value)} ${he.timestamp}`}w.push(le)}return w.join(`
`)}async metrics(){const p=this.contentType===r.OPENMETRICS_CONTENT_TYPE,g=this.getMetricsAsArray().map(b=>(p&&b.type==="counter"&&(b.name=m(b.name)),this.getMetricsAsString(b))),v=await Promise.all(g);return p?`${v.join(`
`)}
# EOF
`:`${v.join(`

`)}
`}registerMetric(p){if(this._metrics[p.name]&&this._metrics[p.name]!==p)throw new Error(`A metric with the name ${p.name} has already been registered.`);this._metrics[p.name]=p}clear(){this._metrics={},this._defaultLabels={}}async getMetricsAsJSON(){const p=[],g=Object.keys(this._defaultLabels),v=[];for(const T of this.getMetricsAsArray())v.push(T.get());const b=await Promise.all(v);for(const T of b){if(T.values&&g.length>0)for(const w of T.values){w.labels=Object.assign({},w.labels);for(const E of g)w.labels[E]=w.labels[E]||this._defaultLabels[E]}p.push(T)}return p}removeSingleMetric(p){delete this._metrics[p]}getSingleMetricAsString(p){return this.getMetricsAsString(this._metrics[p])}getSingleMetric(p){return this._metrics[p]}setDefaultLabels(p){this._defaultLabels=p}resetMetrics(){for(const p in this._metrics)this._metrics[p].reset()}get contentType(){return this._contentType}setContentType(p){if(p===r.OPENMETRICS_CONTENT_TYPE||p===r.PROMETHEUS_CONTENT_TYPE)this._contentType=p;else throw new Error(`Content type ${p} is unsupported`)}static merge(p){const g=p[0].contentType;for(const T of p)if(T.contentType!==g)throw new Error("Registers can only be merged if they have the same content type");const v=new r(g);return p.reduce((T,w)=>T.concat(w.getMetricsAsArray()),[]).forEach(v.registerMetric,v),v}}function a(h,p){const{hasOwnProperty:g}=Object.prototype,v=[];for(const[b,T]of Object.entries(h))(!p||!g.call(p,b))&&v.push(`${b}="${u(T)}"`);return v}const i=new WeakMap;function o(h){const p=i.get(h);if(p)return p;const v=a(h).join(",");return i.set(h,v),v}function u(h){return typeof h!="string"?h:d(h).replace(/"/g,'\\"')}function d(h){return h.replace(/\\/g,"\\\\").replace(/\n/g,"\\n")}function m(h){return h.replace(/_total$/,"")}return cc.exports=r,cc.exports.globalRegistry=new r,cc.exports}var Ei={};const _k={},Tk=Object.freeze(Object.defineProperty({__proto__:null,default:_k},Symbol.toStringTag,{value:"Module"})),Tt=tE(Tk);var kv;function bs(){if(kv)return Ei;kv=1;const n=Tt,r=/^[a-zA-Z_:][a-zA-Z0-9_:]*$/,a=/^[a-zA-Z_][a-zA-Z0-9_]*$/;return Ei.validateMetricName=function(i){return r.test(i)},Ei.validateLabelName=function(i=[]){return i.every(o=>a.test(o))},Ei.validateLabel=function(o,u){for(const d in u)if(!o.includes(d))throw new Error(`Added label "${d}" is not included in initial labelset: ${n.inspect(o)}`)},Ei}var Ld,Ov;function Yc(){if(Ov)return Ld;Ov=1;const n=Ni(),{isObject:r}=dr(),{validateMetricName:a,validateLabelName:i}=bs();class o{constructor(d,m={}){if(!r(d))throw new TypeError("constructor expected a config object");if(Object.assign(this,{labelNames:[],registers:[n.globalRegistry],aggregator:"sum",enableExemplars:!1},m,d),this.registers||(this.registers=[n.globalRegistry]),!this.help)throw new Error("Missing mandatory help parameter");if(!this.name)throw new Error("Missing mandatory name parameter");if(!a(this.name))throw new Error("Invalid metric name");if(!i(this.labelNames))throw new Error("Invalid label name");if(this.collect&&typeof this.collect!="function")throw new Error('Optional "collect" parameter must be a function');this.labelNames?this.sortedLabelNames=[...this.labelNames].sort():this.sortedLabelNames=[],this.reset();for(const h of this.registers){if(this.enableExemplars&&h.contentType===n.PROMETHEUS_CONTENT_TYPE)throw new TypeError("Exemplars are supported only on OpenMetrics registries");h.registerMetric(this)}}reset(){}}return Ld={Metric:o},Ld}var Dd,Av;function gE(){if(Av)return Dd;Av=1;class n{constructor(a={},i=null){this.labelSet=a,this.value=i}validateExemplarLabelSet(a){let i="";for(const[o,u]of Object.entries(a))i+=`${o}${u}`;if(i.length>128)throw new RangeError("Label set size must be smaller than 128 UTF-8 chars")}}return Dd=n,Dd}var jd,Rv;function yE(){if(Rv)return jd;Rv=1;const n=Tt,{hashObject:r,isObject:a,getLabels:i,removeLabels:o,nowTimestamp:u}=dr(),{validateLabel:d}=bs(),{Metric:m}=Yc(),h=gE();class p extends m{constructor(b){super(b),this.type="counter",this.defaultLabels={},this.defaultValue=1,this.defaultExemplarLabelSet={},b.enableExemplars?(this.enableExemplars=!0,this.inc=this.incWithExemplar):this.inc=this.incWithoutExemplar}incWithoutExemplar(b,T){let w="";if(a(b)?(w=r(b,this.sortedLabelNames),d(this.labelNames,b)):(T=b,b={}),T&&!Number.isFinite(T))throw new TypeError(`Value is not a valid number: ${n.format(T)}`);if(T<0)throw new Error("It is not possible to decrease a counter");return T==null&&(T=1),g(this.hashMap,T,b,w),{labelHash:w}}incWithExemplar({labels:b=this.defaultLabels,value:T=this.defaultValue,exemplarLabels:w=this.defaultExemplarLabelSet}={}){const E=this.incWithoutExemplar(b,T);this.updateExemplar(w,T,E.labelHash)}updateExemplar(b,T,w){b!==this.defaultExemplarLabelSet&&(a(this.hashMap[w].exemplar)||(this.hashMap[w].exemplar=new h),this.hashMap[w].exemplar.validateExemplarLabelSet(b),this.hashMap[w].exemplar.labelSet=b,this.hashMap[w].exemplar.value=T||1,this.hashMap[w].exemplar.timestamp=u())}reset(){this.hashMap={},this.labelNames.length===0&&g(this.hashMap,0)}async get(){if(this.collect){const b=this.collect();b instanceof Promise&&await b}return{help:this.help,name:this.name,type:this.type,values:Object.values(this.hashMap),aggregator:this.aggregator}}labels(...b){const T=i(this.labelNames,b)||{};return{inc:this.inc.bind(this,T)}}remove(...b){const T=i(this.labelNames,b)||{};return d(this.labelNames,T),o.call(this,this.hashMap,T,this.sortedLabelNames)}}function g(v,b,T={},w=""){return v[w]?v[w].value+=b:v[w]={value:b,labels:T},v}return jd=p,jd}var Ud,Cv;function nn(){if(Cv)return Ud;Cv=1;const n=Tt,{setValue:r,setValueDelta:a,getLabels:i,hashObject:o,isObject:u,removeLabels:d}=dr(),{validateLabel:m}=bs(),{Metric:h}=Yc();class p extends h{constructor(E){super(E),this.type="gauge"}set(E,A){A=T(E,A),E=b(E),g(this,E,A)}reset(){this.hashMap={},this.labelNames.length===0&&r(this.hashMap,0,{})}inc(E,A){A=T(E,A),E=b(E),A===void 0&&(A=1),v(this,E,A)}dec(E,A){A=T(E,A),E=b(E),A===void 0&&(A=1),v(this,E,-A)}setToCurrentTime(E){const A=Date.now()/1e3;E===void 0?this.set(A):this.set(E,A)}startTimer(E){const A=process.hrtime();return _=>{const R=process.hrtime(A),M=R[0]+R[1]/1e9;return this.set(Object.assign({},E,_),M),M}}async get(){if(this.collect){const E=this.collect();E instanceof Promise&&await E}return{help:this.help,name:this.name,type:this.type,values:Object.values(this.hashMap),aggregator:this.aggregator}}_getValue(E){const A=o(E||{},this.sortedLabelNames);return this.hashMap[A]?this.hashMap[A].value:0}labels(...E){const A=i(this.labelNames,E);return m(this.labelNames,A),{inc:this.inc.bind(this,A),dec:this.dec.bind(this,A),set:this.set.bind(this,A),setToCurrentTime:this.setToCurrentTime.bind(this,A),startTimer:this.startTimer.bind(this,A)}}remove(...E){const A=i(this.labelNames,E);m(this.labelNames,A),d.call(this,this.hashMap,A,this.sortedLabelNames)}}function g(w,E,A){if(typeof A!="number")throw new TypeError(`Value is not a valid number: ${n.format(A)}`);m(w.labelNames,E),r(w.hashMap,A,E)}function v(w,E,A){if(typeof A!="number")throw new TypeError(`Delta is not a valid number: ${n.format(A)}`);m(w.labelNames,E);const _=o(E,w.sortedLabelNames);a(w.hashMap,A,E,_)}function b(w){return u(w)?w:{}}function T(w,E){return u(w)?E:w}return Ud=p,Ud}var $d,Nv;function vE(){if(Nv)return $d;Nv=1;const n=Tt,{getLabels:r,hashObject:a,isObject:i,removeLabels:o,nowTimestamp:u}=dr(),{validateLabel:d}=bs(),{Metric:m}=Yc(),h=gE();class p extends m{constructor(U){super(U,{buckets:[.005,.01,.025,.05,.1,.25,.5,1,2.5,5,10]}),this.type="histogram",this.defaultLabels={},this.defaultExemplarLabelSet={},this.enableExemplars=!1;for(const B of this.labelNames)if(B==="le")throw new Error("le is a reserved label keyword");this.upperBounds=this.buckets,this.bucketValues=this.upperBounds.reduce((B,q)=>(B[q]=0,B),{}),U.enableExemplars?(this.enableExemplars=!0,this.bucketExemplars=this.upperBounds.reduce((B,q)=>(B[q]=null,B),{}),Object.freeze(this.bucketExemplars),this.observe=this.observeWithExemplar):this.observe=this.observeWithoutExemplar,Object.freeze(this.bucketValues),Object.freeze(this.upperBounds),this.labelNames.length===0&&(this.hashMap={[a({})]:E({},this.bucketValues,this.bucketExemplars)})}observeWithoutExemplar(U,B){w.call(this,U===0?0:U||{})(B)}observeWithExemplar({labels:U=this.defaultLabels,value:B,exemplarLabels:q=this.defaultExemplarLabelSet}={}){w.call(this,U===0?0:U||{})(B),this.updateExemplar(U,B,q)}updateExemplar(U,B,q){if(Object.keys(q).length===0)return;const F=a(U,this.sortedLabelNames),le=T(this.upperBounds,B),{bucketExemplars:he}=this.hashMap[F];let Ae=he[le];i(Ae)||(Ae=new h,he[le]=Ae),Ae.validateExemplarLabelSet(q),Ae.labelSet=q,Ae.value=B,Ae.timestamp=u()}async get(){const U=await this.getForPromString();return U.values=U.values.map(M),U}async getForPromString(){if(this.collect){const q=this.collect();q instanceof Promise&&await q}const B=Object.values(this.hashMap).map(_(this)).reduce(R(this),[]);return{name:this.name,help:this.help,type:this.type,values:B,aggregator:this.aggregator}}reset(){this.hashMap={}}zero(U){const B=a(U,this.sortedLabelNames);this.hashMap[B]=E(U,this.bucketValues,this.bucketExemplars)}startTimer(U,B){return this.enableExemplars?v.call(this,U,B)():g.call(this,U)()}labels(...U){const B=r(this.labelNames,U);return d(this.labelNames,B),{observe:w.call(this,B),startTimer:g.call(this,B)}}remove(...U){const B=r(this.labelNames,U);d(this.labelNames,B),o.call(this,this.hashMap,B,this.sortedLabelNames)}}function g(N){return()=>{const U=process.hrtime();return B=>{const q=process.hrtime(U),F=q[0]+q[1]/1e9;return this.observe(Object.assign({},N,B),F),F}}}function v(N,U){return()=>{const B=process.hrtime();return(q,F)=>{const le=process.hrtime(B),he=le[0]+le[1]/1e9;return this.observe({labels:Object.assign({},N,q),value:he,exemplarLabels:Object.assign({},U,F)}),he}}}function b(N,U,B,q,F={}){return{labels:N,sharedLabels:F,value:U,metricName:B,exemplar:q}}function T(N,U){for(let B=0;B<N.length;B++){const q=N[B];if(U<=q)return q}return-1}function w(N){return U=>{const B=A(N,U);if(d(this.labelNames,B.labels),!Number.isFinite(B.value))throw new TypeError(`Value is not a valid number: ${n.format(B.value)}`);const q=a(B.labels,this.sortedLabelNames);let F=this.hashMap[q];F||(F=E(B.labels,this.bucketValues,this.bucketExemplars));const le=T(this.upperBounds,B.value);F.sum+=B.value,F.count+=1,Object.prototype.hasOwnProperty.call(F.bucketValues,le)&&(F.bucketValues[le]+=1),this.hashMap[q]=F}}function E(N,U,B){const q={labels:N,bucketValues:{...U},sum:0,count:0};return B&&(q.bucketExemplars={...B}),q}function A(N,U){return i(N)?{labels:N,value:U}:{value:N,labels:{}}}function _(N){const U=`${N.name}_bucket`;return B=>{let q=0;return{buckets:N.upperBounds.map(le=>(q+=B.bucketValues[le],b({le},q,U,B.bucketExemplars?B.bucketExemplars[le]:null,B.labels))),data:B}}}function R(N){return(U,B)=>{U.push(...B.buckets);const q={le:"+Inf"};return U.push(b(q,B.data.count,`${N.name}_bucket`,B.data.bucketExemplars?B.data.bucketExemplars[-1]:null,B.data.labels),b({},B.data.sum,`${N.name}_sum`,void 0,B.data.labels),b({},B.data.count,`${N.name}_count`,void 0,B.data.labels)),U}}function M(N){const{sharedLabels:U,labels:B,...q}=N;for(const F of Object.keys(U))B[F]=U[F];return q.labels=B,q}return $d=p,$d}var Bd,Mv;function bE(){if(Mv)return Bd;Mv=1;function n(){}n.prototype.clear=function(){this._root=null,this.size=0},n.prototype.find=function(a){for(var i=this._root;i!==null;){var o=this._comparator(a,i.data);if(o===0)return i.data;i=i.get_child(o>0)}return null},n.prototype.findIter=function(a){for(var i=this._root,o=this.iterator();i!==null;){var u=this._comparator(a,i.data);if(u===0)return o._cursor=i,o;o._ancestors.push(i),i=i.get_child(u>0)}return null},n.prototype.lowerBound=function(a){for(var i=this._root,o=this.iterator(),u=this._comparator;i!==null;){var d=u(a,i.data);if(d===0)return o._cursor=i,o;o._ancestors.push(i),i=i.get_child(d>0)}for(var m=o._ancestors.length-1;m>=0;--m)if(i=o._ancestors[m],u(a,i.data)<0)return o._cursor=i,o._ancestors.length=m,o;return o._ancestors.length=0,o},n.prototype.upperBound=function(a){for(var i=this.lowerBound(a),o=this._comparator;i.data()!==null&&o(i.data(),a)===0;)i.next();return i},n.prototype.min=function(){var a=this._root;if(a===null)return null;for(;a.left!==null;)a=a.left;return a.data},n.prototype.max=function(){var a=this._root;if(a===null)return null;for(;a.right!==null;)a=a.right;return a.data},n.prototype.iterator=function(){return new r(this)},n.prototype.each=function(a){for(var i=this.iterator(),o;(o=i.next())!==null;)if(a(o)===!1)return},n.prototype.reach=function(a){for(var i=this.iterator(),o;(o=i.prev())!==null;)if(a(o)===!1)return};function r(a){this._tree=a,this._ancestors=[],this._cursor=null}return r.prototype.data=function(){return this._cursor!==null?this._cursor.data:null},r.prototype.next=function(){if(this._cursor===null){var a=this._tree._root;a!==null&&this._minNode(a)}else if(this._cursor.right===null){var i;do if(i=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===i)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return this._cursor!==null?this._cursor.data:null},r.prototype.prev=function(){if(this._cursor===null){var a=this._tree._root;a!==null&&this._maxNode(a)}else if(this._cursor.left===null){var i;do if(i=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===i)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return this._cursor!==null?this._cursor.data:null},r.prototype._minNode=function(a){for(;a.left!==null;)this._ancestors.push(a),a=a.left;this._cursor=a},r.prototype._maxNode=function(a){for(;a.right!==null;)this._ancestors.push(a),a=a.right;this._cursor=a},Bd=n,Bd}var qd,Iv;function wk(){if(Iv)return qd;Iv=1;var n=bE();function r(d){this.data=d,this.left=null,this.right=null,this.red=!0}r.prototype.get_child=function(d){return d?this.right:this.left},r.prototype.set_child=function(d,m){d?this.right=m:this.left=m};function a(d){this._root=null,this._comparator=d,this.size=0}a.prototype=new n,a.prototype.insert=function(d){var m=!1;if(this._root===null)this._root=new r(d),m=!0,this.size++;else{var h=new r(void 0),p=0,g=0,v=null,b=h,T=null,w=this._root;for(b.right=this._root;;){if(w===null?(w=new r(d),T.set_child(p,w),m=!0,this.size++):i(w.left)&&i(w.right)&&(w.red=!0,w.left.red=!1,w.right.red=!1),i(w)&&i(T)){var E=b.right===v;w===T.get_child(g)?b.set_child(E,o(v,!g)):b.set_child(E,u(v,!g))}var A=this._comparator(w.data,d);if(A===0)break;g=p,p=A<0,v!==null&&(b=v),v=T,T=w,w=w.get_child(p)}this._root=h.right}return this._root.red=!1,m},a.prototype.remove=function(d){if(this._root===null)return!1;var m=new r(void 0),h=m;h.right=this._root;for(var p=null,g=null,v=null,b=1;h.get_child(b)!==null;){var T=b;g=p,p=h,h=h.get_child(b);var w=this._comparator(d,h.data);if(b=w>0,w===0&&(v=h),!i(h)&&!i(h.get_child(b))){if(i(h.get_child(!b))){var E=o(h,b);p.set_child(T,E),p=E}else if(!i(h.get_child(!b))){var A=p.get_child(!T);if(A!==null)if(!i(A.get_child(!T))&&!i(A.get_child(T)))p.red=!1,A.red=!0,h.red=!0;else{var _=g.right===p;i(A.get_child(T))?g.set_child(_,u(p,T)):i(A.get_child(!T))&&g.set_child(_,o(p,T));var R=g.get_child(_);R.red=!0,h.red=!0,R.left.red=!1,R.right.red=!1}}}}return v!==null&&(v.data=h.data,p.set_child(p.right===h,h.get_child(h.left===null)),this.size--),this._root=m.right,this._root!==null&&(this._root.red=!1),v!==null};function i(d){return d!==null&&d.red}function o(d,m){var h=d.get_child(!m);return d.set_child(!m,h.get_child(m)),h.set_child(m,d),d.red=!0,h.red=!1,h}function u(d,m){return d.set_child(!m,o(d.get_child(!m),!m)),o(d,m)}return qd=a,qd}var Pd,xv;function kk(){if(xv)return Pd;xv=1;var n=bE();function r(i){this.data=i,this.left=null,this.right=null}r.prototype.get_child=function(i){return i?this.right:this.left},r.prototype.set_child=function(i,o){i?this.right=o:this.left=o};function a(i){this._root=null,this._comparator=i,this.size=0}return a.prototype=new n,a.prototype.insert=function(i){if(this._root===null)return this._root=new r(i),this.size++,!0;for(var o=0,u=null,d=this._root;;){if(d===null)return d=new r(i),u.set_child(o,d),ret=!0,this.size++,!0;if(this._comparator(d.data,i)===0)return!1;o=this._comparator(d.data,i)<0,u=d,d=d.get_child(o)}},a.prototype.remove=function(i){if(this._root===null)return!1;var o=new r(void 0),u=o;u.right=this._root;for(var d=null,m=null,h=1;u.get_child(h)!==null;){d=u,u=u.get_child(h);var p=this._comparator(i,u.data);h=p>0,p===0&&(m=u)}return m!==null?(m.data=u.data,d.set_child(d.right===u,u.get_child(u.left===null)),this._root=o.right,this.size--,!0):!1},Pd=a,Pd}var Gd,zv;function Ok(){return zv||(zv=1,Gd={RBTree:wk(),BinTree:kk()}),Gd}var Vd,Lv;function Ak(){if(Lv)return Vd;Lv=1;var n=Ok().RBTree;function r(d,m,h){this.discrete=d===!1,this.delta=d||.01,this.K=m===void 0?25:m,this.CX=h===void 0?1.1:h,this.centroids=new n(a),this.nreset=0,this.reset()}r.prototype.reset=function(){this.centroids.clear(),this.n=0,this.nreset+=1,this.last_cumulate=0},r.prototype.size=function(){return this.centroids.size},r.prototype.toArray=function(d){var m=[];return d?(this._cumulate(!0),this.centroids.each(function(h){m.push(h)})):this.centroids.each(function(h){m.push({mean:h.mean,n:h.n})}),m},r.prototype.summary=function(){var d=this.discrete?"exact ":"approximating ",m=[d+this.n+" samples using "+this.size()+" centroids","min = "+this.percentile(0),"Q1  = "+this.percentile(.25),"Q2  = "+this.percentile(.5),"Q3  = "+this.percentile(.75),"max = "+this.percentile(1)];return m.join(`
`)};function a(d,m){return d.mean>m.mean?1:d.mean<m.mean?-1:0}function i(d,m){return d.mean_cumn-m.mean_cumn}r.prototype.push=function(d,m){m=m||1,d=Array.isArray(d)?d:[d];for(var h=0;h<d.length;h++)this._digest(d[h],m)},r.prototype.push_centroid=function(d){d=Array.isArray(d)?d:[d];for(var m=0;m<d.length;m++)this._digest(d[m].mean,d[m].n)},r.prototype._cumulate=function(d){if(!(this.n===this.last_cumulate||!d&&this.CX&&this.CX>this.n/this.last_cumulate)){var m=0;this.centroids.each(function(h){h.mean_cumn=m+h.n/2,m=h.cumn=m+h.n}),this.n=this.last_cumulate=m}},r.prototype.find_nearest=function(d){if(this.size()===0)return null;var m=this.centroids.lowerBound({mean:d}),h=m.data()===null?m.prev():m.data();if(h.mean===d||this.discrete)return h;var p=m.prev();return p&&Math.abs(p.mean-d)<Math.abs(h.mean-d)?p:h},r.prototype._new_centroid=function(d,m,h){var p={mean:d,n:m,cumn:h};return this.centroids.insert(p),this.n+=m,p},r.prototype._addweight=function(d,m,h){m!==d.mean&&(d.mean+=h*(m-d.mean)/(d.n+h)),d.cumn+=h,d.mean_cumn+=h/2,d.n+=h,this.n+=h},r.prototype._digest=function(d,m){var h=this.centroids.min(),p=this.centroids.max(),g=this.find_nearest(d);if(g&&g.mean===d)this._addweight(g,d,m);else if(g===h)this._new_centroid(d,m,0);else if(g===p)this._new_centroid(d,m,this.n);else if(this.discrete)this._new_centroid(d,m,g.cumn);else{var v=g.mean_cumn/this.n,b=Math.floor(4*this.n*this.delta*v*(1-v));b-g.n>=m?this._addweight(g,d,m):this._new_centroid(d,m,g.cumn)}this._cumulate(!1),!this.discrete&&this.K&&this.size()>this.K/this.delta&&this.compress()},r.prototype.bound_mean=function(d){var m=this.centroids.upperBound({mean:d}),h=m.prev(),p=h.mean===d?h:m.next();return[h,p]},r.prototype.p_rank=function(d){var m=Array.isArray(d)?d:[d],h=m.map(this._p_rank,this);return Array.isArray(d)?h:h[0]},r.prototype._p_rank=function(d){if(this.size()!==0){{if(d<this.centroids.min().mean)return 0;if(d>this.centroids.max().mean)return 1}this._cumulate(!0);var m=this.bound_mean(d),h=m[0],p=m[1];if(this.discrete)return h.cumn/this.n;var g=h.mean_cumn;return h!==p&&(g+=(d-h.mean)*(p.mean_cumn-h.mean_cumn)/(p.mean-h.mean)),g/this.n}},r.prototype.bound_mean_cumn=function(d){this.centroids._comparator=i;var m=this.centroids.upperBound({mean_cumn:d});this.centroids._comparator=a;var h=m.prev(),p=h&&h.mean_cumn===d?h:m.next();return[h,p]},r.prototype.percentile=function(d){var m=Array.isArray(d)?d:[d],h=m.map(this._percentile,this);return Array.isArray(d)?h:h[0]},r.prototype._percentile=function(d){if(this.size()!==0){this._cumulate(!0);var m=this.n*d,h=this.bound_mean_cumn(m),p=h[0],g=h[1];return g===p||p===null||g===null?(p||g).mean:this.discrete?m<=p.cumn?p.mean:g.mean:p.mean+(m-p.mean_cumn)*(g.mean-p.mean)/(g.mean_cumn-p.mean_cumn)}};function o(d){var m=Math.floor(Math.random()*d.length);return d.splice(m,1)[0]}r.prototype.compress=function(){if(!this.compressing){var d=this.toArray();for(this.reset(),this.compressing=!0;d.length>0;)this.push_centroid(o(d));this._cumulate(!0),this.compressing=!1}};function u(d){this.config=d||{},this.mode=this.config.mode||"auto",r.call(this,this.mode==="cont"?d.delta:!1),this.digest_ratio=this.config.ratio||.9,this.digest_thresh=this.config.thresh||1e3,this.n_unique=0}return u.prototype=Object.create(r.prototype),u.prototype.constructor=u,u.prototype.push=function(d){r.prototype.push.call(this,d),this.check_continuous()},u.prototype._new_centroid=function(d,m,h){this.n_unique+=1,r.prototype._new_centroid.call(this,d,m,h)},u.prototype._addweight=function(d,m,h){d.n===1&&(this.n_unique-=1),r.prototype._addweight.call(this,d,m,h)},u.prototype.check_continuous=function(){return this.mode!=="auto"||this.size()<this.digest_thresh?!1:this.n_unique/this.size()>this.digest_ratio?(this.mode="cont",this.discrete=!1,this.delta=this.config.delta||.01,this.compress(),!0):!1},Vd={TDigest:r,Digest:u},Vd}var Hd,Dv;function Rk(){if(Dv)return Hd;Dv=1;const{TDigest:n}=Ak();class r{constructor(o,u){this.maxAgeSeconds=o||0,this.ageBuckets=u||0,this.shouldRotate=o&&u,this.ringBuffer=Array(u).fill(new n),this.currentBuffer=0,this.lastRotateTimestampMillis=Date.now(),this.durationBetweenRotatesMillis=o*1e3/u||1/0}size(){return a.call(this).size()}percentile(o){return a.call(this).percentile(o)}push(o){a.call(this),this.ringBuffer.forEach(u=>{u.push(o)})}reset(){this.ringBuffer.forEach(o=>{o.reset()})}compress(){this.ringBuffer.forEach(o=>{o.compress()})}}function a(){let i=Date.now()-this.lastRotateTimestampMillis;for(;i>this.durationBetweenRotatesMillis&&this.shouldRotate;)this.ringBuffer[this.currentBuffer]=new n,++this.currentBuffer>=this.ringBuffer.length&&(this.currentBuffer=0),i-=this.durationBetweenRotatesMillis,this.lastRotateTimestampMillis+=this.durationBetweenRotatesMillis;return this.ringBuffer[this.currentBuffer]}return Hd=r,Hd}var Yd,jv;function Ck(){if(jv)return Yd;jv=1;const n=Tt,{getLabels:r,hashObject:a,removeLabels:i}=dr(),{validateLabel:o}=bs(),{Metric:u}=Yc(),d=Rk(),m=1e3;class h extends u{constructor(A){super(A,{percentiles:[.01,.05,.5,.9,.95,.99,.999],compressCount:m,hashMap:{}}),this.type="summary";for(const _ of this.labelNames)if(_==="quantile")throw new Error("quantile is a reserved label keyword");this.labelNames.length===0&&(this.hashMap={[a({})]:{labels:{},td:new d(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}})}observe(A,_){T.call(this,A===0?0:A||{})(_)}async get(){if(this.collect){const R=this.collect();R instanceof Promise&&await R}const A=Object.keys(this.hashMap),_=[];return A.forEach(R=>{const M=this.hashMap[R];M&&(this.pruneAgedBuckets&&M.td.size()===0?delete this.hashMap[R]:(p(M,this.percentiles).forEach(N=>{_.push(N)}),_.push(v(M,this)),_.push(g(M,this))))}),{name:this.name,help:this.help,type:this.type,values:_,aggregator:this.aggregator}}reset(){Object.values(this.hashMap).forEach(_=>{_.td.reset(),_.count=0,_.sum=0})}startTimer(A){return b.call(this,A)()}labels(...A){const _=r(this.labelNames,A);return o(this.labelNames,_),{observe:T.call(this,_),startTimer:b.call(this,_)}}remove(...A){const _=r(this.labelNames,A);o(this.labelNames,_),i.call(this,this.hashMap,_,this.sortedLabelNames)}}function p(E,A){return E.td.compress(),A.map(_=>{const R=E.td.percentile(_);return{labels:Object.assign({quantile:_},E.labels),value:R||0}})}function g(E,A){return{metricName:`${A.name}_count`,labels:E.labels,value:E.count}}function v(E,A){return{metricName:`${A.name}_sum`,labels:E.labels,value:E.sum}}function b(E){return()=>{const A=process.hrtime();return _=>{const R=process.hrtime(A),M=R[0]+R[1]/1e9;return this.observe(Object.assign({},E,_),M),M}}}function T(E){return A=>{const _=w(E,A);if(o(this.labelNames,E),!Number.isFinite(_.value))throw new TypeError(`Value is not a valid number: ${n.format(_.value)}`);const R=a(_.labels,this.sortedLabelNames);let M=this.hashMap[R];M||(M={labels:_.labels,td:new d(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}),M.td.push(_.value),M.count++,M.count%this.compressCount===0&&M.td.compress(),M.sum+=_.value,this.hashMap[R]=M}}function w(E,A){return A===void 0?{value:E,labels:{}}:{labels:E,value:A}}return Yd=h,Yd}var Zd,Uv;function Nk(){if(Uv)return Zd;Uv=1;const n=Tt,r=Tt,a=Tt,{gzipSync:i}=Tt,{globalRegistry:o}=Ni();class u{constructor(g,v,b){b||(b=o),this.registry=b,this.gatewayUrl=g;const{requireJobName:T,...w}={requireJobName:!0,...v};this.requireJobName=T,this.requestOptions=w}pushAdd(g={}){if(this.requireJobName&&!g.jobName)throw new Error("Missing jobName parameter");return d.call(this,"POST",g.jobName,g.groupings)}push(g={}){if(this.requireJobName&&!g.jobName)throw new Error("Missing jobName parameter");return d.call(this,"PUT",g.jobName,g.groupings)}delete(g={}){if(this.requireJobName&&!g.jobName)throw new Error("Missing jobName parameter");return d.call(this,"DELETE",g.jobName,g.groupings)}}async function d(p,g,v){const b=n.parse(this.gatewayUrl),T=b.pathname&&b.pathname!=="/"?b.pathname:"",w=g?`/job/${encodeURIComponent(g)}${m(v)}`:"",E=`${T}/metrics${w}`,A=n.resolve(this.gatewayUrl,E),_=n.parse(A),R=h(_.href)?a:r,M=Object.assign(_,this.requestOptions,{method:p});return new Promise((N,U)=>{p==="DELETE"&&M.headers&&delete M.headers["Content-Encoding"];const B=R.request(M,q=>{let F="";q.setEncoding("utf8"),q.on("data",le=>{F+=le}),q.on("end",()=>{q.statusCode>=400?U(new Error(`push failed with status ${q.statusCode}, ${F}`)):N({resp:q,body:F})})});B.on("error",q=>{U(q)}),B.on("timeout",()=>{B.destroy(new Error("Pushgateway request timed out"))}),p!=="DELETE"?this.registry.metrics().then(q=>{M.headers&&M.headers["Content-Encoding"]==="gzip"&&(q=i(q)),B.write(q),B.end()}).catch(q=>{U(q)}):B.end()})}function m(p){return p?Object.keys(p).map(g=>`/${encodeURIComponent(g)}/${encodeURIComponent(p[g])}`).join(""):""}function h(p){return p.search(/^https/)!==-1}return Zd=u,Zd}var uc={},$v;function Bv(){return $v||($v=1,uc.linearBuckets=(n,r,a)=>{if(a<1)throw new Error("Linear buckets needs a positive count");const i=new Array(a);for(let o=0;o<a;o++)i[o]=n+o*r;return i},uc.exponentialBuckets=(n,r,a)=>{if(n<=0)throw new Error("Exponential buckets needs a positive start");if(a<1)throw new Error("Exponential buckets needs a positive count");if(r<=1)throw new Error("Exponential buckets needs a factor greater than 1");const i=new Array(a);for(let o=0;o<a;o++)i[o]=n,n*=r;return i}),uc}var lc={exports:{}},dc={exports:{}},Mk=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},da="1.9.0",qv=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Ik(n){var r=new Set([n]),a=new Set,i=n.match(qv);if(!i)return function(){return!1};var o={major:+i[1],minor:+i[2],patch:+i[3],prerelease:i[4]};if(o.prerelease!=null)return function(h){return h===n};function u(m){return a.add(m),!1}function d(m){return r.add(m),!0}return function(h){if(r.has(h))return!0;if(a.has(h))return!1;var p=h.match(qv);if(!p)return u(h);var g={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return g.prerelease!=null||o.major!==g.major?u(h):o.major===0?o.minor===g.minor&&o.patch<=g.patch?d(h):u(h):o.minor<=g.minor?d(h):u(h)}}var xk=Ik(da),zk=da.split(".")[0],Mi=Symbol.for("opentelemetry.js.api."+zk),Ii=Mk;function ji(n,r,a,i){var o;i===void 0&&(i=!1);var u=Ii[Mi]=(o=Ii[Mi])!==null&&o!==void 0?o:{version:da};if(!i&&u[n]){var d=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+n);return a.error(d.stack||d.message),!1}if(u.version!==da){var d=new Error("@opentelemetry/api: Registration of version v"+u.version+" for "+n+" does not match previously registered API v"+da);return a.error(d.stack||d.message),!1}return u[n]=r,a.debug("@opentelemetry/api: Registered a global for "+n+" v"+da+"."),!0}function ma(n){var r,a,i=(r=Ii[Mi])===null||r===void 0?void 0:r.version;if(!(!i||!xk(i)))return(a=Ii[Mi])===null||a===void 0?void 0:a[n]}function Ui(n,r){r.debug("@opentelemetry/api: Unregistering a global for "+n+" v"+da+".");var a=Ii[Mi];a&&delete a[n]}var Lk=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],d;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){d={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(d)throw d.error}}return u},Dk=function(n,r,a){if(a||arguments.length===2)for(var i=0,o=r.length,u;i<o;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return n.concat(u||Array.prototype.slice.call(r))},jk=(function(){function n(r){this._namespace=r.namespace||"DiagComponentLogger"}return n.prototype.debug=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("debug",this._namespace,r)},n.prototype.error=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("error",this._namespace,r)},n.prototype.info=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("info",this._namespace,r)},n.prototype.warn=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("warn",this._namespace,r)},n.prototype.verbose=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("verbose",this._namespace,r)},n})();function Si(n,r,a){var i=ma("diag");if(i)return a.unshift(r),i[n].apply(i,Dk([],Lk(a),!1))}var $t;(function(n){n[n.NONE=0]="NONE",n[n.ERROR=30]="ERROR",n[n.WARN=50]="WARN",n[n.INFO=60]="INFO",n[n.DEBUG=70]="DEBUG",n[n.VERBOSE=80]="VERBOSE",n[n.ALL=9999]="ALL"})($t||($t={}));function Uk(n,r){n<$t.NONE?n=$t.NONE:n>$t.ALL&&(n=$t.ALL),r=r||{};function a(i,o){var u=r[i];return typeof u=="function"&&n>=o?u.bind(r):function(){}}return{error:a("error",$t.ERROR),warn:a("warn",$t.WARN),info:a("info",$t.INFO),debug:a("debug",$t.DEBUG),verbose:a("verbose",$t.VERBOSE)}}var $k=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],d;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){d={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(d)throw d.error}}return u},Bk=function(n,r,a){if(a||arguments.length===2)for(var i=0,o=r.length,u;i<o;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return n.concat(u||Array.prototype.slice.call(r))},qk="diag",$n=(function(){function n(){function r(o){return function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var m=ma("diag");if(m)return m[o].apply(m,Bk([],$k(u),!1))}}var a=this,i=function(o,u){var d,m,h;if(u===void 0&&(u={logLevel:$t.INFO}),o===a){var p=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return a.error((d=p.stack)!==null&&d!==void 0?d:p.message),!1}typeof u=="number"&&(u={logLevel:u});var g=ma("diag"),v=Uk((m=u.logLevel)!==null&&m!==void 0?m:$t.INFO,o);if(g&&!u.suppressOverrideMessage){var b=(h=new Error().stack)!==null&&h!==void 0?h:"<failed to generate stacktrace>";g.warn("Current logger will be overwritten from "+b),v.warn("Current logger will overwrite one already registered from "+b)}return ji("diag",v,a,!0)};a.setLogger=i,a.disable=function(){Ui(qk,a)},a.createComponentLogger=function(o){return new jk(o)},a.verbose=r("verbose"),a.debug=r("debug"),a.info=r("info"),a.warn=r("warn"),a.error=r("error")}return n.instance=function(){return this._instance||(this._instance=new n),this._instance},n})(),Pk=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],d;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){d={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(d)throw d.error}}return u},Gk=function(n){var r=typeof Symbol=="function"&&Symbol.iterator,a=r&&n[r],i=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Vk=(function(){function n(r){this._entries=r?new Map(r):new Map}return n.prototype.getEntry=function(r){var a=this._entries.get(r);if(a)return Object.assign({},a)},n.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(r){var a=Pk(r,2),i=a[0],o=a[1];return[i,o]})},n.prototype.setEntry=function(r,a){var i=new n(this._entries);return i._entries.set(r,a),i},n.prototype.removeEntry=function(r){var a=new n(this._entries);return a._entries.delete(r),a},n.prototype.removeEntries=function(){for(var r,a,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var u=new n(this._entries);try{for(var d=Gk(i),m=d.next();!m.done;m=d.next()){var h=m.value;u._entries.delete(h)}}catch(p){r={error:p}}finally{try{m&&!m.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}return u},n.prototype.clear=function(){return new n},n})(),Hk=Symbol("BaggageEntryMetadata"),Yk=$n.instance();function Zk(n){return n===void 0&&(n={}),new Vk(new Map(Object.entries(n)))}function Fk(n){return typeof n!="string"&&(Yk.error("Cannot create baggage metadata from unknown type: "+typeof n),n=""),{__TYPE__:Hk,toString:function(){return n}}}function Om(n){return Symbol.for(n)}var Xk=(function(){function n(r){var a=this;a._currentContext=r?new Map(r):new Map,a.getValue=function(i){return a._currentContext.get(i)},a.setValue=function(i,o){var u=new n(a._currentContext);return u._currentContext.set(i,o),u},a.deleteValue=function(i){var o=new n(a._currentContext);return o._currentContext.delete(i),o}}return n})(),EE=new Xk,Fd=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Qk=(function(){function n(){function r(i){return function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];if(console){var d=console[i];if(typeof d!="function"&&(d=console.log),typeof d=="function")return d.apply(console,o)}}}for(var a=0;a<Fd.length;a++)this[Fd[a].n]=r(Fd[a].c)}return n})(),Ea=(function(){var n=function(r,a){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u])},n(r,a)};return function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");n(r,a);function i(){this.constructor=r}r.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}})(),Kk=(function(){function n(){}return n.prototype.createGauge=function(r,a){return iO},n.prototype.createHistogram=function(r,a){return oO},n.prototype.createCounter=function(r,a){return sO},n.prototype.createUpDownCounter=function(r,a){return cO},n.prototype.createObservableGauge=function(r,a){return lO},n.prototype.createObservableCounter=function(r,a){return uO},n.prototype.createObservableUpDownCounter=function(r,a){return dO},n.prototype.addBatchObservableCallback=function(r,a){},n.prototype.removeBatchObservableCallback=function(r){},n})(),Zc=(function(){function n(){}return n})(),Jk=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.add=function(a,i){},r})(Zc),Wk=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.add=function(a,i){},r})(Zc),eO=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.record=function(a,i){},r})(Zc),tO=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.record=function(a,i){},r})(Zc),Am=(function(){function n(){}return n.prototype.addCallback=function(r){},n.prototype.removeCallback=function(r){},n})(),nO=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r})(Am),rO=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r})(Am),aO=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r})(Am),SE=new Kk,sO=new Jk,iO=new eO,oO=new tO,cO=new Wk,uO=new nO,lO=new rO,dO=new aO;function fO(){return SE}var am;(function(n){n[n.INT=0]="INT",n[n.DOUBLE=1]="DOUBLE"})(am||(am={}));var _E={get:function(n,r){if(n!=null)return n[r]},keys:function(n){return n==null?[]:Object.keys(n)}},TE={set:function(n,r,a){n!=null&&(n[r]=a)}},mO=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],d;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){d={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(d)throw d.error}}return u},hO=function(n,r,a){if(a||arguments.length===2)for(var i=0,o=r.length,u;i<o;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return n.concat(u||Array.prototype.slice.call(r))},pO=(function(){function n(){}return n.prototype.active=function(){return EE},n.prototype.with=function(r,a,i){for(var o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];return a.call.apply(a,hO([i],mO(o),!1))},n.prototype.bind=function(r,a){return a},n.prototype.enable=function(){return this},n.prototype.disable=function(){return this},n})(),gO=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],d;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){d={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(d)throw d.error}}return u},yO=function(n,r,a){if(a||arguments.length===2)for(var i=0,o=r.length,u;i<o;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return n.concat(u||Array.prototype.slice.call(r))},Xd="context",vO=new pO,Fc=(function(){function n(){}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalContextManager=function(r){return ji(Xd,r,$n.instance())},n.prototype.active=function(){return this._getContextManager().active()},n.prototype.with=function(r,a,i){for(var o,u=[],d=3;d<arguments.length;d++)u[d-3]=arguments[d];return(o=this._getContextManager()).with.apply(o,yO([r,a,i],gO(u),!1))},n.prototype.bind=function(r,a){return this._getContextManager().bind(r,a)},n.prototype._getContextManager=function(){return ma(Xd)||vO},n.prototype.disable=function(){this._getContextManager().disable(),Ui(Xd,$n.instance())},n})(),Mc;(function(n){n[n.NONE=0]="NONE",n[n.SAMPLED=1]="SAMPLED"})(Mc||(Mc={}));var Rm="0000000000000000",Cm="00000000000000000000000000000000",wE={traceId:Cm,spanId:Rm,traceFlags:Mc.NONE},ki=(function(){function n(r){r===void 0&&(r=wE),this._spanContext=r}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(r,a){return this},n.prototype.setAttributes=function(r){return this},n.prototype.addEvent=function(r,a){return this},n.prototype.addLink=function(r){return this},n.prototype.addLinks=function(r){return this},n.prototype.setStatus=function(r){return this},n.prototype.updateName=function(r){return this},n.prototype.end=function(r){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(r,a){},n})(),Nm=Om("OpenTelemetry Context Key SPAN");function Mm(n){return n.getValue(Nm)||void 0}function bO(){return Mm(Fc.getInstance().active())}function Im(n,r){return n.setValue(Nm,r)}function EO(n){return n.deleteValue(Nm)}function SO(n,r){return Im(n,new ki(r))}function kE(n){var r;return(r=Mm(n))===null||r===void 0?void 0:r.spanContext()}var _O=/^([0-9a-f]{32})$/i,TO=/^[0-9a-f]{16}$/i;function OE(n){return _O.test(n)&&n!==Cm}function AE(n){return TO.test(n)&&n!==Rm}function xm(n){return OE(n.traceId)&&AE(n.spanId)}function wO(n){return new ki(n)}var Qd=Fc.getInstance(),RE=(function(){function n(){}return n.prototype.startSpan=function(r,a,i){i===void 0&&(i=Qd.active());var o=!!a?.root;if(o)return new ki;var u=i&&kE(i);return kO(u)&&xm(u)?new ki(u):new ki},n.prototype.startActiveSpan=function(r,a,i,o){var u,d,m;if(!(arguments.length<2)){arguments.length===2?m=a:arguments.length===3?(u=a,m=i):(u=a,d=i,m=o);var h=d??Qd.active(),p=this.startSpan(r,u,h),g=Im(h,p);return Qd.with(g,m,void 0,p)}},n})();function kO(n){return typeof n=="object"&&typeof n.spanId=="string"&&typeof n.traceId=="string"&&typeof n.traceFlags=="number"}var OO=new RE,CE=(function(){function n(r,a,i,o){this._provider=r,this.name=a,this.version=i,this.options=o}return n.prototype.startSpan=function(r,a,i){return this._getTracer().startSpan(r,a,i)},n.prototype.startActiveSpan=function(r,a,i,o){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},n.prototype._getTracer=function(){if(this._delegate)return this._delegate;var r=this._provider.getDelegateTracer(this.name,this.version,this.options);return r?(this._delegate=r,this._delegate):OO},n})(),AO=(function(){function n(){}return n.prototype.getTracer=function(r,a,i){return new RE},n})(),RO=new AO,sm=(function(){function n(){}return n.prototype.getTracer=function(r,a,i){var o;return(o=this.getDelegateTracer(r,a,i))!==null&&o!==void 0?o:new CE(this,r,a,i)},n.prototype.getDelegate=function(){var r;return(r=this._delegate)!==null&&r!==void 0?r:RO},n.prototype.setDelegate=function(r){this._delegate=r},n.prototype.getDelegateTracer=function(r,a,i){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(r,a,i)},n})(),im;(function(n){n[n.NOT_RECORD=0]="NOT_RECORD",n[n.RECORD=1]="RECORD",n[n.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(im||(im={}));var om;(function(n){n[n.INTERNAL=0]="INTERNAL",n[n.SERVER=1]="SERVER",n[n.CLIENT=2]="CLIENT",n[n.PRODUCER=3]="PRODUCER",n[n.CONSUMER=4]="CONSUMER"})(om||(om={}));var cm;(function(n){n[n.UNSET=0]="UNSET",n[n.OK=1]="OK",n[n.ERROR=2]="ERROR"})(cm||(cm={}));var um="[_0-9a-z-*/]",CO="[a-z]"+um+"{0,255}",NO="[a-z0-9]"+um+"{0,240}@[a-z]"+um+"{0,13}",MO=new RegExp("^(?:"+CO+"|"+NO+")$"),IO=/^[ -~]{0,255}[!-~]$/,xO=/,|=/;function zO(n){return MO.test(n)}function LO(n){return IO.test(n)&&!xO.test(n)}var Pv=32,DO=512,Gv=",",Vv="=",jO=(function(){function n(r){this._internalState=new Map,r&&this._parse(r)}return n.prototype.set=function(r,a){var i=this._clone();return i._internalState.has(r)&&i._internalState.delete(r),i._internalState.set(r,a),i},n.prototype.unset=function(r){var a=this._clone();return a._internalState.delete(r),a},n.prototype.get=function(r){return this._internalState.get(r)},n.prototype.serialize=function(){var r=this;return this._keys().reduce(function(a,i){return a.push(i+Vv+r.get(i)),a},[]).join(Gv)},n.prototype._parse=function(r){r.length>DO||(this._internalState=r.split(Gv).reverse().reduce(function(a,i){var o=i.trim(),u=o.indexOf(Vv);if(u!==-1){var d=o.slice(0,u),m=o.slice(u+1,i.length);zO(d)&&LO(m)&&a.set(d,m)}return a},new Map),this._internalState.size>Pv&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Pv))))},n.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},n.prototype._clone=function(){var r=new n;return r._internalState=new Map(this._internalState),r},n})();function UO(n){return new jO(n)}var NE=Fc.getInstance(),ME=$n.instance(),$O=(function(){function n(){}return n.prototype.getMeter=function(r,a,i){return SE},n})(),BO=new $O,Kd="metrics",qO=(function(){function n(){}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalMeterProvider=function(r){return ji(Kd,r,$n.instance())},n.prototype.getMeterProvider=function(){return ma(Kd)||BO},n.prototype.getMeter=function(r,a,i){return this.getMeterProvider().getMeter(r,a,i)},n.prototype.disable=function(){Ui(Kd,$n.instance())},n})(),IE=qO.getInstance(),PO=(function(){function n(){}return n.prototype.inject=function(r,a){},n.prototype.extract=function(r,a){return r},n.prototype.fields=function(){return[]},n})(),zm=Om("OpenTelemetry Baggage Key");function xE(n){return n.getValue(zm)||void 0}function GO(){return xE(Fc.getInstance().active())}function VO(n,r){return n.setValue(zm,r)}function HO(n){return n.deleteValue(zm)}var Jd="propagation",YO=new PO,ZO=(function(){function n(){this.createBaggage=Zk,this.getBaggage=xE,this.getActiveBaggage=GO,this.setBaggage=VO,this.deleteBaggage=HO}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalPropagator=function(r){return ji(Jd,r,$n.instance())},n.prototype.inject=function(r,a,i){return i===void 0&&(i=TE),this._getGlobalPropagator().inject(r,a,i)},n.prototype.extract=function(r,a,i){return i===void 0&&(i=_E),this._getGlobalPropagator().extract(r,a,i)},n.prototype.fields=function(){return this._getGlobalPropagator().fields()},n.prototype.disable=function(){Ui(Jd,$n.instance())},n.prototype._getGlobalPropagator=function(){return ma(Jd)||YO},n})(),zE=ZO.getInstance(),Wd="trace",FO=(function(){function n(){this._proxyTracerProvider=new sm,this.wrapSpanContext=wO,this.isSpanContextValid=xm,this.deleteSpan=EO,this.getSpan=Mm,this.getActiveSpan=bO,this.getSpanContext=kE,this.setSpan=Im,this.setSpanContext=SO}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalTracerProvider=function(r){var a=ji(Wd,this._proxyTracerProvider,$n.instance());return a&&this._proxyTracerProvider.setDelegate(r),a},n.prototype.getTracerProvider=function(){return ma(Wd)||this._proxyTracerProvider},n.prototype.getTracer=function(r,a){return this.getTracerProvider().getTracer(r,a)},n.prototype.disable=function(){Ui(Wd,$n.instance()),this._proxyTracerProvider=new sm},n})(),LE=FO.getInstance();const XO={context:NE,diag:ME,metrics:IE,propagation:zE,trace:LE},QO=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger:Qk,get DiagLogLevel(){return $t},INVALID_SPANID:Rm,INVALID_SPAN_CONTEXT:wE,INVALID_TRACEID:Cm,ProxyTracer:CE,ProxyTracerProvider:sm,ROOT_CONTEXT:EE,get SamplingDecision(){return im},get SpanKind(){return om},get SpanStatusCode(){return cm},get TraceFlags(){return Mc},get ValueType(){return am},baggageEntryMetadataFromString:Fk,context:NE,createContextKey:Om,createNoopMeter:fO,createTraceState:UO,default:XO,defaultTextMapGetter:_E,defaultTextMapSetter:TE,diag:ME,isSpanContextValid:xm,isValidSpanId:AE,isValidTraceId:OE,metrics:IE,propagation:zE,trace:LE},Symbol.toStringTag,{value:"Module"})),KO=tE(QO);var Hv;function JO(){if(Hv)return dc.exports;Hv=1;const n=KO,r=yE(),a="process_cpu_user_seconds_total",i="process_cpu_system_seconds_total",o="process_cpu_seconds_total";return dc.exports=(u,d={})=>{const m=u?[u]:void 0,h=d.prefix?d.prefix:"",p=d.labels?d.labels:{},g=d.enableExemplars?d.enableExemplars:!1,v=Object.keys(p);let b=process.cpuUsage();const T=new r({name:h+a,help:"Total user CPU time spent in seconds.",enableExemplars:g,registers:m,labelNames:v,collect(){const A=process.cpuUsage(),_=A.user-b.user,R=A.system-b.system;if(b=A,this.enableExemplars){let M={};const N=n.trace.getSpan(n.context.active());N&&(M={traceId:N.spanContext().traceId,spanId:N.spanContext().spanId}),T.inc({labels:p,value:_/1e6,exemplarLabels:M}),w.inc({labels:p,value:R/1e6,exemplarLabels:M}),E.inc({labels:p,value:(_+R)/1e6,exemplarLabels:M})}else T.inc(p,_/1e6),w.inc(p,R/1e6),E.inc(p,(_+R)/1e6)}}),w=new r({name:h+i,help:"Total system CPU time spent in seconds.",enableExemplars:g,registers:m,labelNames:v}),E=new r({name:h+o,help:"Total user and system CPU time spent in seconds.",enableExemplars:g,registers:m,labelNames:v})},dc.exports.metricNames=[a,i,o],dc.exports}var fc={exports:{}},Yv;function WO(){if(Yv)return fc.exports;Yv=1;const n=nn(),r=Math.round(Date.now()/1e3-process.uptime()),a="process_start_time_seconds";return fc.exports=(i,o={})=>{const u=o.prefix?o.prefix:"",d=o.labels?o.labels:{},m=Object.keys(d);new n({name:u+a,help:"Start time of the process since unix epoch in seconds.",registers:i?[i]:void 0,labelNames:m,aggregator:"omit",collect(){this.set(d,r)}})},fc.exports.metricNames=[a],fc.exports}var mc={exports:{}},hc={exports:{}},Zv;function eA(){if(Zv)return hc.exports;Zv=1;const n=nn(),r=Tt,a=["VmSize","VmRSS","VmData"],i="process_resident_memory_bytes",o="process_virtual_memory_bytes",u="process_heap_bytes";function d(m){return m.split(`
`).reduce((h,p)=>{if(!a.some(b=>p.startsWith(b)))return h;const g=p.split(":");let v=g[1].trim();return v=v.substr(0,v.length-3),v=Number(v)*1024,h[g[0]]=v,h},{})}return hc.exports=(m,h={})=>{const p=m?[m]:void 0,g=h.prefix?h.prefix:"",v=h.labels?h.labels:{},b=Object.keys(v),T=new n({name:g+i,help:"Resident memory size in bytes.",registers:p,labelNames:b,collect(){try{const A=r.readFileSync("/proc/self/status","utf8"),_=d(A);T.set(v,_.VmRSS),w.set(v,_.VmSize),E.set(v,_.VmData)}catch{}}}),w=new n({name:g+o,help:"Virtual memory size in bytes.",registers:p,labelNames:b}),E=new n({name:g+u,help:"Process heap size in bytes.",registers:p,labelNames:b})},hc.exports.metricNames=[i,o,u],hc.exports}var ef,Fv;function DE(){if(Fv)return ef;Fv=1;function n(){try{return process.memoryUsage()}catch{return}}return ef=n,ef}var Xv;function tA(){if(Xv)return mc.exports;Xv=1;const n=nn(),r=eA(),a=DE(),i="process_resident_memory_bytes";function o(u,d={}){const m=d.prefix?d.prefix:"",h=d.labels?d.labels:{},p=Object.keys(h);new n({name:m+i,help:"Resident memory size in bytes.",registers:u?[u]:void 0,labelNames:p,collect(){const g=a();g&&this.set(h,g.rss)}})}return mc.exports=(u,d)=>process.platform==="linux"?r(u,d):o(u,d),mc.exports.metricNames=process.platform==="linux"?r.metricNames:[i],mc.exports}var pc={exports:{}},tf={exports:{}},Qv;function nA(){if(Qv)return tf.exports;Qv=1;var n=tf.exports={},r,a;function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=i}catch{r=i}try{typeof clearTimeout=="function"?a=clearTimeout:a=o}catch{a=o}})();function u(E){if(r===setTimeout)return setTimeout(E,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(E,0);try{return r(E,0)}catch{try{return r.call(null,E,0)}catch{return r.call(this,E,0)}}}function d(E){if(a===clearTimeout)return clearTimeout(E);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(E);try{return a(E)}catch{try{return a.call(null,E)}catch{return a.call(this,E)}}}var m=[],h=!1,p,g=-1;function v(){!h||!p||(h=!1,p.length?m=p.concat(m):g=-1,m.length&&b())}function b(){if(!h){var E=u(v);h=!0;for(var A=m.length;A;){for(p=m,m=[];++g<A;)p&&p[g].run();g=-1,A=m.length}p=null,h=!1,d(E)}}n.nextTick=function(E){var A=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)A[_-1]=arguments[_];m.push(new T(E,A)),m.length===1&&!h&&u(b)};function T(E,A){this.fun=E,this.array=A}T.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function w(){}return n.on=w,n.addListener=w,n.once=w,n.off=w,n.removeListener=w,n.removeAllListeners=w,n.emit=w,n.prependListener=w,n.prependOnceListener=w,n.listeners=function(E){return[]},n.binding=function(E){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(E){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},tf.exports}var Kv;function rA(){if(Kv)return pc.exports;Kv=1;const n=nn(),r=Tt,a=nA(),i="process_open_fds";return pc.exports=(o,u={})=>{if(a.platform!=="linux")return;const d=u.prefix?u.prefix:"",m=u.labels?u.labels:{},h=Object.keys(m);new n({name:d+i,help:"Number of open file descriptors.",registers:o?[o]:void 0,labelNames:h,collect(){try{const p=r.readdirSync("/proc/self/fd");this.set(m,p.length-1)}catch{}}})},pc.exports.metricNames=[i],pc.exports}var gc={exports:{}},Jv;function aA(){if(Jv)return gc.exports;Jv=1;const n=nn(),r=Tt,a="process_max_fds";let i;return gc.exports=(o,u={})=>{if(i===void 0)try{const g=r.readFileSync("/proc/self/limits","utf8").split(`
`);for(const v of g)if(v.startsWith("Max open files")){const b=v.split(/  +/);i=Number(b[1]);break}}catch{return}if(i===void 0)return;const d=u.prefix?u.prefix:"",m=u.labels?u.labels:{},h=Object.keys(m);new n({name:d+a,help:"Maximum number of open file descriptors.",registers:o?[o]:void 0,labelNames:h,collect(){i!==void 0&&this.set(m,i)}})},gc.exports.metricNames=[a],gc.exports}var yc={exports:{}},Wv;function sA(){if(Wv)return yc.exports;Wv=1;const n=nn();let r;try{r=Tt}catch{}const a="nodejs_eventloop_lag_seconds",i="nodejs_eventloop_lag_min_seconds",o="nodejs_eventloop_lag_max_seconds",u="nodejs_eventloop_lag_mean_seconds",d="nodejs_eventloop_lag_stddev_seconds",m="nodejs_eventloop_lag_p50_seconds",h="nodejs_eventloop_lag_p90_seconds",p="nodejs_eventloop_lag_p99_seconds";function g(v,b,T){const w=process.hrtime(v),A=(w[0]*1e9+w[1])/1e9;b.set(T,A)}return yc.exports=(v,b={})=>{const T=b.prefix?b.prefix:"",w=b.labels?b.labels:{},E=Object.keys(w),A=v?[v]:void 0;let _=()=>{const he=process.hrtime();setImmediate(g,he,R,w)};if(r&&r.monitorEventLoopDelay)try{const he=r.monitorEventLoopDelay({resolution:b.eventLoopMonitoringPrecision});he.enable(),_=()=>{const Ae=process.hrtime();setImmediate(g,Ae,R,w),M.set(w,he.min/1e9),N.set(w,he.max/1e9),U.set(w,he.mean/1e9),B.set(w,he.stddev/1e9),q.set(w,he.percentile(50)/1e9),F.set(w,he.percentile(90)/1e9),le.set(w,he.percentile(99)/1e9),he.reset()}}catch(he){if(he.code==="ERR_NOT_IMPLEMENTED")return;throw he}const R=new n({name:T+a,help:"Lag of event loop in seconds.",registers:A,labelNames:E,aggregator:"average",collect:_}),M=new n({name:T+i,help:"The minimum recorded event loop delay.",registers:A,labelNames:E,aggregator:"min"}),N=new n({name:T+o,help:"The maximum recorded event loop delay.",registers:A,labelNames:E,aggregator:"max"}),U=new n({name:T+u,help:"The mean of the recorded event loop delays.",registers:A,labelNames:E,aggregator:"average"}),B=new n({name:T+d,help:"The standard deviation of the recorded event loop delays.",registers:A,labelNames:E,aggregator:"average"}),q=new n({name:T+m,help:"The 50th percentile of the recorded event loop delays.",registers:A,labelNames:E,aggregator:"average"}),F=new n({name:T+h,help:"The 90th percentile of the recorded event loop delays.",registers:A,labelNames:E,aggregator:"average"}),le=new n({name:T+p,help:"The 99th percentile of the recorded event loop delays.",registers:A,labelNames:E,aggregator:"average"})},yc.exports.metricNames=[a,i,o,u,d,m,h,p],yc.exports}var vc={exports:{}},nf,eb;function xi(){if(eb)return nf;eb=1;function n(a){const i={};for(let o=0;o<a.length;o++){const u=a[o];!u||typeof u.constructor>"u"||(Object.hasOwnProperty.call(i,u.constructor.name)?i[u.constructor.name]+=1:i[u.constructor.name]=1)}return i}function r(a,i,o){a.reset();for(const u in i)a.set(Object.assign({type:u},o||{}),i[u])}return nf={aggregateByObjectName:n,updateMetrics:r},nf}var tb;function iA(){if(tb)return vc.exports;tb=1;const{aggregateByObjectName:n}=xi(),{updateMetrics:r}=xi(),a=nn(),i="nodejs_active_handles",o="nodejs_active_handles_total";return vc.exports=(u,d={})=>{if(typeof process._getActiveHandles!="function")return;const m=u?[u]:void 0,h=d.prefix?d.prefix:"",p=d.labels?d.labels:{},g=Object.keys(p);new a({name:h+i,help:"Number of active libuv handles grouped by handle type. Every handle type is C++ class name.",labelNames:["type",...g],registers:m,collect(){const v=process._getActiveHandles();r(this,n(v),p)}}),new a({name:h+o,help:"Total number of active handles.",registers:m,labelNames:g,collect(){const v=process._getActiveHandles();this.set(p,v.length)}})},vc.exports.metricNames=[i,o],vc.exports}var bc={exports:{}},nb;function oA(){if(nb)return bc.exports;nb=1;const n=nn(),{aggregateByObjectName:r}=xi(),{updateMetrics:a}=xi(),i="nodejs_active_requests",o="nodejs_active_requests_total";return bc.exports=(u,d={})=>{if(typeof process._getActiveRequests!="function")return;const m=d.prefix?d.prefix:"",h=d.labels?d.labels:{},p=Object.keys(h);new n({name:m+i,help:"Number of active libuv requests grouped by request type. Every request type is C++ class name.",labelNames:["type",...p],registers:u?[u]:void 0,collect(){const g=process._getActiveRequests();a(this,r(g),h)}}),new n({name:m+o,help:"Total number of active requests.",registers:u?[u]:void 0,labelNames:p,collect(){const g=process._getActiveRequests();this.set(h,g.length)}})},bc.exports.metricNames=[i,o],bc.exports}var Ec={exports:{}},rb;function cA(){if(rb)return Ec.exports;rb=1;const n=nn(),{updateMetrics:r}=xi(),a="nodejs_active_resources",i="nodejs_active_resources_total";return Ec.exports=(o,u={})=>{if(typeof process.getActiveResourcesInfo!="function")return;const d=u.prefix?u.prefix:"",m=u.labels?u.labels:{},h=Object.keys(m);new n({name:d+a,help:"Number of active resources that are currently keeping the event loop alive, grouped by async resource type.",labelNames:["type",...h],registers:o?[o]:void 0,collect(){const p=process.getActiveResourcesInfo(),g={};for(let v=0;v<p.length;v++){const b=p[v];Object.hasOwn(g,b)?g[b]+=1:g[b]=1}r(this,g,m)}}),new n({name:d+i,help:"Total number of active resources.",registers:o?[o]:void 0,labelNames:h,collect(){const p=process.getActiveResourcesInfo();this.set(m,p.length)}})},Ec.exports.metricNames=[a,i],Ec.exports}var Sc={exports:{}},ab;function uA(){if(ab)return Sc.exports;ab=1;const n=nn(),r=DE(),a="nodejs_heap_size_total_bytes",i="nodejs_heap_size_used_bytes",o="nodejs_external_memory_bytes";return Sc.exports=(u,d={})=>{if(typeof process.memoryUsage!="function")return;const m=d.labels?d.labels:{},h=Object.keys(m),p=u?[u]:void 0,g=d.prefix?d.prefix:"",v=()=>{const E=r();E&&(b.set(m,E.heapTotal),T.set(m,E.heapUsed),E.external!==void 0&&w.set(m,E.external))},b=new n({name:g+a,help:"Process heap size from Node.js in bytes.",registers:p,labelNames:h,collect:v}),T=new n({name:g+i,help:"Process heap size used from Node.js in bytes.",registers:p,labelNames:h}),w=new n({name:g+o,help:"Node.js external memory size in bytes.",registers:p,labelNames:h})},Sc.exports.metricNames=[a,i,o],Sc.exports}var _c={exports:{}},sb;function lA(){if(sb)return _c.exports;sb=1;const n=nn(),r=Tt,a=["total","used","available"],i={};return a.forEach(o=>{i[o]=`nodejs_heap_space_size_${o}_bytes`}),_c.exports=(o,u={})=>{try{r.getHeapSpaceStatistics()}catch(v){if(v.code==="ERR_NOT_IMPLEMENTED")return;throw v}const d=o?[o]:void 0,m=u.prefix?u.prefix:"",h=u.labels?u.labels:{},p=["space",...Object.keys(h)],g={};a.forEach(v=>{g[v]=new n({name:m+i[v],help:`Process heap space size ${v} from Node.js in bytes.`,labelNames:p,registers:d})}),g.total.collect=()=>{for(const v of r.getHeapSpaceStatistics()){const b=v.space_name.substr(0,v.space_name.indexOf("_space"));g.total.set({space:b,...h},v.space_size),g.used.set({space:b,...h},v.space_used_size),g.available.set({space:b,...h},v.space_available_size)}}},_c.exports.metricNames=Object.values(i),_c.exports}var Tc={exports:{}},ib;function dA(){if(ib)return Tc.exports;ib=1;const n=nn(),r=process.version,a=r.slice(1).split(".").map(Number),i="nodejs_version_info";return Tc.exports=(o,u={})=>{const d=u.prefix?u.prefix:"",m=u.labels?u.labels:{},h=Object.keys(m);new n({name:d+i,help:"Node.js version info.",labelNames:["version","major","minor","patch",...h],registers:o?[o]:void 0,aggregator:"first",collect(){this.labels(r,a[0],a[1],a[2],...Object.values(m)).set(1)}})},Tc.exports.metricNames=[i],Tc.exports}var wc={exports:{}},ob;function fA(){if(ob)return wc.exports;ob=1;const n=vE();let r;try{r=Tt}catch{}const a="nodejs_gc_duration_seconds",i=[.001,.01,.1,1,2,5],o=[];return r&&r.constants&&(o[r.constants.NODE_PERFORMANCE_GC_MAJOR]="major",o[r.constants.NODE_PERFORMANCE_GC_MINOR]="minor",o[r.constants.NODE_PERFORMANCE_GC_INCREMENTAL]="incremental",o[r.constants.NODE_PERFORMANCE_GC_WEAKCB]="weakcb"),wc.exports=(u,d={})=>{if(!r)return;const m=d.prefix?d.prefix:"",h=d.labels?d.labels:{},p=Object.keys(h),g=d.gcDurationBuckets?d.gcDurationBuckets:i,v=new n({name:m+a,help:"Garbage collection duration by kind, one of major, minor, incremental or weakcb.",labelNames:["kind",...p],enableExemplars:!1,buckets:g,registers:u?[u]:void 0});new r.PerformanceObserver(T=>{const w=T.getEntries()[0],E=w.detail?o[w.detail.kind]:o[w.kind];v.observe(Object.assign({kind:E},h),w.duration/1e3)}).observe({entryTypes:["gc"]})},wc.exports.metricNames=[a],wc.exports}var cb;function mA(){if(cb)return lc.exports;cb=1;const{isObject:n}=dr(),r=JO(),a=WO(),i=tA(),o=rA(),u=aA(),d=sA(),m=iA(),h=oA(),p=cA(),g=uA(),v=lA(),b=dA(),T=fA(),w={processCpuTotal:r,processStartTime:a,osMemoryHeap:i,processOpenFileDescriptors:o,processMaxFileDescriptors:u,eventLoopLag:d,...typeof process.getActiveResourcesInfo=="function"?{processResources:p}:{},processHandles:m,processRequests:h,heapSizeAndUsed:g,heapSpacesSizeAndUsed:v,version:b,gc:T},E=Object.keys(w);return lc.exports=function(_){if(_!=null&&!n(_))throw new TypeError("config must be null, undefined, or an object");_={eventLoopMonitoringPrecision:10,..._};for(const R of Object.values(w))R(_.register,_)},lc.exports.metricsList=E,lc.exports}var kc={},ub;function jE(){if(ub)return kc;ub=1;const{Grouper:n,hashObject:r}=dr();function a(i){return o=>{if(o.length===0)return;const u={help:o[0].help,name:o[0].name,type:o[0].type,values:[],aggregator:o[0].aggregator},d=new n;return o.forEach(m=>{m.values.forEach(h=>{const p=r(h.labels);d.add(`${h.metricName}_${p}`,h)})}),d.forEach(m=>{if(m.length===0)return;const h={value:i(m),labels:m[0].labels};m[0].metricName&&(h.metricName=m[0].metricName),u.values.push(h)}),u}}return kc.AggregatorFactory=a,kc.aggregators={sum:a(i=>i.reduce((o,u)=>o+u.value,0)),first:a(i=>i[0].value),omit:()=>{},average:a(i=>i.reduce((o,u)=>o+u.value,0)/i.length),min:a(i=>i.reduce((o,u)=>Math.min(o,u.value),1/0)),max:a(i=>i.reduce((o,u)=>Math.max(o,u.value),-1/0))},kc}var rf,lb;function hA(){if(lb)return rf;lb=1;const n=Ni(),{Grouper:r}=dr(),{aggregators:a}=jE();let i=()=>{const b=Tt;return i=()=>b,b};const o="prom-client:getMetricsReq",u="prom-client:getMetricsRes";let d=[n.globalRegistry],m=0,h=!1;const p=new Map;class g extends n{constructor(T=n.PROMETHEUS_CONTENT_TYPE){super(T),v()}clusterMetrics(){const T=m++;return new Promise((w,E)=>{let A=!1;function _(N,U){A||(A=!0,N?E(N):w(U))}const R={responses:[],pending:0,done:_,errorTimeout:setTimeout(()=>{const N=new Error("Operation timed out.");R.done(N)},5e3)};p.set(T,R);const M={type:o,requestId:T};for(const N in i().workers)i().workers[N].isConnected()&&(i().workers[N].send(M),R.pending++);R.pending===0&&(clearTimeout(R.errorTimeout),process.nextTick(()=>_(null,"")))})}get contentType(){return super.contentType}static aggregate(T,w=n.PROMETHEUS_CONTENT_TYPE){const E=new n,A=new r;return E.setContentType(w),T.forEach(_=>{_.forEach(R=>{A.add(R.name,R)})}),A.forEach(_=>{const R=_[0].aggregator,M=a[R];if(typeof M!="function")throw new Error(`'${R}' is not a defined aggregator.`);const N=M(_);if(N){const U=Object.assign({get:()=>N},N);E.registerMetric(U)}}),E}static setRegistries(T){Array.isArray(T)||(T=[T]),T.forEach(w=>{if(!(w instanceof n))throw new TypeError(`Expected Registry, got ${typeof w}`)}),d=T}}function v(){h||(h=!0,i().isMaster&&i().on("message",(b,T)=>{if(T.type===u){const w=p.get(T.requestId);if(T.error){w.done(new Error(T.error));return}if(T.metrics.forEach(E=>w.responses.push(E)),w.pending--,w.pending===0){p.delete(T.requestId),clearTimeout(w.errorTimeout);const A=g.aggregate(w.responses).metrics();w.done(null,A)}}}),i().isWorker&&process.on("message",b=>{b.type===o&&Promise.all(d.map(T=>T.getMetricsAsJSON())).then(T=>{process.send({type:u,requestId:b.requestId,metrics:T})}).catch(T=>{process.send({type:u,requestId:b.requestId,error:T.message})})}))}return rf=g,rf}var db;function pA(){return db||(db=1,(function(n){n.register=Ni().globalRegistry,n.Registry=Ni(),Object.defineProperty(n,"contentType",{configurable:!1,enumerable:!0,get(){return n.register.contentType},set(r){n.register.setContentType(r)}}),n.prometheusContentType=n.Registry.PROMETHEUS_CONTENT_TYPE,n.openMetricsContentType=n.Registry.OPENMETRICS_CONTENT_TYPE,n.validateMetricName=bs().validateMetricName,n.Counter=yE(),n.Gauge=nn(),n.Histogram=vE(),n.Summary=Ck(),n.Pushgateway=Nk(),n.linearBuckets=Bv().linearBuckets,n.exponentialBuckets=Bv().exponentialBuckets,n.collectDefaultMetrics=mA(),n.aggregators=jE().aggregators,n.AggregatorRegistry=hA()})(zd)),zd}pA();var xe;(function(n){n.assertEqual=o=>{};function r(o){}n.assertIs=r;function a(o){throw new Error}n.assertNever=a,n.arrayToEnum=o=>{const u={};for(const d of o)u[d]=d;return u},n.getValidEnumValues=o=>{const u=n.objectKeys(o).filter(m=>typeof o[o[m]]!="number"),d={};for(const m of u)d[m]=o[m];return n.objectValues(d)},n.objectValues=o=>n.objectKeys(o).map(function(u){return o[u]}),n.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const u=[];for(const d in o)Object.prototype.hasOwnProperty.call(o,d)&&u.push(d);return u},n.find=(o,u)=>{for(const d of o)if(u(d))return d},n.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function i(o,u=" | "){return o.map(d=>typeof d=="string"?`'${d}'`:d).join(u)}n.joinValues=i,n.jsonStringifyReplacer=(o,u)=>typeof u=="bigint"?u.toString():u})(xe||(xe={}));var fb;(function(n){n.mergeShapes=(r,a)=>({...r,...a})})(fb||(fb={}));const ie=xe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ur=n=>{switch(typeof n){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return Number.isNaN(n)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"symbol":return ie.symbol;case"object":return Array.isArray(n)?ie.array:n===null?ie.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ie.promise:typeof Map<"u"&&n instanceof Map?ie.map:typeof Set<"u"&&n instanceof Set?ie.set:typeof Date<"u"&&n instanceof Date?ie.date:ie.object;default:return ie.unknown}},z=xe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Bn extends Error{get errors(){return this.issues}constructor(r){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=r}format(r){const a=r||function(u){return u.message},i={_errors:[]},o=u=>{for(const d of u.issues)if(d.code==="invalid_union")d.unionErrors.map(o);else if(d.code==="invalid_return_type")o(d.returnTypeError);else if(d.code==="invalid_arguments")o(d.argumentsError);else if(d.path.length===0)i._errors.push(a(d));else{let m=i,h=0;for(;h<d.path.length;){const p=d.path[h];h===d.path.length-1?(m[p]=m[p]||{_errors:[]},m[p]._errors.push(a(d))):m[p]=m[p]||{_errors:[]},m=m[p],h++}}};return o(this),i}static assert(r){if(!(r instanceof Bn))throw new Error(`Not a ZodError: ${r}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,xe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(r=a=>a.message){const a={},i=[];for(const o of this.issues)if(o.path.length>0){const u=o.path[0];a[u]=a[u]||[],a[u].push(r(o))}else i.push(r(o));return{formErrors:i,fieldErrors:a}}get formErrors(){return this.flatten()}}Bn.create=n=>new Bn(n);const lm=(n,r)=>{let a;switch(n.code){case z.invalid_type:n.received===ie.undefined?a="Required":a=`Expected ${n.expected}, received ${n.received}`;break;case z.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(n.expected,xe.jsonStringifyReplacer)}`;break;case z.unrecognized_keys:a=`Unrecognized key(s) in object: ${xe.joinValues(n.keys,", ")}`;break;case z.invalid_union:a="Invalid input";break;case z.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${xe.joinValues(n.options)}`;break;case z.invalid_enum_value:a=`Invalid enum value. Expected ${xe.joinValues(n.options)}, received '${n.received}'`;break;case z.invalid_arguments:a="Invalid function arguments";break;case z.invalid_return_type:a="Invalid function return type";break;case z.invalid_date:a="Invalid date";break;case z.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(a=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?a=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?a=`Invalid input: must end with "${n.validation.endsWith}"`:xe.assertNever(n.validation):n.validation!=="regex"?a=`Invalid ${n.validation}`:a="Invalid";break;case z.too_small:n.type==="array"?a=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?a=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?a=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?a=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?a=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:a="Invalid input";break;case z.too_big:n.type==="array"?a=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?a=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?a=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?a=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?a=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:a="Invalid input";break;case z.custom:a="Invalid input";break;case z.invalid_intersection_types:a="Intersection results could not be merged";break;case z.not_multiple_of:a=`Number must be a multiple of ${n.multipleOf}`;break;case z.not_finite:a="Number must be finite";break;default:a=r.defaultError,xe.assertNever(n)}return{message:a}};let gA=lm;function yA(){return gA}const vA=n=>{const{data:r,path:a,errorMaps:i,issueData:o}=n,u=[...a,...o.path||[]],d={...o,path:u};if(o.message!==void 0)return{...o,path:u,message:o.message};let m="";const h=i.filter(p=>!!p).slice().reverse();for(const p of h)m=p(d,{data:r,defaultError:m}).message;return{...o,path:u,message:m}};function ne(n,r){const a=yA(),i=vA({issueData:r,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,a,a===lm?void 0:lm].filter(o=>!!o)});n.common.issues.push(i)}class Rt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(r,a){const i=[];for(const o of a){if(o.status==="aborted")return ge;o.status==="dirty"&&r.dirty(),i.push(o.value)}return{status:r.value,value:i}}static async mergeObjectAsync(r,a){const i=[];for(const o of a){const u=await o.key,d=await o.value;i.push({key:u,value:d})}return Rt.mergeObjectSync(r,i)}static mergeObjectSync(r,a){const i={};for(const o of a){const{key:u,value:d}=o;if(u.status==="aborted"||d.status==="aborted")return ge;u.status==="dirty"&&r.dirty(),d.status==="dirty"&&r.dirty(),u.value!=="__proto__"&&(typeof d.value<"u"||o.alwaysSet)&&(i[u.value]=d.value)}return{status:r.value,value:i}}}const ge=Object.freeze({status:"aborted"}),Ti=n=>({status:"dirty",value:n}),pn=n=>({status:"valid",value:n}),mb=n=>n.status==="aborted",hb=n=>n.status==="dirty",hs=n=>n.status==="valid",Ic=n=>typeof Promise<"u"&&n instanceof Promise;var fe;(function(n){n.errToObj=r=>typeof r=="string"?{message:r}:r||{},n.toString=r=>typeof r=="string"?r:r?.message})(fe||(fe={}));class qn{constructor(r,a,i,o){this._cachedPath=[],this.parent=r,this.data=a,this._path=i,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pb=(n,r)=>{if(hs(r))return{success:!0,data:r.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new Bn(n.common.issues);return this._error=a,this._error}}};function Te(n){if(!n)return{};const{errorMap:r,invalid_type_error:a,required_error:i,description:o}=n;if(r&&(a||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return r?{errorMap:r,description:o}:{errorMap:(d,m)=>{const{message:h}=n;return d.code==="invalid_enum_value"?{message:h??m.defaultError}:typeof m.data>"u"?{message:h??i??m.defaultError}:d.code!=="invalid_type"?{message:m.defaultError}:{message:h??a??m.defaultError}},description:o}}class Ne{get description(){return this._def.description}_getType(r){return Ur(r.data)}_getOrReturnCtx(r,a){return a||{common:r.parent.common,data:r.data,parsedType:Ur(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}_processInputParams(r){return{status:new Rt,ctx:{common:r.parent.common,data:r.data,parsedType:Ur(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}}_parseSync(r){const a=this._parse(r);if(Ic(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(r){const a=this._parse(r);return Promise.resolve(a)}parse(r,a){const i=this.safeParse(r,a);if(i.success)return i.data;throw i.error}safeParse(r,a){const i={common:{issues:[],async:a?.async??!1,contextualErrorMap:a?.errorMap},path:a?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:Ur(r)},o=this._parseSync({data:r,path:i.path,parent:i});return pb(i,o)}"~validate"(r){const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:Ur(r)};if(!this["~standard"].async)try{const i=this._parseSync({data:r,path:[],parent:a});return hs(i)?{value:i.value}:{issues:a.common.issues}}catch(i){i?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:r,path:[],parent:a}).then(i=>hs(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(r,a){const i=await this.safeParseAsync(r,a);if(i.success)return i.data;throw i.error}async safeParseAsync(r,a){const i={common:{issues:[],contextualErrorMap:a?.errorMap,async:!0},path:a?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:Ur(r)},o=this._parse({data:r,path:i.path,parent:i}),u=await(Ic(o)?o:Promise.resolve(o));return pb(i,u)}refine(r,a){const i=o=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(o):a;return this._refinement((o,u)=>{const d=r(o),m=()=>u.addIssue({code:z.custom,...i(o)});return typeof Promise<"u"&&d instanceof Promise?d.then(h=>h?!0:(m(),!1)):d?!0:(m(),!1)})}refinement(r,a){return this._refinement((i,o)=>r(i)?!0:(o.addIssue(typeof a=="function"?a(i,o):a),!1))}_refinement(r){return new va({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:r}})}superRefine(r){return this._refinement(r)}constructor(r){this.spa=this.safeParseAsync,this._def=r,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return lr.create(this,this._def)}nullable(){return ba.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Un.create(this)}promise(){return $c.create(this,this._def)}or(r){return zc.create([this,r],this._def)}and(r){return Lc.create(this,r,this._def)}transform(r){return new va({...Te(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:r}})}default(r){const a=typeof r=="function"?r:()=>r;return new Bc({...Te(this._def),innerType:this,defaultValue:a,typeName:ye.ZodDefault})}brand(){return new qE({typeName:ye.ZodBranded,type:this,...Te(this._def)})}catch(r){const a=typeof r=="function"?r:()=>r;return new qc({...Te(this._def),innerType:this,catchValue:a,typeName:ye.ZodCatch})}describe(r){const a=this.constructor;return new a({...this._def,description:r})}pipe(r){return Dm.create(this,r)}readonly(){return Pc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const bA=/^c[^\s-]{8,}$/i,EA=/^[0-9a-z]+$/,SA=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_A=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,TA=/^[a-z0-9_-]{21}$/i,wA=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,kA=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,OA=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,AA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let af;const RA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,CA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,NA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,MA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,IA=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xA=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,UE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zA=new RegExp(`^${UE}$`);function $E(n){let r="[0-5]\\d";n.precision?r=`${r}\\.\\d{${n.precision}}`:n.precision==null&&(r=`${r}(\\.\\d+)?`);const a=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${r})${a}`}function LA(n){return new RegExp(`^${$E(n)}$`)}function DA(n){let r=`${UE}T${$E(n)}`;const a=[];return a.push(n.local?"Z?":"Z"),n.offset&&a.push("([+-]\\d{2}:?\\d{2})"),r=`${r}(${a.join("|")})`,new RegExp(`^${r}$`)}function jA(n,r){return!!((r==="v4"||!r)&&RA.test(n)||(r==="v6"||!r)&&NA.test(n))}function UA(n,r){if(!wA.test(n))return!1;try{const[a]=n.split(".");if(!a)return!1;const i=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),o=JSON.parse(atob(i));return!(typeof o!="object"||o===null||"typ"in o&&o?.typ!=="JWT"||!o.alg||r&&o.alg!==r)}catch{return!1}}function $A(n,r){return!!((r==="v4"||!r)&&CA.test(n)||(r==="v6"||!r)&&MA.test(n))}class jn extends Ne{_parse(r){if(this._def.coerce&&(r.data=String(r.data)),this._getType(r)!==ie.string){const u=this._getOrReturnCtx(r);return ne(u,{code:z.invalid_type,expected:ie.string,received:u.parsedType}),ge}const i=new Rt;let o;for(const u of this._def.checks)if(u.kind==="min")r.data.length<u.value&&(o=this._getOrReturnCtx(r,o),ne(o,{code:z.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),i.dirty());else if(u.kind==="max")r.data.length>u.value&&(o=this._getOrReturnCtx(r,o),ne(o,{code:z.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),i.dirty());else if(u.kind==="length"){const d=r.data.length>u.value,m=r.data.length<u.value;(d||m)&&(o=this._getOrReturnCtx(r,o),d?ne(o,{code:z.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):m&&ne(o,{code:z.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),i.dirty())}else if(u.kind==="email")OA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"email",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="emoji")af||(af=new RegExp(AA,"u")),af.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"emoji",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="uuid")_A.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"uuid",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="nanoid")TA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"nanoid",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="cuid")bA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"cuid",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="cuid2")EA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"cuid2",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="ulid")SA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"ulid",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="url")try{new URL(r.data)}catch{o=this._getOrReturnCtx(r,o),ne(o,{validation:"url",code:z.invalid_string,message:u.message}),i.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"regex",code:z.invalid_string,message:u.message}),i.dirty())):u.kind==="trim"?r.data=r.data.trim():u.kind==="includes"?r.data.includes(u.value,u.position)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),i.dirty()):u.kind==="toLowerCase"?r.data=r.data.toLowerCase():u.kind==="toUpperCase"?r.data=r.data.toUpperCase():u.kind==="startsWith"?r.data.startsWith(u.value)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:{startsWith:u.value},message:u.message}),i.dirty()):u.kind==="endsWith"?r.data.endsWith(u.value)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:{endsWith:u.value},message:u.message}),i.dirty()):u.kind==="datetime"?DA(u).test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:"datetime",message:u.message}),i.dirty()):u.kind==="date"?zA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:"date",message:u.message}),i.dirty()):u.kind==="time"?LA(u).test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:"time",message:u.message}),i.dirty()):u.kind==="duration"?kA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"duration",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="ip"?jA(r.data,u.version)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"ip",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="jwt"?UA(r.data,u.alg)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"jwt",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="cidr"?$A(r.data,u.version)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"cidr",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="base64"?IA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"base64",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="base64url"?xA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"base64url",code:z.invalid_string,message:u.message}),i.dirty()):xe.assertNever(u);return{status:i.value,value:r.data}}_regex(r,a,i){return this.refinement(o=>r.test(o),{validation:a,code:z.invalid_string,...fe.errToObj(i)})}_addCheck(r){return new jn({...this._def,checks:[...this._def.checks,r]})}email(r){return this._addCheck({kind:"email",...fe.errToObj(r)})}url(r){return this._addCheck({kind:"url",...fe.errToObj(r)})}emoji(r){return this._addCheck({kind:"emoji",...fe.errToObj(r)})}uuid(r){return this._addCheck({kind:"uuid",...fe.errToObj(r)})}nanoid(r){return this._addCheck({kind:"nanoid",...fe.errToObj(r)})}cuid(r){return this._addCheck({kind:"cuid",...fe.errToObj(r)})}cuid2(r){return this._addCheck({kind:"cuid2",...fe.errToObj(r)})}ulid(r){return this._addCheck({kind:"ulid",...fe.errToObj(r)})}base64(r){return this._addCheck({kind:"base64",...fe.errToObj(r)})}base64url(r){return this._addCheck({kind:"base64url",...fe.errToObj(r)})}jwt(r){return this._addCheck({kind:"jwt",...fe.errToObj(r)})}ip(r){return this._addCheck({kind:"ip",...fe.errToObj(r)})}cidr(r){return this._addCheck({kind:"cidr",...fe.errToObj(r)})}datetime(r){return typeof r=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:r}):this._addCheck({kind:"datetime",precision:typeof r?.precision>"u"?null:r?.precision,offset:r?.offset??!1,local:r?.local??!1,...fe.errToObj(r?.message)})}date(r){return this._addCheck({kind:"date",message:r})}time(r){return typeof r=="string"?this._addCheck({kind:"time",precision:null,message:r}):this._addCheck({kind:"time",precision:typeof r?.precision>"u"?null:r?.precision,...fe.errToObj(r?.message)})}duration(r){return this._addCheck({kind:"duration",...fe.errToObj(r)})}regex(r,a){return this._addCheck({kind:"regex",regex:r,...fe.errToObj(a)})}includes(r,a){return this._addCheck({kind:"includes",value:r,position:a?.position,...fe.errToObj(a?.message)})}startsWith(r,a){return this._addCheck({kind:"startsWith",value:r,...fe.errToObj(a)})}endsWith(r,a){return this._addCheck({kind:"endsWith",value:r,...fe.errToObj(a)})}min(r,a){return this._addCheck({kind:"min",value:r,...fe.errToObj(a)})}max(r,a){return this._addCheck({kind:"max",value:r,...fe.errToObj(a)})}length(r,a){return this._addCheck({kind:"length",value:r,...fe.errToObj(a)})}nonempty(r){return this.min(1,fe.errToObj(r))}trim(){return new jn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new jn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new jn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(r=>r.kind==="datetime")}get isDate(){return!!this._def.checks.find(r=>r.kind==="date")}get isTime(){return!!this._def.checks.find(r=>r.kind==="time")}get isDuration(){return!!this._def.checks.find(r=>r.kind==="duration")}get isEmail(){return!!this._def.checks.find(r=>r.kind==="email")}get isURL(){return!!this._def.checks.find(r=>r.kind==="url")}get isEmoji(){return!!this._def.checks.find(r=>r.kind==="emoji")}get isUUID(){return!!this._def.checks.find(r=>r.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(r=>r.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(r=>r.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(r=>r.kind==="cuid2")}get isULID(){return!!this._def.checks.find(r=>r.kind==="ulid")}get isIP(){return!!this._def.checks.find(r=>r.kind==="ip")}get isCIDR(){return!!this._def.checks.find(r=>r.kind==="cidr")}get isBase64(){return!!this._def.checks.find(r=>r.kind==="base64")}get isBase64url(){return!!this._def.checks.find(r=>r.kind==="base64url")}get minLength(){let r=null;for(const a of this._def.checks)a.kind==="min"&&(r===null||a.value>r)&&(r=a.value);return r}get maxLength(){let r=null;for(const a of this._def.checks)a.kind==="max"&&(r===null||a.value<r)&&(r=a.value);return r}}jn.create=n=>new jn({checks:[],typeName:ye.ZodString,coerce:n?.coerce??!1,...Te(n)});function BA(n,r){const a=(n.toString().split(".")[1]||"").length,i=(r.toString().split(".")[1]||"").length,o=a>i?a:i,u=Number.parseInt(n.toFixed(o).replace(".","")),d=Number.parseInt(r.toFixed(o).replace(".",""));return u%d/10**o}class ha extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(r){if(this._def.coerce&&(r.data=Number(r.data)),this._getType(r)!==ie.number){const u=this._getOrReturnCtx(r);return ne(u,{code:z.invalid_type,expected:ie.number,received:u.parsedType}),ge}let i;const o=new Rt;for(const u of this._def.checks)u.kind==="int"?xe.isInteger(r.data)||(i=this._getOrReturnCtx(r,i),ne(i,{code:z.invalid_type,expected:"integer",received:"float",message:u.message}),o.dirty()):u.kind==="min"?(u.inclusive?r.data<u.value:r.data<=u.value)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),o.dirty()):u.kind==="max"?(u.inclusive?r.data>u.value:r.data>=u.value)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),o.dirty()):u.kind==="multipleOf"?BA(r.data,u.value)!==0&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.not_multiple_of,multipleOf:u.value,message:u.message}),o.dirty()):u.kind==="finite"?Number.isFinite(r.data)||(i=this._getOrReturnCtx(r,i),ne(i,{code:z.not_finite,message:u.message}),o.dirty()):xe.assertNever(u);return{status:o.value,value:r.data}}gte(r,a){return this.setLimit("min",r,!0,fe.toString(a))}gt(r,a){return this.setLimit("min",r,!1,fe.toString(a))}lte(r,a){return this.setLimit("max",r,!0,fe.toString(a))}lt(r,a){return this.setLimit("max",r,!1,fe.toString(a))}setLimit(r,a,i,o){return new ha({...this._def,checks:[...this._def.checks,{kind:r,value:a,inclusive:i,message:fe.toString(o)}]})}_addCheck(r){return new ha({...this._def,checks:[...this._def.checks,r]})}int(r){return this._addCheck({kind:"int",message:fe.toString(r)})}positive(r){return this._addCheck({kind:"min",value:0,inclusive:!1,message:fe.toString(r)})}negative(r){return this._addCheck({kind:"max",value:0,inclusive:!1,message:fe.toString(r)})}nonpositive(r){return this._addCheck({kind:"max",value:0,inclusive:!0,message:fe.toString(r)})}nonnegative(r){return this._addCheck({kind:"min",value:0,inclusive:!0,message:fe.toString(r)})}multipleOf(r,a){return this._addCheck({kind:"multipleOf",value:r,message:fe.toString(a)})}finite(r){return this._addCheck({kind:"finite",message:fe.toString(r)})}safe(r){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:fe.toString(r)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:fe.toString(r)})}get minValue(){let r=null;for(const a of this._def.checks)a.kind==="min"&&(r===null||a.value>r)&&(r=a.value);return r}get maxValue(){let r=null;for(const a of this._def.checks)a.kind==="max"&&(r===null||a.value<r)&&(r=a.value);return r}get isInt(){return!!this._def.checks.find(r=>r.kind==="int"||r.kind==="multipleOf"&&xe.isInteger(r.value))}get isFinite(){let r=null,a=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(a===null||i.value>a)&&(a=i.value):i.kind==="max"&&(r===null||i.value<r)&&(r=i.value)}return Number.isFinite(a)&&Number.isFinite(r)}}ha.create=n=>new ha({checks:[],typeName:ye.ZodNumber,coerce:n?.coerce||!1,...Te(n)});class pa extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(r){if(this._def.coerce)try{r.data=BigInt(r.data)}catch{return this._getInvalidInput(r)}if(this._getType(r)!==ie.bigint)return this._getInvalidInput(r);let i;const o=new Rt;for(const u of this._def.checks)u.kind==="min"?(u.inclusive?r.data<u.value:r.data<=u.value)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),o.dirty()):u.kind==="max"?(u.inclusive?r.data>u.value:r.data>=u.value)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),o.dirty()):u.kind==="multipleOf"?r.data%u.value!==BigInt(0)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.not_multiple_of,multipleOf:u.value,message:u.message}),o.dirty()):xe.assertNever(u);return{status:o.value,value:r.data}}_getInvalidInput(r){const a=this._getOrReturnCtx(r);return ne(a,{code:z.invalid_type,expected:ie.bigint,received:a.parsedType}),ge}gte(r,a){return this.setLimit("min",r,!0,fe.toString(a))}gt(r,a){return this.setLimit("min",r,!1,fe.toString(a))}lte(r,a){return this.setLimit("max",r,!0,fe.toString(a))}lt(r,a){return this.setLimit("max",r,!1,fe.toString(a))}setLimit(r,a,i,o){return new pa({...this._def,checks:[...this._def.checks,{kind:r,value:a,inclusive:i,message:fe.toString(o)}]})}_addCheck(r){return new pa({...this._def,checks:[...this._def.checks,r]})}positive(r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:fe.toString(r)})}negative(r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:fe.toString(r)})}nonpositive(r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:fe.toString(r)})}nonnegative(r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:fe.toString(r)})}multipleOf(r,a){return this._addCheck({kind:"multipleOf",value:r,message:fe.toString(a)})}get minValue(){let r=null;for(const a of this._def.checks)a.kind==="min"&&(r===null||a.value>r)&&(r=a.value);return r}get maxValue(){let r=null;for(const a of this._def.checks)a.kind==="max"&&(r===null||a.value<r)&&(r=a.value);return r}}pa.create=n=>new pa({checks:[],typeName:ye.ZodBigInt,coerce:n?.coerce??!1,...Te(n)});class xc extends Ne{_parse(r){if(this._def.coerce&&(r.data=!!r.data),this._getType(r)!==ie.boolean){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.boolean,received:i.parsedType}),ge}return pn(r.data)}}xc.create=n=>new xc({typeName:ye.ZodBoolean,coerce:n?.coerce||!1,...Te(n)});class ps extends Ne{_parse(r){if(this._def.coerce&&(r.data=new Date(r.data)),this._getType(r)!==ie.date){const u=this._getOrReturnCtx(r);return ne(u,{code:z.invalid_type,expected:ie.date,received:u.parsedType}),ge}if(Number.isNaN(r.data.getTime())){const u=this._getOrReturnCtx(r);return ne(u,{code:z.invalid_date}),ge}const i=new Rt;let o;for(const u of this._def.checks)u.kind==="min"?r.data.getTime()<u.value&&(o=this._getOrReturnCtx(r,o),ne(o,{code:z.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),i.dirty()):u.kind==="max"?r.data.getTime()>u.value&&(o=this._getOrReturnCtx(r,o),ne(o,{code:z.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),i.dirty()):xe.assertNever(u);return{status:i.value,value:new Date(r.data.getTime())}}_addCheck(r){return new ps({...this._def,checks:[...this._def.checks,r]})}min(r,a){return this._addCheck({kind:"min",value:r.getTime(),message:fe.toString(a)})}max(r,a){return this._addCheck({kind:"max",value:r.getTime(),message:fe.toString(a)})}get minDate(){let r=null;for(const a of this._def.checks)a.kind==="min"&&(r===null||a.value>r)&&(r=a.value);return r!=null?new Date(r):null}get maxDate(){let r=null;for(const a of this._def.checks)a.kind==="max"&&(r===null||a.value<r)&&(r=a.value);return r!=null?new Date(r):null}}ps.create=n=>new ps({checks:[],coerce:n?.coerce||!1,typeName:ye.ZodDate,...Te(n)});class gb extends Ne{_parse(r){if(this._getType(r)!==ie.symbol){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.symbol,received:i.parsedType}),ge}return pn(r.data)}}gb.create=n=>new gb({typeName:ye.ZodSymbol,...Te(n)});class dm extends Ne{_parse(r){if(this._getType(r)!==ie.undefined){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.undefined,received:i.parsedType}),ge}return pn(r.data)}}dm.create=n=>new dm({typeName:ye.ZodUndefined,...Te(n)});class fm extends Ne{_parse(r){if(this._getType(r)!==ie.null){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.null,received:i.parsedType}),ge}return pn(r.data)}}fm.create=n=>new fm({typeName:ye.ZodNull,...Te(n)});class yb extends Ne{constructor(){super(...arguments),this._any=!0}_parse(r){return pn(r.data)}}yb.create=n=>new yb({typeName:ye.ZodAny,...Te(n)});class vb extends Ne{constructor(){super(...arguments),this._unknown=!0}_parse(r){return pn(r.data)}}vb.create=n=>new vb({typeName:ye.ZodUnknown,...Te(n)});class Gr extends Ne{_parse(r){const a=this._getOrReturnCtx(r);return ne(a,{code:z.invalid_type,expected:ie.never,received:a.parsedType}),ge}}Gr.create=n=>new Gr({typeName:ye.ZodNever,...Te(n)});class bb extends Ne{_parse(r){if(this._getType(r)!==ie.undefined){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.void,received:i.parsedType}),ge}return pn(r.data)}}bb.create=n=>new bb({typeName:ye.ZodVoid,...Te(n)});class Un extends Ne{_parse(r){const{ctx:a,status:i}=this._processInputParams(r),o=this._def;if(a.parsedType!==ie.array)return ne(a,{code:z.invalid_type,expected:ie.array,received:a.parsedType}),ge;if(o.exactLength!==null){const d=a.data.length>o.exactLength.value,m=a.data.length<o.exactLength.value;(d||m)&&(ne(a,{code:d?z.too_big:z.too_small,minimum:m?o.exactLength.value:void 0,maximum:d?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&a.data.length<o.minLength.value&&(ne(a,{code:z.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&a.data.length>o.maxLength.value&&(ne(a,{code:z.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),a.common.async)return Promise.all([...a.data].map((d,m)=>o.type._parseAsync(new qn(a,d,a.path,m)))).then(d=>Rt.mergeArray(i,d));const u=[...a.data].map((d,m)=>o.type._parseSync(new qn(a,d,a.path,m)));return Rt.mergeArray(i,u)}get element(){return this._def.type}min(r,a){return new Un({...this._def,minLength:{value:r,message:fe.toString(a)}})}max(r,a){return new Un({...this._def,maxLength:{value:r,message:fe.toString(a)}})}length(r,a){return new Un({...this._def,exactLength:{value:r,message:fe.toString(a)}})}nonempty(r){return this.min(1,r)}}Un.create=(n,r)=>new Un({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ye.ZodArray,...Te(r)});function cs(n){if(n instanceof lt){const r={};for(const a in n.shape){const i=n.shape[a];r[a]=lr.create(cs(i))}return new lt({...n._def,shape:()=>r})}else return n instanceof Un?new Un({...n._def,type:cs(n.element)}):n instanceof lr?lr.create(cs(n.unwrap())):n instanceof ba?ba.create(cs(n.unwrap())):n instanceof ga?ga.create(n.items.map(r=>cs(r))):n}class lt extends Ne{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const r=this._def.shape(),a=xe.objectKeys(r);return this._cached={shape:r,keys:a},this._cached}_parse(r){if(this._getType(r)!==ie.object){const p=this._getOrReturnCtx(r);return ne(p,{code:z.invalid_type,expected:ie.object,received:p.parsedType}),ge}const{status:i,ctx:o}=this._processInputParams(r),{shape:u,keys:d}=this._getCached(),m=[];if(!(this._def.catchall instanceof Gr&&this._def.unknownKeys==="strip"))for(const p in o.data)d.includes(p)||m.push(p);const h=[];for(const p of d){const g=u[p],v=o.data[p];h.push({key:{status:"valid",value:p},value:g._parse(new qn(o,v,o.path,p)),alwaysSet:p in o.data})}if(this._def.catchall instanceof Gr){const p=this._def.unknownKeys;if(p==="passthrough")for(const g of m)h.push({key:{status:"valid",value:g},value:{status:"valid",value:o.data[g]}});else if(p==="strict")m.length>0&&(ne(o,{code:z.unrecognized_keys,keys:m}),i.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const g of m){const v=o.data[g];h.push({key:{status:"valid",value:g},value:p._parse(new qn(o,v,o.path,g)),alwaysSet:g in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const p=[];for(const g of h){const v=await g.key,b=await g.value;p.push({key:v,value:b,alwaysSet:g.alwaysSet})}return p}).then(p=>Rt.mergeObjectSync(i,p)):Rt.mergeObjectSync(i,h)}get shape(){return this._def.shape()}strict(r){return fe.errToObj,new lt({...this._def,unknownKeys:"strict",...r!==void 0?{errorMap:(a,i)=>{const o=this._def.errorMap?.(a,i).message??i.defaultError;return a.code==="unrecognized_keys"?{message:fe.errToObj(r).message??o}:{message:o}}}:{}})}strip(){return new lt({...this._def,unknownKeys:"strip"})}passthrough(){return new lt({...this._def,unknownKeys:"passthrough"})}extend(r){return new lt({...this._def,shape:()=>({...this._def.shape(),...r})})}merge(r){return new lt({unknownKeys:r._def.unknownKeys,catchall:r._def.catchall,shape:()=>({...this._def.shape(),...r._def.shape()}),typeName:ye.ZodObject})}setKey(r,a){return this.augment({[r]:a})}catchall(r){return new lt({...this._def,catchall:r})}pick(r){const a={};for(const i of xe.objectKeys(r))r[i]&&this.shape[i]&&(a[i]=this.shape[i]);return new lt({...this._def,shape:()=>a})}omit(r){const a={};for(const i of xe.objectKeys(this.shape))r[i]||(a[i]=this.shape[i]);return new lt({...this._def,shape:()=>a})}deepPartial(){return cs(this)}partial(r){const a={};for(const i of xe.objectKeys(this.shape)){const o=this.shape[i];r&&!r[i]?a[i]=o:a[i]=o.optional()}return new lt({...this._def,shape:()=>a})}required(r){const a={};for(const i of xe.objectKeys(this.shape))if(r&&!r[i])a[i]=this.shape[i];else{let u=this.shape[i];for(;u instanceof lr;)u=u._def.innerType;a[i]=u}return new lt({...this._def,shape:()=>a})}keyof(){return BE(xe.objectKeys(this.shape))}}lt.create=(n,r)=>new lt({shape:()=>n,unknownKeys:"strip",catchall:Gr.create(),typeName:ye.ZodObject,...Te(r)});lt.strictCreate=(n,r)=>new lt({shape:()=>n,unknownKeys:"strict",catchall:Gr.create(),typeName:ye.ZodObject,...Te(r)});lt.lazycreate=(n,r)=>new lt({shape:n,unknownKeys:"strip",catchall:Gr.create(),typeName:ye.ZodObject,...Te(r)});class zc extends Ne{_parse(r){const{ctx:a}=this._processInputParams(r),i=this._def.options;function o(u){for(const m of u)if(m.result.status==="valid")return m.result;for(const m of u)if(m.result.status==="dirty")return a.common.issues.push(...m.ctx.common.issues),m.result;const d=u.map(m=>new Bn(m.ctx.common.issues));return ne(a,{code:z.invalid_union,unionErrors:d}),ge}if(a.common.async)return Promise.all(i.map(async u=>{const d={...a,common:{...a.common,issues:[]},parent:null};return{result:await u._parseAsync({data:a.data,path:a.path,parent:d}),ctx:d}})).then(o);{let u;const d=[];for(const h of i){const p={...a,common:{...a.common,issues:[]},parent:null},g=h._parseSync({data:a.data,path:a.path,parent:p});if(g.status==="valid")return g;g.status==="dirty"&&!u&&(u={result:g,ctx:p}),p.common.issues.length&&d.push(p.common.issues)}if(u)return a.common.issues.push(...u.ctx.common.issues),u.result;const m=d.map(h=>new Bn(h));return ne(a,{code:z.invalid_union,unionErrors:m}),ge}}get options(){return this._def.options}}zc.create=(n,r)=>new zc({options:n,typeName:ye.ZodUnion,...Te(r)});const cr=n=>n instanceof jc?cr(n.schema):n instanceof va?cr(n.innerType()):n instanceof Uc?[n.value]:n instanceof ya?n.options:n instanceof hm?xe.objectValues(n.enum):n instanceof Bc?cr(n._def.innerType):n instanceof dm?[void 0]:n instanceof fm?[null]:n instanceof lr?[void 0,...cr(n.unwrap())]:n instanceof ba?[null,...cr(n.unwrap())]:n instanceof qE||n instanceof Pc?cr(n.unwrap()):n instanceof qc?cr(n._def.innerType):[];class Lm extends Ne{_parse(r){const{ctx:a}=this._processInputParams(r);if(a.parsedType!==ie.object)return ne(a,{code:z.invalid_type,expected:ie.object,received:a.parsedType}),ge;const i=this.discriminator,o=a.data[i],u=this.optionsMap.get(o);return u?a.common.async?u._parseAsync({data:a.data,path:a.path,parent:a}):u._parseSync({data:a.data,path:a.path,parent:a}):(ne(a,{code:z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(r,a,i){const o=new Map;for(const u of a){const d=cr(u.shape[r]);if(!d.length)throw new Error(`A discriminator value for key \`${r}\` could not be extracted from all schema options`);for(const m of d){if(o.has(m))throw new Error(`Discriminator property ${String(r)} has duplicate value ${String(m)}`);o.set(m,u)}}return new Lm({typeName:ye.ZodDiscriminatedUnion,discriminator:r,options:a,optionsMap:o,...Te(i)})}}function mm(n,r){const a=Ur(n),i=Ur(r);if(n===r)return{valid:!0,data:n};if(a===ie.object&&i===ie.object){const o=xe.objectKeys(r),u=xe.objectKeys(n).filter(m=>o.indexOf(m)!==-1),d={...n,...r};for(const m of u){const h=mm(n[m],r[m]);if(!h.valid)return{valid:!1};d[m]=h.data}return{valid:!0,data:d}}else if(a===ie.array&&i===ie.array){if(n.length!==r.length)return{valid:!1};const o=[];for(let u=0;u<n.length;u++){const d=n[u],m=r[u],h=mm(d,m);if(!h.valid)return{valid:!1};o.push(h.data)}return{valid:!0,data:o}}else return a===ie.date&&i===ie.date&&+n==+r?{valid:!0,data:n}:{valid:!1}}class Lc extends Ne{_parse(r){const{status:a,ctx:i}=this._processInputParams(r),o=(u,d)=>{if(mb(u)||mb(d))return ge;const m=mm(u.value,d.value);return m.valid?((hb(u)||hb(d))&&a.dirty(),{status:a.value,value:m.data}):(ne(i,{code:z.invalid_intersection_types}),ge)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([u,d])=>o(u,d)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Lc.create=(n,r,a)=>new Lc({left:n,right:r,typeName:ye.ZodIntersection,...Te(a)});class ga extends Ne{_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.parsedType!==ie.array)return ne(i,{code:z.invalid_type,expected:ie.array,received:i.parsedType}),ge;if(i.data.length<this._def.items.length)return ne(i,{code:z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ge;!this._def.rest&&i.data.length>this._def.items.length&&(ne(i,{code:z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const u=[...i.data].map((d,m)=>{const h=this._def.items[m]||this._def.rest;return h?h._parse(new qn(i,d,i.path,m)):null}).filter(d=>!!d);return i.common.async?Promise.all(u).then(d=>Rt.mergeArray(a,d)):Rt.mergeArray(a,u)}get items(){return this._def.items}rest(r){return new ga({...this._def,rest:r})}}ga.create=(n,r)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ga({items:n,typeName:ye.ZodTuple,rest:null,...Te(r)})};class Dc extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.parsedType!==ie.object)return ne(i,{code:z.invalid_type,expected:ie.object,received:i.parsedType}),ge;const o=[],u=this._def.keyType,d=this._def.valueType;for(const m in i.data)o.push({key:u._parse(new qn(i,m,i.path,m)),value:d._parse(new qn(i,i.data[m],i.path,m)),alwaysSet:m in i.data});return i.common.async?Rt.mergeObjectAsync(a,o):Rt.mergeObjectSync(a,o)}get element(){return this._def.valueType}static create(r,a,i){return a instanceof Ne?new Dc({keyType:r,valueType:a,typeName:ye.ZodRecord,...Te(i)}):new Dc({keyType:jn.create(),valueType:r,typeName:ye.ZodRecord,...Te(a)})}}class Eb extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.parsedType!==ie.map)return ne(i,{code:z.invalid_type,expected:ie.map,received:i.parsedType}),ge;const o=this._def.keyType,u=this._def.valueType,d=[...i.data.entries()].map(([m,h],p)=>({key:o._parse(new qn(i,m,i.path,[p,"key"])),value:u._parse(new qn(i,h,i.path,[p,"value"]))}));if(i.common.async){const m=new Map;return Promise.resolve().then(async()=>{for(const h of d){const p=await h.key,g=await h.value;if(p.status==="aborted"||g.status==="aborted")return ge;(p.status==="dirty"||g.status==="dirty")&&a.dirty(),m.set(p.value,g.value)}return{status:a.value,value:m}})}else{const m=new Map;for(const h of d){const p=h.key,g=h.value;if(p.status==="aborted"||g.status==="aborted")return ge;(p.status==="dirty"||g.status==="dirty")&&a.dirty(),m.set(p.value,g.value)}return{status:a.value,value:m}}}}Eb.create=(n,r,a)=>new Eb({valueType:r,keyType:n,typeName:ye.ZodMap,...Te(a)});class zi extends Ne{_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.parsedType!==ie.set)return ne(i,{code:z.invalid_type,expected:ie.set,received:i.parsedType}),ge;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(ne(i,{code:z.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),a.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(ne(i,{code:z.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),a.dirty());const u=this._def.valueType;function d(h){const p=new Set;for(const g of h){if(g.status==="aborted")return ge;g.status==="dirty"&&a.dirty(),p.add(g.value)}return{status:a.value,value:p}}const m=[...i.data.values()].map((h,p)=>u._parse(new qn(i,h,i.path,p)));return i.common.async?Promise.all(m).then(h=>d(h)):d(m)}min(r,a){return new zi({...this._def,minSize:{value:r,message:fe.toString(a)}})}max(r,a){return new zi({...this._def,maxSize:{value:r,message:fe.toString(a)}})}size(r,a){return this.min(r,a).max(r,a)}nonempty(r){return this.min(1,r)}}zi.create=(n,r)=>new zi({valueType:n,minSize:null,maxSize:null,typeName:ye.ZodSet,...Te(r)});class jc extends Ne{get schema(){return this._def.getter()}_parse(r){const{ctx:a}=this._processInputParams(r);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}jc.create=(n,r)=>new jc({getter:n,typeName:ye.ZodLazy,...Te(r)});class Uc extends Ne{_parse(r){if(r.data!==this._def.value){const a=this._getOrReturnCtx(r);return ne(a,{received:a.data,code:z.invalid_literal,expected:this._def.value}),ge}return{status:"valid",value:r.data}}get value(){return this._def.value}}Uc.create=(n,r)=>new Uc({value:n,typeName:ye.ZodLiteral,...Te(r)});function BE(n,r){return new ya({values:n,typeName:ye.ZodEnum,...Te(r)})}class ya extends Ne{_parse(r){if(typeof r.data!="string"){const a=this._getOrReturnCtx(r),i=this._def.values;return ne(a,{expected:xe.joinValues(i),received:a.parsedType,code:z.invalid_type}),ge}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(r.data)){const a=this._getOrReturnCtx(r),i=this._def.values;return ne(a,{received:a.data,code:z.invalid_enum_value,options:i}),ge}return pn(r.data)}get options(){return this._def.values}get enum(){const r={};for(const a of this._def.values)r[a]=a;return r}get Values(){const r={};for(const a of this._def.values)r[a]=a;return r}get Enum(){const r={};for(const a of this._def.values)r[a]=a;return r}extract(r,a=this._def){return ya.create(r,{...this._def,...a})}exclude(r,a=this._def){return ya.create(this.options.filter(i=>!r.includes(i)),{...this._def,...a})}}ya.create=BE;class hm extends Ne{_parse(r){const a=xe.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(r);if(i.parsedType!==ie.string&&i.parsedType!==ie.number){const o=xe.objectValues(a);return ne(i,{expected:xe.joinValues(o),received:i.parsedType,code:z.invalid_type}),ge}if(this._cache||(this._cache=new Set(xe.getValidEnumValues(this._def.values))),!this._cache.has(r.data)){const o=xe.objectValues(a);return ne(i,{received:i.data,code:z.invalid_enum_value,options:o}),ge}return pn(r.data)}get enum(){return this._def.values}}hm.create=(n,r)=>new hm({values:n,typeName:ye.ZodNativeEnum,...Te(r)});class $c extends Ne{unwrap(){return this._def.type}_parse(r){const{ctx:a}=this._processInputParams(r);if(a.parsedType!==ie.promise&&a.common.async===!1)return ne(a,{code:z.invalid_type,expected:ie.promise,received:a.parsedType}),ge;const i=a.parsedType===ie.promise?a.data:Promise.resolve(a.data);return pn(i.then(o=>this._def.type.parseAsync(o,{path:a.path,errorMap:a.common.contextualErrorMap})))}}$c.create=(n,r)=>new $c({type:n,typeName:ye.ZodPromise,...Te(r)});class va extends Ne{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(r){const{status:a,ctx:i}=this._processInputParams(r),o=this._def.effect||null,u={addIssue:d=>{ne(i,d),d.fatal?a.abort():a.dirty()},get path(){return i.path}};if(u.addIssue=u.addIssue.bind(u),o.type==="preprocess"){const d=o.transform(i.data,u);if(i.common.async)return Promise.resolve(d).then(async m=>{if(a.value==="aborted")return ge;const h=await this._def.schema._parseAsync({data:m,path:i.path,parent:i});return h.status==="aborted"?ge:h.status==="dirty"||a.value==="dirty"?Ti(h.value):h});{if(a.value==="aborted")return ge;const m=this._def.schema._parseSync({data:d,path:i.path,parent:i});return m.status==="aborted"?ge:m.status==="dirty"||a.value==="dirty"?Ti(m.value):m}}if(o.type==="refinement"){const d=m=>{const h=o.refinement(m,u);if(i.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return m};if(i.common.async===!1){const m=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return m.status==="aborted"?ge:(m.status==="dirty"&&a.dirty(),d(m.value),{status:a.value,value:m.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(m=>m.status==="aborted"?ge:(m.status==="dirty"&&a.dirty(),d(m.value).then(()=>({status:a.value,value:m.value}))))}if(o.type==="transform")if(i.common.async===!1){const d=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!hs(d))return ge;const m=o.transform(d.value,u);if(m instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:m}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(d=>hs(d)?Promise.resolve(o.transform(d.value,u)).then(m=>({status:a.value,value:m})):ge);xe.assertNever(o)}}va.create=(n,r,a)=>new va({schema:n,typeName:ye.ZodEffects,effect:r,...Te(a)});va.createWithPreprocess=(n,r,a)=>new va({schema:r,effect:{type:"preprocess",transform:n},typeName:ye.ZodEffects,...Te(a)});class lr extends Ne{_parse(r){return this._getType(r)===ie.undefined?pn(void 0):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}lr.create=(n,r)=>new lr({innerType:n,typeName:ye.ZodOptional,...Te(r)});class ba extends Ne{_parse(r){return this._getType(r)===ie.null?pn(null):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}ba.create=(n,r)=>new ba({innerType:n,typeName:ye.ZodNullable,...Te(r)});class Bc extends Ne{_parse(r){const{ctx:a}=this._processInputParams(r);let i=a.data;return a.parsedType===ie.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}Bc.create=(n,r)=>new Bc({innerType:n,typeName:ye.ZodDefault,defaultValue:typeof r.default=="function"?r.default:()=>r.default,...Te(r)});class qc extends Ne{_parse(r){const{ctx:a}=this._processInputParams(r),i={...a,common:{...a.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Ic(o)?o.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new Bn(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Bn(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}qc.create=(n,r)=>new qc({innerType:n,typeName:ye.ZodCatch,catchValue:typeof r.catch=="function"?r.catch:()=>r.catch,...Te(r)});class Sb extends Ne{_parse(r){if(this._getType(r)!==ie.nan){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.nan,received:i.parsedType}),ge}return{status:"valid",value:r.data}}}Sb.create=n=>new Sb({typeName:ye.ZodNaN,...Te(n)});class qE extends Ne{_parse(r){const{ctx:a}=this._processInputParams(r),i=a.data;return this._def.type._parse({data:i,path:a.path,parent:a})}unwrap(){return this._def.type}}class Dm extends Ne{_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.common.async)return(async()=>{const u=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return u.status==="aborted"?ge:u.status==="dirty"?(a.dirty(),Ti(u.value)):this._def.out._parseAsync({data:u.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?ge:o.status==="dirty"?(a.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(r,a){return new Dm({in:r,out:a,typeName:ye.ZodPipeline})}}class Pc extends Ne{_parse(r){const a=this._def.innerType._parse(r),i=o=>(hs(o)&&(o.value=Object.freeze(o.value)),o);return Ic(a)?a.then(o=>i(o)):i(a)}unwrap(){return this._def.innerType}}Pc.create=(n,r)=>new Pc({innerType:n,typeName:ye.ZodReadonly,...Te(r)});var ye;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ye||(ye={}));const Oe=jn.create,qA=ha.create;pa.create;const Li=xc.create;ps.create;Gr.create;const Ee=Un.create,Z=lt.create,Xc=zc.create,Pt=Lm.create;Lc.create;ga.create;const jm=Dc.create,Um=jc.create,ae=Uc.create,We=ya.create;$c.create;lr.create;ba.create;const PE={string:(n=>jn.create({...n,coerce:!0})),number:(n=>ha.create({...n,coerce:!0})),boolean:(n=>xc.create({...n,coerce:!0})),bigint:(n=>pa.create({...n,coerce:!0})),date:(n=>ps.create({...n,coerce:!0}))},gs=ge;var Oc={exports:{}},sf,_b;function Qc(){if(_b)return sf;_b=1;const n="2.0.0",r=256,a=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,o=r-6;return sf={MAX_LENGTH:r,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:o,MAX_SAFE_INTEGER:a,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},sf}var of,Tb;function Kc(){if(Tb)return of;Tb=1;var n={};return of=typeof process=="object"&&n&&n.NODE_DEBUG&&/\bsemver\b/i.test(n.NODE_DEBUG)?(...a)=>console.error("SEMVER",...a):()=>{},of}var wb;function $i(){return wb||(wb=1,(function(n,r){const{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=Qc(),u=Kc();r=n.exports={};const d=r.re=[],m=r.safeRe=[],h=r.src=[],p=r.safeSrc=[],g=r.t={};let v=0;const b="[a-zA-Z0-9-]",T=[["\\s",1],["\\d",o],[b,i]],w=A=>{for(const[_,R]of T)A=A.split(`${_}*`).join(`${_}{0,${R}}`).split(`${_}+`).join(`${_}{1,${R}}`);return A},E=(A,_,R)=>{const M=w(_),N=v++;u(A,N,_),g[A]=N,h[N]=_,p[N]=M,d[N]=new RegExp(_,R?"g":void 0),m[N]=new RegExp(M,R?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${b}*`),E("MAINVERSION",`(${h[g.NUMERICIDENTIFIER]})\\.(${h[g.NUMERICIDENTIFIER]})\\.(${h[g.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${h[g.NUMERICIDENTIFIERLOOSE]})\\.(${h[g.NUMERICIDENTIFIERLOOSE]})\\.(${h[g.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${h[g.NONNUMERICIDENTIFIER]}|${h[g.NUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${h[g.NONNUMERICIDENTIFIER]}|${h[g.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASE",`(?:-(${h[g.PRERELEASEIDENTIFIER]}(?:\\.${h[g.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${h[g.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[g.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${b}+`),E("BUILD",`(?:\\+(${h[g.BUILDIDENTIFIER]}(?:\\.${h[g.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${h[g.MAINVERSION]}${h[g.PRERELEASE]}?${h[g.BUILD]}?`),E("FULL",`^${h[g.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${h[g.MAINVERSIONLOOSE]}${h[g.PRERELEASELOOSE]}?${h[g.BUILD]}?`),E("LOOSE",`^${h[g.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${h[g.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${h[g.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${h[g.XRANGEIDENTIFIER]})(?:\\.(${h[g.XRANGEIDENTIFIER]})(?:\\.(${h[g.XRANGEIDENTIFIER]})(?:${h[g.PRERELEASE]})?${h[g.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${h[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[g.XRANGEIDENTIFIERLOOSE]})(?:${h[g.PRERELEASELOOSE]})?${h[g.BUILD]}?)?)?`),E("XRANGE",`^${h[g.GTLT]}\\s*${h[g.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${h[g.GTLT]}\\s*${h[g.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?`),E("COERCE",`${h[g.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",h[g.COERCEPLAIN]+`(?:${h[g.PRERELEASE]})?(?:${h[g.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",h[g.COERCE],!0),E("COERCERTLFULL",h[g.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${h[g.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",E("TILDE",`^${h[g.LONETILDE]}${h[g.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${h[g.LONETILDE]}${h[g.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${h[g.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",E("CARET",`^${h[g.LONECARET]}${h[g.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${h[g.LONECARET]}${h[g.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${h[g.GTLT]}\\s*(${h[g.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${h[g.GTLT]}\\s*(${h[g.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${h[g.GTLT]}\\s*(${h[g.LOOSEPLAIN]}|${h[g.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${h[g.XRANGEPLAIN]})\\s+-\\s+(${h[g.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${h[g.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[g.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Oc,Oc.exports)),Oc.exports}var cf,kb;function $m(){if(kb)return cf;kb=1;const n=Object.freeze({loose:!0}),r=Object.freeze({});return cf=i=>i?typeof i!="object"?n:i:r,cf}var uf,Ob;function GE(){if(Ob)return uf;Ob=1;const n=/^[0-9]+$/,r=(i,o)=>{if(typeof i=="number"&&typeof o=="number")return i===o?0:i<o?-1:1;const u=n.test(i),d=n.test(o);return u&&d&&(i=+i,o=+o),i===o?0:u&&!d?-1:d&&!u?1:i<o?-1:1};return uf={compareIdentifiers:r,rcompareIdentifiers:(i,o)=>r(o,i)},uf}var lf,Ab;function Ct(){if(Ab)return lf;Ab=1;const n=Kc(),{MAX_LENGTH:r,MAX_SAFE_INTEGER:a}=Qc(),{safeRe:i,t:o}=$i(),u=$m(),{compareIdentifiers:d}=GE();class m{constructor(p,g){if(g=u(g),p instanceof m){if(p.loose===!!g.loose&&p.includePrerelease===!!g.includePrerelease)return p;p=p.version}else if(typeof p!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof p}".`);if(p.length>r)throw new TypeError(`version is longer than ${r} characters`);n("SemVer",p,g),this.options=g,this.loose=!!g.loose,this.includePrerelease=!!g.includePrerelease;const v=p.trim().match(g.loose?i[o.LOOSE]:i[o.FULL]);if(!v)throw new TypeError(`Invalid Version: ${p}`);if(this.raw=p,this.major=+v[1],this.minor=+v[2],this.patch=+v[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");v[4]?this.prerelease=v[4].split(".").map(b=>{if(/^[0-9]+$/.test(b)){const T=+b;if(T>=0&&T<a)return T}return b}):this.prerelease=[],this.build=v[5]?v[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(p){if(n("SemVer.compare",this.version,this.options,p),!(p instanceof m)){if(typeof p=="string"&&p===this.version)return 0;p=new m(p,this.options)}return p.version===this.version?0:this.compareMain(p)||this.comparePre(p)}compareMain(p){return p instanceof m||(p=new m(p,this.options)),this.major<p.major?-1:this.major>p.major?1:this.minor<p.minor?-1:this.minor>p.minor?1:this.patch<p.patch?-1:this.patch>p.patch?1:0}comparePre(p){if(p instanceof m||(p=new m(p,this.options)),this.prerelease.length&&!p.prerelease.length)return-1;if(!this.prerelease.length&&p.prerelease.length)return 1;if(!this.prerelease.length&&!p.prerelease.length)return 0;let g=0;do{const v=this.prerelease[g],b=p.prerelease[g];if(n("prerelease compare",g,v,b),v===void 0&&b===void 0)return 0;if(b===void 0)return 1;if(v===void 0)return-1;if(v===b)continue;return d(v,b)}while(++g)}compareBuild(p){p instanceof m||(p=new m(p,this.options));let g=0;do{const v=this.build[g],b=p.build[g];if(n("build compare",g,v,b),v===void 0&&b===void 0)return 0;if(b===void 0)return 1;if(v===void 0)return-1;if(v===b)continue;return d(v,b)}while(++g)}inc(p,g,v){if(p.startsWith("pre")){if(!g&&v===!1)throw new Error("invalid increment argument: identifier is empty");if(g){const b=`-${g}`.match(this.options.loose?i[o.PRERELEASELOOSE]:i[o.PRERELEASE]);if(!b||b[1]!==g)throw new Error(`invalid identifier: ${g}`)}}switch(p){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",g,v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",g,v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",g,v),this.inc("pre",g,v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",g,v),this.inc("pre",g,v);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const b=Number(v)?1:0;if(this.prerelease.length===0)this.prerelease=[b];else{let T=this.prerelease.length;for(;--T>=0;)typeof this.prerelease[T]=="number"&&(this.prerelease[T]++,T=-2);if(T===-1){if(g===this.prerelease.join(".")&&v===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(b)}}if(g){let T=[g,b];v===!1&&(T=[g]),d(this.prerelease[0],g)===0?isNaN(this.prerelease[1])&&(this.prerelease=T):this.prerelease=T}break}default:throw new Error(`invalid increment argument: ${p}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return lf=m,lf}var df,Rb;function Es(){if(Rb)return df;Rb=1;const n=Ct();return df=(a,i,o=!1)=>{if(a instanceof n)return a;try{return new n(a,i)}catch(u){if(!o)return null;throw u}},df}var ff,Cb;function PA(){if(Cb)return ff;Cb=1;const n=Es();return ff=(a,i)=>{const o=n(a,i);return o?o.version:null},ff}var mf,Nb;function GA(){if(Nb)return mf;Nb=1;const n=Es();return mf=(a,i)=>{const o=n(a.trim().replace(/^[=v]+/,""),i);return o?o.version:null},mf}var hf,Mb;function VA(){if(Mb)return hf;Mb=1;const n=Ct();return hf=(a,i,o,u,d)=>{typeof o=="string"&&(d=u,u=o,o=void 0);try{return new n(a instanceof n?a.version:a,o).inc(i,u,d).version}catch{return null}},hf}var pf,Ib;function HA(){if(Ib)return pf;Ib=1;const n=Es();return pf=(a,i)=>{const o=n(a,null,!0),u=n(i,null,!0),d=o.compare(u);if(d===0)return null;const m=d>0,h=m?o:u,p=m?u:o,g=!!h.prerelease.length;if(!!p.prerelease.length&&!g){if(!p.patch&&!p.minor)return"major";if(p.compareMain(h)===0)return p.minor&&!p.patch?"minor":"patch"}const b=g?"pre":"";return o.major!==u.major?b+"major":o.minor!==u.minor?b+"minor":o.patch!==u.patch?b+"patch":"prerelease"},pf}var gf,xb;function YA(){if(xb)return gf;xb=1;const n=Ct();return gf=(a,i)=>new n(a,i).major,gf}var yf,zb;function ZA(){if(zb)return yf;zb=1;const n=Ct();return yf=(a,i)=>new n(a,i).minor,yf}var vf,Lb;function FA(){if(Lb)return vf;Lb=1;const n=Ct();return vf=(a,i)=>new n(a,i).patch,vf}var bf,Db;function XA(){if(Db)return bf;Db=1;const n=Es();return bf=(a,i)=>{const o=n(a,i);return o&&o.prerelease.length?o.prerelease:null},bf}var Ef,jb;function An(){if(jb)return Ef;jb=1;const n=Ct();return Ef=(a,i,o)=>new n(a,o).compare(new n(i,o)),Ef}var Sf,Ub;function QA(){if(Ub)return Sf;Ub=1;const n=An();return Sf=(a,i,o)=>n(i,a,o),Sf}var _f,$b;function KA(){if($b)return _f;$b=1;const n=An();return _f=(a,i)=>n(a,i,!0),_f}var Tf,Bb;function Bm(){if(Bb)return Tf;Bb=1;const n=Ct();return Tf=(a,i,o)=>{const u=new n(a,o),d=new n(i,o);return u.compare(d)||u.compareBuild(d)},Tf}var wf,qb;function JA(){if(qb)return wf;qb=1;const n=Bm();return wf=(a,i)=>a.sort((o,u)=>n(o,u,i)),wf}var kf,Pb;function WA(){if(Pb)return kf;Pb=1;const n=Bm();return kf=(a,i)=>a.sort((o,u)=>n(u,o,i)),kf}var Of,Gb;function Jc(){if(Gb)return Of;Gb=1;const n=An();return Of=(a,i,o)=>n(a,i,o)>0,Of}var Af,Vb;function qm(){if(Vb)return Af;Vb=1;const n=An();return Af=(a,i,o)=>n(a,i,o)<0,Af}var Rf,Hb;function VE(){if(Hb)return Rf;Hb=1;const n=An();return Rf=(a,i,o)=>n(a,i,o)===0,Rf}var Cf,Yb;function HE(){if(Yb)return Cf;Yb=1;const n=An();return Cf=(a,i,o)=>n(a,i,o)!==0,Cf}var Nf,Zb;function Pm(){if(Zb)return Nf;Zb=1;const n=An();return Nf=(a,i,o)=>n(a,i,o)>=0,Nf}var Mf,Fb;function Gm(){if(Fb)return Mf;Fb=1;const n=An();return Mf=(a,i,o)=>n(a,i,o)<=0,Mf}var If,Xb;function YE(){if(Xb)return If;Xb=1;const n=VE(),r=HE(),a=Jc(),i=Pm(),o=qm(),u=Gm();return If=(m,h,p,g)=>{switch(h){case"===":return typeof m=="object"&&(m=m.version),typeof p=="object"&&(p=p.version),m===p;case"!==":return typeof m=="object"&&(m=m.version),typeof p=="object"&&(p=p.version),m!==p;case"":case"=":case"==":return n(m,p,g);case"!=":return r(m,p,g);case">":return a(m,p,g);case">=":return i(m,p,g);case"<":return o(m,p,g);case"<=":return u(m,p,g);default:throw new TypeError(`Invalid operator: ${h}`)}},If}var xf,Qb;function eR(){if(Qb)return xf;Qb=1;const n=Ct(),r=Es(),{safeRe:a,t:i}=$i();return xf=(u,d)=>{if(u instanceof n)return u;if(typeof u=="number"&&(u=String(u)),typeof u!="string")return null;d=d||{};let m=null;if(!d.rtl)m=u.match(d.includePrerelease?a[i.COERCEFULL]:a[i.COERCE]);else{const T=d.includePrerelease?a[i.COERCERTLFULL]:a[i.COERCERTL];let w;for(;(w=T.exec(u))&&(!m||m.index+m[0].length!==u.length);)(!m||w.index+w[0].length!==m.index+m[0].length)&&(m=w),T.lastIndex=w.index+w[1].length+w[2].length;T.lastIndex=-1}if(m===null)return null;const h=m[2],p=m[3]||"0",g=m[4]||"0",v=d.includePrerelease&&m[5]?`-${m[5]}`:"",b=d.includePrerelease&&m[6]?`+${m[6]}`:"";return r(`${h}.${p}.${g}${v}${b}`,d)},xf}var zf,Kb;function tR(){if(Kb)return zf;Kb=1;class n{constructor(){this.max=1e3,this.map=new Map}get(a){const i=this.map.get(a);if(i!==void 0)return this.map.delete(a),this.map.set(a,i),i}delete(a){return this.map.delete(a)}set(a,i){if(!this.delete(a)&&i!==void 0){if(this.map.size>=this.max){const u=this.map.keys().next().value;this.delete(u)}this.map.set(a,i)}return this}}return zf=n,zf}var Lf,Jb;function Rn(){if(Jb)return Lf;Jb=1;const n=/\s+/g;class r{constructor(K,I){if(I=o(I),K instanceof r)return K.loose===!!I.loose&&K.includePrerelease===!!I.includePrerelease?K:new r(K.raw,I);if(K instanceof u)return this.raw=K.value,this.set=[[K]],this.formatted=void 0,this;if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=K.trim().replace(n," "),this.set=this.raw.split("||").map(G=>this.parseRange(G.trim())).filter(G=>G.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const G=this.set[0];if(this.set=this.set.filter(Q=>!E(Q[0])),this.set.length===0)this.set=[G];else if(this.set.length>1){for(const Q of this.set)if(Q.length===1&&A(Q[0])){this.set=[Q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let K=0;K<this.set.length;K++){K>0&&(this.formatted+="||");const I=this.set[K];for(let G=0;G<I.length;G++)G>0&&(this.formatted+=" "),this.formatted+=I[G].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(K){const G=((this.options.includePrerelease&&T)|(this.options.loose&&w))+":"+K,Q=i.get(G);if(Q)return Q;const ee=this.options.loose,re=ee?h[p.HYPHENRANGELOOSE]:h[p.HYPHENRANGE];K=K.replace(re,Ue(this.options.includePrerelease)),d("hyphen replace",K),K=K.replace(h[p.COMPARATORTRIM],g),d("comparator trim",K),K=K.replace(h[p.TILDETRIM],v),d("tilde trim",K),K=K.replace(h[p.CARETTRIM],b),d("caret trim",K);let O=K.split(" ").map(ue=>R(ue,this.options)).join(" ").split(/\s+/).map(ue=>Ae(ue,this.options));ee&&(O=O.filter(ue=>(d("loose invalid filter",ue,this.options),!!ue.match(h[p.COMPARATORLOOSE])))),d("range list",O);const $=new Map,X=O.map(ue=>new u(ue,this.options));for(const ue of X){if(E(ue))return[ue];$.set(ue.value,ue)}$.size>1&&$.has("")&&$.delete("");const te=[...$.values()];return i.set(G,te),te}intersects(K,I){if(!(K instanceof r))throw new TypeError("a Range is required");return this.set.some(G=>_(G,I)&&K.set.some(Q=>_(Q,I)&&G.every(ee=>Q.every(re=>ee.intersects(re,I)))))}test(K){if(!K)return!1;if(typeof K=="string")try{K=new m(K,this.options)}catch{return!1}for(let I=0;I<this.set.length;I++)if(et(this.set[I],K,this.options))return!0;return!1}}Lf=r;const a=tR(),i=new a,o=$m(),u=Wc(),d=Kc(),m=Ct(),{safeRe:h,t:p,comparatorTrimReplace:g,tildeTrimReplace:v,caretTrimReplace:b}=$i(),{FLAG_INCLUDE_PRERELEASE:T,FLAG_LOOSE:w}=Qc(),E=W=>W.value==="<0.0.0-0",A=W=>W.value==="",_=(W,K)=>{let I=!0;const G=W.slice();let Q=G.pop();for(;I&&G.length;)I=G.every(ee=>Q.intersects(ee,K)),Q=G.pop();return I},R=(W,K)=>(W=W.replace(h[p.BUILD],""),d("comp",W,K),W=B(W,K),d("caret",W),W=N(W,K),d("tildes",W),W=F(W,K),d("xrange",W),W=he(W,K),d("stars",W),W),M=W=>!W||W.toLowerCase()==="x"||W==="*",N=(W,K)=>W.trim().split(/\s+/).map(I=>U(I,K)).join(" "),U=(W,K)=>{const I=K.loose?h[p.TILDELOOSE]:h[p.TILDE];return W.replace(I,(G,Q,ee,re,O)=>{d("tilde",W,G,Q,ee,re,O);let $;return M(Q)?$="":M(ee)?$=`>=${Q}.0.0 <${+Q+1}.0.0-0`:M(re)?$=`>=${Q}.${ee}.0 <${Q}.${+ee+1}.0-0`:O?(d("replaceTilde pr",O),$=`>=${Q}.${ee}.${re}-${O} <${Q}.${+ee+1}.0-0`):$=`>=${Q}.${ee}.${re} <${Q}.${+ee+1}.0-0`,d("tilde return",$),$})},B=(W,K)=>W.trim().split(/\s+/).map(I=>q(I,K)).join(" "),q=(W,K)=>{d("caret",W,K);const I=K.loose?h[p.CARETLOOSE]:h[p.CARET],G=K.includePrerelease?"-0":"";return W.replace(I,(Q,ee,re,O,$)=>{d("caret",W,Q,ee,re,O,$);let X;return M(ee)?X="":M(re)?X=`>=${ee}.0.0${G} <${+ee+1}.0.0-0`:M(O)?ee==="0"?X=`>=${ee}.${re}.0${G} <${ee}.${+re+1}.0-0`:X=`>=${ee}.${re}.0${G} <${+ee+1}.0.0-0`:$?(d("replaceCaret pr",$),ee==="0"?re==="0"?X=`>=${ee}.${re}.${O}-${$} <${ee}.${re}.${+O+1}-0`:X=`>=${ee}.${re}.${O}-${$} <${ee}.${+re+1}.0-0`:X=`>=${ee}.${re}.${O}-${$} <${+ee+1}.0.0-0`):(d("no pr"),ee==="0"?re==="0"?X=`>=${ee}.${re}.${O}${G} <${ee}.${re}.${+O+1}-0`:X=`>=${ee}.${re}.${O}${G} <${ee}.${+re+1}.0-0`:X=`>=${ee}.${re}.${O} <${+ee+1}.0.0-0`),d("caret return",X),X})},F=(W,K)=>(d("replaceXRanges",W,K),W.split(/\s+/).map(I=>le(I,K)).join(" ")),le=(W,K)=>{W=W.trim();const I=K.loose?h[p.XRANGELOOSE]:h[p.XRANGE];return W.replace(I,(G,Q,ee,re,O,$)=>{d("xRange",W,G,Q,ee,re,O,$);const X=M(ee),te=X||M(re),ue=te||M(O),be=ue;return Q==="="&&be&&(Q=""),$=K.includePrerelease?"-0":"",X?Q===">"||Q==="<"?G="<0.0.0-0":G="*":Q&&be?(te&&(re=0),O=0,Q===">"?(Q=">=",te?(ee=+ee+1,re=0,O=0):(re=+re+1,O=0)):Q==="<="&&(Q="<",te?ee=+ee+1:re=+re+1),Q==="<"&&($="-0"),G=`${Q+ee}.${re}.${O}${$}`):te?G=`>=${ee}.0.0${$} <${+ee+1}.0.0-0`:ue&&(G=`>=${ee}.${re}.0${$} <${ee}.${+re+1}.0-0`),d("xRange return",G),G})},he=(W,K)=>(d("replaceStars",W,K),W.trim().replace(h[p.STAR],"")),Ae=(W,K)=>(d("replaceGTE0",W,K),W.trim().replace(h[K.includePrerelease?p.GTE0PRE:p.GTE0],"")),Ue=W=>(K,I,G,Q,ee,re,O,$,X,te,ue,be)=>(M(G)?I="":M(Q)?I=`>=${G}.0.0${W?"-0":""}`:M(ee)?I=`>=${G}.${Q}.0${W?"-0":""}`:re?I=`>=${I}`:I=`>=${I}${W?"-0":""}`,M(X)?$="":M(te)?$=`<${+X+1}.0.0-0`:M(ue)?$=`<${X}.${+te+1}.0-0`:be?$=`<=${X}.${te}.${ue}-${be}`:W?$=`<${X}.${te}.${+ue+1}-0`:$=`<=${$}`,`${I} ${$}`.trim()),et=(W,K,I)=>{for(let G=0;G<W.length;G++)if(!W[G].test(K))return!1;if(K.prerelease.length&&!I.includePrerelease){for(let G=0;G<W.length;G++)if(d(W[G].semver),W[G].semver!==u.ANY&&W[G].semver.prerelease.length>0){const Q=W[G].semver;if(Q.major===K.major&&Q.minor===K.minor&&Q.patch===K.patch)return!0}return!1}return!0};return Lf}var Df,Wb;function Wc(){if(Wb)return Df;Wb=1;const n=Symbol("SemVer ANY");class r{static get ANY(){return n}constructor(g,v){if(v=a(v),g instanceof r){if(g.loose===!!v.loose)return g;g=g.value}g=g.trim().split(/\s+/).join(" "),d("comparator",g,v),this.options=v,this.loose=!!v.loose,this.parse(g),this.semver===n?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}parse(g){const v=this.options.loose?i[o.COMPARATORLOOSE]:i[o.COMPARATOR],b=g.match(v);if(!b)throw new TypeError(`Invalid comparator: ${g}`);this.operator=b[1]!==void 0?b[1]:"",this.operator==="="&&(this.operator=""),b[2]?this.semver=new m(b[2],this.options.loose):this.semver=n}toString(){return this.value}test(g){if(d("Comparator.test",g,this.options.loose),this.semver===n||g===n)return!0;if(typeof g=="string")try{g=new m(g,this.options)}catch{return!1}return u(g,this.operator,this.semver,this.options)}intersects(g,v){if(!(g instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new h(g.value,v).test(this.value):g.operator===""?g.value===""?!0:new h(this.value,v).test(g.semver):(v=a(v),v.includePrerelease&&(this.value==="<0.0.0-0"||g.value==="<0.0.0-0")||!v.includePrerelease&&(this.value.startsWith("<0.0.0")||g.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&g.operator.startsWith(">")||this.operator.startsWith("<")&&g.operator.startsWith("<")||this.semver.version===g.semver.version&&this.operator.includes("=")&&g.operator.includes("=")||u(this.semver,"<",g.semver,v)&&this.operator.startsWith(">")&&g.operator.startsWith("<")||u(this.semver,">",g.semver,v)&&this.operator.startsWith("<")&&g.operator.startsWith(">")))}}Df=r;const a=$m(),{safeRe:i,t:o}=$i(),u=YE(),d=Kc(),m=Ct(),h=Rn();return Df}var jf,e0;function eu(){if(e0)return jf;e0=1;const n=Rn();return jf=(a,i,o)=>{try{i=new n(i,o)}catch{return!1}return i.test(a)},jf}var Uf,t0;function nR(){if(t0)return Uf;t0=1;const n=Rn();return Uf=(a,i)=>new n(a,i).set.map(o=>o.map(u=>u.value).join(" ").trim().split(" ")),Uf}var $f,n0;function rR(){if(n0)return $f;n0=1;const n=Ct(),r=Rn();return $f=(i,o,u)=>{let d=null,m=null,h=null;try{h=new r(o,u)}catch{return null}return i.forEach(p=>{h.test(p)&&(!d||m.compare(p)===-1)&&(d=p,m=new n(d,u))}),d},$f}var Bf,r0;function aR(){if(r0)return Bf;r0=1;const n=Ct(),r=Rn();return Bf=(i,o,u)=>{let d=null,m=null,h=null;try{h=new r(o,u)}catch{return null}return i.forEach(p=>{h.test(p)&&(!d||m.compare(p)===1)&&(d=p,m=new n(d,u))}),d},Bf}var qf,a0;function sR(){if(a0)return qf;a0=1;const n=Ct(),r=Rn(),a=Jc();return qf=(o,u)=>{o=new r(o,u);let d=new n("0.0.0");if(o.test(d)||(d=new n("0.0.0-0"),o.test(d)))return d;d=null;for(let m=0;m<o.set.length;++m){const h=o.set[m];let p=null;h.forEach(g=>{const v=new n(g.semver.version);switch(g.operator){case">":v.prerelease.length===0?v.patch++:v.prerelease.push(0),v.raw=v.format();case"":case">=":(!p||a(v,p))&&(p=v);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${g.operator}`)}}),p&&(!d||a(d,p))&&(d=p)}return d&&o.test(d)?d:null},qf}var Pf,s0;function iR(){if(s0)return Pf;s0=1;const n=Rn();return Pf=(a,i)=>{try{return new n(a,i).range||"*"}catch{return null}},Pf}var Gf,i0;function Vm(){if(i0)return Gf;i0=1;const n=Ct(),r=Wc(),{ANY:a}=r,i=Rn(),o=eu(),u=Jc(),d=qm(),m=Gm(),h=Pm();return Gf=(g,v,b,T)=>{g=new n(g,T),v=new i(v,T);let w,E,A,_,R;switch(b){case">":w=u,E=m,A=d,_=">",R=">=";break;case"<":w=d,E=h,A=u,_="<",R="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(g,v,T))return!1;for(let M=0;M<v.set.length;++M){const N=v.set[M];let U=null,B=null;if(N.forEach(q=>{q.semver===a&&(q=new r(">=0.0.0")),U=U||q,B=B||q,w(q.semver,U.semver,T)?U=q:A(q.semver,B.semver,T)&&(B=q)}),U.operator===_||U.operator===R||(!B.operator||B.operator===_)&&E(g,B.semver))return!1;if(B.operator===R&&A(g,B.semver))return!1}return!0},Gf}var Vf,o0;function oR(){if(o0)return Vf;o0=1;const n=Vm();return Vf=(a,i,o)=>n(a,i,">",o),Vf}var Hf,c0;function cR(){if(c0)return Hf;c0=1;const n=Vm();return Hf=(a,i,o)=>n(a,i,"<",o),Hf}var Yf,u0;function uR(){if(u0)return Yf;u0=1;const n=Rn();return Yf=(a,i,o)=>(a=new n(a,o),i=new n(i,o),a.intersects(i,o)),Yf}var Zf,l0;function lR(){if(l0)return Zf;l0=1;const n=eu(),r=An();return Zf=(a,i,o)=>{const u=[];let d=null,m=null;const h=a.sort((b,T)=>r(b,T,o));for(const b of h)n(b,i,o)?(m=b,d||(d=b)):(m&&u.push([d,m]),m=null,d=null);d&&u.push([d,null]);const p=[];for(const[b,T]of u)b===T?p.push(b):!T&&b===h[0]?p.push("*"):T?b===h[0]?p.push(`<=${T}`):p.push(`${b} - ${T}`):p.push(`>=${b}`);const g=p.join(" || "),v=typeof i.raw=="string"?i.raw:String(i);return g.length<v.length?g:i},Zf}var Ff,d0;function dR(){if(d0)return Ff;d0=1;const n=Rn(),r=Wc(),{ANY:a}=r,i=eu(),o=An(),u=(v,b,T={})=>{if(v===b)return!0;v=new n(v,T),b=new n(b,T);let w=!1;e:for(const E of v.set){for(const A of b.set){const _=h(E,A,T);if(w=w||_!==null,_)continue e}if(w)return!1}return!0},d=[new r(">=0.0.0-0")],m=[new r(">=0.0.0")],h=(v,b,T)=>{if(v===b)return!0;if(v.length===1&&v[0].semver===a){if(b.length===1&&b[0].semver===a)return!0;T.includePrerelease?v=d:v=m}if(b.length===1&&b[0].semver===a){if(T.includePrerelease)return!0;b=m}const w=new Set;let E,A;for(const F of v)F.operator===">"||F.operator===">="?E=p(E,F,T):F.operator==="<"||F.operator==="<="?A=g(A,F,T):w.add(F.semver);if(w.size>1)return null;let _;if(E&&A){if(_=o(E.semver,A.semver,T),_>0)return null;if(_===0&&(E.operator!==">="||A.operator!=="<="))return null}for(const F of w){if(E&&!i(F,String(E),T)||A&&!i(F,String(A),T))return null;for(const le of b)if(!i(F,String(le),T))return!1;return!0}let R,M,N,U,B=A&&!T.includePrerelease&&A.semver.prerelease.length?A.semver:!1,q=E&&!T.includePrerelease&&E.semver.prerelease.length?E.semver:!1;B&&B.prerelease.length===1&&A.operator==="<"&&B.prerelease[0]===0&&(B=!1);for(const F of b){if(U=U||F.operator===">"||F.operator===">=",N=N||F.operator==="<"||F.operator==="<=",E){if(q&&F.semver.prerelease&&F.semver.prerelease.length&&F.semver.major===q.major&&F.semver.minor===q.minor&&F.semver.patch===q.patch&&(q=!1),F.operator===">"||F.operator===">="){if(R=p(E,F,T),R===F&&R!==E)return!1}else if(E.operator===">="&&!i(E.semver,String(F),T))return!1}if(A){if(B&&F.semver.prerelease&&F.semver.prerelease.length&&F.semver.major===B.major&&F.semver.minor===B.minor&&F.semver.patch===B.patch&&(B=!1),F.operator==="<"||F.operator==="<="){if(M=g(A,F,T),M===F&&M!==A)return!1}else if(A.operator==="<="&&!i(A.semver,String(F),T))return!1}if(!F.operator&&(A||E)&&_!==0)return!1}return!(E&&N&&!A&&_!==0||A&&U&&!E&&_!==0||q||B)},p=(v,b,T)=>{if(!v)return b;const w=o(v.semver,b.semver,T);return w>0?v:w<0||b.operator===">"&&v.operator===">="?b:v},g=(v,b,T)=>{if(!v)return b;const w=o(v.semver,b.semver,T);return w<0?v:w>0||b.operator==="<"&&v.operator==="<="?b:v};return Ff=u,Ff}var Xf,f0;function fR(){if(f0)return Xf;f0=1;const n=$i(),r=Qc(),a=Ct(),i=GE(),o=Es(),u=PA(),d=GA(),m=VA(),h=HA(),p=YA(),g=ZA(),v=FA(),b=XA(),T=An(),w=QA(),E=KA(),A=Bm(),_=JA(),R=WA(),M=Jc(),N=qm(),U=VE(),B=HE(),q=Pm(),F=Gm(),le=YE(),he=eR(),Ae=Wc(),Ue=Rn(),et=eu(),W=nR(),K=rR(),I=aR(),G=sR(),Q=iR(),ee=Vm(),re=oR(),O=cR(),$=uR(),X=lR(),te=dR();return Xf={parse:o,valid:u,clean:d,inc:m,diff:h,major:p,minor:g,patch:v,prerelease:b,compare:T,rcompare:w,compareLoose:E,compareBuild:A,sort:_,rsort:R,gt:M,lt:N,eq:U,neq:B,gte:q,lte:F,cmp:le,coerce:he,Comparator:Ae,Range:Ue,satisfies:et,toComparators:W,maxSatisfying:K,minSatisfying:I,minVersion:G,validRange:Q,outside:ee,gtr:re,ltr:O,intersects:$,simplifyRange:X,subset:te,SemVer:a,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:r.SEMVER_SPEC_VERSION,RELEASE_TYPES:r.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers},Xf}var mR=fR();const ds=$T(mR),hR=/^[A-Za-z0-9][-./:\w]{0,63}$/,pR=/^(?:@[a-z0-9][a-z0-9\-._]*\/)?[a-z0-9][a-z0-9\-._]*$/,gR=/\/{2,}/g,yR=new Set(["offline-catchup","research-daemon"]),ZE=n=>n.trim().toLowerCase(),vR=n=>n.trim().replace(gR,"/").toLowerCase(),bR=(n,r)=>{try{const[a]=Intl.getCanonicalLocales(n);return a||(r.addIssue({code:z.custom,message:"Unable to canonicalize locale code."}),gs)}catch(a){return r.addIssue({code:z.custom,message:a instanceof RangeError?"Locale code must follow BCP-47 syntax.":"Invalid locale code."}),gs}},ER=(n,r)=>{const a=ZE(n);return yR.has(a)?a:(r.addIssue({code:z.custom,message:`Unknown system automation target id "${n}".`}),gs)},SR=(n,r)=>{const a=ds.clean(n.trim());return a||(r.addIssue({code:z.custom,message:"Invalid semantic version."}),gs)},_R=(n,r)=>{const a=n.trim(),i=ds.validRange(a,{includePrerelease:!0});return i||(r.addIssue({code:z.custom,message:"Invalid semantic version range."}),gs)},tu=Oe().trim().min(1,{message:"Pack slug must contain at least one character."}).max(64,{message:"Pack slug must contain at most 64 characters."}).transform(vR).refine(n=>pR.test(n),{message:'Pack slug must match npm-style package syntax (optionally "@scope/name").'}).pipe(Oe().brand()),Vr=Oe().trim().min(2,{message:"Locale code must contain at least two characters."}).transform((n,r)=>bR(n,r)).pipe(Oe().brand()),Hm=n=>Oe().trim().min(1,{message:`${n} must contain at least one character.`}).max(64,{message:`${n} must contain at most 64 characters.`}).regex(hR,{message:`${n} must start with an alphanumeric character and may include "-", "_", ".", "/", or ":" thereafter.`}).transform(ZE).pipe(Oe().brand()),se=Hm("Content id"),Bi=Hm("Flag id"),qi=Hm("Script id"),FE=Oe().trim().min(1,{message:"System automation target id must contain at least one character."}).transform((n,r)=>ER(n,r)).pipe(Oe().brand()),TR=Oe().trim().min(1,{message:"Semantic versions must not be empty."}).transform((n,r)=>SR(n,r)).pipe(Oe().brand()),XE=Oe().trim().min(1,{message:"Semantic version ranges must not be empty."}).transform((n,r)=>_R(n,r)).pipe(Oe().brand()),wR=256,m0=512,QE={defaultVariantMismatch:"localization.defaultLocaleMismatch",missingVariant:"localization.missingVariant"},pm=n=>Oe().trim().min(1,{message:"Localized text must contain at least one character."}).max(n,{message:`Localized text must contain at most ${n} characters.`}),KE=n=>typeof globalThis.structuredClone=="function"?globalThis.structuredClone(n):JSON.parse(JSON.stringify(n)),kR=n=>{const r={};for(const[a,i]of Object.entries(n)){if(i===void 0)continue;const o=Vr.safeParse(a);if(!o.success){r[a]=i;continue}const u=o.data;u in r&&u!==a||(r[u]=i)}return r},JE=(n,r)=>{n&&n(r)},gm=pm(wR);jm(Vr,gm);const tn=Z({default:gm,variants:jm(Vr,gm).default({}).transform(n=>KE(n))}).strict(),nu=Z({default:pm(m0),variants:jm(Vr,pm(m0)).default({}).transform(n=>KE(n))}).strict(),OR=(n,r,a,i)=>{const o=n.variants[r];if(o===void 0){n.variants[r]=n.default;return}o!==n.default&&JE(a,{code:QE.defaultVariantMismatch,message:`Default locale "${r}" variant differs from the canonical default string.`,path:i,severity:"warning",suggestion:"Align the default variant with the canonical default string or suppress the variant if differences are intentional."})},AR=(n,r,a,i,o)=>{const u=new Set(r);u.delete(a);for(const d of u)d in n.variants||JE(i,{code:QE.missingVariant,message:`Missing localized string for locale "${d}".`,path:o,severity:"warning",suggestion:"Add a localized variant for the missing locale."})},ys=(n,r)=>{const{defaultLocale:a,supportedLocales:i=[],warningSink:o,path:u=[]}=r,d=Vr.parse(a),m=i.map(g=>Vr.parse(g)),h=kR(n.variants),p={...n,variants:h};return OR(p,d,o,u),AR(p,m,d,o,u),p},RR="Value must be a finite number.",CR="Value must be greater than or equal to 0.",h0="Value must be a positive integer greater than 0.",NR="Value must be between 0 and 1 inclusive.",WE=(n,r)=>Number.isFinite(n)?n:(r.addIssue({code:z.custom,message:RR}),gs),Ke=PE.number().transform((n,r)=>WE(n,r)),Ym=Ke.refine(n=>n>=0,{message:CR}),On=PE.number().transform((n,r)=>WE(n,r)).refine(Number.isInteger,{message:h0}).refine(n=>n>0,{message:h0});Ke.refine(n=>n>=0&&n<=1,{message:NR});Ke.refine(Number.isInteger,{message:"Value must be an integer."});const MR=["add","sub","mul","div","pow","min","max"],IR=["abs","ceil","floor","round","sqrt","log10","ln"],xR=["clamp","lerp","min3","max3","pow10","root"],la={clamp:3,lerp:3,min3:3,max3:3,pow10:1,root:2},p0=16,g0=256,y0=16,v0=256,zR=Z({type:ae("variable"),name:We(["level","time","deltaTime"])}).strict(),LR=Z({type:We(["resource","generator","upgrade","automation","prestigeLayer"]),id:se}).strict(),DR=Pt("type",[zR,LR]),jR=Z({kind:ae("literal"),value:Ke}).strict(),UR=n=>Pt("kind",[jR,Z({kind:ae("ref"),target:DR}).strict(),Z({kind:ae("binary"),op:We(MR),left:n,right:n}).strict(),Z({kind:ae("unary"),op:We(IR),operand:n}).strict(),Z({kind:ae("call"),name:We(xR),args:Ee(n)}).strict()]).superRefine((r,a)=>{if(r.kind!=="call")return;const i=la[r.name];r.args.length!==i&&a.addIssue({code:z.custom,message:`Function ${r.name} expects ${i} arguments, received ${r.args.length}.`,path:["args"]})}),eS=Um(()=>UR(eS)).superRefine((n,r)=>{ls(n)>p0&&r.addIssue({code:z.custom,message:`Expression depth exceeds maximum allowed depth (${p0}).`});const i=us(n);i>g0&&r.addIssue({code:z.custom,message:`Expression node count ${i} exceeds the maximum of ${g0}.`})}),$R=n=>Z({untilLevel:Ke.optional(),formula:n}).strict(),BR=n=>Pt("kind",[Z({kind:ae("constant"),value:Ke}).strict(),Z({kind:ae("linear"),base:Ke,slope:Ke}).strict(),Z({kind:ae("exponential"),base:Ke.default(1),growth:Ke,offset:Ke.optional()}).strict(),Z({kind:ae("polynomial"),coefficients:Ee(Ke,{invalid_type_error:"Polynomial coefficients must be numeric."}).min(1,{message:"Polynomial formulas require at least one coefficient."})}).strict(),Z({kind:ae("piecewise"),pieces:Ee($R(n)).min(1,{message:"Piecewise formulas require at least one piece."})}).strict(),Z({kind:ae("expression"),expression:eS}).strict()]),Ie=Um(()=>BR(Ie)).superRefine((n,r)=>{n.kind==="piecewise"&&qR(n.pieces,r);const a=tS(n);a>y0&&r.addIssue({code:z.custom,message:`Formula depth ${a} exceeds the maximum of ${y0}.`});const i=nS(n);i>v0&&r.addIssue({code:z.custom,message:`Formula node count ${i} exceeds the maximum of ${v0}.`})});function us(n){switch(n.kind){case"literal":case"ref":return 1;case"unary":return 1+us(n.operand);case"binary":return 1+us(n.left)+us(n.right);case"call":return 1+n.args.reduce((r,a)=>r+us(a),0);default:return 1}}function ls(n){switch(n.kind){case"literal":case"ref":return 1;case"unary":return 1+ls(n.operand);case"binary":return 1+Math.max(ls(n.left),ls(n.right));case"call":return 1+n.args.reduce((r,a)=>Math.max(r,ls(a)),0);default:return 1}}function tS(n){return n.kind==="piecewise"?1+n.pieces.reduce((r,a)=>Math.max(r,tS(a.formula)),0):n.kind==="expression"?ls(n.expression):1}function nS(n){return n.kind==="piecewise"?1+n.pieces.reduce((r,a)=>r+nS(a.formula),0):n.kind==="expression"?1+us(n.expression):1}function qR(n,r){let a=!1,i=Number.NEGATIVE_INFINITY;n.forEach((o,u)=>{if(u===n.length-1){a=o.untilLevel===void 0,a||r.addIssue({code:z.custom,path:["pieces",u,"untilLevel"],message:"Final piecewise segment must omit untilLevel to act as a catch-all."});return}if(o.untilLevel===void 0){r.addIssue({code:z.custom,path:["pieces",u,"untilLevel"],message:"Non-terminal piecewise segments must specify untilLevel."});return}o.untilLevel<=i&&r.addIssue({code:z.custom,path:["pieces",u,"untilLevel"],message:"Piecewise segments must declare strictly increasing untilLevel values."}),i=o.untilLevel}),a||r.addIssue({code:z.custom,path:["pieces"],message:"Piecewise formulas must terminate with a catch-all segment."})}const b0=16,E0=256,PR=["gte","gt","lte","lt"],S0=We(PR),GR=n=>Pt("kind",[Z({kind:ae("always")}).strict(),Z({kind:ae("never")}).strict(),Z({kind:ae("resourceThreshold"),resourceId:se,comparator:S0,amount:Ie}).strict(),Z({kind:ae("generatorLevel"),generatorId:se,comparator:S0,level:Ie}).strict(),Z({kind:ae("upgradeOwned"),upgradeId:se,requiredPurchases:On.default(1)}).strict(),Z({kind:ae("prestigeUnlocked"),prestigeLayerId:se}).strict(),Z({kind:ae("flag"),flagId:Bi}).strict(),Z({kind:ae("script"),scriptId:qi}).strict(),Z({kind:ae("allOf"),conditions:Ee(n).min(1,{message:"allOf conditions must include at least one nested condition."})}).strict(),Z({kind:ae("anyOf"),conditions:Ee(n).min(1,{message:"anyOf conditions must include at least one nested condition."})}).strict(),Z({kind:ae("not"),condition:n}).strict()]),ym=n=>{const r=n;switch(r.kind){case"allOf":case"anyOf":return 1+(Array.isArray(r.conditions)?r.conditions.reduce((a,i)=>a+ym(i),0):0);case"not":return 1+ym(r.condition);default:return 1}},vm=n=>{const r=n;switch(r.kind){case"allOf":case"anyOf":return 1+(Array.isArray(r.conditions)?r.conditions.reduce((a,i)=>Math.max(a,vm(i)),0):0);case"not":return 1+vm(r.condition);default:return 1}},bt=Um(()=>GR(bt)).superRefine((n,r)=>{const a=vm(n);a>b0&&r.addIssue({code:z.custom,message:`Condition depth ${a} exceeds the maximum of ${b0}.`});const i=ym(n);i>E0&&r.addIssue({code:z.custom,message:`Condition node count ${i} exceeds the maximum of ${E0}.`})}),_0=128,T0=24,Oi=Object.freeze({kind:"constant",value:1}),VR=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(T0,{message:`Tags must contain at most ${T0} characters.`}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),HR=We(["gte","gt","lte","lt"]).default("gte"),YR=Pt("kind",[Z({kind:ae("resource"),resourceId:se,threshold:Ie,comparator:HR}).strict(),Z({kind:ae("generator-level"),generatorId:se,level:Ie}).strict(),Z({kind:ae("upgrade-owned"),upgradeId:se,purchases:Ie.optional()}).strict(),Z({kind:ae("flag"),flagId:Bi}).strict(),Z({kind:ae("script"),scriptId:qi}).strict(),Z({kind:ae("custom-metric"),metricId:se,threshold:Ie}).strict()]),ZR=Z({resetWindow:Ie,maxRepeats:On.optional(),rewardScaling:Ie.default(Oi)}).strict(),FR=Z({target:Ie.optional(),mode:We(["oneShot","incremental","repeatable"]).default("oneShot"),repeatable:ZR.optional()}).strict().default({mode:"oneShot"}),XR=Pt("kind",[Z({kind:ae("grantResource"),resourceId:se,amount:Ie}).strict(),Z({kind:ae("grantUpgrade"),upgradeId:se}).strict(),Z({kind:ae("grantGuildPerk"),perkId:se}).strict(),Z({kind:ae("emitEvent"),eventId:se}).strict(),Z({kind:ae("unlockAutomation"),automationId:se}).strict(),Z({kind:ae("grantFlag"),flagId:Bi,value:Li().default(!0)}).strict()]),QR=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),KR=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),JR=(n,r)=>{const a=n.displayOrder===void 0?Number.POSITIVE_INFINITY:n.displayOrder,i=r.displayOrder===void 0?Number.POSITIVE_INFINITY:r.displayOrder;return a!==i?a-i:n.id.localeCompare(r.id)},w0=({progress:n,track:r})=>{if(n.target)return n.target;switch(r.kind){case"resource":return r.threshold;case"generator-level":return r.level;case"upgrade-owned":return r.purchases??Oi;case"custom-metric":return r.threshold;case"flag":case"script":return Oi;default:return Oi}},WR=(n,r)=>{if(n.mode==="repeatable"){if(!n.repeatable){r.addIssue({code:z.custom,path:["progress","repeatable"],message:"Repeatable achievements must define repeatable progress configuration."});return}}else n.repeatable&&r.addIssue({code:z.custom,path:["progress","repeatable"],message:'Repeatable configuration is only valid when progress mode is "repeatable".'})},eC=(n,r)=>{n.kind==="constant"&&n.value<=0&&r.addIssue({code:z.custom,path:["progress","target"],message:"Achievement progress targets must be greater than 0."})},rS=Z({id:se,name:tn,description:nu,category:We(["progression","prestige","automation","social","collection"]),tier:We(["bronze","silver","gold","platinum"]),icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(_0,{message:`Icon paths must contain at most ${_0} characters.`}).optional(),tags:Ee(VR).default([]),track:YR,progress:FR,reward:XR.optional(),unlockCondition:bt.optional(),visibilityCondition:bt.optional(),onUnlockEvents:Ee(se).default([]),displayOrder:Ke.optional()}).strict().superRefine((n,r)=>{WR(n.progress,r);const a=w0({progress:n.progress,track:n.track});eC(a,r)}).transform(n=>{const r=w0({progress:n.progress,track:n.track});let a;if(n.progress.mode==="repeatable"){const i=n.progress.repeatable;a={...i,rewardScaling:i.rewardScaling??Oi}}return{...n,tags:QR(n.tags),progress:{target:r,mode:n.progress.mode,repeatable:a},onUnlockEvents:KR(n.onUnlockEvents)}}),tC=Ee(rS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate achievement id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>JR(r,a)))),nC=We(["gte","gt","lte","lt"]),rC=Z({resourceId:se,rate:Ie}).strict(),aC=Pt("kind",[Z({kind:ae("interval"),interval:Ie}).strict(),Z({kind:ae("resourceThreshold"),resourceId:se,comparator:nC.default("gte"),threshold:Ie}).strict(),Z({kind:ae("commandQueueEmpty")}).strict(),Z({kind:ae("event"),eventId:se}).strict()]),aS=Z({id:se,name:tn,description:tn,targetType:We(["generator","upgrade","system"]),targetId:se.optional(),systemTargetId:FE.optional(),trigger:aC,cooldown:Ke.optional(),resourceCost:rC.optional(),unlockCondition:bt,enabledByDefault:Li().default(!1),order:Ke.optional(),scriptId:qi.optional()}).strict().superRefine((n,r)=>{n.targetType==="system"?(n.systemTargetId||r.addIssue({code:z.custom,path:["systemTargetId"],message:"System automations must declare a systemTargetId."}),n.targetId!==void 0&&r.addIssue({code:z.custom,path:["targetId"],message:"System automations must not declare a targetId."})):(n.targetId||r.addIssue({code:z.custom,path:["targetId"],message:`Automations targeting ${n.targetType}s must provide a targetId.`}),n.systemTargetId!==void 0&&r.addIssue({code:z.custom,path:["systemTargetId"],message:"Only system automations may declare a systemTargetId."}))}),sC=Ee(aS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate automation id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),iC=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(24,{message:"Tags must contain at most 24 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),Ac=We(["add","multiply","set"]),oC=Pt("kind",[Z({kind:ae("resource"),id:se}).strict(),Z({kind:ae("generator"),id:se}).strict(),Z({kind:ae("automation"),id:se}).strict(),Z({kind:ae("prestigeLayer"),id:se}).strict(),Z({kind:ae("guildPerk"),id:se}).strict(),Z({kind:ae("global")}).strict()]),cC=Z({currencyId:se,baseCost:Ym,costCurve:Ie,maxBulk:On.optional()}).strict(),sS=Pt("kind",[Z({kind:ae("modifyResourceRate"),resourceId:se,operation:Ac,value:Ie}).strict(),Z({kind:ae("modifyGeneratorRate"),generatorId:se,operation:Ac,value:Ie}).strict(),Z({kind:ae("modifyGeneratorCost"),generatorId:se,operation:Ac,value:Ie}).strict(),Z({kind:ae("grantAutomation"),automationId:se}).strict(),Z({kind:ae("grantFlag"),flagId:Bi,value:Li().default(!0)}).strict(),Z({kind:ae("unlockResource"),resourceId:se}).strict(),Z({kind:ae("unlockGenerator"),generatorId:se}).strict(),Z({kind:ae("alterDirtyTolerance"),resourceId:se,operation:Ac,value:Ie}).strict(),Z({kind:ae("emitEvent"),eventId:se}).strict()]),uC=Xc([bt,se]).transform(n=>typeof n=="string"?{kind:"upgradeOwned",upgradeId:n,requiredPurchases:1}:n),lC=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),dC=(n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=i.kind==="global"?"global":`${i.kind}:${i.id}`,d=a.get(u);if(d!==void 0){r.addIssue({code:z.custom,path:["targets",o],message:`Duplicate upgrade target "${u}" also declared at index ${d}.`});return}a.set(u,o)})},fC=(n,r)=>{const a=n.order===void 0?Number.POSITIVE_INFINITY:n.order,i=r.order===void 0?Number.POSITIVE_INFINITY:r.order;return a!==i?a-i:n.id.localeCompare(r.id)},iS=Z({id:se,name:tn,icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(128,{message:"Icon paths must contain at most 128 characters."}).optional(),tags:Ee(iC).default([]),category:We(["global","resource","generator","automation","prestige","guild"]),targets:Ee(oC).min(1,{message:"Upgrades must target at least one entity."}),cost:cC,repeatable:Z({maxPurchases:On.optional(),costCurve:Ie.optional(),effectCurve:Ie.optional()}).strict().optional(),prerequisites:Ee(uC).default([]),order:Ke.optional(),effects:Ee(sS).min(1,{message:"Upgrades must declare at least one effect."}),unlockCondition:bt.optional(),visibilityCondition:bt.optional()}).strict().superRefine((n,r)=>{if(dC(n.targets,r),n.repeatable){const{repeatable:i}=n;i.maxPurchases===void 0&&i.costCurve===void 0&&i.effectCurve===void 0&&r.addIssue({code:z.custom,path:["repeatable"],message:"Repeatable upgrades must declare at least one progression parameter."})}const a=new Map;n.effects.forEach((i,o)=>{const u=i.kind==="grantFlag"?`grantFlag:${i.flagId}`:i.kind==="grantAutomation"?`grantAutomation:${i.automationId}`:i.kind==="emitEvent"?`emitEvent:${i.eventId}`:void 0;if(u){const d=a.get(u);d!==void 0?r.addIssue({code:z.custom,path:["effects",o],message:`Duplicate effect "${u}" also declared at index ${d}.`}):a.set(u,o)}})}).transform(n=>({...n,tags:lC(n.tags),targets:Object.freeze([...n.targets]),effects:Object.freeze([...n.effects]),prerequisites:Object.freeze([...n.prerequisites])})),mC=Ee(iS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);u!==void 0?r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate upgrade id "${i.id}" also defined at index ${u}.`}):a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>fC(r,a)))),oS=sS,hC=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(24,{message:"Tags must contain at most 24 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),pC=Z({resourceId:se,rate:Ie}).strict(),gC=Z({resourceId:se,rate:Ie}).strict(),k0=(n,r,a)=>{const i=new Map;n.forEach((o,u)=>{const d=i.get(o.resourceId);if(d!==void 0){r.addIssue({code:z.custom,path:[...a,u,"resourceId"],message:`Duplicate resource reference "${o.resourceId}" also declared at index ${d}.`});return}i.set(o.resourceId,u)})},yC=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),vC=Z({currencyId:se,baseCost:Ym,costCurve:Ie,maxBulk:On.optional()}).strict(),bC=(n,r)=>{const a=n.order===void 0?Number.POSITIVE_INFINITY:n.order,i=r.order===void 0?Number.POSITIVE_INFINITY:r.order;return a!==i?a-i:n.id.localeCompare(r.id)},cS=Z({id:se,name:tn,icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(128,{message:"Icon paths must contain at most 128 characters."}).optional(),tags:Ee(hC).default([]),produces:Ee(pC).min(1,{message:"Generators must produce at least one resource."}),consumes:Ee(gC).default([]),purchase:vC,maxLevel:On.optional(),order:Ke.optional(),baseUnlock:bt,visibilityCondition:bt.optional(),automation:Z({automationId:se}).strict().optional(),effects:Ee(oS).default([])}).strict().superRefine((n,r)=>{k0(n.produces,r,["produces"]),k0(n.consumes,r,["consumes"]);const{maxLevel:a,purchase:i}=n;i.maxBulk!==void 0&&a!==void 0&&i.maxBulk>a&&r.addIssue({code:z.custom,path:["purchase","maxBulk"],message:"Bulk purchase limit cannot exceed generator max level."})}).transform(n=>({...n,tags:yC(n.tags),consumes:Object.freeze([...n.consumes]),produces:Object.freeze([...n.produces]),effects:Object.freeze([...n.effects])})),EC=Ee(cS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);u!==void 0?r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate generator id "${i.id}" also defined at index ${u}.`}):a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>bC(r,a)))),SC=Pt("kind",[Z({kind:ae("modifyGuildStorage"),storageId:se,operation:We(["add","multiply","set"]),value:Ie}).strict(),Z({kind:ae("unlockGuildAutomation"),automationId:se}).strict()]),_C=Xc([oS,SC]),TC=Pt("kind",[Z({kind:ae("currency"),resourceId:se,amount:Ie}).strict(),Z({kind:ae("metric"),metricId:se,amount:Ie}).strict()]),wC=Z({id:se,name:tn,description:tn,category:We(["buff","utility","cosmetic"]),maxRank:On,effects:Ee(_C).min(1,{message:"Guild perks must define at least one effect."}),cost:TC,unlockCondition:bt.optional(),order:Ke.optional(),visibilityCondition:bt.optional()}).strict().transform(n=>({...n,effects:Object.freeze([...n.effects])})),kC=Ee(wC).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate guild perk id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),O0=160,Zm=n=>(r,a,i)=>{const o=new Map;r.forEach((u,d)=>{const m=o.get(u.packId);if(m!==void 0){a.addIssue({code:z.custom,path:[...i,d],message:`${n} entry for pack "${u.packId}" duplicates index ${m}.`});return}o.set(u.packId,d)})},A0=Z({packId:tu,version:XE.optional()}).strict(),OC=Z({packId:tu,message:Oe().trim().min(1,{message:"Conflict message must contain at least one character."}).max(O0,{message:`Conflict message must contain at most ${O0} characters.`}).optional()}).strict(),AC=se.describe("Capability identifiers mirror content id grammar for deterministic casing."),R0=n=>[...n].sort((r,a)=>{const i=r.packId.localeCompare(a.packId);if(i!==0)return i;const o=r.version??"",u=a.version??"";return o.localeCompare(u)}),RC=n=>Array.from(new Set(n)).sort((a,i)=>a.localeCompare(i)),CC=n=>[...n].sort((r,a)=>{const i=r.packId.localeCompare(a.packId);if(i!==0)return i;const o=r.message??"",u=a.message??"";return o.localeCompare(u)}),NC=Zm("requires"),MC=Zm("optional"),IC=Zm("conflict"),xC=Z({requires:Ee(A0).default([]),optional:Ee(A0).default([]),conflicts:Ee(OC).default([]),provides:Ee(AC).default([])}).strict().superRefine((n,r)=>{NC(n.requires,r,["requires"]),MC(n.optional,r,["optional"]),IC(n.conflicts,r,["conflicts"])}).transform(n=>({requires:Object.freeze(R0(n.requires)),optional:Object.freeze(R0(n.optional)),conflicts:Object.freeze(CC(n.conflicts)),provides:Object.freeze(RC(n.provides))})),C0=64,N0=24,M0=48,I0=32,zC=Oe().trim().min(1,{message:"Author names must contain at least one character."}).max(C0,{message:`Author names must contain at most ${C0} characters.`}),LC=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(N0,{message:`Tags must contain at most ${N0} characters.`}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),x0=Oe().trim().min(1,{message:"ISO date fields must not be empty."}).refine(n=>!Number.isNaN(Date.parse(n)),{message:"Date must follow ISO-8601 format."}),DC=Oe().trim().min(1,{message:"Link kind must contain at least one character."}).max(I0,{message:`Link kind must contain at most ${I0} characters.`}).regex(/^[a-z][a-z0-9-]*$/i,{message:'Link kind must be a slug (letters, numbers, and "-").'}).transform(n=>n.toLowerCase()),jC=Oe().trim().min(1,{message:"Link label must contain at least one character."}).max(M0,{message:`Link label must contain at most ${M0} characters.`}),UC=Z({kind:DC,label:jC,href:Oe().trim().url({message:"Links must provide a valid URL."})}).strict(),$C=n=>[...n].sort((r,a)=>r.localeCompare(a,void 0,{sensitivity:"base"})),ru=(n,r)=>{const a=new Set,i=[];for(const o of n){const u=r(o);a.has(u)||(a.add(u),i.push(o))}return i},BC=n=>[...n].sort((r,a)=>r.localeCompare(a,void 0,{numeric:!0})),qC=n=>Object.freeze($C(ru(n,r=>r.toLowerCase()))),PC=n=>Object.freeze(ru(n,r=>r).sort((r,a)=>r.localeCompare(a))),GC=n=>Object.freeze(BC(ru(n,r=>r))),VC=n=>Object.freeze(ru(n,r=>r.href).sort((r,a)=>{const i=r.kind.localeCompare(a.kind);return i!==0?i:r.label.localeCompare(a.label)})),HC=(n,r,a)=>ys(n,{defaultLocale:r,supportedLocales:a,path:["title"]}),YC=(n,r,a)=>n?ys(n,{defaultLocale:r,supportedLocales:a,path:["summary"]}):void 0,ZC=(n,r)=>{const a=new Set(n.supportedLocales),i=n.defaultLocale;a.has(i)||r.addIssue({code:z.custom,path:["supportedLocales"],message:`Supported locales must include default locale "${i}".`})},FC=(n,r)=>{const a=n.dependencies;if(!a)return;const i=n.id,{requires:o=[],optional:u=[],conflicts:d=[]}=a;[...o.filter(h=>h.packId===i).map(()=>"requires"),...u.filter(h=>h.packId===i).map(()=>"optional"),...d.filter(h=>h.packId===i).map(()=>"conflicts")].forEach(h=>{r.addIssue({code:z.custom,path:["dependencies",h],message:`Pack "${i}" cannot declare a ${h} dependency on itself.`})})},XC=Z({id:tu,title:tn,summary:nu.optional(),version:TR,engine:XE,authors:Ee(zC).default([]),defaultLocale:Vr,supportedLocales:Ee(Vr).min(1,{message:"Supported locales must include at least one locale."}),tags:Ee(LC).default([]),links:Ee(UC).default([]),createdAt:x0.optional(),updatedAt:x0.optional(),visibility:We(["public","private","experimental"]).optional(),dependencies:xC.optional()}).strict().superRefine((n,r)=>{ZC(n,r),FC(n,r)}),QC=XC.transform(n=>{const r=GC(n.supportedLocales),a=HC(n.title,n.defaultLocale,r),i=YC(n.summary,n.defaultLocale,r);return{...n,title:a,summary:i,authors:qC(n.authors),supportedLocales:r,tags:PC(n.tags),links:VC(n.links)}}),z0=16,L0=3,D0=32,KC=/^[\x20-\x7E]*$/,JC=/^[a-z0-9][a-z0-9/_:-]*$/i,WC=Oe().trim().min(1,{message:"Metric attribute keys must contain at least one character."}).max(z0,{message:`Metric attribute keys must contain at most ${z0} characters.`}).regex(JC,{message:'Metric attribute keys must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),eN=Pt("kind",[Z({kind:ae("runtime")}).strict(),Z({kind:ae("script"),scriptId:qi}).strict(),Z({kind:ae("content")}).strict()]),tN=Oe().trim().max(D0,{message:`Metric units must contain at most ${D0} characters.`}).regex(KC,{message:"Metric units must contain printable ASCII characters."}).transform(n=>n.length===0?"1":n).default("1"),nN=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),rN=(n,r)=>{const a=n.order===void 0?Number.POSITIVE_INFINITY:n.order,i=r.order===void 0?Number.POSITIVE_INFINITY:r.order;return a!==i?a-i:n.id.localeCompare(r.id)},aN=Z({id:se,name:tn,description:nu.optional(),kind:We(["counter","gauge","histogram","upDownCounter"]),unit:tN,aggregation:We(["sum","delta","cumulative","distribution"]).optional(),attributes:Ee(WC).default([]),source:eN,order:Ke.optional()}).strict().superRefine((n,r)=>{n.kind==="histogram"&&n.aggregation===void 0&&r.addIssue({code:z.custom,path:["aggregation"],message:"Histogram metrics must declare an aggregation strategy."}),n.attributes.length>L0&&r.addIssue({code:z.custom,path:["attributes"],message:`Metrics may declare at most ${L0} attribute keys to preserve low-cardinality instrumentation.`})}).transform(n=>({...n,attributes:nN(n.attributes)})),sN=Ee(aN).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate metric id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>rN(r,a)))),j0=128,iN=Pt("kind",[Z({kind:ae("resource"),resourceId:se,amount:Ie.optional()}).strict(),Z({kind:ae("upgrade"),upgradeId:se}).strict()]),oN=Z({resourceId:se,baseReward:Ie,multiplierCurve:Ie.optional()}).strict(),cN=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),uS=Z({id:se,name:tn,icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(j0,{message:`Icon paths must contain at most ${j0} characters.`}).optional(),summary:tn,resetTargets:Ee(se).min(1,{message:"Prestige layers must reset at least one resource."}),unlockCondition:bt,reward:oN,retention:Ee(iN).default([]),automation:Z({automationId:se}).strict().optional(),order:Ke.optional()}).strict().transform(n=>({...n,resetTargets:cN(n.resetTargets),retention:Object.freeze([...n.retention])})),uN=Ee(uS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate prestige layer id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),U0=1e-9,$0=.5,lN=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(24,{message:"Tags must contain at most 24 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),dN=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),fN=(n,r)=>{const a=n.order===void 0?Number.POSITIVE_INFINITY:n.order,i=r.order===void 0?Number.POSITIVE_INFINITY:r.order;return a!==i?a-i:n.id.localeCompare(r.id)},lS=Z({id:se,name:tn,category:We(["primary","prestige","automation","currency","misc"]),economyClassification:We(["hard","soft"]).default("soft"),tier:On,icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(128,{message:"Icon paths must contain at most 128 characters."}).optional(),startAmount:Ym.default(0),capacity:Xc([qA().finite({message:"Capacity must be a finite number."}).refine(n=>n>=0,{message:"Capacity must be greater than or equal to 0."}),ae(null)]).default(null),visible:Li().default(!0),unlocked:Li().default(!1),dirtyTolerance:Ke.refine(n=>n>=U0,{message:`Dirty tolerance must be at least ${U0}.`}).refine(n=>n<=$0,{message:`Dirty tolerance must be at most ${$0}.`}).optional(),order:Ke.optional(),unlockCondition:bt.optional(),visibilityCondition:bt.optional(),prestige:Z({layerId:se,resetRetention:Ie.optional()}).strict().optional(),tags:Ee(lN).default([])}).strict().superRefine((n,r)=>{n.capacity!==null&&n.capacity<n.startAmount&&r.addIssue({code:z.custom,path:["capacity"],message:"Initial resource amount cannot exceed capacity."})}).transform(n=>({...n,tags:dN(n.tags)})),mN=Ee(lS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);u!==void 0?r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate resource id "${i.id}" also defined at index ${u}.`}):a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>fN(r,a)))),dS=n=>n.trim().toLowerCase(),hN=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(32,{message:"Tags must contain at most 32 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>dS(n)),pN=Oe().trim().min(1,{message:"Namespace must contain at least one character."}).max(32,{message:"Namespace must contain at most 32 characters."}).regex(/^[a-z0-9](?:[a-z0-9_-]*[a-z0-9])?$/i,{message:'Namespace must start and end with an alphanumeric character and may include "-", "_" in between.'}).transform(n=>n.toLowerCase()),gN=Oe().trim().min(1,{message:"Name must contain at least one character."}).max(48,{message:"Name must contain at most 48 characters."}).regex(/^[a-z0-9](?:[a-z0-9_-]*[a-z0-9])?$/i,{message:'Name must start and end with an alphanumeric character and may include "-", "_" in between.'}).transform(n=>n.toLowerCase()),yN=n=>n.replace(/\\/g,"/").replace(/\/{2,}/g,"/"),B0=Oe().trim().min(1,{message:"Schema path must not be empty."}).max(256,{message:"Schema path must contain at most 256 characters."}).transform(n=>yN(n)).superRefine((n,r)=>{if(n.startsWith("/")||n.startsWith("~")||n.startsWith("./")&&n==="./"||n==="."){r.addIssue({code:z.custom,message:"Schema path must be pack-relative and must not be absolute."});return}if(/^[a-zA-Z]:/.test(n)||n.startsWith("\\\\")){r.addIssue({code:z.custom,message:"Schema path must not use absolute drive references."});return}n.split("/").some(i=>i==="..")&&r.addIssue({code:z.custom,message:"Schema path must not traverse parent directories."})}),vN=Pt("kind",[Z({kind:ae("zod"),schemaPath:B0}).strict(),Z({kind:ae("json-schema"),schemaPath:B0}).strict()]),bN=Z({source:We(["achievement","upgrade","transform","script"]),id:se}).strict(),EN=n=>{const r=new Set,a=[];for(const i of n)r.has(i)||(r.add(i),a.push(i));return a.sort((i,o)=>i.localeCompare(o)),Object.freeze(a)},SN=(n,r)=>{const a=`${n.namespace}:${n.name}`,i=se.safeParse(a);return i.success?i.data:(i.error.issues.forEach(o=>{r.addIssue({...o,path:["namespace"]})}),null)},_N=Z({id:Oe().trim().min(1,{message:"Id must contain at least one character."}).max(128,{message:"Id must contain at most 128 characters."}).optional(),namespace:pN,name:gN,version:On,payload:vN,emits:Ee(bN).optional(),tags:Ee(hN).optional()}).strict().superRefine((n,r)=>{const a=SN(n,r);a&&n.id!==void 0&&n.id.trim().toLowerCase()!==a&&r.addIssue({code:z.custom,message:`Runtime event id must match the canonical namespace:name form "${a}".`,path:["id"]})}).transform(n=>{const r=se.parse(`${n.namespace}:${n.name}`),a=n.emits?Object.freeze(n.emits.map(u=>Object.freeze({source:u.source,id:u.id}))):Object.freeze([]),i=n.tags?EN(n.tags.map(u=>dS(u))):Object.freeze([]),o=n.payload.kind==="zod"?Object.freeze({kind:n.payload.kind,schemaPath:n.payload.schemaPath}):Object.freeze({kind:n.payload.kind,schemaPath:n.payload.schemaPath});return Object.freeze({id:r,namespace:n.namespace,name:n.name,version:n.version,payload:o,emits:a,tags:i})}),TN=Ee(_N).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate runtime event id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),wN=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(24,{message:"Tags must contain at most 24 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}),q0=Z({resourceId:se,amount:Ie}).strict(),kN=n=>Object.freeze([...new Set(n.map(r=>r.toLowerCase()))].sort((r,a)=>r.localeCompare(a))),ON=Z({id:se,name:tn,description:nu,mode:We(["instant","continuous","batch"]),inputs:Ee(q0).min(1,{message:"Transforms must consume at least one resource."}),outputs:Ee(q0).min(1,{message:"Transforms must produce at least one resource."}),duration:Ie.optional(),cooldown:Ie.optional(),trigger:Xc([Z({kind:ae("manual")}).strict(),Z({kind:ae("automation"),automationId:se}).strict(),Z({kind:ae("condition"),condition:bt}).strict(),Z({kind:ae("event"),eventId:se}).strict()]),unlockCondition:bt.optional(),visibilityCondition:bt.optional(),automation:Z({automationId:se}).strict().optional(),tags:Ee(wN).default([]),safety:Z({maxRunsPerTick:On.optional(),maxOutstandingBatches:On.optional()}).strict().optional(),order:Ke.optional()}).strict().superRefine((n,r)=>{if(n.mode==="batch"&&n.duration===void 0&&r.addIssue({code:z.custom,path:["duration"],message:"Batch transforms must declare a duration."}),n.trigger.kind==="automation"){if(!n.automation){r.addIssue({code:z.custom,path:["automation"],message:"Automation-triggered transforms must declare a matching automation reference."});return}n.automation.automationId!==n.trigger.automationId&&r.addIssue({code:z.custom,path:["automation","automationId"],message:"Automation id must match the trigger automation id."})}}).transform(n=>({...n,tags:kN(n.tags),inputs:Object.freeze([...n.inputs]),outputs:Object.freeze([...n.outputs])})),AN=Ee(ON).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate transform id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),kn=(n,r={})=>{switch(n.kind){case"constant":return n.value;case"linear":{const a=wi({type:"variable",name:"level"},r);return n.base+n.slope*a}case"exponential":{const a=wi({type:"variable",name:"level"},r),i=n.offset??0;return n.base*Math.pow(n.growth,a)+i}case"polynomial":{const a=wi({type:"variable",name:"level"},r);return n.coefficients.reduce((i,o,u)=>i+o*Math.pow(a,u),0)}case"piecewise":{const a=wi({type:"variable",name:"level"},r),i=MN(n.pieces,a);return kn(i.formula,r)}case"expression":return Di(n.expression,r);default:return Pi(n)}},Di=(n,r={})=>{switch(n.kind){case"literal":return n.value;case"ref":return wi(n.target,r);case"binary":return RN(n.op,n.left,n.right,r);case"unary":return CN(n.op,n.operand,r);case"call":return NN(n.name,n.args,r);default:return Pi(n)}},RN=(n,r,a,i)=>{const o=Di(r,i),u=Di(a,i);switch(n){case"add":return o+u;case"sub":return o-u;case"mul":return o*u;case"div":return o/u;case"pow":return Math.pow(o,u);case"min":return Math.min(o,u);case"max":return Math.max(o,u);default:return Pi(n)}},CN=(n,r,a)=>{const i=Di(r,a);switch(n){case"abs":return Math.abs(i);case"ceil":return Math.ceil(i);case"floor":return Math.floor(i);case"round":return Math.round(i);case"sqrt":return Math.sqrt(i);case"log10":return Math.log10(i);case"ln":return Math.log(i);default:return Pi(n)}},NN=(n,r,a)=>{switch(n){case"clamp":{const[i,o,u]=os(r,la.clamp,a),d=Math.min(o,u),m=Math.max(o,u);return Math.min(Math.max(i,d),m)}case"lerp":{const[i,o,u]=os(r,la.lerp,a);return i+(o-i)*u}case"min3":{const[i,o,u]=os(r,la.min3,a);return Math.min(i,o,u)}case"max3":{const[i,o,u]=os(r,la.max3,a);return Math.max(i,o,u)}case"pow10":{const[i]=os(r,la.pow10,a);return Math.pow(10,i)}case"root":{const[i,o]=os(r,la.root,a);return Math.pow(i,1/o)}default:return Pi(n)}},os=(n,r,a)=>{if(n.length!==r)throw new Error(`Function expects ${r} arguments, received ${n.length}.`);return n.map(i=>Di(i,a))},MN=(n,r)=>{for(const a of n)if(a.untilLevel===void 0||r<a.untilLevel)return a;return n[n.length-1]},wi=(n,r)=>{const a=r.getReferenceValue?.(n);return a!==void 0?a:n.type==="variable"?IN(n,r):xN(n,r)},IN=(n,r)=>{const a=r.variables?.[n.name];if(a===void 0)throw new Error(`Missing variable "${n.name}" in formula evaluation context.`);return a},xN=(n,r)=>{const a=r.entities?.[n.type];if(!a)throw new Error(`Missing entity lookup for type "${n.type}" while resolving "${n.id}".`);const i=zN(a,n.id);if(i===void 0)throw new Error(`Missing entity value for type "${n.type}" with id "${n.id}".`);return i},zN=(n,r)=>{if(typeof n=="function")return n(r);if(n instanceof Map)return n.get(r);if(LN(n))return Object.prototype.hasOwnProperty.call(n,r)?n[r]:void 0},LN=n=>typeof n=="object"&&n!==null&&!(n instanceof Map),Pi=n=>{throw new Error(`Unhandled value: ${String(n)}`)},DN=100,jN=20,fs=1e-9,Fm=(n,r)=>{const a=r===void 0?n:Math.min(n,r),i=[];for(let o=0;o<=a;o+=1)i.push(o);return i},UN=n=>({variables:{level:n,time:0,deltaTime:1},entities:{resource:()=>0,generator:()=>0,upgrade:()=>0,automation:()=>0,prestigeLayer:()=>0}}),vs=(n,r)=>{try{return{ok:!0,value:kn(n,UN(r))}}catch(a){return{ok:!1,error:a}}},Je=(n,r,a,i)=>{i?.(n),n.severity==="warning"?r.push(n):a.push(n)},$N=(n,r,a,i,o,u)=>{const d=(m,h,p)=>{for(const g of a){const v=vs(m,g);if(!v.ok){Je({code:"balance.rate.evaluationFailed",message:`Formula evaluation failed for "${p}" at level ${g} in generator "${n.id}".`,path:h,severity:"error",suggestion:"Ensure referenced variables/entities are available and formulas avoid invalid operations."},i,o,u);return}const b=v.value;if(!Number.isFinite(b)){Je({code:"balance.rate.nonFinite",message:`Rate for "${p}" in generator "${n.id}" is non-finite at level ${g}.`,path:h,severity:"error"},i,o,u);return}if(b<0){Je({code:"balance.rate.negative",message:`Rate for "${p}" in generator "${n.id}" is negative at level ${g}.`,path:h,severity:"error"},i,o,u);return}}};n.produces.forEach((m,h)=>d(m.rate,["generators",r,"produces",h,"rate"],m.resourceId)),n.consumes.forEach((m,h)=>d(m.rate,["generators",r,"consumes",h,"rate"],m.resourceId))},fS=(n,r,a,i,o)=>{if(n.values.length<=1)return;let u=n.values[0]??0;n.values.slice(1).forEach((d,m)=>{const h=m+1;d+fs<u&&Je({code:"balance.cost.nonMonotonic",message:`Cost for ${n.kind} "${n.entityId}" decreases between purchases ${h-1} and ${h}.`,path:n.path,severity:"error"},a,i,o);const p=Math.max(u,fs);d-p*r>fs&&Je({code:"balance.cost.exceedsGrowthCap",message:`Cost growth for ${n.kind} "${n.entityId}" exceeds ${r}x between purchases ${h-1} and ${h}.`,path:n.path,severity:"error"},a,i,o),u=d})},BN=(n,r,a,i,o,u,d)=>{const m=[];for(const h of a){const p=vs(n.purchase.costCurve,h);if(!p.ok){Je({code:"balance.cost.evaluationFailed",message:`Cost evaluation failed for generator "${n.id}" at purchase ${h}.`,path:["generators",r,"purchase","costCurve"],severity:"error"},o,u,d);break}const g=p.value;if(!Number.isFinite(g)){Je({code:"balance.cost.nonFinite",message:`Cost multiplier for generator "${n.id}" is non-finite at purchase ${h}.`,path:["generators",r,"purchase","costCurve"],severity:"error"},o,u,d);break}if(g<0){Je({code:"balance.cost.negative",message:`Cost multiplier for generator "${n.id}" is negative at purchase ${h}.`,path:["generators",r,"purchase","costCurve"],severity:"error"},o,u,d);break}const v=n.purchase.baseCost*g;if(!Number.isFinite(v)){Je({code:"balance.cost.nonFinite",message:`Computed cost for generator "${n.id}" is non-finite at purchase ${h}.`,path:["generators",r,"purchase","baseCost"],severity:"error"},o,u,d);break}if(v<0){Je({code:"balance.cost.negative",message:`Computed cost for generator "${n.id}" is negative at purchase ${h}.`,path:["generators",r,"purchase","baseCost"],severity:"error"},o,u,d);break}m.push(v)}fS({values:m,path:["generators",r,"purchase","costCurve"],entityId:n.id,kind:"generator"},i,o,u,d)},qN=(n,r,a,i,o,u)=>{const d=vs(n.cost.costCurve,a);if(!d.ok){Je({code:"balance.cost.evaluationFailed",message:`Base cost evaluation failed for upgrade "${n.id}" at purchase ${a}.`,path:["upgrades",r,"cost","costCurve"],severity:"error"},i,o,u);return}const m=d.value;if(!Number.isFinite(m)||m<0){Je({code:Number.isFinite(m)?"balance.cost.negative":"balance.cost.nonFinite",message:`Base cost multiplier for upgrade "${n.id}" is invalid at purchase ${a}.`,path:["upgrades",r,"cost","costCurve"],severity:"error"},i,o,u);return}let h=1;if(n.repeatable?.costCurve){const g=vs(n.repeatable.costCurve,a);if(!g.ok){Je({code:"balance.cost.evaluationFailed",message:`Repeatable cost evaluation failed for upgrade "${n.id}" at purchase ${a}.`,path:["upgrades",r,"repeatable","costCurve"],severity:"error"},i,o,u);return}if(h=g.value,!Number.isFinite(h)||h<0){Je({code:Number.isFinite(h)?"balance.cost.negative":"balance.cost.nonFinite",message:`Repeatable cost multiplier for upgrade "${n.id}" is invalid at purchase ${a}.`,path:["upgrades",r,"repeatable","costCurve"],severity:"error"},i,o,u);return}}const p=n.cost.baseCost*m*h;if(!Number.isFinite(p)||p<0){Je({code:Number.isFinite(p)?"balance.cost.negative":"balance.cost.nonFinite",message:`Computed cost for upgrade "${n.id}" is invalid at purchase ${a}.`,path:["upgrades",r,"cost","baseCost"],severity:"error"},i,o,u);return}return p},PN=(n,r,a,i,o,u,d)=>{const m=[];for(const h of a){const p=qN(n,r,h,o,u,d);if(p===void 0)break;m.push(p)}fS({values:m,path:["upgrades",r,"cost","costCurve"],entityId:n.id,kind:"upgrade"},i,o,u,d)},GN=(n,r,a,i,o,u)=>{const d=vs(n.reward.baseReward,a);if(!d.ok){Je({code:"balance.prestige.evaluationFailed",message:`Base reward evaluation failed for prestige layer "${n.id}" at index ${a}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},i,o,u);return}const m=d.value;if(!Number.isFinite(m)||m<0){Je({code:Number.isFinite(m)?"balance.prestige.negative":"balance.prestige.nonFinite",message:`Base reward for prestige layer "${n.id}" is invalid at index ${a}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},i,o,u);return}if(!n.reward.multiplierCurve)return m;const h=vs(n.reward.multiplierCurve,a);if(!h.ok){Je({code:"balance.prestige.evaluationFailed",message:`Multiplier evaluation failed for prestige layer "${n.id}" at index ${a}.`,path:["prestigeLayers",r,"reward","multiplierCurve"],severity:"error"},i,o,u);return}const p=h.value;if(!Number.isFinite(p)||p<0){Je({code:Number.isFinite(p)?"balance.prestige.negative":"balance.prestige.nonFinite",message:`Multiplier for prestige layer "${n.id}" is invalid at index ${a}.`,path:["prestigeLayers",r,"reward","multiplierCurve"],severity:"error"},i,o,u);return}const g=m*p;if(!Number.isFinite(g)||g<0){Je({code:Number.isFinite(g)?"balance.prestige.negative":"balance.prestige.nonFinite",message:`Computed reward for prestige layer "${n.id}" is invalid at index ${a}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},i,o,u);return}return g},VN=(n,r,a,i,o,u,d)=>{const m=[];for(const p of a){const g=GN(n,r,p,o,u,d);if(g===void 0)break;m.push(g)}if(m.length<=1)return;let h=m[0]??0;m.slice(1).forEach((p,g)=>{const v=g+1;p+fs<h&&Je({code:"balance.prestige.nonMonotonic",message:`Prestige rewards for "${n.id}" decrease between indices ${v-1} and ${v}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},o,u,d);const b=Math.max(h,fs);p-b*i>fs&&Je({code:"balance.prestige.exceedsGrowthCap",message:`Prestige rewards for "${n.id}" exceed ${i}x growth between indices ${v-1} and ${v}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},o,u,d),h=p})},bm=(n,r)=>{if(!n)return!1;switch(n.kind){case"resourceThreshold":return n.resourceId===r;case"generatorLevel":case"upgradeOwned":case"prestigeUnlocked":case"flag":case"script":case"always":case"never":return!1;case"allOf":case"anyOf":return n.conditions.some(a=>bm(a,r));case"not":return bm(n.condition,r);default:return!1}},HN=n=>!(n.unlocked||!n.unlockCondition||n.unlockCondition.kind==="always"),Em=(n,r,a,i,o,u,d,m)=>{const h=o.get(n);h&&HN(h)&&(bm(r,n)||Je({code:"balance.unlock.ordering",message:`Resource "${n}" unlocks after dependent content "${i}". Gate the dependent unlock on the resource or unlock the resource earlier.`,path:a,severity:"warning"},u,d,m))},YN=(n,r,a,i,o,u)=>{n.generators.forEach((d,m)=>{$N(d,m,r,i,o,u),BN(d,m,r,a,i,o,u),Em(d.purchase.currencyId,d.baseUnlock,["generators",m,"purchase","currencyId"],d.id,n.lookup.resources,i,o,u),d.consumes.forEach((h,p)=>{Em(h.resourceId,d.baseUnlock,["generators",m,"consumes",p,"resourceId"],d.id,n.lookup.resources,i,o,u)})})},ZN=(n,r,a,i,o,u)=>{n.upgrades.forEach((d,m)=>{const h=d.repeatable?d.repeatable.maxPurchases??r:0,p=Fm(r,h);PN(d,m,p,a,i,o,u),Em(d.cost.currencyId,d.unlockCondition,["upgrades",m,"cost","currencyId"],d.id,n.lookup.resources,i,o,u)})},FN=(n,r,a,i,o,u)=>{n.prestigeLayers.forEach((d,m)=>{const h=Fm(r,r);VN(d,m,h,a,i,o,u)})},P0=(n,r={},a)=>{const i=Math.max(0,Math.floor(r.sampleSize??DN)),o=r.maxGrowth??jN,u=[],d=[],m=Fm(i,i);return YN(n,m,o,u,d,a),ZN(n,i,o,u,d,a),FN(n,i,o,u,d,a),{warnings:Object.freeze(u),errors:Object.freeze(d)}};class XN extends Error{constructor(r="Content schema validation failed"){super(r),this.name="ContentSchemaError"}}class G0 extends XN{constructor(r,a){super(r),Object.defineProperty(this,"issues",{enumerable:!0,configurable:!0,writable:!0,value:a}),this.name="BalanceValidationError"}}const QN=[{module:"automations",introducedIn:"0.2.0",docRef:"docs/idle-engine-design.md (9, 18)"},{module:"transforms",introducedIn:"0.3.0",docRef:"docs/idle-engine-design.md (6)"},{module:"runtimeEvents",introducedIn:"0.3.0",docRef:"docs/runtime-event-pubsub-design.md"},{module:"prestigeLayers",introducedIn:"0.4.0",docRef:"docs/idle-engine-design.md (6, 18)"},{module:"guildPerks",introducedIn:"0.5.0",docRef:"docs/idle-engine-design.md (18)"}],KN=n=>{if(!n)return null;const r=ds.valid(n);if(r)return r;const a=ds.clean(n);if(a)return a;const i=ds.coerce(n);return i?i.version:null},JN=(n,r)=>{const a=KN(n),i=[];return QN.forEach(o=>{if(!r[o.module])return;const u=`Module "${o.module}" requires runtime version ${o.introducedIn} or later (${o.docRef}).`;if(!a){i.push({module:o.module,requiredVersion:o.introducedIn,docRef:o.docRef,severity:"warning",message:`${u} Provide ContentSchemaOptions.runtimeVersion to enforce compatibility.`});return}ds.lt(a,o.introducedIn)&&i.push({module:o.module,requiredVersion:o.introducedIn,docRef:o.docRef,severity:"error",message:`${u} Current runtime version ${a} is too old.`})}),i},WN=2166136261,eM=16777619,tM=1,nM=n=>{let r=WN;for(let a=0;a<n.length;a+=1)r^=n.charCodeAt(a),r=Math.imul(r,eM),r>>>=0;return r>>>0},rM=n=>{const r={id:n.metadata.id,version:n.metadata.version,modules:{resources:n.resources.map(o=>o.id),generators:n.generators.map(o=>o.id),upgrades:n.upgrades.map(o=>o.id),metrics:n.metrics.map(o=>o.id),achievements:n.achievements.map(o=>o.id),automations:n.automations.map(o=>o.id),transforms:n.transforms.map(o=>o.id),prestigeLayers:n.prestigeLayers.map(o=>o.id),guildPerks:n.guildPerks.map(o=>o.id),runtimeEvents:n.runtimeEvents.map(o=>o.id)}},a=JSON.stringify(r),i=nM(a);return{version:tM,hash:`fnv1a-${i.toString(16).padStart(8,"0")}`}},xn=n=>Object.freeze(n),jt=n=>Object.freeze(n),zn=n=>Object.freeze(new Map(n.map(r=>[r.id,r]))),Ln=n=>Object.freeze(Object.fromEntries(n.map(r=>[r.id,r]))),aM=Z({metadata:QC,resources:mN.default([]),generators:EC.default([]),upgrades:mC.default([]),metrics:sN.default([]),achievements:tC.default([]),automations:sC.default([]),transforms:AN.default([]),prestigeLayers:uN.default([]),guildPerks:kC.default([]),runtimeEvents:TN.default([])}).strict(),Xm=n=>n?Array.from(n):[],sM=se,je=n=>[...n],V0=(n,r,a,i,o)=>{const u=new Set,d=[];if(Xm(n).forEach((m,h)=>{const p=a.safeParse(m);if(!p.success){const g=[...o,h];if(r==="error"){p.error.issues.forEach(v=>{d.push({...v,path:je([...g,...v.path])})});return}i({code:r==="warning"?"allowlist.invalidSoftEntry":"allowlist.invalidEntry",message:`Allowlist entry "${m}" failed validation.`,path:je(g),severity:r,issues:p.error.issues});return}u.add(p.data)}),r==="error"&&d.length>0)throw new Bn(d);return u},Qf=(n,r,a,i)=>({required:V0(n?.required,"error",r,a,[...i,"required"]),soft:V0(n?.soft,"warning",r,a,[...i,"soft"])}),iM=n=>new Set(Xm(n).map(r=>sM.parse(r))),oM=n=>new Set(Xm(n).map(r=>tu.parse(r))),cM=(n,r)=>{const a={defaultLocale:n.defaultLocale,supportedLocales:n.supportedLocales,warningSink:r};return{normalize:(u,d)=>ys(u,{...a,path:d}),normalizeOptional:(u,d)=>u?ys(u,{...a,path:d}):void 0}},uM=(n,r={})=>{const a={defaultLocale:n.metadata.defaultLocale,supportedLocales:n.metadata.supportedLocales,warningSink:r.warningSink},i=jt({...n.metadata,title:ys(n.metadata.title,{...a,path:["metadata","title"]}),summary:n.metadata.summary?ys(n.metadata.summary,{...a,path:["metadata","summary"]}):n.metadata.summary}),{normalize:o,normalizeOptional:u}=cM(i,r.warningSink),d=xn(n.resources.map((N,U)=>jt({...N,name:o(N.name,["resources",U,"name"])}))),m=xn(n.generators.map((N,U)=>jt({...N,name:o(N.name,["generators",U,"name"])}))),h=xn(n.upgrades.map((N,U)=>jt({...N,name:o(N.name,["upgrades",U,"name"])}))),p=xn(n.metrics.map((N,U)=>jt({...N,name:o(N.name,["metrics",U,"name"]),description:u(N.description,["metrics",U,"description"])}))),g=xn(n.achievements.map((N,U)=>jt({...N,name:o(N.name,["achievements",U,"name"]),description:o(N.description,["achievements",U,"description"])}))),v=xn(n.automations.map((N,U)=>jt({...N,name:o(N.name,["automations",U,"name"]),description:o(N.description,["automations",U,"description"])}))),b=xn(n.transforms.map((N,U)=>jt({...N,name:o(N.name,["transforms",U,"name"]),description:o(N.description,["transforms",U,"description"])}))),T=xn(n.prestigeLayers.map((N,U)=>jt({...N,name:o(N.name,["prestigeLayers",U,"name"]),summary:o(N.summary,["prestigeLayers",U,"summary"])}))),w=xn(n.guildPerks.map((N,U)=>jt({...N,name:o(N.name,["guildPerks",U,"name"]),description:o(N.description,["guildPerks",U,"description"])}))),E=xn(n.runtimeEvents.map(N=>jt({...N}))),A={metadata:i,resources:d,generators:m,upgrades:h,metrics:p,achievements:g,automations:v,transforms:b,prestigeLayers:T,guildPerks:w,runtimeEvents:E},_=jt({resources:zn(A.resources),generators:zn(A.generators),upgrades:zn(A.upgrades),metrics:zn(A.metrics),achievements:zn(A.achievements),automations:zn(A.automations),transforms:zn(A.transforms),prestigeLayers:zn(A.prestigeLayers),guildPerks:zn(A.guildPerks),runtimeEvents:zn(A.runtimeEvents)}),R=jt({resourceById:Ln(A.resources),generatorById:Ln(A.generators),upgradeById:Ln(A.upgrades),metricById:Ln(A.metrics),achievementById:Ln(A.achievements),automationById:Ln(A.automations),transformById:Ln(A.transforms),prestigeLayerById:Ln(A.prestigeLayers),guildPerkById:Ln(A.guildPerks),runtimeEventById:Ln(A.runtimeEvents)}),M=rM(A);return jt({...A,lookup:_,serializedLookup:R,digest:M})},lM=n=>({automations:n.automations.length>0,transforms:n.transforms.length>0,runtimeEvents:n.runtimeEvents.length>0,prestigeLayers:n.prestigeLayers.length>0,guildPerks:n.guildPerks.length>0}),Dn=(n,r,a,i,o,u,d)=>{if(n&&!(n.required.has(r)||n.soft.has(r))){if(n.soft.size>0&&!n.required.size){o({code:u,message:d,path:je(a),severity:"warning"});return}i.addIssue({code:z.custom,path:je(a),message:d})}},Xe=(n,r)=>{const a=o=>{switch(o.kind){case"constant":case"linear":case"exponential":case"polynomial":return;case"piecewise":o.pieces.forEach(u=>a(u.formula));return;case"expression":i(o.expression);return;default:return}},i=o=>{if(!o||typeof o!="object")return;const u=o;switch(u.kind){case"literal":return;case"ref":u.target?.type&&u.target.type!=="variable"&&r({type:u.target.type,id:u.target.id});return;case"binary":i(u.left),i(u.right);return;case"unary":i(u.operand);return;case"call":u.args?.forEach(d=>i(d));return;default:return}};a(n)},or=n=>{const r=new Map;return n.forEach((a,i)=>{r.set(a.id,{index:i,value:a})}),r},dM=(n,r,a)=>{const i=or(n.resources),o=or(n.generators),u=or(n.upgrades),d=or(n.metrics),m=or(n.achievements),h=or(n.automations),p=or(n.transforms),g=or(n.prestigeLayers),v=or(n.guildPerks),b=new Set(a.runtimeEventCatalogue);n.runtimeEvents.forEach(_=>{b.add(_.id)});const T=a.warningSink,w=(_,R,M)=>{if(!b.has(_)){if(M==="warning"){T({code:"runtimeEvent.unknown",message:`Runtime event "${_}" is not present in the known catalogue.`,path:je(R),severity:M});return}r.addIssue({code:z.custom,path:je(R),message:`Runtime event "${_}" must exist in the known event catalogue.`})}},E=(_,R,M,N)=>{_.has(R)||r.addIssue({code:z.custom,path:je(M),message:N})};n.runtimeEvents.forEach((_,R)=>{a.runtimeEventCatalogue.has(_.id)&&r.addIssue({code:z.custom,path:je(["runtimeEvents",R,"id"]),message:`Runtime event "${_.id}" collides with an existing catalogue entry.`}),_.emits.forEach((M,N)=>{switch(M.source){case"achievement":E(m,M.id,je(["runtimeEvents",R,"emits",N,"id"]),`Runtime event emitter references unknown achievement "${M.id}".`);break;case"upgrade":E(u,M.id,je(["runtimeEvents",R,"emits",N,"id"]),`Runtime event emitter references unknown upgrade "${M.id}".`);break;case"transform":E(p,M.id,je(["runtimeEvents",R,"emits",N,"id"]),`Runtime event emitter references unknown transform "${M.id}".`);break;case"script":Dn(a.allowlists.scripts,M.id,je(["runtimeEvents",R,"emits",N,"id"]),r,T,"allowlist.script.missing",`Script "${M.id}" is not declared in the scripts allowlist.`);break}})}),n.generators.forEach((_,R)=>{_.produces.forEach((M,N)=>{E(i,M.resourceId,["generators",R,"produces",N,"resourceId"],`Generator "${_.id}" produces unknown resource "${M.resourceId}".`),Xe(M.rate,U=>{Qe(U,["generators",R,"produces",N,"rate"],r,i,o,u,h,g)})}),_.consumes.forEach((M,N)=>{E(i,M.resourceId,["generators",R,"consumes",N,"resourceId"],`Generator "${_.id}" consumes unknown resource "${M.resourceId}".`),Xe(M.rate,U=>{Qe(U,["generators",R,"consumes",N,"rate"],r,i,o,u,h,g)})}),E(i,_.purchase.currencyId,["generators",R,"purchase","currencyId"],`Generator "${_.id}" references unknown currency "${_.purchase.currencyId}".`),Xe(_.purchase.costCurve,M=>{Qe(M,["generators",R,"purchase","costCurve"],r,i,o,u,h,g)}),_.automation&&E(h,_.automation.automationId,["generators",R,"automation","automationId"],`Generator "${_.id}" references unknown automation "${_.automation.automationId}".`),_.baseUnlock&&Ut(_.baseUnlock,["generators",R,"baseUnlock"],r,a,i,o,u,g),_.visibilityCondition&&Ut(_.visibilityCondition,["generators",R,"visibilityCondition"],r,a,i,o,u,g),_.effects.forEach((M,N)=>{Kf(M,["generators",R,"effects",N],r,a,i,o,u,h,g,b)})}),n.upgrades.forEach((_,R)=>{_.targets.forEach((M,N)=>{switch(M.kind){case"resource":E(i,M.id,["upgrades",R,"targets",N,"id"],`Upgrade "${_.id}" targets unknown resource "${M.id}".`);break;case"generator":E(o,M.id,["upgrades",R,"targets",N,"id"],`Upgrade "${_.id}" targets unknown generator "${M.id}".`);break;case"automation":E(h,M.id,["upgrades",R,"targets",N,"id"],`Upgrade "${_.id}" targets unknown automation "${M.id}".`);break;case"prestigeLayer":E(g,M.id,["upgrades",R,"targets",N,"id"],`Upgrade "${_.id}" targets unknown prestige layer "${M.id}".`);break;case"guildPerk":E(v,M.id,["upgrades",R,"targets",N,"id"],`Upgrade "${_.id}" targets unknown guild perk "${M.id}".`);break}}),E(i,_.cost.currencyId,["upgrades",R,"cost","currencyId"],`Upgrade "${_.id}" references unknown currency "${_.cost.currencyId}".`),Xe(_.cost.costCurve,M=>{Qe(M,["upgrades",R,"cost","costCurve"],r,i,o,u,h,g)}),_.effects.forEach((M,N)=>{Kf(M,["upgrades",R,"effects",N],r,a,i,o,u,h,g,b)}),_.prerequisites.forEach((M,N)=>{Ut(M,["upgrades",R,"prerequisites",N],r,a,i,o,u,g)}),_.unlockCondition&&Ut(_.unlockCondition,["upgrades",R,"unlockCondition"],r,a,i,o,u,g),_.visibilityCondition&&Ut(_.visibilityCondition,["upgrades",R,"visibilityCondition"],r,a,i,o,u,g)}),n.metrics.forEach((_,R)=>{_.source.kind==="script"&&Dn(a.allowlists.scripts,_.source.scriptId,["metrics",R,"source","scriptId"],r,T,"allowlist.script.missing",`Metric "${_.id}" references script "${_.source.scriptId}" that is not in the scripts allowlist.`)}),n.achievements.forEach((_,R)=>{switch(_.track.kind){case"resource":E(i,_.track.resourceId,["achievements",R,"track","resourceId"],`Achievement "${_.id}" references unknown resource "${_.track.resourceId}".`),Xe(_.track.threshold,M=>{Qe(M,["achievements",R,"track","threshold"],r,i,o,u,h,g)});break;case"generator-level":E(o,_.track.generatorId,["achievements",R,"track","generatorId"],`Achievement "${_.id}" references unknown generator "${_.track.generatorId}".`),Xe(_.track.level,M=>{Qe(M,["achievements",R,"track","level"],r,i,o,u,h,g)});break;case"upgrade-owned":E(u,_.track.upgradeId,["achievements",R,"track","upgradeId"],`Achievement "${_.id}" references unknown upgrade "${_.track.upgradeId}".`),_.track.purchases&&Xe(_.track.purchases,M=>{Qe(M,["achievements",R,"track","purchases"],r,i,o,u,h,g)});break;case"flag":Dn(a.allowlists.flags,_.track.flagId,["achievements",R,"track","flagId"],r,T,"allowlist.flag.missing",`Achievement "${_.id}" references flag "${_.track.flagId}" that is not in the flags allowlist.`);break;case"script":Dn(a.allowlists.scripts,_.track.scriptId,["achievements",R,"track","scriptId"],r,T,"allowlist.script.missing",`Achievement "${_.id}" references script "${_.track.scriptId}" that is not in the scripts allowlist.`);break;case"custom-metric":E(d,_.track.metricId,["achievements",R,"track","metricId"],`Achievement "${_.id}" references unknown metric "${_.track.metricId}".`),Xe(_.track.threshold,M=>{Qe(M,["achievements",R,"track","threshold"],r,i,o,u,h,g)});break}if(_.reward)switch(_.reward.kind){case"grantResource":E(i,_.reward.resourceId,["achievements",R,"reward","resourceId"],`Achievement "${_.id}" grants unknown resource "${_.reward.resourceId}".`),Xe(_.reward.amount,M=>{Qe(M,["achievements",R,"reward","amount"],r,i,o,u,h,g)});break;case"grantUpgrade":E(u,_.reward.upgradeId,["achievements",R,"reward","upgradeId"],`Achievement "${_.id}" grants unknown upgrade "${_.reward.upgradeId}".`);break;case"grantGuildPerk":E(v,_.reward.perkId,["achievements",R,"reward","perkId"],`Achievement "${_.id}" grants unknown guild perk "${_.reward.perkId}".`);break;case"emitEvent":w(_.reward.eventId,["achievements",R,"reward","eventId"],a.runtimeEventCatalogue.size>0?"error":"warning");break;case"unlockAutomation":E(h,_.reward.automationId,["achievements",R,"reward","automationId"],`Achievement "${_.id}" unlocks unknown automation "${_.reward.automationId}".`);break;case"grantFlag":Dn(a.allowlists.flags,_.reward.flagId,["achievements",R,"reward","flagId"],r,T,"allowlist.flag.missing",`Achievement "${_.id}" grants flag "${_.reward.flagId}" that is not in the flags allowlist.`);break}_.unlockCondition&&Ut(_.unlockCondition,["achievements",R,"unlockCondition"],r,a,i,o,u,g),_.visibilityCondition&&Ut(_.visibilityCondition,["achievements",R,"visibilityCondition"],r,a,i,o,u,g),_.onUnlockEvents.forEach((M,N)=>{w(M,["achievements",R,"onUnlockEvents",N],a.runtimeEventCatalogue.size>0?"error":"warning")})}),n.automations.forEach((_,R)=>{switch(_.targetType==="generator"?_.targetId&&E(o,_.targetId,["automations",R,"targetId"],`Automation "${_.id}" references unknown generator "${_.targetId}".`):_.targetType==="upgrade"?_.targetId&&E(u,_.targetId,["automations",R,"targetId"],`Automation "${_.id}" references unknown upgrade "${_.targetId}".`):_.targetType==="system"&&_.systemTargetId&&Dn(a.allowlists.systemAutomationTargets,_.systemTargetId,["automations",R,"systemTargetId"],r,T,"allowlist.systemAutomationTarget.missing",`Automation "${_.id}" references system target "${_.systemTargetId}" not present in the allowlist.`),_.resourceCost&&(E(i,_.resourceCost.resourceId,["automations",R,"resourceCost","resourceId"],`Automation "${_.id}" references unknown resource "${_.resourceCost.resourceId}".`),Xe(_.resourceCost.rate,M=>{Qe(M,["automations",R,"resourceCost","rate"],r,i,o,u,h,g)})),_.trigger.kind){case"resourceThreshold":E(i,_.trigger.resourceId,["automations",R,"trigger","resourceId"],`Automation "${_.id}" trigger references unknown resource "${_.trigger.resourceId}".`),Xe(_.trigger.threshold,M=>{Qe(M,["automations",R,"trigger","threshold"],r,i,o,u,h,g)});break;case"event":w(_.trigger.eventId,["automations",R,"trigger","eventId"],a.runtimeEventCatalogue.size>0?"error":"warning");break}_.scriptId&&Dn(a.allowlists.scripts,_.scriptId,["automations",R,"scriptId"],r,T,"allowlist.script.missing",`Automation "${_.id}" references script "${_.scriptId}" that is not in the scripts allowlist.`),Ut(_.unlockCondition,["automations",R,"unlockCondition"],r,a,i,o,u,g)}),n.transforms.forEach((_,R)=>{switch(_.inputs.forEach((M,N)=>{E(i,M.resourceId,["transforms",R,"inputs",N,"resourceId"],`Transform "${_.id}" consumes unknown resource "${M.resourceId}".`),Xe(M.amount,U=>{Qe(U,["transforms",R,"inputs",N,"amount"],r,i,o,u,h,g)})}),_.outputs.forEach((M,N)=>{E(i,M.resourceId,["transforms",R,"outputs",N,"resourceId"],`Transform "${_.id}" produces unknown resource "${M.resourceId}".`),Xe(M.amount,U=>{Qe(U,["transforms",R,"outputs",N,"amount"],r,i,o,u,h,g)})}),_.duration&&Xe(_.duration,M=>{Qe(M,["transforms",R,"duration"],r,i,o,u,h,g)}),_.cooldown&&Xe(_.cooldown,M=>{Qe(M,["transforms",R,"cooldown"],r,i,o,u,h,g)}),_.trigger.kind){case"automation":E(h,_.trigger.automationId,["transforms",R,"trigger","automationId"],`Transform "${_.id}" references unknown automation "${_.trigger.automationId}".`);break;case"condition":Ut(_.trigger.condition,["transforms",R,"trigger","condition"],r,a,i,o,u,g);break;case"event":w(_.trigger.eventId,["transforms",R,"trigger","eventId"],a.runtimeEventCatalogue.size>0?"error":"warning");break}_.automation&&E(h,_.automation.automationId,["transforms",R,"automation","automationId"],`Transform "${_.id}" references unknown automation "${_.automation.automationId}".`),_.unlockCondition&&Ut(_.unlockCondition,["transforms",R,"unlockCondition"],r,a,i,o,u,g),_.visibilityCondition&&Ut(_.visibilityCondition,["transforms",R,"visibilityCondition"],r,a,i,o,u,g)}),n.prestigeLayers.forEach((_,R)=>{_.resetTargets.forEach((M,N)=>{E(i,M,["prestigeLayers",R,"resetTargets",N],`Prestige layer "${_.id}" resets unknown resource "${M}".`)}),E(i,_.reward.resourceId,["prestigeLayers",R,"reward","resourceId"],`Prestige layer "${_.id}" rewards unknown resource "${_.reward.resourceId}".`),Xe(_.reward.baseReward,M=>{Qe(M,["prestigeLayers",R,"reward","baseReward"],r,i,o,u,h,g)}),_.reward.multiplierCurve&&Xe(_.reward.multiplierCurve,M=>{Qe(M,["prestigeLayers",R,"reward","multiplierCurve"],r,i,o,u,h,g)}),_.retention.forEach((M,N)=>{M.kind==="resource"?E(i,M.resourceId,["prestigeLayers",R,"retention",N,"resourceId"],`Prestige layer "${_.id}" retains unknown resource "${M.resourceId}".`):M.kind==="upgrade"&&E(u,M.upgradeId,["prestigeLayers",R,"retention",N,"upgradeId"],`Prestige layer "${_.id}" retains unknown upgrade "${M.upgradeId}".`)}),_.automation&&E(h,_.automation.automationId,["prestigeLayers",R,"automation","automationId"],`Prestige layer "${_.id}" references unknown automation "${_.automation.automationId}".`),Ut(_.unlockCondition,["prestigeLayers",R,"unlockCondition"],r,a,i,o,u,g)}),n.guildPerks.forEach((_,R)=>{switch(_.effects.forEach((M,N)=>{Kf(M,["guildPerks",R,"effects",N],r,a,i,o,u,h,g,b)}),_.cost.kind){case"currency":E(i,_.cost.resourceId,["guildPerks",R,"cost","resourceId"],`Guild perk "${_.id}" references unknown resource "${_.cost.resourceId}".`),Xe(_.cost.amount,M=>{Qe(M,["guildPerks",R,"cost","amount"],r,i,o,u,h,g)});break;case"metric":E(d,_.cost.metricId,["guildPerks",R,"cost","metricId"],`Guild perk "${_.id}" references unknown metric "${_.cost.metricId}".`),Xe(_.cost.amount,M=>{Qe(M,["guildPerks",R,"cost","amount"],r,i,o,u,h,g)});break}_.unlockCondition&&Ut(_.unlockCondition,["guildPerks",R,"unlockCondition"],r,a,i,o,u,g),_.visibilityCondition&&Ut(_.visibilityCondition,["guildPerks",R,"visibilityCondition"],r,a,i,o,u,g)}),fM(n,r,a),JN(a.runtimeVersion,lM(n)).forEach(_=>{_.severity==="error"?r.addIssue({code:z.custom,path:je(["metadata","version"]),message:_.message}):T({code:"runtime.featureGate",message:_.message,path:je(["metadata","version"]),severity:"warning"})}),hM(n,r),pM(n,r)},Qe=(n,r,a,i,o,u,d,m)=>{switch(n.type){case"resource":i.has(n.id)||a.addIssue({code:z.custom,path:je(r),message:`Formula references unknown resource "${n.id}".`});break;case"generator":o.has(n.id)||a.addIssue({code:z.custom,path:je(r),message:`Formula references unknown generator "${n.id}".`});break;case"upgrade":u.has(n.id)||a.addIssue({code:z.custom,path:je(r),message:`Formula references unknown upgrade "${n.id}".`});break;case"automation":d.has(n.id)||a.addIssue({code:z.custom,path:je(r),message:`Formula references unknown automation "${n.id}".`});break;case"prestigeLayer":m.has(n.id)||a.addIssue({code:z.custom,path:je(r),message:`Formula references unknown prestige layer "${n.id}".`});break}},Kf=(n,r,a,i,o,u,d,m,h,p)=>{const g=(v,b,T)=>{v.has(b)||a.addIssue({code:z.custom,path:je(r),message:T})};switch(n.kind){case"modifyResourceRate":case"unlockResource":case"alterDirtyTolerance":g(o,n.resourceId,`Effect references unknown resource "${n.resourceId}".`),"value"in n&&Xe(n.value,v=>{Qe(v,r,a,o,u,d,m,h)});break;case"modifyGeneratorRate":case"modifyGeneratorCost":case"unlockGenerator":g(u,n.generatorId,`Effect references unknown generator "${n.generatorId}".`),"value"in n&&Xe(n.value,v=>{Qe(v,r,a,o,u,d,m,h)});break;case"grantAutomation":g(m,n.automationId,`Effect references unknown automation "${n.automationId}".`);break;case"grantFlag":Dn(i.allowlists.flags,n.flagId,[...r,"flagId"],a,i.warningSink,"allowlist.flag.missing",`Effect references flag "${n.flagId}" that is not in the flags allowlist.`);break;case"emitEvent":p.has(n.eventId)||a.addIssue({code:z.custom,path:je(r),message:`Effect references unknown runtime event "${n.eventId}".`});break;case"unlockGuildAutomation":g(m,n.automationId,`Effect references unknown automation "${n.automationId}".`);break;case"modifyGuildStorage":g(o,n.storageId,`Effect references unknown resource "${n.storageId}".`),Xe(n.value,v=>{Qe(v,r,a,o,u,d,m,h)});break}},Ut=(n,r,a,i,o,u,d,m)=>{if(!n)return;const h=(p,g)=>{switch(p.kind){case"resourceThreshold":o.has(p.resourceId)||a.addIssue({code:z.custom,path:je([...g,"resourceId"]),message:`Condition references unknown resource "${p.resourceId}".`}),Xe(p.amount,v=>{Qe(v,g,a,o,u,d,new Map,m)});break;case"generatorLevel":u.has(p.generatorId)||a.addIssue({code:z.custom,path:je([...g,"generatorId"]),message:`Condition references unknown generator "${p.generatorId}".`}),Xe(p.level,v=>{Qe(v,g,a,o,u,d,new Map,m)});break;case"upgradeOwned":d.has(p.upgradeId)||a.addIssue({code:z.custom,path:je([...g,"upgradeId"]),message:`Condition references unknown upgrade "${p.upgradeId}".`});break;case"prestigeUnlocked":m.has(p.prestigeLayerId)||a.addIssue({code:z.custom,path:je([...g,"prestigeLayerId"]),message:`Condition references unknown prestige layer "${p.prestigeLayerId}".`});break;case"flag":Dn(i.allowlists.flags,p.flagId,[...g,"flagId"],a,i.warningSink,"allowlist.flag.missing",`Condition references flag "${p.flagId}" that is not in the flags allowlist.`);break;case"script":Dn(i.allowlists.scripts,p.scriptId,[...g,"scriptId"],a,i.warningSink,"allowlist.script.missing",`Condition references script "${p.scriptId}" that is not in the scripts allowlist.`);break;case"allOf":case"anyOf":p.conditions.forEach((v,b)=>h(v,[...g,"conditions",b]));break;case"not":h(p.condition,[...g,"condition"]);break}};h(n,r)},fM=(n,r,a)=>{const i=n.metadata.dependencies;if(!i)return;const o=n.metadata.id;i.optional.forEach((g,v)=>{a.activePackIds.size!==0&&(a.activePackIds.has(g.packId)||a.warningSink({code:"dependencies.optionalMissing",message:`Optional dependency "${g.packId}" is not present in active pack set.`,path:je(["metadata","dependencies","optional",v]),severity:"warning"}))});const u=new Map,d=(g,v)=>{u.has(g)||u.set(g,new Set),u.get(g)?.add(v)};i.requires.forEach((g,v)=>{if(g.packId===o){r.addIssue({code:z.custom,path:je(["metadata","dependencies","requires",v,"packId"]),message:"Pack cannot depend on itself."});return}d(o,g.packId),a.knownPacks.has(g.packId)||a.warningSink({code:"dependencies.unknownPack",message:`Dependency "${g.packId}" is not present in known pack graph.`,path:je(["metadata","dependencies","requires",v,"packId"]),severity:"warning"})}),a.knownPacks.forEach(g=>{g.requires?.forEach(v=>{d(g.id,v.packId)})});const m=new Set,h=new Set,p=g=>{if(m.has(g))return!0;if(h.has(g))return!1;h.add(g),m.add(g);const v=u.get(g);if(v){for(const b of v)if(p(b))return!0}return m.delete(g),!1};p(o)&&r.addIssue({code:z.custom,path:je(["metadata","dependencies","requires"]),message:"Dependency graph contains a cycle involving this pack."})},mM=n=>{if(n.length<=1)return n.join("");const r=n.slice(0,-1);let a=0;for(let o=1;o<r.length;o++)r[o]<r[a]&&(a=o);const i=[...r.slice(a),...r.slice(0,a)];return i.push(i[0]),i.join("")},mS=(n,r,a=!0)=>{const i=new Set,o=new Set,u=[],d=[],m=new Set,h=p=>{if(o.has(p)){const v=u.indexOf(p),b=[...u.slice(v),p],T=mM(b);return!!(!m.has(T)&&(m.add(T),d.push(b),a))}if(i.has(p))return!1;i.add(p),o.add(p),u.push(p);const g=n.get(p);if(g){for(const v of g)if(h(v))return!0}return o.delete(p),u.pop(),!1};for(const p of r)if(!i.has(p)&&h(p))break;return d},hM=(n,r)=>{const a=new Map,i=new Map,o=new Map;n.transforms.forEach((d,m)=>{i.set(d.id,m),d.outputs.forEach(h=>{o.has(h.resourceId)||o.set(h.resourceId,new Set),o.get(h.resourceId)?.add(d.id)})}),n.transforms.forEach(d=>{d.inputs.forEach(m=>{const h=o.get(m.resourceId);h&&h.forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(d.id)})})});const u=mS(a,n.transforms.map(d=>d.id));for(const d of u){const m=d.join("  "),h=d[0],p=i.get(h),g=new Set;for(let T=0;T<d.length-1;T++){const w=d[T],E=d[T+1],A=n.transforms.find(R=>R.id===w),_=n.transforms.find(R=>R.id===E);A&&_&&A.outputs.forEach(R=>{_.inputs.some(M=>M.resourceId===R.resourceId)&&g.add(R.resourceId)})}const v=Array.from(g).sort().join(", "),b=g.size>0?` (involves resources: ${v})`:"";p!==void 0&&r.addIssue({code:z.custom,path:je(["transforms",p]),message:`Transform cycle detected: ${m}${b}. Consider breaking the cycle by: (1) introducing external resource sources via generators or initial grants, (2) converting to a linear transformation chain, or (3) adding intermediate resources to create a clear flow direction.`})}},pM=(n,r)=>{const a=new Map,i=new Map,o=m=>{const h=new Set;if(!m)return h;const p=g=>{switch(g.kind){case"resourceThreshold":h.add(g.resourceId);break;case"generatorLevel":h.add(g.generatorId);break;case"upgradeOwned":h.add(g.upgradeId);break;case"prestigeUnlocked":h.add(g.prestigeLayerId);break;case"allOf":case"anyOf":g.conditions.forEach(p);break;case"not":p(g.condition);break;case"always":case"never":case"flag":case"script":break;default:return g}};return p(m),h};n.resources.forEach((m,h)=>{i.set(m.id,{type:"resource",index:h})}),n.generators.forEach((m,h)=>{i.set(m.id,{type:"generator",index:h})}),n.upgrades.forEach((m,h)=>{i.set(m.id,{type:"upgrade",index:h})}),n.achievements.forEach((m,h)=>{i.set(m.id,{type:"achievement",index:h})}),n.transforms.forEach((m,h)=>{i.set(m.id,{type:"transform",index:h})}),n.prestigeLayers.forEach((m,h)=>{i.set(m.id,{type:"prestige",index:h})}),n.resources.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})}),n.generators.forEach(m=>{m.baseUnlock&&o(m.baseUnlock).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})}),n.upgrades.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)}),m.prerequisites.forEach(h=>{o(h).forEach(g=>{a.has(g)||a.set(g,new Set),a.get(g)?.add(m.id)})})}),n.achievements.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})}),n.transforms.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})}),n.prestigeLayers.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})});const u={resource:"resources",generator:"generators",upgrade:"upgrades",achievement:"achievements",transform:"transforms",prestige:"prestigeLayers"},d=mS(a,i.keys());for(const m of d){const h=m.join("  "),p=m[0],g=i.get(p),v=new Set;m.forEach(w=>{const E=i.get(w);E&&v.add(E.type)});const b=Array.from(v).sort().join(", "),T=v.size>0?` (involves ${v.size===1?b:`entity types: ${b}`})`:"";if(g){const w=[u[g.type],g.index];r.addIssue({code:z.custom,path:je(w),message:`Unlock condition cycle detected: ${h}${T}. Consider fixing by: (1) introducing a base entity that both depend on, (2) removing one unlock condition to create a hierarchical progression, or (3) using a flag or other non-entity condition to break the cycle.`})}}},H0=(n,r)=>{const a=n.allowlists===void 0?{}:{...n.allowlists.flags?{flags:Qf(n.allowlists.flags,Bi,r,["options","allowlists","flags"])}:{},...n.allowlists.scripts?{scripts:Qf(n.allowlists.scripts,qi,r,["options","allowlists","scripts"])}:{},...n.allowlists.systemAutomationTargets?{systemAutomationTargets:Qf(n.allowlists.systemAutomationTargets,FE,r,["options","allowlists","systemAutomationTargets"])}:{}},i=iM(n.runtimeEventCatalogue),o=oM(n.activePackIds),u=new Map;return n.knownPacks?.forEach(d=>{u.set(d.id,d)}),aM.superRefine((d,m)=>dM(d,m,{allowlists:a,warningSink:r,runtimeEventCatalogue:i,runtimeVersion:n.runtimeVersion,activePackIds:o,knownPacks:u})).transform(d=>uM(d,{runtimeVersion:n.runtimeVersion,warningSink:r}))},gM=(n={})=>({parse(r){const a=[],u=H0(n,h=>{a.push(h),n.warningSink?.(h)}).parse(r),d=n.balance??{},m=d.enabled===!1?{warnings:Object.freeze([]),errors:Object.freeze([])}:P0(u,d,n.warningSink);if(m.errors.length>0&&d.warnOnly!==!0)throw new G0("Balance validation failed.",m.errors);return{pack:u,warnings:a,balanceWarnings:m.warnings,balanceErrors:m.errors}},safeParse(r){const a=[],u=H0(n,d=>{a.push(d),n.warningSink?.(d)}).safeParse(r);if(u.success)try{const d=n.balance??{},m=d.enabled===!1?{warnings:Object.freeze([]),errors:Object.freeze([])}:P0(u.data,d,n.warningSink);if(m.errors.length>0&&d.warnOnly!==!0)throw new G0("Balance validation failed.",m.errors);return{success:!0,data:{pack:u.data,warnings:a,balanceWarnings:m.warnings,balanceErrors:m.errors}}}catch(d){return{success:!1,error:d}}return{success:!1,error:u.error}}}),yM=(n,r)=>gM(r).parse(n),_i=n=>n.map(r=>se.parse(r));_i(["resource/ore-vein","resource/copper","resource/energy-core"]),_i(["generator/ore-drill","generator/smelter"]),_i(["upgrade/miner-capacity","upgrade/smelter-efficiency"]),_i(["automation/logistics-bot","automation/smelter-daemon"]),_i(["prestige/main-loop","prestige/endgame"]);function gn(n){return lS.parse(n)}function fr(n){return cS.parse(n)}function Gt(n){return iS.parse(n)}function yn(n){return rS.parse(n)}function Sa(n){return aS.parse(n)}function vM(n){return uS.parse(n)}Object.freeze({"offline-catchup":St.OFFLINE_CATCHUP,"research-daemon":"RESEARCH_DAEMON"});function bM(n){const{layerId:r,resourceState:a,reward:i,resetTargets:o,retentionTargets:u}=n,d=a.getIndex(i.resourceId);d!==void 0&&i.amount>0?a.addAmount(d,i.amount):d===void 0&&i.amount>0&&J.recordWarning("PrestigeResetRewardSkipped",{layerId:r,resourceId:i.resourceId});for(const m of o){const h=a.getIndex(m.resourceId);if(h!==void 0){const p=Y0(m.resetToAmount);gv(a,h,p)}else J.recordWarning("PrestigeResetTargetSkipped",{layerId:r,resourceId:m.resourceId,targetType:"reset"})}for(const m of u){const h=a.getIndex(m.resourceId);if(h!==void 0){const p=Y0(m.retainedAmount);gv(a,h,p)}else J.recordWarning("PrestigeResetTargetSkipped",{layerId:r,resourceId:m.resourceId,targetType:"retention"})}J.recordProgress("prestige.reset_applied",{layerId:r,rewardResourceId:i.resourceId,rewardAmount:i.amount,resetCount:o.length,retentionCount:u.length})}function Y0(n){return Number.isFinite(n)?Math.max(0,Math.floor(n)):0}const EM="production";function Z0(n,r){const a=[];for(const{resourceId:i,rate:o}of n){if(!Number.isFinite(o)||o<=0)continue;const u=r.getIndex(i);u!==void 0&&a.push({resourceId:i,index:u,rate:o})}return a}function SM(n){const{generators:r,resourceState:a,getMultiplier:i,onTick:o}=n,u=n.systemId??EM,d=n.applyThreshold??1e-4;if(d<=0||!Number.isFinite(d))throw new Error("applyThreshold must be a positive finite number");const m=new Map;function h(g,v,b){return`${g}:${v}:${b}`}function p(g,v){const T=(m.get(g)??0)+v,w=d*1e-9,E=Math.floor((T+w)/d)*d;return{toApply:E,newTotal:T,commit:(A=1)=>{m.set(g,T-E*A)}}}return{id:u,tick:({deltaMs:g})=>{const v=g/1e3,b=r(),T=new Map,w=new Map;for(const E of b){if(ms()&&E.id.includes(":")&&console.warn(`Generator ID "${E.id}" contains ':' which may cause accumulator key collisions`),E.owned<=0)continue;const A=i?.(E.id)??1,_=E.owned*A,R=Z0(E.produces,a),M=Z0(E.consumes,a),N=[];let U=1,B=M.length===0;for(const{resourceId:q,index:F,rate:le}of M){const he=le*_*v,Ae=h(E.id,"consume",q),Ue=p(Ae,he);if(N.push({resourceId:q,index:F,result:Ue}),Ue.toApply>0){B=!0;const et=a.getAmount(F),W=Ue.newTotal>0?et/Ue.newTotal:1;U=Math.min(U,W)}}for(const{resourceId:q,index:F,rate:le}of R){const he=le*_*v,Ae=h(E.id,"produce",q),Ue=p(Ae,he),et=B?U:0;Ue.commit(et);const W=Ue.toApply*et;W>0&&(a.addAmount(F,W),T.set(q,(T.get(q)??0)+W))}for(const{resourceId:q,index:F,result:le}of N){le.commit(U);const he=le.toApply*U;he>0&&(a.spendAmount(F,he,{systemId:u}),w.set(q,(w.get(q)??0)+he))}}o&&o({produced:T,consumed:w})},clearAccumulators:()=>{m.clear()},cleanupAccumulators:()=>{const g=d*1e-6;for(const[v,b]of m)Math.abs(b)<g&&m.delete(v)},clearGeneratorAccumulators:g=>{const v=`${g}:`;for(const b of m.keys())b.startsWith(v)&&m.delete(b)},exportAccumulators:()=>{const g={};for(const[v,b]of m)b!==0&&(g[v]=b);return{accumulators:g}},restoreAccumulators:g=>{if(m.clear(),!(!g||!g.accumulators))for(const[v,b]of Object.entries(g.accumulators))typeof b=="number"&&Number.isFinite(b)&&m.set(v,b)}}}const Gc=0,F0=100;function Jf(n,r,a,i){const o=new Error(`Condition "${a}" targeting "${i}" requires ConditionContext.${String(r)}()`);ms()?n.onError?.(o):console.warn(o.message)}function Br(n,r,a=0){if(!n)return!0;if(a>F0){const i=n?` (condition kind: "${n.kind}")`:"",o=new Error(`Condition evaluation exceeded maximum depth of ${F0} at recursion level ${a}${i}. Possible circular dependency detected. Check for conditions that reference each other in a cycle.`);return ms()?r.onError?.(o):console.warn(o.message),!1}switch(n.kind){case"always":return!0;case"never":return!1;case"resourceThreshold":{const i=r.getResourceAmount(n.resourceId),o=kn(n.amount,{variables:{level:Gc}});return X0(i,o,n.comparator,r)}case"generatorLevel":{const i=r.getGeneratorLevel(n.generatorId),o=kn(n.level,{variables:{level:Gc}});return X0(i,o,n.comparator,r)}case"upgradeOwned":return r.getUpgradePurchases(n.upgradeId)>=n.requiredPurchases;case"prestigeUnlocked":return r.hasPrestigeLayerUnlocked?r.hasPrestigeLayerUnlocked(n.prestigeLayerId):(Jf(r,"hasPrestigeLayerUnlocked",n.kind,n.prestigeLayerId),!1);case"flag":return r.isFlagSet?r.isFlagSet(n.flagId):(Jf(r,"isFlagSet",n.kind,n.flagId),!1);case"script":return r.evaluateScriptCondition?r.evaluateScriptCondition(n.scriptId):(Jf(r,"evaluateScriptCondition",n.kind,n.scriptId),!1);case"allOf":return n.conditions.every(i=>Br(i,r,a+1));case"anyOf":return n.conditions.some(i=>Br(i,r,a+1));case"not":return!Br(n.condition,r,a+1);default:{const i=n,o=new Error(`Unknown condition kind: ${i.kind}`);return ms()?r.onError?.(o):console.warn(o.message),!1}}}function X0(n,r,a,i){switch(a){case"gt":return n>r;case"gte":return n>=r;case"lt":return n<r;case"lte":return n<=r;default:{const o=a,u=new Error(`Unknown comparator: ${o}`);return ms()?i?.onError?.(u):console.warn(u.message),!1}}}function _M(n){if(n.length!==0)return n.length===1?n[0]:{kind:"allOf",conditions:[...n]}}function Ai(n){if(n)switch(n.kind){case"always":return;case"never":return"Unavailable in this build";case"resourceThreshold":{const r=kn(n.amount,{variables:{level:Gc}});return`Requires ${n.resourceId} ${Q0(n.comparator)} ${K0(r)}`}case"generatorLevel":{const r=kn(n.level,{variables:{level:Gc}});return`Requires ${n.generatorId} ${Q0(n.comparator)} ${K0(r)}`}case"upgradeOwned":return`Requires owning ${n.requiredPurchases} ${n.upgradeId}`;case"allOf":{const r=n.conditions.map(Ai).filter(a=>!!a);return r.length>0?r.join(", "):void 0}case"anyOf":{const r=n.conditions.map(Ai).filter(a=>!!a);return r.length>0?`Requires any of: ${r.join(" or ")}`:void 0}case"not":{const r=Ai(n.condition);return r?`Not (${r})`:void 0}default:return}}function Q0(n){switch(n){case"gt":return">";case"gte":return">=";case"lt":return"<";case"lte":return"<=";default:return n}}function K0(n){return Number.isFinite(n)?Math.abs(n)>=1||n===0?n.toFixed(2).replace(/\.00$/,""):n.toPrecision(2):"Infinity"}function TM(n){return new wM(n)}class wM{constructor(r){Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resourceState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generatorEvaluator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"upgradeEvaluator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prestigeEvaluator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resourceDefinitions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generators",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generatorList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"upgrades",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"upgradeList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prestigeLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prestigeLayerList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.onError=r.onError;const a=r.initialState?r.initialState:void 0,i=r.content.resources.map(b=>({id:b.id,startAmount:b.startAmount??0,capacity:b.capacity===null||b.capacity===void 0?void 0:b.capacity,unlocked:b.unlocked??!1,visible:b.visible??!0,dirtyTolerance:b.dirtyTolerance??void 0}));this.resourceDefinitions=i;const o=a?.resources?.state??void 0;this.resourceState=o??Tw(i),this.hydrateResources(a?.resources?.serialized);const u=CM(r.content.resources),d=a?.resources??{};d.state=this.resourceState,d.metadata=u,this.generators=new Map;const m=new Map((a?.generators??[]).map(b=>[b.id,b]));this.generatorList=r.content.generators.map(b=>{const T=AM(b,m.get(b.id));return this.generators.set(b.id,T),T}),this.upgrades=new Map;const h=new Map((a?.upgrades??[]).map(b=>[b.id,b]));this.upgradeList=r.content.upgrades.map(b=>{const T=RM(b,h.get(b.id));return this.upgrades.set(b.id,T),T});const p=r.content.prestigeLayers??[];this.prestigeLayers=new Map;const g=new Map((a?.prestigeLayers??[]).map(b=>[b.id,b]));this.prestigeLayerList=p.map(b=>{const T=MM(b,g.get(b.id));return this.prestigeLayers.set(b.id,T),T});for(const b of p){const T=`${b.id}-prestige-count`;if(this.resourceState.getIndex(T)===void 0)throw new Error(`Prestige layer "${b.id}" requires a resource named "${T}" to track prestige count. Add this resource to your content pack's resources array.`)}this.conditionContext={getResourceAmount:b=>{const T=this.resourceState.getIndex(b);return T===void 0?0:this.resourceState.getAmount(T)},getGeneratorLevel:b=>this.generators.get(b)?.state.owned??0,getUpgradePurchases:b=>this.upgrades.get(b)?.purchases??0,hasPrestigeLayerUnlocked:b=>this.prestigeLayers.get(b)?.state.isUnlocked??!1},this.generatorEvaluator=new kM(this),this.upgradeEvaluator=this.upgradeList.length>0?new OM(this):void 0,this.prestigeEvaluator=this.prestigeLayerList.length>0?new au(this):void 0;const v=a??{};v.stepDurationMs=r.stepDurationMs,v.resources=d,v.generatorPurchases=this.generatorEvaluator,v.generators=this.generatorList.map(b=>b.state),v.upgradePurchases=this.upgradeList.length>0?this.upgradeEvaluator:void 0,v.upgrades=this.upgradeList.map(b=>b.state),v.prestigeSystem=this.prestigeLayerList.length>0?this.prestigeEvaluator:void 0,v.prestigeLayers=this.prestigeLayerList.map(b=>b.state),this.state=v,this.updateForStep(0)}hydrateResources(r){r&&NM(this.resourceState,r,this.resourceDefinitions)}updateForStep(r){const a=this.state;a.stepDurationMs=Math.max(0,a.stepDurationMs);for(const i of this.generatorList){const o=Br(i.definition.baseUnlock,this.conditionContext),u=i.state.isUnlocked;!i.state.isUnlocked&&o&&(i.state.isUnlocked=!0),i.state.isVisible=this.evaluateVisibility(i.definition.visibilityCondition),Number.isFinite(i.state.nextPurchaseReadyAtStep)?!u&&i.state.isUnlocked&&(i.state.nextPurchaseReadyAtStep=r+1):i.state.nextPurchaseReadyAtStep=r+1,i.state.owned=W0(i.state.owned,i.definition.maxLevel)}for(const i of this.upgradeList){const o=this.resolveUpgradeStatus(i);i.state.status=o,i.state.isVisible=this.evaluateVisibility(i.definition.visibilityCondition),i.state.unlockHint=o==="locked"?Ai(i.definition.unlockCondition??_M(i.definition.prerequisites)):void 0,i.state.costs=this.computeUpgradeCosts(i),i.state.purchases=i.purchases}for(const i of this.prestigeLayerList){const o=Br(i.definition.unlockCondition,this.conditionContext);i.state.isUnlocked=o,i.state.isVisible=o,i.state.unlockHint=o?void 0:Ai(i.definition.unlockCondition)}}getResourceAmount(r){return this.conditionContext.getResourceAmount(r)}getGeneratorRecord(r){return this.generators.get(r)}getUpgradeRecord(r){return this.upgrades.get(r)}getPrestigeLayerRecord(r){return this.prestigeLayers.get(r)}incrementGeneratorOwned(r,a){const i=this.generators.get(r);if(!i)return;const o=W0(i.state.owned+a,i.definition.maxLevel);i.state.owned=o}incrementUpgradePurchases(r){const a=this.upgrades.get(r);if(!a)return;const i=a.definition.repeatable,o=i?.maxPurchases??(i?Number.POSITIVE_INFINITY:1),u=a.purchases+1;if(Number.isFinite(o)){const d=Math.max(0,Math.floor(o));a.purchases=Math.min(u,d)}else a.purchases=u;a.state.purchases=a.purchases}getResourceDefinition(r){return this.resourceDefinitions.find(a=>a.id===r)}computeGeneratorCost(r,a){const i=this.generators.get(r);if(!i){const m=new Error(`Generator cost calculation failed: generator "${r}" not found`);this.onError?.(m);return}const o=i.definition.purchase.baseCost;if(!Number.isFinite(o)||o<0){const m=new Error(`Generator cost calculation failed for "${r}": baseCost is invalid (${o})`);this.onError?.(m);return}const u=Wf(i.definition.purchase.costCurve,a);if(u===void 0||u<0){const m=new Error(`Generator cost calculation failed for "${r}" at purchase index ${a}: cost curve evaluation returned ${u}`);this.onError?.(m);return}const d=u*o;if(!Number.isFinite(d)||d<0){const m=new Error(`Generator cost calculation failed for "${r}" at purchase index ${a}: final cost is invalid (${d})`);this.onError?.(m);return}return d}computeUpgradeCosts(r){const a=[],i=r.purchases,o=r.definition.id,u=r.definition.cost.baseCost;if(!Number.isFinite(u)||u<0){const p=new Error(`Upgrade cost calculation failed for "${o}": baseCost is invalid (${u})`);this.onError?.(p);return}const d=Wf(r.definition.cost.costCurve,i);if(d===void 0||d<0){const p=new Error(`Upgrade cost calculation failed for "${o}" at purchase level ${i}: cost curve evaluation returned ${d}`);this.onError?.(p);return}let m=d*u;const h=r.definition.repeatable?.costCurve;if(h){const p=Wf(h,i);if(p===void 0||p<0){const g=new Error(`Upgrade cost calculation failed for "${o}" at purchase level ${i}: repeatable cost curve evaluation returned ${p}`);this.onError?.(g);return}m*=p}if(!Number.isFinite(m)||m<0){const p=new Error(`Upgrade cost calculation failed for "${o}" at purchase level ${i}: final amount is invalid (${m})`);this.onError?.(p);return}return a.push({resourceId:r.definition.cost.currencyId,amount:m}),a}evaluateVisibility(r){return r?Br(r,this.conditionContext):!0}resolveUpgradeStatus(r){const a=r.definition.repeatable?r.definition.repeatable.maxPurchases??Number.POSITIVE_INFINITY:1;if(r.purchases>=a)return"purchased";if(!r.definition.prerequisites.every(u=>Br(u,this.conditionContext)))return"locked";const o=r.definition.unlockCondition;return o?Br(o,this.conditionContext)?"available":"locked":"available"}}class kM{constructor(r){Object.defineProperty(this,"coordinator",{enumerable:!0,configurable:!0,writable:!0,value:r})}getPurchaseQuote(r,a){if(!Number.isInteger(a)||a<=0)return;const i=this.coordinator.getGeneratorRecord(r);if(!i||!i.state.isUnlocked||!i.state.isVisible||i.definition.purchase.maxBulk!==void 0&&a>i.definition.purchase.maxBulk||i.definition.maxLevel!==void 0&&i.state.owned>=i.definition.maxLevel)return;const o=i.definition.purchase.currencyId;let u=0;for(let m=0;m<a;m+=1){const h=i.state.owned+m;if(i.definition.maxLevel!==void 0&&h>=i.definition.maxLevel)return;const p=this.coordinator.computeGeneratorCost(r,h);if(p===void 0||!Number.isFinite(p)||p<0)return;u+=p}return{generatorId:r,costs:[{resourceId:o,amount:u}]}}applyPurchase(r,a){!Number.isInteger(a)||a<=0||this.coordinator.incrementGeneratorOwned(r,a)}}class OM{constructor(r){Object.defineProperty(this,"coordinator",{enumerable:!0,configurable:!0,writable:!0,value:r})}getPurchaseQuote(r){const a=this.coordinator.getUpgradeRecord(r);if(!a)return;const i=this.coordinator.resolveUpgradeStatus(a),o=this.coordinator.computeUpgradeCosts(a);if(i==="locked")return{upgradeId:r,status:i,costs:o??[]};const u=a.definition.repeatable?a.definition.repeatable.maxPurchases??Number.POSITIVE_INFINITY:1;if(a.purchases>=u)return{upgradeId:r,status:"purchased",costs:[]};if(o)return{upgradeId:r,status:i,costs:o}}applyPurchase(r){this.coordinator.incrementUpgradePurchases(r)}}function AM(n,r){const a=J0(n.produces),i=J0(n.consumes),o=r||{id:n.id,displayName:ur(n.name,n.id),owned:0,isUnlocked:!1,isVisible:!0,produces:a,consumes:i,nextPurchaseReadyAtStep:1};return o.id=n.id,o.displayName=ur(n.name,n.id),o.owned=Number.isFinite(o.owned)?o.owned:0,o.isUnlocked=!!o.isUnlocked,o.isVisible=o.isVisible??!0,o.produces=a,o.consumes=i,o.nextPurchaseReadyAtStep=Number.isFinite(o.nextPurchaseReadyAtStep)?o.nextPurchaseReadyAtStep:1,{definition:n,state:o}}function RM(n,r){const a=r||{id:n.id,displayName:ur(n.name,n.id),status:"locked",costs:void 0,unlockHint:void 0,isVisible:!0};a.id=n.id,a.displayName=ur(n.name,n.id),a.isVisible=!!a.isVisible,a.costs=Array.isArray(a.costs)?a.costs:void 0,a.status=a.status??"locked";const i=n.repeatable,o=i?.maxPurchases??(i?Number.POSITIVE_INFINITY:1),u=Number.isFinite(o)&&o>0?Math.max(0,Math.floor(o)):o,d=a.purchases,m=d!==void 0&&Number.isFinite(d)?Math.max(0,Math.floor(d)):void 0;let h;return m!==void 0?h=m:a.status==="purchased"?h=Number.isFinite(u)&&u>0?u:1:h=0,Number.isFinite(u)&&(h=Math.min(h,u)),h=Math.max(0,Math.floor(h)),a.purchases=h,{definition:n,state:a,purchases:h}}function CM(n){const r=new Map;for(const a of n)r.set(a.id,{displayName:ur(a.name,a.id)});return r}function J0(n){const r=[];for(const a of n){const i=kn(a.rate,{variables:{level:1}});Number.isFinite(i)&&r.push({resourceId:a.resourceId,rate:i})}return r}function NM(n,r,a){const i=Hw(r,a),{remap:o}=i,u=r.unlocked??[],d=r.visible??[];for(let m=0;m<o.length;m+=1){const h=o[m];if(h===void 0)continue;const p=r.capacities[m],g=p??Number.POSITIVE_INFINITY;n.setCapacity(h,g);const v=r.amounts[m]??0,b=n.getAmount(h);if(v>b)n.addAmount(h,v-b);else if(v<b){const T=b-v;T>0&&n.spendAmount(h,T)}u[m]&&n.unlock(h),d[m]&&n.grantVisibility(h)}n.snapshot({mode:"publish"})}function Wf(n,r){const a=kn(n,{variables:{level:r}});return Number.isFinite(a)?a:void 0}function W0(n,r){const a=Number.isFinite(n)?n:0;if(r===void 0)return Math.max(0,a);const i=Math.max(0,r);return Math.max(0,Math.min(a,i))}function ur(n,r){return typeof n=="string"?n:n?.default??r}function MM(n,r){const a=r||{id:n.id,displayName:ur(n.name,n.id),summary:ur(n.summary,""),isUnlocked:!1,isVisible:!1,unlockHint:void 0};return a.id=n.id,a.displayName=ur(n.name,n.id),a.summary=ur(n.summary,""),a.isUnlocked=!!a.isUnlocked,a.isVisible=!!a.isVisible,{definition:n,state:a}}class au{constructor(r){Object.defineProperty(this,"coordinator",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"usedTokens",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}getPrestigeQuote(r){const a=this.coordinator.getPrestigeLayerRecord(r);if(!a)return;const i=a.state.isUnlocked;let o;if(!i)o="locked";else{const d=`${r}-prestige-count`;o=this.coordinator.getResourceAmount(d)>=1?"completed":"available"}const u=this.computeRewardPreview(a);return{layerId:r,status:o,reward:u,resetTargets:a.definition.resetTargets,retainedTargets:this.computeRetainedTargets(a)}}applyPrestige(r,a){if(!a)throw new Error("Prestige operation requires a confirmation token");const i=Date.now();for(const[w,E]of this.usedTokens)i-E>au.TOKEN_EXPIRATION_MS&&this.usedTokens.delete(w);if(this.usedTokens.has(a))throw J.recordWarning("PrestigeResetDuplicateToken",{layerId:r}),new Error("Confirmation token has already been used");this.usedTokens.set(a,i);const o=this.coordinator.getPrestigeLayerRecord(r);if(!o)throw new Error(`Prestige layer "${r}" not found`);if(!o.state.isUnlocked)throw new Error(`Prestige layer "${r}" is locked`);J.recordProgress("PrestigeResetTokenReceived",{layerId:r,tokenLength:a.length});const u=this.coordinator.resourceState,d=o.definition.retention??[],m=this.buildFormulaContext(),h=this.computeRewardPreview(o,m),p=new Set;for(const w of d)w.kind==="resource"&&p.add(w.resourceId);const g=`${r}-prestige-count`;p.add(g);const v=[];for(const w of o.definition.resetTargets){if(p.has(w))continue;const E=this.coordinator.getResourceDefinition(w);E&&v.push({resourceId:w,resetToAmount:E.startAmount??0})}const b=[];for(const w of d)if(w.kind==="resource"&&w.amount){const E=kn(w.amount,m);b.push({resourceId:w.resourceId,retainedAmount:E})}bM({layerId:r,resourceState:u,reward:{resourceId:h.resourceId,amount:h.amount},resetTargets:v,retentionTargets:b});const T=u.getIndex(g);T!==void 0&&u.addAmount(T,1)}computeRewardPreview(r,a){const i=r.definition.reward,o=i.resourceId,u=a??this.buildFormulaContext(),d=kn(i.baseReward,u);let m=Number.isFinite(d)?d:0;if(i.multiplierCurve){const h=kn(i.multiplierCurve,u);Number.isFinite(h)&&(m*=h)}return{resourceId:o,amount:Math.max(0,Math.floor(m))}}computeRetainedTargets(r){const a=r.definition.retention??[],i=[];for(const o of a)o.kind==="resource"?i.push(o.resourceId):o.kind==="upgrade"&&i.push(o.upgradeId);return Object.freeze(i)}buildFormulaContext(){const r=this.coordinator.resourceState,a=r.snapshot({mode:"publish"}),i={level:1};for(let u=0;u<a.ids.length;u++){const d=a.ids[u];i[d]=a.amounts[u]??0}return{variables:i,entities:{resource:u=>{const d=r.getIndex(u);return d!==void 0?a.amounts[d]??0:void 0}}}}}Object.defineProperty(au,"TOKEN_EXPIRATION_MS",{enumerable:!0,configurable:!0,writable:!0,value:6e4});const IM=100,xM=50;class zM{constructor(r={}){Object.defineProperty(this,"systems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"accumulator",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"stepSizeMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxStepsPerFrame",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"commandQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"commandDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"eventBus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"eventPublisher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentStep",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"nextExecutableStep",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"diagnostics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.stepSizeMs=r.stepSizeMs??IM,this.maxStepsPerFrame=r.maxStepsPerFrame??xM,this.commandQueue=r.commandQueue??new N1,this.commandDispatcher=r.commandDispatcher??new O1;const a=r.eventBusOptions??_1;this.eventBus=r.eventBus??new p1(a),this.eventPublisher=LM(this.eventBus),this.commandDispatcher.setEventPublisher(this.eventPublisher),this.diagnostics=dw(r.diagnostics,{stepSizeMs:this.stepSizeMs});const i=r.initialStep??0;Number.isFinite(i)&&i>=0&&(this.currentStep=i,this.nextExecutableStep=i)}addSystem(r){const a=[];if(typeof r.setup=="function"){const i={events:{on:(o,u,d)=>{const m=this.eventBus.on(o,u,{...d,label:d?.label??`system:${r.id}`});return a.push(m),m}}};try{r.setup(i)}catch(o){for(const u of a)u.unsubscribe();throw new Error(`System "${r.id}" failed to register event subscriptions: ${o instanceof Error?o.message:String(o)}`)}}this.systems.push({system:r,subscriptions:a})}getCommandQueue(){return this.commandQueue}getCommandDispatcher(){return this.commandDispatcher}getCurrentStep(){return this.currentStep}getNextExecutableStep(){return this.nextExecutableStep}getStepSizeMs(){return this.stepSizeMs}getMaxStepsPerFrame(){return this.maxStepsPerFrame}getEventBus(){return this.eventBus}getDiagnosticTimeline(){return this.diagnostics.timeline}getDiagnosticTimelineSnapshot(){return this.diagnostics.snapshot()}readDiagnosticsDelta(r){return this.diagnostics.readDelta(r)}enableDiagnostics(r){if(r===!1){this.diagnostics.disable();return}this.diagnostics.enable(r)}tick(r){if(r<=0)return;this.accumulator+=r;const a=Math.floor(this.accumulator/this.stepSizeMs),i=Math.min(a,this.maxStepsPerFrame);if(i!==0){this.accumulator-=i*this.stepSizeMs;for(let o=0;o<i;o+=1){const u=this.diagnostics.beginTick(this.currentStep),d=this.commandQueue.size;let m=d,h=0,p=0,g=0;try{this.eventBus.beginTick(this.currentStep,{resetOutbound:o===0}),this.nextExecutableStep=this.currentStep;const v=this.commandQueue.dequeueUpToStep(this.currentStep);h=v.length,this.nextExecutableStep=this.currentStep+1;for(const E of v){if(E.step!==this.currentStep){g+=1,J.recordError("CommandStepMismatch",{expectedStep:this.currentStep,commandStep:E.step,type:E.type});continue}this.commandDispatcher.execute(E),p+=1}const b={tick:this.currentStep};this.eventBus.dispatch(b);const T={deltaMs:this.stepSizeMs,step:this.currentStep,events:this.eventPublisher};for(const{system:E}of this.systems){const A=u.startSystem(E.id);try{E.tick(T),A.end()}catch(_){try{A.fail(_)}catch(R){J.recordError("SystemExecutionFailed",{systemId:E.id,error:R instanceof Error?R:new Error(String(R))})}}this.eventBus.dispatch(b)}m=this.commandQueue.size;const w=this.eventBus.getBackPressureSnapshot();u.recordEventMetrics(jM(w)),u.recordQueueMetrics({sizeBefore:d,sizeAfter:m,captured:h,executed:p,skipped:g}),u.setAccumulatorBacklogMs(this.accumulator),DM(w),this.currentStep+=1,this.nextExecutableStep=this.currentStep,J.recordTick(),u.complete()}catch(v){u.fail(v)}}}}}function LM(n){return{publish:n.publish.bind(n)}}function DM(n){J.recordCounters("events",{published:n.counters.published,softLimited:n.counters.softLimited,overflowed:n.counters.overflowed,subscribers:n.counters.subscribers});const r={};for(const a of n.channels)r[`channel:${a.channel}`]=a.cooldownTicksRemaining;J.recordCounters("events.cooldown_ticks",r)}function jM(n){return{counters:{published:n.counters.published,softLimited:n.counters.softLimited,overflowed:n.counters.overflowed,subscribers:n.counters.subscribers},channels:n.channels.map(r=>({channel:r.channel,subscribers:r.subscribers,remainingCapacity:r.remainingCapacity,cooldownTicksRemaining:r.cooldownTicksRemaining,softLimitBreaches:r.softLimitBreaches,eventsPerSecond:r.eventsPerSecond,softLimitActive:r.softLimitActive}))}}const UM=gn({id:"cosmic-bakery.flour",name:{default:"Flour",variants:{}},category:"primary",tier:1,startAmount:10,capacity:100,visible:!0,unlocked:!0}),$M=gn({id:"cosmic-bakery.sugar",name:{default:"Sugar",variants:{}},category:"primary",tier:1,capacity:100,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",amount:{kind:"constant",value:15}}}),BM=gn({id:"cosmic-bakery.dough",name:{default:"Dough",variants:{}},category:"primary",tier:1,capacity:500,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",amount:{kind:"constant",value:25}}}),qM=gn({id:"cosmic-bakery.stardust",name:{default:"Stardust",variants:{}},category:"primary",tier:2,capacity:250,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.dough",comparator:"gte",amount:{kind:"constant",value:50}}}),PM=gn({id:"cosmic-bakery.moon-cream",name:{default:"Moon Cream",variants:{}},category:"primary",tier:2,capacity:250,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",amount:{kind:"constant",value:25}}}),GM=gn({id:"cosmic-bakery.enchanted-pastries",name:{default:"Enchanted Pastries",variants:{}},category:"primary",tier:2,capacity:1e3,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",amount:{kind:"constant",value:50}}}),VM=gn({id:"cosmic-bakery.void-essence",name:{default:"Void Essence",variants:{}},category:"primary",tier:3,capacity:500,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",amount:{kind:"constant",value:100}}}),HM=gn({id:"cosmic-bakery.reality-dough",name:{default:"Reality Dough",variants:{}},category:"primary",tier:3,capacity:null,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.void-essence",comparator:"gte",amount:{kind:"constant",value:50}}}),YM=gn({id:"cosmic-bakery.celestial-gems",name:{default:"Celestial Gems",variants:{}},category:"currency",economyClassification:"hard",tier:1,visible:!0,unlocked:!0}),ZM=gn({id:"cosmic-bakery.ascension-stars",name:{default:"Ascension Stars",variants:{}},category:"prestige",tier:3,visible:!0,unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),FM=gn({id:"cosmic-bakery.cosmic-flour",name:{default:"Cosmic Flour",variants:{}},category:"prestige",tier:3,visible:!0,unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),XM=gn({id:"cosmic-bakery.prestige-count",name:{default:"Prestige Count",variants:{}},category:"misc",tier:1,visible:!1}),QM=fr({id:"cosmic-bakery.hand-mixer",name:{default:"Hand Mixer",variants:{}},produces:[{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:1}}],consumes:[],purchase:{currencyId:"cosmic-bakery.flour",baseCost:10,costCurve:{kind:"exponential",base:10,growth:1.15,offset:0}},maxLevel:50,baseUnlock:{kind:"always"}}),KM=fr({id:"cosmic-bakery.sugar-mill",name:{default:"Sugar Mill",variants:{}},produces:[{resourceId:"cosmic-bakery.sugar",rate:{kind:"constant",value:.5}}],consumes:[],purchase:{currencyId:"cosmic-bakery.flour",baseCost:25,costCurve:{kind:"exponential",base:25,growth:1.2,offset:0}},maxLevel:40,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",amount:{kind:"constant",value:15}}}),JM=fr({id:"cosmic-bakery.kneading-station",name:{default:"Kneading Station",variants:{}},produces:[{resourceId:"cosmic-bakery.dough",rate:{kind:"constant",value:.25}}],consumes:[{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:.1}},{resourceId:"cosmic-bakery.sugar",rate:{kind:"constant",value:.05}}],purchase:{currencyId:"cosmic-bakery.flour",baseCost:50,costCurve:{kind:"exponential",base:50,growth:1.25,offset:0}},maxLevel:35,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",amount:{kind:"constant",value:25}}}),WM=fr({id:"cosmic-bakery.star-collector",name:{default:"Star Collector",variants:{}},produces:[{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:.1}}],consumes:[{resourceId:"cosmic-bakery.dough",rate:{kind:"constant",value:.2}}],purchase:{currencyId:"cosmic-bakery.dough",baseCost:100,costCurve:{kind:"exponential",base:100,growth:1.3,offset:0}},maxLevel:30,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.dough",comparator:"gte",amount:{kind:"constant",value:50}}}),eI=fr({id:"cosmic-bakery.moonbeam-churn",name:{default:"Moonbeam Churn",variants:{}},produces:[{resourceId:"cosmic-bakery.moon-cream",rate:{kind:"constant",value:.08}}],consumes:[{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:.15}}],purchase:{currencyId:"cosmic-bakery.stardust",baseCost:50,costCurve:{kind:"exponential",base:50,growth:1.35,offset:0}},maxLevel:25,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",amount:{kind:"constant",value:25}}}),tI=fr({id:"cosmic-bakery.enchanted-oven",name:{default:"Enchanted Oven",variants:{}},produces:[{resourceId:"cosmic-bakery.enchanted-pastries",rate:{kind:"constant",value:.05}}],consumes:[{resourceId:"cosmic-bakery.dough",rate:{kind:"constant",value:.1}},{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:.05}},{resourceId:"cosmic-bakery.moon-cream",rate:{kind:"constant",value:.03}}],purchase:{currencyId:"cosmic-bakery.stardust",baseCost:100,costCurve:{kind:"exponential",base:100,growth:1.4,offset:0}},maxLevel:25,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",amount:{kind:"constant",value:50}}}),nI=fr({id:"cosmic-bakery.void-portal",name:{default:"Void Portal",variants:{}},produces:[{resourceId:"cosmic-bakery.void-essence",rate:{kind:"constant",value:.03}}],consumes:[{resourceId:"cosmic-bakery.enchanted-pastries",rate:{kind:"constant",value:.08}}],purchase:{currencyId:"cosmic-bakery.enchanted-pastries",baseCost:200,costCurve:{kind:"exponential",base:200,growth:1.45,offset:0}},maxLevel:20,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",amount:{kind:"constant",value:100}}}),rI=fr({id:"cosmic-bakery.reality-forge",name:{default:"Reality Forge",variants:{}},produces:[{resourceId:"cosmic-bakery.reality-dough",rate:{kind:"constant",value:.02}}],consumes:[{resourceId:"cosmic-bakery.void-essence",rate:{kind:"constant",value:.05}},{resourceId:"cosmic-bakery.cosmic-flour",rate:{kind:"constant",value:.01}}],purchase:{currencyId:"cosmic-bakery.void-essence",baseCost:100,costCurve:{kind:"exponential",base:100,growth:1.5,offset:0}},maxLevel:15,baseUnlock:{kind:"allOf",conditions:[{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"},{kind:"resourceThreshold",resourceId:"cosmic-bakery.void-essence",comparator:"gte",amount:{kind:"constant",value:50}}]}}),aI=fr({id:"cosmic-bakery.celestial-bakery",name:{default:"Celestial Bakery",variants:{}},produces:[{resourceId:"cosmic-bakery.ascension-stars",rate:{kind:"constant",value:.01}}],consumes:[{resourceId:"cosmic-bakery.reality-dough",rate:{kind:"constant",value:.03}}],purchase:{currencyId:"cosmic-bakery.reality-dough",baseCost:50,costCurve:{kind:"exponential",base:50,growth:1.6,offset:0}},maxLevel:10,baseUnlock:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),sI=Gt({id:"cosmic-bakery.better-whisks",name:{default:"Better Whisks",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.hand-mixer"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:50,costCurve:{kind:"constant",value:50}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:1.25}}],unlockCondition:{kind:"always"}}),iI=Gt({id:"cosmic-bakery.refined-sugar",name:{default:"Refined Sugar",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.sugar-mill"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:75,costCurve:{kind:"constant",value:75}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.sugar-mill",operation:"multiply",value:{kind:"constant",value:1.25}}],unlockCondition:{kind:"upgradeOwned",upgradeId:"cosmic-bakery.better-whisks",requiredPurchases:1}}),oI=Gt({id:"cosmic-bakery.elastic-gluten",name:{default:"Elastic Gluten",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.kneading-station"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:100,costCurve:{kind:"constant",value:100}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.kneading-station",operation:"multiply",value:{kind:"constant",value:1.5}}],unlockCondition:{kind:"always"}}),cI=Gt({id:"cosmic-bakery.bulk-mixing",name:{default:"Bulk Mixing",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.hand-mixer"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:150,costCurve:{kind:"constant",value:150}},repeatable:{maxPurchases:5,costCurve:{kind:"linear",base:150,slope:50}},effects:[{kind:"modifyGeneratorCost",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:.9}}],unlockCondition:{kind:"always"}}),uI=Gt({id:"cosmic-bakery.double-batch",name:{default:"Double Batch",variants:{}},category:"global",targets:[{kind:"global"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:200,costCurve:{kind:"constant",value:200}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:1.15}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.sugar-mill",operation:"multiply",value:{kind:"constant",value:1.15}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.kneading-station",operation:"multiply",value:{kind:"constant",value:1.15}}],unlockCondition:{kind:"always"}}),lI=Gt({id:"cosmic-bakery.stellar-alignment",name:{default:"Stellar Alignment",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.star-collector"}],cost:{currencyId:"cosmic-bakery.dough",baseCost:200,costCurve:{kind:"constant",value:200}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.star-collector",operation:"multiply",value:{kind:"constant",value:1.4}}],unlockCondition:{kind:"always"}}),dI=Gt({id:"cosmic-bakery.lunar-cycle-sync",name:{default:"Lunar Cycle Sync",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.moonbeam-churn"}],cost:{currencyId:"cosmic-bakery.stardust",baseCost:50,costCurve:{kind:"constant",value:50}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.moonbeam-churn",operation:"multiply",value:{kind:"constant",value:1.35}}],unlockCondition:{kind:"always"}}),fI=Gt({id:"cosmic-bakery.enchantment-mastery",name:{default:"Enchantment Mastery",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.enchanted-oven"}],cost:{currencyId:"cosmic-bakery.stardust",baseCost:100,costCurve:{kind:"constant",value:100}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.enchanted-oven",operation:"multiply",value:{kind:"constant",value:1.5}}],unlockCondition:{kind:"always"}}),mI=Gt({id:"cosmic-bakery.cosmic-resonance",name:{default:"Cosmic Resonance",variants:{}},category:"global",targets:[{kind:"global"}],cost:{currencyId:"cosmic-bakery.moon-cream",baseCost:150,costCurve:{kind:"constant",value:150}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.star-collector",operation:"multiply",value:{kind:"constant",value:1.2}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.moonbeam-churn",operation:"multiply",value:{kind:"constant",value:1.2}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.enchanted-oven",operation:"multiply",value:{kind:"constant",value:1.2}}],unlockCondition:{kind:"always"}}),hI=Gt({id:"cosmic-bakery.void-stabilizers",name:{default:"Void Stabilizers",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.void-portal"}],cost:{currencyId:"cosmic-bakery.void-essence",baseCost:50,costCurve:{kind:"constant",value:50}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.void-portal",operation:"multiply",value:{kind:"constant",value:1.3}}],unlockCondition:{kind:"always"}}),pI=Gt({id:"cosmic-bakery.reality-threads",name:{default:"Reality Threads",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.reality-forge"}],cost:{currencyId:"cosmic-bakery.reality-dough",baseCost:25,costCurve:{kind:"constant",value:25}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.reality-forge",operation:"multiply",value:{kind:"constant",value:1.25}}],unlockCondition:{kind:"always"}}),gI=Gt({id:"cosmic-bakery.remembered-recipes",name:{default:"Remembered Recipes",variants:{}},category:"resource",targets:[{kind:"resource",id:"cosmic-bakery.flour"}],cost:{currencyId:"cosmic-bakery.ascension-stars",baseCost:1,costCurve:{kind:"constant",value:1}},effects:[{kind:"modifyResourceRate",resourceId:"cosmic-bakery.flour",operation:"add",value:{kind:"constant",value:50}}],unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),yI=Gt({id:"cosmic-bakery.timeless-techniques",name:{default:"Timeless Techniques",variants:{}},category:"global",targets:[{kind:"global"}],cost:{currencyId:"cosmic-bakery.ascension-stars",baseCost:3,costCurve:{kind:"constant",value:3}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:1.1}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.sugar-mill",operation:"multiply",value:{kind:"constant",value:1.1}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.kneading-station",operation:"multiply",value:{kind:"constant",value:1.1}}],unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),vI=Gt({id:"cosmic-bakery.celestial-blessing",name:{default:"Celestial Blessing",variants:{}},category:"global",targets:[{kind:"global"}],cost:{currencyId:"cosmic-bakery.ascension-stars",baseCost:5,costCurve:{kind:"constant",value:5}},repeatable:{maxPurchases:10,costCurve:{kind:"linear",base:5,slope:5}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.sugar-mill",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.kneading-station",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.star-collector",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.moonbeam-churn",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.enchanted-oven",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.void-portal",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.reality-forge",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.celestial-bakery",operation:"multiply",value:{kind:"constant",value:1.05}}],unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),bI=yn({id:"cosmic-bakery.first-batch",name:{default:"First Batch",variants:{}},description:{default:"Purchase your first hand mixer",variants:{}},category:"progression",tier:"bronze",track:{kind:"generator-level",generatorId:"cosmic-bakery.hand-mixer",level:{kind:"constant",value:1}}}),EI=yn({id:"cosmic-bakery.sugar-rush",name:{default:"Sugar Rush",variants:{}},description:{default:"Unlock sugar production",variants:{}},category:"progression",tier:"bronze",track:{kind:"resource",resourceId:"cosmic-bakery.sugar",comparator:"gte",threshold:{kind:"constant",value:1}}}),SI=yn({id:"cosmic-bakery.rising-star",name:{default:"Rising Star",variants:{}},description:{default:"Unlock stardust production",variants:{}},category:"progression",tier:"bronze",track:{kind:"resource",resourceId:"cosmic-bakery.stardust",comparator:"gte",threshold:{kind:"constant",value:1}}}),_I=yn({id:"cosmic-bakery.enchanted-chef",name:{default:"Enchanted Chef",variants:{}},description:{default:"Create your first enchanted pastry",variants:{}},category:"progression",tier:"silver",track:{kind:"resource",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",threshold:{kind:"constant",value:1}}}),TI=yn({id:"cosmic-bakery.void-walker",name:{default:"Void Walker",variants:{}},description:{default:"Harness the power of void essence",variants:{}},category:"progression",tier:"silver",track:{kind:"resource",resourceId:"cosmic-bakery.void-essence",comparator:"gte",threshold:{kind:"constant",value:1}}}),wI=yn({id:"cosmic-bakery.reality-baker",name:{default:"Reality Baker",variants:{}},description:{default:"Forge your first reality dough",variants:{}},category:"progression",tier:"gold",track:{kind:"resource",resourceId:"cosmic-bakery.reality-dough",comparator:"gte",threshold:{kind:"constant",value:1}}}),kI=yn({id:"cosmic-bakery.flour-power",name:{default:"Flour Power",variants:{}},description:{default:"Own 10 hand mixers",variants:{}},category:"collection",tier:"bronze",track:{kind:"generator-level",generatorId:"cosmic-bakery.hand-mixer",level:{kind:"constant",value:10}}}),OI=yn({id:"cosmic-bakery.sweet-empire",name:{default:"Sweet Empire",variants:{}},description:{default:"Own 10 sugar mills",variants:{}},category:"collection",tier:"bronze",track:{kind:"generator-level",generatorId:"cosmic-bakery.sugar-mill",level:{kind:"constant",value:10}}}),AI=yn({id:"cosmic-bakery.master-kneader",name:{default:"Master Kneader",variants:{}},description:{default:"Own 10 kneading stations",variants:{}},category:"collection",tier:"silver",track:{kind:"generator-level",generatorId:"cosmic-bakery.kneading-station",level:{kind:"constant",value:10}}}),RI=yn({id:"cosmic-bakery.stargazer",name:{default:"Stargazer",variants:{}},description:{default:"Own 5 star collectors",variants:{}},category:"collection",tier:"silver",track:{kind:"generator-level",generatorId:"cosmic-bakery.star-collector",level:{kind:"constant",value:5}}}),CI=yn({id:"cosmic-bakery.moon-child",name:{default:"Moon Child",variants:{}},description:{default:"Own 5 moonbeam churns",variants:{}},category:"collection",tier:"gold",track:{kind:"generator-level",generatorId:"cosmic-bakery.moonbeam-churn",level:{kind:"constant",value:5}}}),NI=yn({id:"cosmic-bakery.oven-master",name:{default:"Oven Master",variants:{}},description:{default:"Own 10 enchanted ovens",variants:{}},category:"collection",tier:"gold",track:{kind:"generator-level",generatorId:"cosmic-bakery.enchanted-oven",level:{kind:"constant",value:10}}}),MI=Sa({id:"cosmic-bakery.auto-mixer",name:{default:"Auto Mixer",variants:{}},description:{default:"Automatically purchases hand mixers",variants:{}},targetType:"generator",targetId:"cosmic-bakery.hand-mixer",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",threshold:{kind:"constant",value:100}},resourceCost:{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:500}},unlockCondition:{kind:"always"}}),II=Sa({id:"cosmic-bakery.auto-mill",name:{default:"Auto Mill",variants:{}},description:{default:"Automatically purchases sugar mills",variants:{}},targetType:"generator",targetId:"cosmic-bakery.sugar-mill",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",threshold:{kind:"constant",value:200}},resourceCost:{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:750}},unlockCondition:{kind:"always"}}),xI=Sa({id:"cosmic-bakery.auto-knead",name:{default:"Auto Knead",variants:{}},description:{default:"Automatically purchases kneading stations",variants:{}},targetType:"generator",targetId:"cosmic-bakery.kneading-station",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",threshold:{kind:"constant",value:300}},resourceCost:{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:1e3}},unlockCondition:{kind:"always"}}),zI=Sa({id:"cosmic-bakery.stardust-collector",name:{default:"Stardust Collector",variants:{}},description:{default:"Automatically purchases star collectors",variants:{}},targetType:"generator",targetId:"cosmic-bakery.star-collector",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.dough",comparator:"gte",threshold:{kind:"constant",value:500}},resourceCost:{resourceId:"cosmic-bakery.dough",rate:{kind:"constant",value:2e3}},unlockCondition:{kind:"always"}}),LI=Sa({id:"cosmic-bakery.smart-churn",name:{default:"Smart Churn",variants:{}},description:{default:"Automatically purchases moonbeam churns",variants:{}},targetType:"generator",targetId:"cosmic-bakery.moonbeam-churn",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",threshold:{kind:"constant",value:200}},resourceCost:{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:500}},unlockCondition:{kind:"always"}}),DI=Sa({id:"cosmic-bakery.smart-oven",name:{default:"Smart Oven",variants:{}},description:{default:"Automatically purchases enchanted ovens",variants:{}},targetType:"generator",targetId:"cosmic-bakery.enchanted-oven",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",threshold:{kind:"constant",value:500}},resourceCost:{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:1e3}},unlockCondition:{kind:"always"}}),jI=Sa({id:"cosmic-bakery.void-automator",name:{default:"Void Automator",variants:{}},description:{default:"Automatically purchases void portals",variants:{}},targetType:"generator",targetId:"cosmic-bakery.void-portal",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",threshold:{kind:"constant",value:1e3}},resourceCost:{resourceId:"cosmic-bakery.enchanted-pastries",rate:{kind:"constant",value:5e3}},unlockCondition:{kind:"always"}}),UI=vM({id:"cosmic-bakery.celestial-ascension",name:{default:"Celestial Ascension",variants:{}},summary:{default:"Ascend to the celestial realm and gain powerful bonuses",variants:{}},unlockCondition:{kind:"allOf",conditions:[{kind:"resourceThreshold",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",amount:{kind:"constant",value:500}},{kind:"generatorLevel",generatorId:"cosmic-bakery.enchanted-oven",comparator:"gte",level:{kind:"constant",value:10}}]},resetTargets:["cosmic-bakery.flour","cosmic-bakery.sugar","cosmic-bakery.dough","cosmic-bakery.stardust","cosmic-bakery.moon-cream","cosmic-bakery.enchanted-pastries","cosmic-bakery.void-essence"],retention:[{kind:"resource",resourceId:"cosmic-bakery.ascension-stars"},{kind:"resource",resourceId:"cosmic-bakery.cosmic-flour"},{kind:"resource",resourceId:"cosmic-bakery.celestial-gems"}],reward:{resourceId:"cosmic-bakery.ascension-stars",baseReward:{kind:"expression",expression:{kind:"call",name:"clamp",args:[{kind:"binary",op:"max",left:{kind:"binary",op:"div",left:{kind:"ref",target:{type:"resource",id:"cosmic-bakery.enchanted-pastries"}},right:{kind:"literal",value:100}},right:{kind:"literal",value:1}},{kind:"literal",value:1},{kind:"literal",value:1e3}]}}}}),Sm=yM({metadata:{id:"@idle-engine/cosmic-bakery",title:{default:"Cosmic Bakery",variants:{}},summary:{default:"A whimsical idle game about cosmic baking",variants:{}},version:"0.1.0",engine:">=0.4.0 <1.0.0",authors:["Idle Engine Team"],defaultLocale:"en-US",supportedLocales:["en-US"],tags:["game","cosmic","bakery"],links:[]},resources:[UM,$M,BM,qM,PM,GM,VM,HM,YM,ZM,FM,XM],generators:[QM,KM,JM,WM,eI,tI,nI,rI,aI],upgrades:[sI,iI,oI,cI,uI,lI,dI,fI,mI,hI,pI,gI,yI,vI],achievements:[bI,EI,SI,_I,TI,wI,kI,OI,AI,RI,CI,NI],automations:[MI,II,xI,zI,LI,DI,jI],prestigeLayers:[UI],metrics:[],transforms:[],guildPerks:[],runtimeEvents:[]});if(Sm.balanceErrors.length>0)throw new Error(`Content pack validation failed: ${JSON.stringify(Sm.balanceErrors,null,2)}`);const $I=Sm.pack;function BI(){const n=_n.useRef(null),r=_n.useRef(null),[a,i]=_n.useState({resources:new Map,generators:new Map,upgrades:new Map,achievements:new Map,ready:!1});_n.useEffect(()=>{const v=TM({content:$I,stepDurationMs:100});r.current=v;const b=new zM({stepSizeMs:100});n.current=b,sk({dispatcher:b.getCommandDispatcher(),resources:v.resourceState,generatorPurchases:v.generatorEvaluator,upgradePurchases:v.upgradeEvaluator});const T=SM({resourceState:v.resourceState,generators:()=>(v.state.generators??[]).map(R=>({id:R.id,owned:R.owned,produces:R.produces??[],consumes:R.consumes??[]}))});b.addSystem(T),v.updateForStep(0);const w=Sv(0,performance.now(),v.state);o(w),i(R=>({...R,ready:!0}));let E=performance.now(),A;const _=R=>{const M=R-E;E=R;const N=b.getCurrentStep();b.tick(M);const U=b.getCurrentStep();if(U>N){v.updateForStep(U);const B=Sv(U,R,v.state);o(B)}A=requestAnimationFrame(_)};return A=requestAnimationFrame(_),()=>{cancelAnimationFrame(A)}},[]);const o=_n.useCallback(g=>{const v=new Map;for(const E of g.resources)v.set(E.id,{amount:E.amount,capacity:E.capacity??null,rate:E.perTick*10});const b=new Map;for(const E of g.generators??[])b.set(E.id,{level:E.owned,unlocked:E.isUnlocked});const T=new Map;for(const E of g.upgrades??[]){const A=E.status==="purchased"?1:0,_=E.isVisible;T.set(E.id,{purchased:A,unlocked:_})}const w=new Map;i(E=>({...E,resources:v,generators:b,upgrades:T,achievements:w}))},[]),u=_n.useCallback(g=>{n.current&&n.current.getCommandDispatcher().execute({type:"PURCHASE_GENERATOR",payload:{generatorId:g,count:1},step:n.current.getCurrentStep(),priority:1,timestamp:performance.now()})},[]),d=_n.useCallback(g=>{n.current&&n.current.getCommandDispatcher().execute({type:"PURCHASE_UPGRADE",payload:{upgradeId:g},step:n.current.getCurrentStep(),priority:1,timestamp:performance.now()})},[]),m=_n.useCallback(()=>{console.log("Save functionality not yet implemented - requires persistence API")},[]),h=_n.useCallback(()=>{window.location.reload()},[]),p=_n.useCallback(()=>{n.current&&n.current.getCommandDispatcher().execute({type:"TRIGGER_PRESTIGE",payload:{prestigeLayerId:"cosmic-bakery.celestial-ascension"},step:n.current.getCurrentStep(),priority:1,timestamp:performance.now()})},[]);return{state:a,buyGenerator:u,buyUpgrade:d,saveGame:m,resetGame:h,triggerPrestige:p}}const qI={"cosmic-bakery.flour":"Flour","cosmic-bakery.sugar":"Sugar","cosmic-bakery.dough":"Dough","cosmic-bakery.stardust":"Stardust","cosmic-bakery.moon-cream":"Moon Cream","cosmic-bakery.enchanted-pastries":"Enchanted Pastries","cosmic-bakery.void-essence":"Void Essence","cosmic-bakery.reality-dough":"Reality Dough","cosmic-bakery.ascension-stars":"Ascension Stars","cosmic-bakery.celestial-gems":"Celestial Gems","cosmic-bakery.cosmic-flour":"Cosmic Flour"},PI=["cosmic-bakery.flour","cosmic-bakery.sugar","cosmic-bakery.dough","cosmic-bakery.stardust","cosmic-bakery.moon-cream","cosmic-bakery.enchanted-pastries","cosmic-bakery.void-essence","cosmic-bakery.reality-dough","cosmic-bakery.ascension-stars","cosmic-bakery.celestial-gems","cosmic-bakery.cosmic-flour"];function em(n){return n>=1e9?(n/1e9).toFixed(2)+"B":n>=1e6?(n/1e6).toFixed(2)+"M":n>=1e3?(n/1e3).toFixed(2)+"K":n.toFixed(1)}function GI({resources:n}){const r=PI.filter(a=>{const i=n.get(a);return i&&i.amount>0});return r.length===0?null:ce.jsxs("div",{className:"bg-cosmic-900/50 rounded-lg p-4 backdrop-blur-sm border border-cosmic-700",children:[ce.jsx("h2",{className:"text-gold-400 font-display text-xl mb-3",children:"Resources"}),ce.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:r.map(a=>{const i=n.get(a),o=qI[a]||a,u=i.capacity?Math.min(100,i.amount/i.capacity*100):null;return ce.jsxs("div",{className:"bg-cosmic-800/60 rounded p-3",children:[ce.jsx("div",{className:"text-cosmic-200 text-sm font-semibold",children:o}),ce.jsxs("div",{className:"text-gold-300 text-lg font-bold",children:[em(i.amount),i.capacity&&ce.jsxs("span",{className:"text-cosmic-400 text-sm",children:["/",em(i.capacity)]})]}),i.rate!==0&&ce.jsxs("div",{className:`text-xs ${i.rate>0?"text-green-400":"text-red-400"}`,children:[i.rate>0?"+":"",em(i.rate),"/s"]}),u!==null&&ce.jsx("div",{className:"mt-1 h-1 bg-cosmic-700 rounded-full overflow-hidden",children:ce.jsx("div",{className:"h-full bg-gold-500 transition-all",style:{width:`${u}%`}})})]},a)})})]})}const hS={"cosmic-bakery.hand-mixer":{name:"Hand Mixer",produces:"Flour",cost:{resource:"cosmic-bakery.flour",base:10,growth:1.15}},"cosmic-bakery.sugar-mill":{name:"Sugar Mill",produces:"Sugar",cost:{resource:"cosmic-bakery.flour",base:25,growth:1.2}},"cosmic-bakery.kneading-station":{name:"Kneading Station",produces:"Dough",cost:{resource:"cosmic-bakery.flour",base:50,growth:1.25}},"cosmic-bakery.star-collector":{name:"Star Collector",produces:"Stardust",cost:{resource:"cosmic-bakery.dough",base:100,growth:1.3}},"cosmic-bakery.moonbeam-churn":{name:"Moonbeam Churn",produces:"Moon Cream",cost:{resource:"cosmic-bakery.stardust",base:50,growth:1.35}},"cosmic-bakery.enchanted-oven":{name:"Enchanted Oven",produces:"Pastries",cost:{resource:"cosmic-bakery.stardust",base:100,growth:1.4}},"cosmic-bakery.void-portal":{name:"Void Portal",produces:"Void Essence",cost:{resource:"cosmic-bakery.enchanted-pastries",base:200,growth:1.45}},"cosmic-bakery.reality-forge":{name:"Reality Forge",produces:"Reality Dough",cost:{resource:"cosmic-bakery.void-essence",base:100,growth:1.5}},"cosmic-bakery.celestial-bakery":{name:"Celestial Bakery",produces:"Stars",cost:{resource:"cosmic-bakery.reality-dough",base:50,growth:1.6}}},VI=Object.keys(hS);function HI(n){return n>=1e9?(n/1e9).toFixed(2)+"B":n>=1e6?(n/1e6).toFixed(2)+"M":n>=1e3?(n/1e3).toFixed(2)+"K":n.toFixed(0)}function YI(n,r,a){return Math.floor(n*Math.pow(r,a))}function ZI({generators:n,resources:r,onBuy:a}){const i=VI.filter(o=>n.get(o)?.unlocked);return i.length===0?null:ce.jsxs("div",{className:"bg-cosmic-900/50 rounded-lg p-4 backdrop-blur-sm border border-cosmic-700",children:[ce.jsx("h2",{className:"text-gold-400 font-display text-xl mb-3",children:"Generators"}),ce.jsx("div",{className:"space-y-2",children:i.map(o=>{const u=n.get(o),d=hS[o],m=YI(d.cost.base,d.cost.growth,u.level),h=r.get(d.cost.resource),p=h&&h.amount>=m;return ce.jsxs("div",{className:"bg-cosmic-800/60 rounded p-3 flex items-center justify-between",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-cosmic-100 font-semibold",children:d.name}),ce.jsxs("div",{className:"text-cosmic-400 text-sm",children:["Level ",u.level,"  Produces ",d.produces]})]}),ce.jsx("button",{onClick:()=>a(o),disabled:!p,className:`px-4 py-2 rounded font-semibold transition-all ${p?"bg-gold-500 text-cosmic-950 hover:bg-gold-400":"bg-cosmic-700 text-cosmic-500 cursor-not-allowed"}`,children:HI(m)})]},o)})})]})}const pS={"cosmic-bakery.better-whisks":{name:"Better Whisks",description:"+25% Hand Mixer rate",cost:{resource:"cosmic-bakery.flour",base:50}},"cosmic-bakery.refined-sugar":{name:"Refined Sugar",description:"+25% Sugar Mill rate",cost:{resource:"cosmic-bakery.flour",base:75}},"cosmic-bakery.elastic-gluten":{name:"Elastic Gluten",description:"+50% Kneading Station rate",cost:{resource:"cosmic-bakery.flour",base:100}},"cosmic-bakery.bulk-mixing":{name:"Bulk Mixing",description:"-10% Hand Mixer cost",cost:{resource:"cosmic-bakery.flour",base:150}},"cosmic-bakery.double-batch":{name:"Double Batch",description:"+15% All Tier 1 rate",cost:{resource:"cosmic-bakery.flour",base:200}},"cosmic-bakery.stellar-alignment":{name:"Stellar Alignment",description:"+40% Star Collector rate",cost:{resource:"cosmic-bakery.dough",base:200}},"cosmic-bakery.lunar-cycle-sync":{name:"Lunar Cycle Sync",description:"+35% Moonbeam Churn rate",cost:{resource:"cosmic-bakery.stardust",base:50}},"cosmic-bakery.enchantment-mastery":{name:"Enchantment Mastery",description:"+50% Enchanted Oven rate",cost:{resource:"cosmic-bakery.stardust",base:100}},"cosmic-bakery.cosmic-resonance":{name:"Cosmic Resonance",description:"+20% All Tier 2 rate",cost:{resource:"cosmic-bakery.moon-cream",base:150}},"cosmic-bakery.void-stabilizers":{name:"Void Stabilizers",description:"+30% Void Portal rate",cost:{resource:"cosmic-bakery.void-essence",base:50}},"cosmic-bakery.reality-threads":{name:"Reality Threads",description:"+25% Reality Forge rate",cost:{resource:"cosmic-bakery.reality-dough",base:25}},"cosmic-bakery.remembered-recipes":{name:"Remembered Recipes",description:"+50 Flour capacity",cost:{resource:"cosmic-bakery.ascension-stars",base:1}},"cosmic-bakery.timeless-techniques":{name:"Timeless Techniques",description:"+10% Tier 1 rate",cost:{resource:"cosmic-bakery.ascension-stars",base:3}},"cosmic-bakery.celestial-blessing":{name:"Celestial Blessing",description:"+5% All generators",cost:{resource:"cosmic-bakery.ascension-stars",base:5}}},FI=Object.keys(pS);function XI(n){return n>=1e9?(n/1e9).toFixed(2)+"B":n>=1e6?(n/1e6).toFixed(2)+"M":n>=1e3?(n/1e3).toFixed(2)+"K":n.toFixed(0)}function QI({upgrades:n,resources:r,onBuy:a}){const i=FI.filter(o=>{const u=n.get(o);return u?.unlocked&&u.purchased===0});return i.length===0?null:ce.jsxs("div",{className:"bg-cosmic-900/50 rounded-lg p-4 backdrop-blur-sm border border-cosmic-700",children:[ce.jsx("h2",{className:"text-gold-400 font-display text-xl mb-3",children:"Upgrades"}),ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:i.map(o=>{const u=pS[o],d=r.get(u.cost.resource),m=d&&d.amount>=u.cost.base;return ce.jsxs("div",{className:"bg-cosmic-800/60 rounded p-3 flex items-center justify-between",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-cosmic-100 font-semibold",children:u.name}),ce.jsx("div",{className:"text-cosmic-400 text-sm",children:u.description})]}),ce.jsx("button",{onClick:()=>a(o),disabled:!m,className:`px-3 py-1.5 rounded text-sm font-semibold transition-all ${m?"bg-purple-600 text-white hover:bg-purple-500":"bg-cosmic-700 text-cosmic-500 cursor-not-allowed"}`,children:XI(u.cost.base)})]},o)})})]})}const eE={"cosmic-bakery.first-batch":{name:"First Batch",description:"Purchase your first hand mixer",tier:"bronze"},"cosmic-bakery.sugar-rush":{name:"Sugar Rush",description:"Unlock sugar production",tier:"bronze"},"cosmic-bakery.rising-star":{name:"Rising Star",description:"Unlock stardust production",tier:"bronze"},"cosmic-bakery.enchanted-chef":{name:"Enchanted Chef",description:"Create your first enchanted pastry",tier:"silver"},"cosmic-bakery.void-walker":{name:"Void Walker",description:"Harness the power of void essence",tier:"silver"},"cosmic-bakery.reality-baker":{name:"Reality Baker",description:"Forge your first reality dough",tier:"gold"},"cosmic-bakery.flour-power":{name:"Flour Power",description:"Own 10 hand mixers",tier:"bronze"},"cosmic-bakery.sweet-empire":{name:"Sweet Empire",description:"Own 10 sugar mills",tier:"bronze"},"cosmic-bakery.master-kneader":{name:"Master Kneader",description:"Own 10 kneading stations",tier:"silver"},"cosmic-bakery.stargazer":{name:"Stargazer",description:"Own 5 star collectors",tier:"silver"},"cosmic-bakery.moon-child":{name:"Moon Child",description:"Own 5 moonbeam churns",tier:"gold"},"cosmic-bakery.oven-master":{name:"Oven Master",description:"Own 10 enchanted ovens",tier:"gold"}},KI={bronze:"text-amber-600 border-amber-600",silver:"text-gray-300 border-gray-400",gold:"text-yellow-400 border-yellow-500"},JI={bronze:"bg-amber-900/30",silver:"bg-gray-700/30",gold:"bg-yellow-900/30"};function WI({achievements:n}){const r=Object.entries(eE).filter(([a])=>n.get(a)?.earned);return r.length===0?null:ce.jsxs("div",{className:"bg-cosmic-900/50 rounded-lg p-4 backdrop-blur-sm border border-cosmic-700",children:[ce.jsxs("h2",{className:"text-gold-400 font-display text-xl mb-3",children:["Achievements (",r.length,"/",Object.keys(eE).length,")"]}),ce.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(([a,i])=>ce.jsx("div",{className:`rounded-lg px-3 py-2 border ${KI[i.tier]} ${JI[i.tier]}`,title:i.description,children:ce.jsx("span",{className:"font-semibold",children:i.name})},a))})]})}function ex({resources:n,generators:r,onPrestige:a}){const i=n.get("cosmic-bakery.enchanted-pastries")?.amount??0,o=r.get("cosmic-bakery.enchanted-oven")?.level??0,u=n.get("cosmic-bakery.ascension-stars")?.amount??0,d=i>=500&&o>=10,m=d?Math.max(1,Math.min(1e3,Math.floor(i/100))):0;return!d&&u===0?null:ce.jsxs("div",{className:"bg-gradient-to-r from-purple-900/70 to-cosmic-900/70 rounded-lg p-4 backdrop-blur-sm border border-purple-500",children:[ce.jsx("h2",{className:"text-purple-300 font-display text-xl mb-3",children:"Celestial Ascension"}),u>0&&ce.jsxs("div",{className:"mb-4 text-purple-200",children:["You have ",ce.jsx("span",{className:"text-yellow-400 font-bold",children:u})," Ascension Stars"]}),ce.jsxs("div",{className:"space-y-2 mb-4",children:[ce.jsxs("div",{className:"flex justify-between text-sm",children:[ce.jsxs("span",{className:i>=500?"text-green-400":"text-cosmic-400",children:["Enchanted Pastries: ",i.toFixed(0),"/500"]}),ce.jsx("span",{children:i>=500?"":""})]}),ce.jsxs("div",{className:"flex justify-between text-sm",children:[ce.jsxs("span",{className:o>=10?"text-green-400":"text-cosmic-400",children:["Enchanted Ovens: ",o,"/10"]}),ce.jsx("span",{children:o>=10?"":""})]})]}),d&&ce.jsxs("div",{className:"text-center",children:[ce.jsxs("div",{className:"text-yellow-400 mb-2",children:["Ascend to gain ",ce.jsx("span",{className:"font-bold",children:m})," Ascension Stars!"]}),ce.jsx("button",{onClick:a,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-lg hover:from-purple-500 hover:to-pink-500 transition-all shadow-lg",children:"Ascend"})]})]})}function tx(){const{state:n,buyGenerator:r,buyUpgrade:a,saveGame:i,resetGame:o,triggerPrestige:u}=BI();return n.ready?ce.jsxs("div",{className:"min-h-screen p-4",children:[ce.jsxs("header",{className:"text-center mb-8",children:[ce.jsx("h1",{className:"font-display text-5xl text-gold-400 drop-shadow-lg",children:"Cosmic Bakery"}),ce.jsx("p",{className:"text-cosmic-200 mt-2",children:"Bake your way across the cosmos!"}),ce.jsxs("div",{className:"mt-4 space-x-4",children:[ce.jsx("button",{onClick:i,className:"px-4 py-1 text-sm bg-cosmic-700 text-cosmic-200 rounded hover:bg-cosmic-600",children:"Save"}),ce.jsx("button",{onClick:o,className:"px-4 py-1 text-sm bg-red-900/50 text-red-300 rounded hover:bg-red-800/50",children:"Reset"})]})]}),ce.jsxs("main",{className:"max-w-6xl mx-auto space-y-6",children:[ce.jsx(ex,{resources:n.resources,generators:n.generators,onPrestige:u}),ce.jsx(GI,{resources:n.resources}),ce.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[ce.jsx(ZI,{generators:n.generators,resources:n.resources,onBuy:r}),ce.jsx(QI,{upgrades:n.upgrades,resources:n.resources,onBuy:a})]}),ce.jsx(WI,{achievements:n.achievements})]})]}):ce.jsx("div",{className:"min-h-screen flex items-center justify-center",children:ce.jsx("div",{className:"text-gold-400 font-display text-2xl animate-pulse",children:"Loading Cosmic Bakery..."})})}XT.createRoot(document.getElementById("root")).render(ce.jsx(_n.StrictMode,{children:ce.jsx(tx,{})}));
