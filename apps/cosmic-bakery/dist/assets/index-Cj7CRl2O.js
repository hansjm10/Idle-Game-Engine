(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();function UT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function eE(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var r=n.default;if(typeof r=="function"){var a=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};a.prototype=r.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(a,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),a}var wf={exports:{}},hi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function jT(){if(Ky)return hi;Ky=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(i,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:n,type:i,key:f,ref:o!==void 0?o:null,props:u}}return hi.Fragment=r,hi.jsx=a,hi.jsxs=a,hi}var Jy;function $T(){return Jy||(Jy=1,wf.exports=jT()),wf.exports}var qe=$T(),Of={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function BT(){if(Wy)return ye;Wy=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function T(k){return k===null||typeof k!="object"?null:(k=b&&k[b]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function _(k,j,F){this.props=k,this.context=j,this.refs=A,this.updater=F||w}_.prototype.isReactComponent={},_.prototype.setState=function(k,j){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,j,"setState")},_.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function C(){}C.prototype=_.prototype;function N(k,j,F){this.props=k,this.context=j,this.refs=A,this.updater=F||w}var M=N.prototype=new C;M.constructor=N,S(M,_.prototype),M.isPureReactComponent=!0;var $=Array.isArray;function B(){}var q={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function ue(k,j,F){var te=F.ref;return{$$typeof:n,type:k,key:j,ref:te!==void 0?te:null,props:F}}function me(k,j){return ue(k.type,j,k.props)}function ke(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function Ue(k){var j={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(F){return j[F]})}var et=/\/+/g;function W(k,j){return typeof k=="object"&&k!==null&&k.key!=null?Ue(""+k.key):j.toString(36)}function K(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(B,B):(k.status="pending",k.then(function(j){k.status==="pending"&&(k.status="fulfilled",k.value=j)},function(j){k.status==="pending"&&(k.status="rejected",k.reason=j)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function I(k,j,F,te,ce){var ve=typeof k;(ve==="undefined"||ve==="boolean")&&(k=null);var je=!1;if(k===null)je=!0;else switch(ve){case"bigint":case"string":case"number":je=!0;break;case"object":switch(k.$$typeof){case n:case r:je=!0;break;case g:return je=k._init,I(je(k._payload),j,F,te,ce)}}if(je)return ce=ce(k),je=te===""?"."+W(k,0):te,$(ce)?(F="",je!=null&&(F=je.replace(et,"$&/")+"/"),I(ce,j,F,"",function(Ss){return Ss})):ce!=null&&(ke(ce)&&(ce=me(ce,F+(ce.key==null||k&&k.key===ce.key?"":(""+ce.key).replace(et,"$&/")+"/")+je)),j.push(ce)),1;je=0;var Ot=te===""?".":te+":";if($(k))for(var rt=0;rt<k.length;rt++)te=k[rt],ve=Ot+W(te,rt),je+=I(te,j,F,ve,ce);else if(rt=T(k),typeof rt=="function")for(k=rt.call(k),rt=0;!(te=k.next()).done;)te=te.value,ve=Ot+W(te,rt++),je+=I(te,j,F,ve,ce);else if(ve==="object"){if(typeof k.then=="function")return I(K(k),j,F,te,ce);throw j=String(k),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return je}function G(k,j,F){if(k==null)return k;var te=[],ce=0;return I(k,te,"","",function(ve){return j.call(F,ve,ce++)}),te}function Q(k){if(k._status===-1){var j=k._result;j=j(),j.then(function(F){(k._status===0||k._status===-1)&&(k._status=1,k._result=F)},function(F){(k._status===0||k._status===-1)&&(k._status=2,k._result=F)}),k._status===-1&&(k._status=0,k._result=j)}if(k._status===1)return k._result.default;throw k._result}var ee=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},re={map:G,forEach:function(k,j,F){G(k,function(){j.apply(this,arguments)},F)},count:function(k){var j=0;return G(k,function(){j++}),j},toArray:function(k){return G(k,function(j){return j})||[]},only:function(k){if(!ke(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return ye.Activity=v,ye.Children=re,ye.Component=_,ye.Fragment=a,ye.Profiler=o,ye.PureComponent=N,ye.StrictMode=i,ye.Suspense=h,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,ye.__COMPILER_RUNTIME={__proto__:null,c:function(k){return q.H.useMemoCache(k)}},ye.cache=function(k){return function(){return k.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(k,j,F){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var te=S({},k.props),ce=k.key;if(j!=null)for(ve in j.key!==void 0&&(ce=""+j.key),j)!X.call(j,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&j.ref===void 0||(te[ve]=j[ve]);var ve=arguments.length-2;if(ve===1)te.children=F;else if(1<ve){for(var je=Array(ve),Ot=0;Ot<ve;Ot++)je[Ot]=arguments[Ot+2];te.children=je}return ue(k.type,ce,te)},ye.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},ye.createElement=function(k,j,F){var te,ce={},ve=null;if(j!=null)for(te in j.key!==void 0&&(ve=""+j.key),j)X.call(j,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ce[te]=j[te]);var je=arguments.length-2;if(je===1)ce.children=F;else if(1<je){for(var Ot=Array(je),rt=0;rt<je;rt++)Ot[rt]=arguments[rt+2];ce.children=Ot}if(k&&k.defaultProps)for(te in je=k.defaultProps,je)ce[te]===void 0&&(ce[te]=je[te]);return ue(k,ve,ce)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(k){return{$$typeof:m,render:k}},ye.isValidElement=ke,ye.lazy=function(k){return{$$typeof:g,_payload:{_status:-1,_result:k},_init:Q}},ye.memo=function(k,j){return{$$typeof:p,type:k,compare:j===void 0?null:j}},ye.startTransition=function(k){var j=q.T,F={};q.T=F;try{var te=k(),ce=q.S;ce!==null&&ce(F,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(B,ee)}catch(ve){ee(ve)}finally{j!==null&&F.types!==null&&(j.types=F.types),q.T=j}},ye.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},ye.use=function(k){return q.H.use(k)},ye.useActionState=function(k,j,F){return q.H.useActionState(k,j,F)},ye.useCallback=function(k,j){return q.H.useCallback(k,j)},ye.useContext=function(k){return q.H.useContext(k)},ye.useDebugValue=function(){},ye.useDeferredValue=function(k,j){return q.H.useDeferredValue(k,j)},ye.useEffect=function(k,j){return q.H.useEffect(k,j)},ye.useEffectEvent=function(k){return q.H.useEffectEvent(k)},ye.useId=function(){return q.H.useId()},ye.useImperativeHandle=function(k,j,F){return q.H.useImperativeHandle(k,j,F)},ye.useInsertionEffect=function(k,j){return q.H.useInsertionEffect(k,j)},ye.useLayoutEffect=function(k,j){return q.H.useLayoutEffect(k,j)},ye.useMemo=function(k,j){return q.H.useMemo(k,j)},ye.useOptimistic=function(k,j){return q.H.useOptimistic(k,j)},ye.useReducer=function(k,j,F){return q.H.useReducer(k,j,F)},ye.useRef=function(k){return q.H.useRef(k)},ye.useState=function(k){return q.H.useState(k)},ye.useSyncExternalStore=function(k,j,F){return q.H.useSyncExternalStore(k,j,F)},ye.useTransition=function(){return q.H.useTransition()},ye.version="19.2.0",ye}var ev;function _m(){return ev||(ev=1,Of.exports=BT()),Of.exports}var Ur=_m(),kf={exports:{}},pi={},Af={exports:{}},Rf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function qT(){return tv||(tv=1,(function(n){function r(I,G){var Q=I.length;I.push(G);e:for(;0<Q;){var ee=Q-1>>>1,re=I[ee];if(0<o(re,G))I[ee]=G,I[Q]=re,Q=ee;else break e}}function a(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var G=I[0],Q=I.pop();if(Q!==G){I[0]=Q;e:for(var ee=0,re=I.length,k=re>>>1;ee<k;){var j=2*(ee+1)-1,F=I[j],te=j+1,ce=I[te];if(0>o(F,Q))te<re&&0>o(ce,F)?(I[ee]=ce,I[te]=Q,ee=te):(I[ee]=F,I[j]=Q,ee=j);else if(te<re&&0>o(ce,Q))I[ee]=ce,I[te]=Q,ee=te;else break e}}return G}function o(I,G){var Q=I.sortIndex-G.sortIndex;return Q!==0?Q:I.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();n.unstable_now=function(){return f.now()-m}}var h=[],p=[],g=1,v=null,b=3,T=!1,w=!1,S=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function M(I){for(var G=a(p);G!==null;){if(G.callback===null)i(p);else if(G.startTime<=I)i(p),G.sortIndex=G.expirationTime,r(h,G);else break;G=a(p)}}function $(I){if(S=!1,M(I),!w)if(a(h)!==null)w=!0,B||(B=!0,Ue());else{var G=a(p);G!==null&&K($,G.startTime-I)}}var B=!1,q=-1,X=5,ue=-1;function me(){return A?!0:!(n.unstable_now()-ue<X)}function ke(){if(A=!1,B){var I=n.unstable_now();ue=I;var G=!0;try{e:{w=!1,S&&(S=!1,C(q),q=-1),T=!0;var Q=b;try{t:{for(M(I),v=a(h);v!==null&&!(v.expirationTime>I&&me());){var ee=v.callback;if(typeof ee=="function"){v.callback=null,b=v.priorityLevel;var re=ee(v.expirationTime<=I);if(I=n.unstable_now(),typeof re=="function"){v.callback=re,M(I),G=!0;break t}v===a(h)&&i(h),M(I)}else i(h);v=a(h)}if(v!==null)G=!0;else{var k=a(p);k!==null&&K($,k.startTime-I),G=!1}}break e}finally{v=null,b=Q,T=!1}G=void 0}}finally{G?Ue():B=!1}}}var Ue;if(typeof N=="function")Ue=function(){N(ke)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,W=et.port2;et.port1.onmessage=ke,Ue=function(){W.postMessage(null)}}else Ue=function(){_(ke,0)};function K(I,G){q=_(function(){I(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(I){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var Q=b;b=G;try{return I()}finally{b=Q}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(I,G){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Q=b;b=I;try{return G()}finally{b=Q}},n.unstable_scheduleCallback=function(I,G,Q){var ee=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ee+Q:ee):Q=ee,I){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Q+re,I={id:g++,callback:G,priorityLevel:I,startTime:Q,expirationTime:re,sortIndex:-1},Q>ee?(I.sortIndex=Q,r(p,I),a(h)===null&&I===a(p)&&(S?(C(q),q=-1):S=!0,K($,Q-ee))):(I.sortIndex=re,r(h,I),w||T||(w=!0,B||(B=!0,Ue()))),I},n.unstable_shouldYield=me,n.unstable_wrapCallback=function(I){var G=b;return function(){var Q=b;b=G;try{return I.apply(this,arguments)}finally{b=Q}}}})(Rf)),Rf}var nv;function PT(){return nv||(nv=1,Af.exports=qT()),Af.exports}var Cf={exports:{}},Et={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function GT(){if(rv)return Et;rv=1;var n=_m();function r(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(h,p,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:h,containerInfo:p,implementation:g}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Et.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(r(299));return u(h,p,null,g)},Et.flushSync=function(h){var p=f.T,g=i.p;try{if(f.T=null,i.p=2,h)return h()}finally{f.T=p,i.p=g,i.d.f()}},Et.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(h,p))},Et.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Et.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,v=m(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:T}):g==="script"&&i.d.X(h,{crossOrigin:v,integrity:b,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Et.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=m(p.as,p.crossOrigin);i.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(h)},Et.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,v=m(g,p.crossOrigin);i.d.L(h,g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Et.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=m(p.as,p.crossOrigin);i.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(h)},Et.requestFormReset=function(h){i.d.r(h)},Et.unstable_batchedUpdates=function(h,p){return h(p)},Et.useFormState=function(h,p,g){return f.H.useFormState(h,p,g)},Et.useFormStatus=function(){return f.H.useHostTransitionStatus()},Et.version="19.2.0",Et}var av;function VT(){if(av)return Cf.exports;av=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),Cf.exports=GT(),Cf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function HT(){if(sv)return pi;sv=1;var n=PT(),r=_m(),a=VT();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(u(e)!==e)throw Error(i(188))}function p(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var s=e,c=t;;){var l=s.return;if(l===null)break;var d=l.alternate;if(d===null){if(c=l.return,c!==null){s=c;continue}break}if(l.child===d.child){for(d=l.child;d;){if(d===s)return h(l),e;if(d===c)return h(l),t;d=d.sibling}throw Error(i(188))}if(s.return!==c.return)s=l,c=d;else{for(var y=!1,E=l.child;E;){if(E===s){y=!0,s=l,c=d;break}if(E===c){y=!0,c=l,s=d;break}E=E.sibling}if(!y){for(E=d.child;E;){if(E===s){y=!0,s=d,c=l;break}if(E===c){y=!0,c=d,s=l;break}E=E.sibling}if(!y)throw Error(i(189))}}if(s.alternate!==c)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),ke=Symbol.iterator;function Ue(e){return e===null||typeof e!="object"?null:(e=ke&&e[ke]||e["@@iterator"],typeof e=="function"?e:null)}var et=Symbol.for("react.client.reference");function W(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===et?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case _:return"Profiler";case A:return"StrictMode";case $:return"Suspense";case B:return"SuspenseList";case ue:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case N:return e.displayName||"Context";case C:return(e._context.displayName||"Context")+".Consumer";case M:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q:return t=e.displayName||null,t!==null?t:W(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return W(e(t))}catch{}}return null}var K=Array.isArray,I=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ee=[],re=-1;function k(e){return{current:e}}function j(e){0>re||(e.current=ee[re],ee[re]=null,re--)}function F(e,t){re++,ee[re]=e.current,e.current=t}var te=k(null),ce=k(null),ve=k(null),je=k(null);function Ot(e,t){switch(F(ve,t),F(ce,e),F(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ey(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ey(t),e=Sy(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(te),F(te,e)}function rt(){j(te),j(ce),j(ve)}function Ss(e){e.memoizedState!==null&&F(je,e);var t=te.current,s=Sy(t,e.type);t!==s&&(F(ce,e),F(te,s))}function Gi(e){ce.current===e&&(j(te),j(ce)),je.current===e&&(j(je),li._currentValue=Q)}var su,Qm;function Hr(e){if(su===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);su=t&&t[1]||"",Qm=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+su+e+Qm}var iu=!1;function ou(e,t){if(!e||iu)return"";iu=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(t){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(P){var U=P}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(P){U=P}e.call(Y.prototype)}}else{try{throw Error()}catch(P){U=P}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(P){if(P&&U&&typeof P.stack=="string")return[P.stack,U.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=c.DetermineComponentFrameRoot(),y=d[0],E=d[1];if(y&&E){var O=y.split(`
`),D=E.split(`
`);for(l=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;if(c===O.length||l===D.length)for(c=O.length-1,l=D.length-1;1<=c&&0<=l&&O[c]!==D[l];)l--;for(;1<=c&&0<=l;c--,l--)if(O[c]!==D[l]){if(c!==1||l!==1)do if(c--,l--,0>l||O[c]!==D[l]){var V=`
`+O[c].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=c&&0<=l);break}}}finally{iu=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Hr(s):""}function hS(e,t){switch(e.tag){case 26:case 27:case 5:return Hr(e.type);case 16:return Hr("Lazy");case 13:return e.child!==t&&t!==null?Hr("Suspense Fallback"):Hr("Suspense");case 19:return Hr("SuspenseList");case 0:case 15:return ou(e.type,!1);case 11:return ou(e.type.render,!1);case 1:return ou(e.type,!0);case 31:return Hr("Activity");default:return""}}function Km(e){try{var t="",s=null;do t+=hS(e,s),s=e,e=e.return;while(e);return t}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var cu=Object.prototype.hasOwnProperty,uu=n.unstable_scheduleCallback,lu=n.unstable_cancelCallback,pS=n.unstable_shouldYield,gS=n.unstable_requestPaint,Vt=n.unstable_now,yS=n.unstable_getCurrentPriorityLevel,Jm=n.unstable_ImmediatePriority,Wm=n.unstable_UserBlockingPriority,Vi=n.unstable_NormalPriority,vS=n.unstable_LowPriority,eh=n.unstable_IdlePriority,bS=n.log,ES=n.unstable_setDisableYieldValue,_s=null,Ht=null;function dr(e){if(typeof bS=="function"&&ES(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(_s,e)}catch{}}var Yt=Math.clz32?Math.clz32:TS,SS=Math.log,_S=Math.LN2;function TS(e){return e>>>=0,e===0?32:31-(SS(e)/_S|0)|0}var Hi=256,Yi=262144,Zi=4194304;function Yr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Xi(e,t,s){var c=e.pendingLanes;if(c===0)return 0;var l=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var E=c&134217727;return E!==0?(c=E&~d,c!==0?l=Yr(c):(y&=E,y!==0?l=Yr(y):s||(s=E&~e,s!==0&&(l=Yr(s))))):(E=c&~d,E!==0?l=Yr(E):y!==0?l=Yr(y):s||(s=c&~e,s!==0&&(l=Yr(s)))),l===0?0:t!==0&&t!==l&&(t&d)===0&&(d=l&-l,s=t&-t,d>=s||d===32&&(s&4194048)!==0)?t:l}function Ts(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function wS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function th(){var e=Zi;return Zi<<=1,(Zi&62914560)===0&&(Zi=4194304),e}function fu(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ws(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function OS(e,t,s,c,l,d){var y=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var E=e.entanglements,O=e.expirationTimes,D=e.hiddenUpdates;for(s=y&~s;0<s;){var V=31-Yt(s),Y=1<<V;E[V]=0,O[V]=-1;var U=D[V];if(U!==null)for(D[V]=null,V=0;V<U.length;V++){var P=U[V];P!==null&&(P.lane&=-536870913)}s&=~Y}c!==0&&nh(e,c,0),d!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~t))}function nh(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var c=31-Yt(t);e.entangledLanes|=t,e.entanglements[c]=e.entanglements[c]|1073741824|s&261930}function rh(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var c=31-Yt(s),l=1<<c;l&t|e[c]&t&&(e[c]|=t),s&=~l}}function ah(e,t){var s=t&-t;return s=(s&42)!==0?1:du(s),(s&(e.suspendedLanes|t))!==0?0:s}function du(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mu(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function sh(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Vy(e.type))}function ih(e,t){var s=G.p;try{return G.p=e,t()}finally{G.p=s}}var mr=Math.random().toString(36).slice(2),ht="__reactFiber$"+mr,Nt="__reactProps$"+mr,_a="__reactContainer$"+mr,hu="__reactEvents$"+mr,kS="__reactListeners$"+mr,AS="__reactHandles$"+mr,oh="__reactResources$"+mr,Os="__reactMarker$"+mr;function pu(e){delete e[ht],delete e[Nt],delete e[hu],delete e[kS],delete e[AS]}function Ta(e){var t=e[ht];if(t)return t;for(var s=e.parentNode;s;){if(t=s[_a]||s[ht]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Ry(e);e!==null;){if(s=e[ht])return s;e=Ry(e)}return t}e=s,s=e.parentNode}return null}function wa(e){if(e=e[ht]||e[_a]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ks(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Oa(e){var t=e[oh];return t||(t=e[oh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function dt(e){e[Os]=!0}var ch=new Set,uh={};function Zr(e,t){ka(e,t),ka(e+"Capture",t)}function ka(e,t){for(uh[e]=t,e=0;e<t.length;e++)ch.add(t[e])}var RS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lh={},fh={};function CS(e){return cu.call(fh,e)?!0:cu.call(lh,e)?!1:RS.test(e)?fh[e]=!0:(lh[e]=!0,!1)}function Fi(e,t,s){if(CS(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var c=t.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Qi(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function qn(e,t,s,c){if(c===null)e.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+c)}}function rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function NS(e,t,s){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var l=c.get,d=c.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(y){s=""+y,d.call(this,y)}}),Object.defineProperty(e,t,{enumerable:c.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gu(e){if(!e._valueTracker){var t=dh(e)?"checked":"value";e._valueTracker=NS(e,t,""+e[t])}}function mh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),c="";return e&&(c=dh(e)?e.checked?"true":"false":e.value),e=c,e!==s?(t.setValue(e),!0):!1}function Ki(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var MS=/[\n"\\]/g;function an(e){return e.replace(MS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function yu(e,t,s,c,l,d,y,E){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+rn(t)):e.value!==""+rn(t)&&(e.value=""+rn(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?vu(e,y,rn(t)):s!=null?vu(e,y,rn(s)):c!=null&&e.removeAttribute("value"),l==null&&d!=null&&(e.defaultChecked=!!d),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+rn(E):e.removeAttribute("name")}function hh(e,t,s,c,l,d,y,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){gu(e);return}s=s!=null?""+rn(s):"",t=t!=null?""+rn(t):s,E||t===e.value||(e.value=t),e.defaultValue=t}c=c??l,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=E?e.checked:!!c,e.defaultChecked=!!c,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),gu(e)}function vu(e,t,s){t==="number"&&Ki(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Aa(e,t,s,c){if(e=e.options,t){t={};for(var l=0;l<s.length;l++)t["$"+s[l]]=!0;for(s=0;s<e.length;s++)l=t.hasOwnProperty("$"+e[s].value),e[s].selected!==l&&(e[s].selected=l),l&&c&&(e[s].defaultSelected=!0)}else{for(s=""+rn(s),t=null,l=0;l<e.length;l++){if(e[l].value===s){e[l].selected=!0,c&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ph(e,t,s){if(t!=null&&(t=""+rn(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+rn(s):""}function gh(e,t,s,c){if(t==null){if(c!=null){if(s!=null)throw Error(i(92));if(K(c)){if(1<c.length)throw Error(i(93));c=c[0]}s=c}s==null&&(s=""),t=s}s=rn(t),e.defaultValue=s,c=e.textContent,c===s&&c!==""&&c!==null&&(e.value=c),gu(e)}function Ra(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var IS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yh(e,t,s){var c=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?c?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":c?e.setProperty(t,s):typeof s!="number"||s===0||IS.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function vh(e,t,s){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,s!=null){for(var c in s)!s.hasOwnProperty(c)||t!=null&&t.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var l in t)c=t[l],t.hasOwnProperty(l)&&s[l]!==c&&yh(e,l,c)}else for(var d in t)t.hasOwnProperty(d)&&yh(e,d,t[d])}function bu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ji(e){return zS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pn(){}var Eu=null;function Su(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ca=null,Na=null;function bh(e){var t=wa(e);if(t&&(e=t.stateNode)){var s=e[Nt]||null;e:switch(e=t.stateNode,t.type){case"input":if(yu(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+an(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var c=s[t];if(c!==e&&c.form===e.form){var l=c[Nt]||null;if(!l)throw Error(i(90));yu(c,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<s.length;t++)c=s[t],c.form===e.form&&mh(c)}break e;case"textarea":ph(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Aa(e,!!s.multiple,t,!1)}}}var _u=!1;function Eh(e,t,s){if(_u)return e(t,s);_u=!0;try{var c=e(t);return c}finally{if(_u=!1,(Ca!==null||Na!==null)&&(Bo(),Ca&&(t=Ca,e=Na,Na=Ca=null,bh(t),e)))for(t=0;t<e.length;t++)bh(e[t])}}function As(e,t){var s=e.stateNode;if(s===null)return null;var c=s[Nt]||null;if(c===null)return null;s=c[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,t,typeof s));return s}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=!1;if(Gn)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){Tu=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{Tu=!1}var hr=null,wu=null,Wi=null;function Sh(){if(Wi)return Wi;var e,t=wu,s=t.length,c,l="value"in hr?hr.value:hr.textContent,d=l.length;for(e=0;e<s&&t[e]===l[e];e++);var y=s-e;for(c=1;c<=y&&t[s-c]===l[d-c];c++);return Wi=l.slice(e,1<c?1-c:void 0)}function eo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function to(){return!0}function _h(){return!1}function Mt(e){function t(s,c,l,d,y){this._reactName=s,this._targetInst=l,this.type=c,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(s=e[E],this[E]=s?s(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?to:_h,this.isPropagationStopped=_h,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=to)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=to)},persist:function(){},isPersistent:to}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Mt(Xr),Cs=v({},Xr,{view:0,detail:0}),LS=Mt(Cs),Ou,ku,Ns,ro=v({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ns&&(Ns&&e.type==="mousemove"?(Ou=e.screenX-Ns.screenX,ku=e.screenY-Ns.screenY):ku=Ou=0,Ns=e),Ou)},movementY:function(e){return"movementY"in e?e.movementY:ku}}),Th=Mt(ro),DS=v({},ro,{dataTransfer:0}),US=Mt(DS),jS=v({},Cs,{relatedTarget:0}),Au=Mt(jS),$S=v({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),BS=Mt($S),qS=v({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),PS=Mt(qS),GS=v({},Xr,{data:0}),wh=Mt(GS),VS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=YS[e])?!!t[e]:!1}function Ru(){return ZS}var XS=v({},Cs,{key:function(e){if(e.key){var t=VS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=eo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?HS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(e){return e.type==="keypress"?eo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?eo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FS=Mt(XS),QS=v({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oh=Mt(QS),KS=v({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),JS=Mt(KS),WS=v({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),e_=Mt(WS),t_=v({},ro,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),n_=Mt(t_),r_=v({},Xr,{newState:0,oldState:0}),a_=Mt(r_),s_=[9,13,27,32],Cu=Gn&&"CompositionEvent"in window,Ms=null;Gn&&"documentMode"in document&&(Ms=document.documentMode);var i_=Gn&&"TextEvent"in window&&!Ms,kh=Gn&&(!Cu||Ms&&8<Ms&&11>=Ms),Ah=" ",Rh=!1;function Ch(e,t){switch(e){case"keyup":return s_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ma=!1;function o_(e,t){switch(e){case"compositionend":return Nh(t);case"keypress":return t.which!==32?null:(Rh=!0,Ah);case"textInput":return e=t.data,e===Ah&&Rh?null:e;default:return null}}function c_(e,t){if(Ma)return e==="compositionend"||!Cu&&Ch(e,t)?(e=Sh(),Wi=wu=hr=null,Ma=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kh&&t.locale!=="ko"?null:t.data;default:return null}}var u_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!u_[e.type]:t==="textarea"}function Ih(e,t,s,c){Ca?Na?Na.push(c):Na=[c]:Ca=c,t=Zo(t,"onChange"),0<t.length&&(s=new no("onChange","change",null,s,c),e.push({event:s,listeners:t}))}var Is=null,xs=null;function l_(e){hy(e,0)}function ao(e){var t=ks(e);if(mh(t))return e}function xh(e,t){if(e==="change")return t}var zh=!1;if(Gn){var Nu;if(Gn){var Mu="oninput"in document;if(!Mu){var Lh=document.createElement("div");Lh.setAttribute("oninput","return;"),Mu=typeof Lh.oninput=="function"}Nu=Mu}else Nu=!1;zh=Nu&&(!document.documentMode||9<document.documentMode)}function Dh(){Is&&(Is.detachEvent("onpropertychange",Uh),xs=Is=null)}function Uh(e){if(e.propertyName==="value"&&ao(xs)){var t=[];Ih(t,xs,e,Su(e)),Eh(l_,t)}}function f_(e,t,s){e==="focusin"?(Dh(),Is=t,xs=s,Is.attachEvent("onpropertychange",Uh)):e==="focusout"&&Dh()}function d_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(xs)}function m_(e,t){if(e==="click")return ao(t)}function h_(e,t){if(e==="input"||e==="change")return ao(t)}function p_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:p_;function zs(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),c=Object.keys(t);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var l=s[c];if(!cu.call(t,l)||!Zt(e[l],t[l]))return!1}return!0}function jh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $h(e,t){var s=jh(e);e=0;for(var c;s;){if(s.nodeType===3){if(c=e+s.textContent.length,e<=t&&c>=t)return{node:s,offset:t-e};e=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=jh(s)}}function Bh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ki(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ki(e.document)}return t}function Iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var g_=Gn&&"documentMode"in document&&11>=document.documentMode,Ia=null,xu=null,Ls=null,zu=!1;function Ph(e,t,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;zu||Ia==null||Ia!==Ki(c)||(c=Ia,"selectionStart"in c&&Iu(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ls&&zs(Ls,c)||(Ls=c,c=Zo(xu,"onSelect"),0<c.length&&(t=new no("onSelect","select",null,t,s),e.push({event:t,listeners:c}),t.target=Ia)))}function Fr(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var xa={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},Lu={},Gh={};Gn&&(Gh=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function Qr(e){if(Lu[e])return Lu[e];if(!xa[e])return e;var t=xa[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Gh)return Lu[e]=t[s];return e}var Vh=Qr("animationend"),Hh=Qr("animationiteration"),Yh=Qr("animationstart"),y_=Qr("transitionrun"),v_=Qr("transitionstart"),b_=Qr("transitioncancel"),Zh=Qr("transitionend"),Xh=new Map,Du="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Du.push("scrollEnd");function vn(e,t){Xh.set(e,t),Zr(t,[e])}var so=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},sn=[],za=0,Uu=0;function io(){for(var e=za,t=Uu=za=0;t<e;){var s=sn[t];sn[t++]=null;var c=sn[t];sn[t++]=null;var l=sn[t];sn[t++]=null;var d=sn[t];if(sn[t++]=null,c!==null&&l!==null){var y=c.pending;y===null?l.next=l:(l.next=y.next,y.next=l),c.pending=l}d!==0&&Fh(s,l,d)}}function oo(e,t,s,c){sn[za++]=e,sn[za++]=t,sn[za++]=s,sn[za++]=c,Uu|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function ju(e,t,s,c){return oo(e,t,s,c),co(e)}function Kr(e,t){return oo(e,null,null,t),co(e)}function Fh(e,t,s){e.lanes|=s;var c=e.alternate;c!==null&&(c.lanes|=s);for(var l=!1,d=e.return;d!==null;)d.childLanes|=s,c=d.alternate,c!==null&&(c.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(l=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,l&&t!==null&&(l=31-Yt(s),e=d.hiddenUpdates,c=e[l],c===null?e[l]=[t]:c.push(t),t.lane=s|536870912),d):null}function co(e){if(50<ri)throw ri=0,Zl=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var La={};function E_(e,t,s,c){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(e,t,s,c){return new E_(e,t,s,c)}function $u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vn(e,t){var s=e.alternate;return s===null?(s=Xt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Qh(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function uo(e,t,s,c,l,d){var y=0;if(c=e,typeof e=="function")$u(e)&&(y=1);else if(typeof e=="string")y=OT(e,s,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ue:return e=Xt(31,s,t,l),e.elementType=ue,e.lanes=d,e;case S:return Jr(s.children,l,d,t);case A:y=8,l|=24;break;case _:return e=Xt(12,s,t,l|2),e.elementType=_,e.lanes=d,e;case $:return e=Xt(13,s,t,l),e.elementType=$,e.lanes=d,e;case B:return e=Xt(19,s,t,l),e.elementType=B,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:y=10;break e;case C:y=9;break e;case M:y=11;break e;case q:y=14;break e;case X:y=16,c=null;break e}y=29,s=Error(i(130,e===null?"null":typeof e,"")),c=null}return t=Xt(y,s,t,l),t.elementType=e,t.type=c,t.lanes=d,t}function Jr(e,t,s,c){return e=Xt(7,e,c,t),e.lanes=s,e}function Bu(e,t,s){return e=Xt(6,e,null,t),e.lanes=s,e}function Kh(e){var t=Xt(18,null,null,0);return t.stateNode=e,t}function qu(e,t,s){return t=Xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Jh=new WeakMap;function on(e,t){if(typeof e=="object"&&e!==null){var s=Jh.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Km(t)},Jh.set(e,t),t)}return{value:e,source:t,stack:Km(t)}}var Da=[],Ua=0,lo=null,Ds=0,cn=[],un=0,pr=null,Rn=1,Cn="";function Hn(e,t){Da[Ua++]=Ds,Da[Ua++]=lo,lo=e,Ds=t}function Wh(e,t,s){cn[un++]=Rn,cn[un++]=Cn,cn[un++]=pr,pr=e;var c=Rn;e=Cn;var l=32-Yt(c)-1;c&=~(1<<l),s+=1;var d=32-Yt(t)+l;if(30<d){var y=l-l%5;d=(c&(1<<y)-1).toString(32),c>>=y,l-=y,Rn=1<<32-Yt(t)+l|s<<l|c,Cn=d+e}else Rn=1<<d|s<<l|c,Cn=e}function Pu(e){e.return!==null&&(Hn(e,1),Wh(e,1,0))}function Gu(e){for(;e===lo;)lo=Da[--Ua],Da[Ua]=null,Ds=Da[--Ua],Da[Ua]=null;for(;e===pr;)pr=cn[--un],cn[un]=null,Cn=cn[--un],cn[un]=null,Rn=cn[--un],cn[un]=null}function ep(e,t){cn[un++]=Rn,cn[un++]=Cn,cn[un++]=pr,Rn=t.id,Cn=t.overflow,pr=e}var pt=null,Ye=null,Ne=!1,gr=null,ln=!1,Vu=Error(i(519));function yr(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Us(on(t,e)),Vu}function tp(e){var t=e.stateNode,s=e.type,c=e.memoizedProps;switch(t[ht]=e,t[Nt]=c,s){case"dialog":we("cancel",t),we("close",t);break;case"iframe":case"object":case"embed":we("load",t);break;case"video":case"audio":for(s=0;s<si.length;s++)we(si[s],t);break;case"source":we("error",t);break;case"img":case"image":case"link":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"input":we("invalid",t),hh(t,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":we("invalid",t);break;case"textarea":we("invalid",t),gh(t,c.value,c.defaultValue,c.children)}s=c.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||c.suppressHydrationWarning===!0||vy(t.textContent,s)?(c.popover!=null&&(we("beforetoggle",t),we("toggle",t)),c.onScroll!=null&&we("scroll",t),c.onScrollEnd!=null&&we("scrollend",t),c.onClick!=null&&(t.onclick=Pn),t=!0):t=!1,t||yr(e,!0)}function np(e){for(pt=e.return;pt;)switch(pt.tag){case 5:case 31:case 13:ln=!1;return;case 27:case 3:ln=!0;return;default:pt=pt.return}}function ja(e){if(e!==pt)return!1;if(!Ne)return np(e),Ne=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||uf(e.type,e.memoizedProps)),s=!s),s&&Ye&&yr(e),np(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ye=Ay(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ye=Ay(e)}else t===27?(t=Ye,Mr(e.type)?(e=hf,hf=null,Ye=e):Ye=t):Ye=pt?dn(e.stateNode.nextSibling):null;return!0}function Wr(){Ye=pt=null,Ne=!1}function Hu(){var e=gr;return e!==null&&(Lt===null?Lt=e:Lt.push.apply(Lt,e),gr=null),e}function Us(e){gr===null?gr=[e]:gr.push(e)}var Yu=k(null),ea=null,Yn=null;function vr(e,t,s){F(Yu,t._currentValue),t._currentValue=s}function Zn(e){e._currentValue=Yu.current,j(Yu)}function Zu(e,t,s){for(;e!==null;){var c=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,c!==null&&(c.childLanes|=t)):c!==null&&(c.childLanes&t)!==t&&(c.childLanes|=t),e===s)break;e=e.return}}function Xu(e,t,s,c){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var d=l.dependencies;if(d!==null){var y=l.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=l;for(var O=0;O<t.length;O++)if(E.context===t[O]){d.lanes|=s,E=d.alternate,E!==null&&(E.lanes|=s),Zu(d.return,s,e),c||(y=null);break e}d=E.next}}else if(l.tag===18){if(y=l.return,y===null)throw Error(i(341));y.lanes|=s,d=y.alternate,d!==null&&(d.lanes|=s),Zu(y,s,e),y=null}else y=l.child;if(y!==null)y.return=l;else for(y=l;y!==null;){if(y===e){y=null;break}if(l=y.sibling,l!==null){l.return=y.return,y=l;break}y=y.return}l=y}}function $a(e,t,s,c){e=null;for(var l=t,d=!1;l!==null;){if(!d){if((l.flags&524288)!==0)d=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var y=l.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var E=l.type;Zt(l.pendingProps.value,y.value)||(e!==null?e.push(E):e=[E])}}else if(l===je.current){if(y=l.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(li):e=[li])}l=l.return}e!==null&&Xu(t,e,s,c),t.flags|=262144}function fo(e){for(e=e.firstContext;e!==null;){if(!Zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ta(e){ea=e,Yn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return rp(ea,e)}function mo(e,t){return ea===null&&ta(e),rp(e,t)}function rp(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Yn===null){if(e===null)throw Error(i(308));Yn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Yn=Yn.next=t;return s}var S_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,c){e.push(c)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},__=n.unstable_scheduleCallback,T_=n.unstable_NormalPriority,it={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fu(){return{controller:new S_,data:new Map,refCount:0}}function js(e){e.refCount--,e.refCount===0&&__(T_,function(){e.controller.abort()})}var $s=null,Qu=0,Ba=0,qa=null;function w_(e,t){if($s===null){var s=$s=[];Qu=0,Ba=Wl(),qa={status:"pending",value:void 0,then:function(c){s.push(c)}}}return Qu++,t.then(ap,ap),t}function ap(){if(--Qu===0&&$s!==null){qa!==null&&(qa.status="fulfilled");var e=$s;$s=null,Ba=0,qa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function O_(e,t){var s=[],c={status:"pending",value:null,reason:null,then:function(l){s.push(l)}};return e.then(function(){c.status="fulfilled",c.value=t;for(var l=0;l<s.length;l++)(0,s[l])(t)},function(l){for(c.status="rejected",c.reason=l,l=0;l<s.length;l++)(0,s[l])(void 0)}),c}var sp=I.S;I.S=function(e,t){Pg=Vt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&w_(e,t),sp!==null&&sp(e,t)};var na=k(null);function Ku(){var e=na.current;return e!==null?e:He.pooledCache}function ho(e,t){t===null?F(na,na.current):F(na,t.pool)}function ip(){var e=Ku();return e===null?null:{parent:it._currentValue,pool:e}}var Pa=Error(i(460)),Ju=Error(i(474)),po=Error(i(542)),go={then:function(){}};function op(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cp(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Pn,Pn),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lp(e),e;default:if(typeof t.status=="string")t.then(Pn,Pn);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(c){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=c}},function(c){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=c}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lp(e),e}throw aa=t,Pa}}function ra(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(aa=s,Pa):s}}var aa=null;function up(){if(aa===null)throw Error(i(459));var e=aa;return aa=null,e}function lp(e){if(e===Pa||e===po)throw Error(i(483))}var Ga=null,Bs=0;function yo(e){var t=Bs;return Bs+=1,Ga===null&&(Ga=[]),cp(Ga,e,t)}function qs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function vo(e,t){throw t.$$typeof===b?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function fp(e){function t(x,R){if(e){var L=x.deletions;L===null?(x.deletions=[R],x.flags|=16):L.push(R)}}function s(x,R){if(!e)return null;for(;R!==null;)t(x,R),R=R.sibling;return null}function c(x){for(var R=new Map;x!==null;)x.key!==null?R.set(x.key,x):R.set(x.index,x),x=x.sibling;return R}function l(x,R){return x=Vn(x,R),x.index=0,x.sibling=null,x}function d(x,R,L){return x.index=L,e?(L=x.alternate,L!==null?(L=L.index,L<R?(x.flags|=67108866,R):L):(x.flags|=67108866,R)):(x.flags|=1048576,R)}function y(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function E(x,R,L,H){return R===null||R.tag!==6?(R=Bu(L,x.mode,H),R.return=x,R):(R=l(R,L),R.return=x,R)}function O(x,R,L,H){var de=L.type;return de===S?V(x,R,L.props.children,H,L.key):R!==null&&(R.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===X&&ra(de)===R.type)?(R=l(R,L.props),qs(R,L),R.return=x,R):(R=uo(L.type,L.key,L.props,null,x.mode,H),qs(R,L),R.return=x,R)}function D(x,R,L,H){return R===null||R.tag!==4||R.stateNode.containerInfo!==L.containerInfo||R.stateNode.implementation!==L.implementation?(R=qu(L,x.mode,H),R.return=x,R):(R=l(R,L.children||[]),R.return=x,R)}function V(x,R,L,H,de){return R===null||R.tag!==7?(R=Jr(L,x.mode,H,de),R.return=x,R):(R=l(R,L),R.return=x,R)}function Y(x,R,L){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Bu(""+R,x.mode,L),R.return=x,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case T:return L=uo(R.type,R.key,R.props,null,x.mode,L),qs(L,R),L.return=x,L;case w:return R=qu(R,x.mode,L),R.return=x,R;case X:return R=ra(R),Y(x,R,L)}if(K(R)||Ue(R))return R=Jr(R,x.mode,L,null),R.return=x,R;if(typeof R.then=="function")return Y(x,yo(R),L);if(R.$$typeof===N)return Y(x,mo(x,R),L);vo(x,R)}return null}function U(x,R,L,H){var de=R!==null?R.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return de!==null?null:E(x,R,""+L,H);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case T:return L.key===de?O(x,R,L,H):null;case w:return L.key===de?D(x,R,L,H):null;case X:return L=ra(L),U(x,R,L,H)}if(K(L)||Ue(L))return de!==null?null:V(x,R,L,H,null);if(typeof L.then=="function")return U(x,R,yo(L),H);if(L.$$typeof===N)return U(x,R,mo(x,L),H);vo(x,L)}return null}function P(x,R,L,H,de){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return x=x.get(L)||null,E(R,x,""+H,de);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return x=x.get(H.key===null?L:H.key)||null,O(R,x,H,de);case w:return x=x.get(H.key===null?L:H.key)||null,D(R,x,H,de);case X:return H=ra(H),P(x,R,L,H,de)}if(K(H)||Ue(H))return x=x.get(L)||null,V(R,x,H,de,null);if(typeof H.then=="function")return P(x,R,L,yo(H),de);if(H.$$typeof===N)return P(x,R,L,mo(R,H),de);vo(R,H)}return null}function oe(x,R,L,H){for(var de=null,xe=null,le=R,Se=R=0,Re=null;le!==null&&Se<L.length;Se++){le.index>Se?(Re=le,le=null):Re=le.sibling;var ze=U(x,le,L[Se],H);if(ze===null){le===null&&(le=Re);break}e&&le&&ze.alternate===null&&t(x,le),R=d(ze,R,Se),xe===null?de=ze:xe.sibling=ze,xe=ze,le=Re}if(Se===L.length)return s(x,le),Ne&&Hn(x,Se),de;if(le===null){for(;Se<L.length;Se++)le=Y(x,L[Se],H),le!==null&&(R=d(le,R,Se),xe===null?de=le:xe.sibling=le,xe=le);return Ne&&Hn(x,Se),de}for(le=c(le);Se<L.length;Se++)Re=P(le,x,Se,L[Se],H),Re!==null&&(e&&Re.alternate!==null&&le.delete(Re.key===null?Se:Re.key),R=d(Re,R,Se),xe===null?de=Re:xe.sibling=Re,xe=Re);return e&&le.forEach(function(Dr){return t(x,Dr)}),Ne&&Hn(x,Se),de}function he(x,R,L,H){if(L==null)throw Error(i(151));for(var de=null,xe=null,le=R,Se=R=0,Re=null,ze=L.next();le!==null&&!ze.done;Se++,ze=L.next()){le.index>Se?(Re=le,le=null):Re=le.sibling;var Dr=U(x,le,ze.value,H);if(Dr===null){le===null&&(le=Re);break}e&&le&&Dr.alternate===null&&t(x,le),R=d(Dr,R,Se),xe===null?de=Dr:xe.sibling=Dr,xe=Dr,le=Re}if(ze.done)return s(x,le),Ne&&Hn(x,Se),de;if(le===null){for(;!ze.done;Se++,ze=L.next())ze=Y(x,ze.value,H),ze!==null&&(R=d(ze,R,Se),xe===null?de=ze:xe.sibling=ze,xe=ze);return Ne&&Hn(x,Se),de}for(le=c(le);!ze.done;Se++,ze=L.next())ze=P(le,x,Se,ze.value,H),ze!==null&&(e&&ze.alternate!==null&&le.delete(ze.key===null?Se:ze.key),R=d(ze,R,Se),xe===null?de=ze:xe.sibling=ze,xe=ze);return e&&le.forEach(function(DT){return t(x,DT)}),Ne&&Hn(x,Se),de}function Ve(x,R,L,H){if(typeof L=="object"&&L!==null&&L.type===S&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case T:e:{for(var de=L.key;R!==null;){if(R.key===de){if(de=L.type,de===S){if(R.tag===7){s(x,R.sibling),H=l(R,L.props.children),H.return=x,x=H;break e}}else if(R.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===X&&ra(de)===R.type){s(x,R.sibling),H=l(R,L.props),qs(H,L),H.return=x,x=H;break e}s(x,R);break}else t(x,R);R=R.sibling}L.type===S?(H=Jr(L.props.children,x.mode,H,L.key),H.return=x,x=H):(H=uo(L.type,L.key,L.props,null,x.mode,H),qs(H,L),H.return=x,x=H)}return y(x);case w:e:{for(de=L.key;R!==null;){if(R.key===de)if(R.tag===4&&R.stateNode.containerInfo===L.containerInfo&&R.stateNode.implementation===L.implementation){s(x,R.sibling),H=l(R,L.children||[]),H.return=x,x=H;break e}else{s(x,R);break}else t(x,R);R=R.sibling}H=qu(L,x.mode,H),H.return=x,x=H}return y(x);case X:return L=ra(L),Ve(x,R,L,H)}if(K(L))return oe(x,R,L,H);if(Ue(L)){if(de=Ue(L),typeof de!="function")throw Error(i(150));return L=de.call(L),he(x,R,L,H)}if(typeof L.then=="function")return Ve(x,R,yo(L),H);if(L.$$typeof===N)return Ve(x,R,mo(x,L),H);vo(x,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,R!==null&&R.tag===6?(s(x,R.sibling),H=l(R,L),H.return=x,x=H):(s(x,R),H=Bu(L,x.mode,H),H.return=x,x=H),y(x)):s(x,R)}return function(x,R,L,H){try{Bs=0;var de=Ve(x,R,L,H);return Ga=null,de}catch(le){if(le===Pa||le===po)throw le;var xe=Xt(29,le,null,x.mode);return xe.lanes=H,xe.return=x,xe}finally{}}}var sa=fp(!0),dp=fp(!1),br=!1;function Wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function el(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Er(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,s){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Le&2)!==0){var l=c.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),c.pending=t,t=co(e),Fh(e,null,s),t}return oo(e,c,t,s),co(e)}function Ps(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var c=t.lanes;c&=e.pendingLanes,s|=c,t.lanes=s,rh(e,s)}}function tl(e,t){var s=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var l=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var y={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?l=d=y:d=d.next=y,s=s.next}while(s!==null);d===null?l=d=t:d=d.next=t}else l=d=t;s={baseState:c.baseState,firstBaseUpdate:l,lastBaseUpdate:d,shared:c.shared,callbacks:c.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var nl=!1;function Gs(){if(nl){var e=qa;if(e!==null)throw e}}function Vs(e,t,s,c){nl=!1;var l=e.updateQueue;br=!1;var d=l.firstBaseUpdate,y=l.lastBaseUpdate,E=l.shared.pending;if(E!==null){l.shared.pending=null;var O=E,D=O.next;O.next=null,y===null?d=D:y.next=D,y=O;var V=e.alternate;V!==null&&(V=V.updateQueue,E=V.lastBaseUpdate,E!==y&&(E===null?V.firstBaseUpdate=D:E.next=D,V.lastBaseUpdate=O))}if(d!==null){var Y=l.baseState;y=0,V=D=O=null,E=d;do{var U=E.lane&-536870913,P=U!==E.lane;if(P?(Ae&U)===U:(c&U)===U){U!==0&&U===Ba&&(nl=!0),V!==null&&(V=V.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var oe=e,he=E;U=t;var Ve=s;switch(he.tag){case 1:if(oe=he.payload,typeof oe=="function"){Y=oe.call(Ve,Y,U);break e}Y=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=he.payload,U=typeof oe=="function"?oe.call(Ve,Y,U):oe,U==null)break e;Y=v({},Y,U);break e;case 2:br=!0}}U=E.callback,U!==null&&(e.flags|=64,P&&(e.flags|=8192),P=l.callbacks,P===null?l.callbacks=[U]:P.push(U))}else P={lane:U,tag:E.tag,payload:E.payload,callback:E.callback,next:null},V===null?(D=V=P,O=Y):V=V.next=P,y|=U;if(E=E.next,E===null){if(E=l.shared.pending,E===null)break;P=E,E=P.next,P.next=null,l.lastBaseUpdate=P,l.shared.pending=null}}while(!0);V===null&&(O=Y),l.baseState=O,l.firstBaseUpdate=D,l.lastBaseUpdate=V,d===null&&(l.shared.lanes=0),kr|=y,e.lanes=y,e.memoizedState=Y}}function mp(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function hp(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)mp(s[e],t)}var Va=k(null),bo=k(0);function pp(e,t){e=nr,F(bo,e),F(Va,t),nr=e|t.baseLanes}function rl(){F(bo,nr),F(Va,Va.current)}function al(){nr=bo.current,j(Va),j(bo)}var Ft=k(null),fn=null;function _r(e){var t=e.alternate;F(at,at.current&1),F(Ft,e),fn===null&&(t===null||Va.current!==null||t.memoizedState!==null)&&(fn=e)}function sl(e){F(at,at.current),F(Ft,e),fn===null&&(fn=e)}function gp(e){e.tag===22?(F(at,at.current),F(Ft,e),fn===null&&(fn=e)):Tr()}function Tr(){F(at,at.current),F(Ft,Ft.current)}function Qt(e){j(Ft),fn===e&&(fn=null),j(at)}var at=k(0);function Eo(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||df(s)||mf(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xn=0,Ee=null,Pe=null,ot=null,So=!1,Ha=!1,ia=!1,_o=0,Hs=0,Ya=null,k_=0;function tt(){throw Error(i(321))}function il(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Zt(e[s],t[s]))return!1;return!0}function ol(e,t,s,c,l,d){return Xn=d,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?Wp:_l,ia=!1,d=s(c,l),ia=!1,Ha&&(d=vp(t,s,c,l)),yp(e),d}function yp(e){I.H=Xs;var t=Pe!==null&&Pe.next!==null;if(Xn=0,ot=Pe=Ee=null,So=!1,Hs=0,Ya=null,t)throw Error(i(300));e===null||ct||(e=e.dependencies,e!==null&&fo(e)&&(ct=!0))}function vp(e,t,s,c){Ee=e;var l=0;do{if(Ha&&(Ya=null),Hs=0,Ha=!1,25<=l)throw Error(i(301));if(l+=1,ot=Pe=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}I.H=eg,d=t(s,c)}while(Ha);return d}function A_(){var e=I.H,t=e.useState()[0];return t=typeof t.then=="function"?Ys(t):t,e=e.useState()[0],(Pe!==null?Pe.memoizedState:null)!==e&&(Ee.flags|=1024),t}function cl(){var e=_o!==0;return _o=0,e}function ul(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function ll(e){if(So){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}So=!1}Xn=0,ot=Pe=Ee=null,Ha=!1,Hs=_o=0,Ya=null}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ee.memoizedState=ot=e:ot=ot.next=e,ot}function st(){if(Pe===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=ot===null?Ee.memoizedState:ot.next;if(t!==null)ot=t,Pe=e;else{if(e===null)throw Ee.alternate===null?Error(i(467)):Error(i(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},ot===null?Ee.memoizedState=ot=e:ot=ot.next=e}return ot}function To(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ys(e){var t=Hs;return Hs+=1,Ya===null&&(Ya=[]),e=cp(Ya,e,t),t=Ee,(ot===null?t.memoizedState:ot.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?Wp:_l),e}function wo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ys(e);if(e.$$typeof===N)return gt(e)}throw Error(i(438,String(e)))}function fl(e){var t=null,s=Ee.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var c=Ee.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(t={data:c.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=To(),Ee.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),c=0;c<e;c++)s[c]=me;return t.index++,s}function Fn(e,t){return typeof t=="function"?t(e):t}function Oo(e){var t=st();return dl(t,Pe,e)}function dl(e,t,s){var c=e.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var l=e.baseQueue,d=c.pending;if(d!==null){if(l!==null){var y=l.next;l.next=d.next,d.next=y}t.baseQueue=l=d,c.pending=null}if(d=e.baseState,l===null)e.memoizedState=d;else{t=l.next;var E=y=null,O=null,D=t,V=!1;do{var Y=D.lane&-536870913;if(Y!==D.lane?(Ae&Y)===Y:(Xn&Y)===Y){var U=D.revertLane;if(U===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),Y===Ba&&(V=!0);else if((Xn&U)===U){D=D.next,U===Ba&&(V=!0);continue}else Y={lane:0,revertLane:D.revertLane,gesture:null,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},O===null?(E=O=Y,y=d):O=O.next=Y,Ee.lanes|=U,kr|=U;Y=D.action,ia&&s(d,Y),d=D.hasEagerState?D.eagerState:s(d,Y)}else U={lane:Y,revertLane:D.revertLane,gesture:D.gesture,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},O===null?(E=O=U,y=d):O=O.next=U,Ee.lanes|=Y,kr|=Y;D=D.next}while(D!==null&&D!==t);if(O===null?y=d:O.next=E,!Zt(d,e.memoizedState)&&(ct=!0,V&&(s=qa,s!==null)))throw s;e.memoizedState=d,e.baseState=y,e.baseQueue=O,c.lastRenderedState=d}return l===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function ml(e){var t=st(),s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var c=s.dispatch,l=s.pending,d=t.memoizedState;if(l!==null){s.pending=null;var y=l=l.next;do d=e(d,y.action),y=y.next;while(y!==l);Zt(d,t.memoizedState)||(ct=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),s.lastRenderedState=d}return[d,c]}function bp(e,t,s){var c=Ee,l=st(),d=Ne;if(d){if(s===void 0)throw Error(i(407));s=s()}else s=t();var y=!Zt((Pe||l).memoizedState,s);if(y&&(l.memoizedState=s,ct=!0),l=l.queue,gl(_p.bind(null,c,l,e),[e]),l.getSnapshot!==t||y||ot!==null&&ot.memoizedState.tag&1){if(c.flags|=2048,Za(9,{destroy:void 0},Sp.bind(null,c,l,s,t),null),He===null)throw Error(i(349));d||(Xn&127)!==0||Ep(c,t,s)}return s}function Ep(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ee.updateQueue,t===null?(t=To(),Ee.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Sp(e,t,s,c){t.value=s,t.getSnapshot=c,Tp(t)&&wp(e)}function _p(e,t,s){return s(function(){Tp(t)&&wp(e)})}function Tp(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Zt(e,s)}catch{return!0}}function wp(e){var t=Kr(e,2);t!==null&&Dt(t,e,2)}function hl(e){var t=kt();if(typeof e=="function"){var s=e;if(e=s(),ia){dr(!0);try{s()}finally{dr(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:e},t}function Op(e,t,s,c){return e.baseState=s,dl(e,Pe,typeof c=="function"?c:Fn)}function R_(e,t,s,c,l){if(Ro(e))throw Error(i(485));if(e=t.action,e!==null){var d={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};I.T!==null?s(!0):d.isTransition=!1,c(d),s=t.pending,s===null?(d.next=t.pending=d,kp(t,d)):(d.next=s.next,t.pending=s.next=d)}}function kp(e,t){var s=t.action,c=t.payload,l=e.state;if(t.isTransition){var d=I.T,y={};I.T=y;try{var E=s(l,c),O=I.S;O!==null&&O(y,E),Ap(e,t,E)}catch(D){pl(e,t,D)}finally{d!==null&&y.types!==null&&(d.types=y.types),I.T=d}}else try{d=s(l,c),Ap(e,t,d)}catch(D){pl(e,t,D)}}function Ap(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(c){Rp(e,t,c)},function(c){return pl(e,t,c)}):Rp(e,t,s)}function Rp(e,t,s){t.status="fulfilled",t.value=s,Cp(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,kp(e,s)))}function pl(e,t,s){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do t.status="rejected",t.reason=s,Cp(t),t=t.next;while(t!==c)}e.action=null}function Cp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Np(e,t){return t}function Mp(e,t){if(Ne){var s=He.formState;if(s!==null){e:{var c=Ee;if(Ne){if(Ye){t:{for(var l=Ye,d=ln;l.nodeType!==8;){if(!d){l=null;break t}if(l=dn(l.nextSibling),l===null){l=null;break t}}d=l.data,l=d==="F!"||d==="F"?l:null}if(l){Ye=dn(l.nextSibling),c=l.data==="F!";break e}}yr(c)}c=!1}c&&(t=s[0])}}return s=kt(),s.memoizedState=s.baseState=t,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Np,lastRenderedState:t},s.queue=c,s=Qp.bind(null,Ee,c),c.dispatch=s,c=hl(!1),d=Sl.bind(null,Ee,!1,c.queue),c=kt(),l={state:t,dispatch:null,action:e,pending:null},c.queue=l,s=R_.bind(null,Ee,l,d,s),l.dispatch=s,c.memoizedState=e,[t,s,!1]}function Ip(e){var t=st();return xp(t,Pe,e)}function xp(e,t,s){if(t=dl(e,t,Np)[0],e=Oo(Fn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var c=Ys(t)}catch(y){throw y===Pa?po:y}else c=t;t=st();var l=t.queue,d=l.dispatch;return s!==t.memoizedState&&(Ee.flags|=2048,Za(9,{destroy:void 0},C_.bind(null,l,s),null)),[c,d,e]}function C_(e,t){e.action=t}function zp(e){var t=st(),s=Pe;if(s!==null)return xp(t,s,e);st(),t=t.memoizedState,s=st();var c=s.queue.dispatch;return s.memoizedState=e,[t,c,!1]}function Za(e,t,s,c){return e={tag:e,create:s,deps:c,inst:t,next:null},t=Ee.updateQueue,t===null&&(t=To(),Ee.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(c=s.next,s.next=e,e.next=c,t.lastEffect=e),e}function Lp(){return st().memoizedState}function ko(e,t,s,c){var l=kt();Ee.flags|=e,l.memoizedState=Za(1|t,{destroy:void 0},s,c===void 0?null:c)}function Ao(e,t,s,c){var l=st();c=c===void 0?null:c;var d=l.memoizedState.inst;Pe!==null&&c!==null&&il(c,Pe.memoizedState.deps)?l.memoizedState=Za(t,d,s,c):(Ee.flags|=e,l.memoizedState=Za(1|t,d,s,c))}function Dp(e,t){ko(8390656,8,e,t)}function gl(e,t){Ao(2048,8,e,t)}function N_(e){Ee.flags|=4;var t=Ee.updateQueue;if(t===null)t=To(),Ee.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function Up(e){var t=st().memoizedState;return N_({ref:t,nextImpl:e}),function(){if((Le&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function jp(e,t){return Ao(4,2,e,t)}function $p(e,t){return Ao(4,4,e,t)}function Bp(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qp(e,t,s){s=s!=null?s.concat([e]):null,Ao(4,4,Bp.bind(null,t,e),s)}function yl(){}function Pp(e,t){var s=st();t=t===void 0?null:t;var c=s.memoizedState;return t!==null&&il(t,c[1])?c[0]:(s.memoizedState=[e,t],e)}function Gp(e,t){var s=st();t=t===void 0?null:t;var c=s.memoizedState;if(t!==null&&il(t,c[1]))return c[0];if(c=e(),ia){dr(!0);try{e()}finally{dr(!1)}}return s.memoizedState=[c,t],c}function vl(e,t,s){return s===void 0||(Xn&1073741824)!==0&&(Ae&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=Vg(),Ee.lanes|=e,kr|=e,s)}function Vp(e,t,s,c){return Zt(s,t)?s:Va.current!==null?(e=vl(e,s,c),Zt(e,t)||(ct=!0),e):(Xn&42)===0||(Xn&1073741824)!==0&&(Ae&261930)===0?(ct=!0,e.memoizedState=s):(e=Vg(),Ee.lanes|=e,kr|=e,t)}function Hp(e,t,s,c,l){var d=G.p;G.p=d!==0&&8>d?d:8;var y=I.T,E={};I.T=E,Sl(e,!1,t,s);try{var O=l(),D=I.S;if(D!==null&&D(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var V=O_(O,c);Zs(e,t,V,Wt(e))}else Zs(e,t,c,Wt(e))}catch(Y){Zs(e,t,{then:function(){},status:"rejected",reason:Y},Wt())}finally{G.p=d,y!==null&&E.types!==null&&(y.types=E.types),I.T=y}}function M_(){}function bl(e,t,s,c){if(e.tag!==5)throw Error(i(476));var l=Yp(e).queue;Hp(e,l,t,Q,s===null?M_:function(){return Zp(e),s(c)})}function Yp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:Q},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Zp(e){var t=Yp(e);t.next===null&&(t=e.alternate.memoizedState),Zs(e,t.next.queue,{},Wt())}function El(){return gt(li)}function Xp(){return st().memoizedState}function Fp(){return st().memoizedState}function I_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Wt();e=Er(s);var c=Sr(t,e,s);c!==null&&(Dt(c,t,s),Ps(c,t,s)),t={cache:Fu()},e.payload=t;return}t=t.return}}function x_(e,t,s){var c=Wt();s={lane:c,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ro(e)?Kp(t,s):(s=ju(e,t,s,c),s!==null&&(Dt(s,e,c),Jp(s,t,c)))}function Qp(e,t,s){var c=Wt();Zs(e,t,s,c)}function Zs(e,t,s,c){var l={lane:c,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ro(e))Kp(t,l);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var y=t.lastRenderedState,E=d(y,s);if(l.hasEagerState=!0,l.eagerState=E,Zt(E,y))return oo(e,t,l,0),He===null&&io(),!1}catch{}finally{}if(s=ju(e,t,l,c),s!==null)return Dt(s,e,c),Jp(s,t,c),!0}return!1}function Sl(e,t,s,c){if(c={lane:2,revertLane:Wl(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ro(e)){if(t)throw Error(i(479))}else t=ju(e,s,c,2),t!==null&&Dt(t,e,2)}function Ro(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function Kp(e,t){Ha=So=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Jp(e,t,s){if((s&4194048)!==0){var c=t.lanes;c&=e.pendingLanes,s|=c,t.lanes=s,rh(e,s)}}var Xs={readContext:gt,use:wo,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};Xs.useEffectEvent=tt;var Wp={readContext:gt,use:wo,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Dp,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,ko(4194308,4,Bp.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ko(4194308,4,e,t)},useInsertionEffect:function(e,t){ko(4,2,e,t)},useMemo:function(e,t){var s=kt();t=t===void 0?null:t;var c=e();if(ia){dr(!0);try{e()}finally{dr(!1)}}return s.memoizedState=[c,t],c},useReducer:function(e,t,s){var c=kt();if(s!==void 0){var l=s(t);if(ia){dr(!0);try{s(t)}finally{dr(!1)}}}else l=t;return c.memoizedState=c.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},c.queue=e,e=e.dispatch=x_.bind(null,Ee,e),[c.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:function(e){e=hl(e);var t=e.queue,s=Qp.bind(null,Ee,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:yl,useDeferredValue:function(e,t){var s=kt();return vl(s,e,t)},useTransition:function(){var e=hl(!1);return e=Hp.bind(null,Ee,e.queue,!0,!1),kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var c=Ee,l=kt();if(Ne){if(s===void 0)throw Error(i(407));s=s()}else{if(s=t(),He===null)throw Error(i(349));(Ae&127)!==0||Ep(c,t,s)}l.memoizedState=s;var d={value:s,getSnapshot:t};return l.queue=d,Dp(_p.bind(null,c,d,e),[e]),c.flags|=2048,Za(9,{destroy:void 0},Sp.bind(null,c,d,s,t),null),s},useId:function(){var e=kt(),t=He.identifierPrefix;if(Ne){var s=Cn,c=Rn;s=(c&~(1<<32-Yt(c)-1)).toString(32)+s,t="_"+t+"R_"+s,s=_o++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=k_++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:El,useFormState:Mp,useActionState:Mp,useOptimistic:function(e){var t=kt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Sl.bind(null,Ee,!0,s),s.dispatch=t,[e,t]},useMemoCache:fl,useCacheRefresh:function(){return kt().memoizedState=I_.bind(null,Ee)},useEffectEvent:function(e){var t=kt(),s={impl:e};return t.memoizedState=s,function(){if((Le&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},_l={readContext:gt,use:wo,useCallback:Pp,useContext:gt,useEffect:gl,useImperativeHandle:qp,useInsertionEffect:jp,useLayoutEffect:$p,useMemo:Gp,useReducer:Oo,useRef:Lp,useState:function(){return Oo(Fn)},useDebugValue:yl,useDeferredValue:function(e,t){var s=st();return Vp(s,Pe.memoizedState,e,t)},useTransition:function(){var e=Oo(Fn)[0],t=st().memoizedState;return[typeof e=="boolean"?e:Ys(e),t]},useSyncExternalStore:bp,useId:Xp,useHostTransitionStatus:El,useFormState:Ip,useActionState:Ip,useOptimistic:function(e,t){var s=st();return Op(s,Pe,e,t)},useMemoCache:fl,useCacheRefresh:Fp};_l.useEffectEvent=Up;var eg={readContext:gt,use:wo,useCallback:Pp,useContext:gt,useEffect:gl,useImperativeHandle:qp,useInsertionEffect:jp,useLayoutEffect:$p,useMemo:Gp,useReducer:ml,useRef:Lp,useState:function(){return ml(Fn)},useDebugValue:yl,useDeferredValue:function(e,t){var s=st();return Pe===null?vl(s,e,t):Vp(s,Pe.memoizedState,e,t)},useTransition:function(){var e=ml(Fn)[0],t=st().memoizedState;return[typeof e=="boolean"?e:Ys(e),t]},useSyncExternalStore:bp,useId:Xp,useHostTransitionStatus:El,useFormState:zp,useActionState:zp,useOptimistic:function(e,t){var s=st();return Pe!==null?Op(s,Pe,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:fl,useCacheRefresh:Fp};eg.useEffectEvent=Up;function Tl(e,t,s,c){t=e.memoizedState,s=s(c,t),s=s==null?t:v({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var wl={enqueueSetState:function(e,t,s){e=e._reactInternals;var c=Wt(),l=Er(c);l.payload=t,s!=null&&(l.callback=s),t=Sr(e,l,c),t!==null&&(Dt(t,e,c),Ps(t,e,c))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var c=Wt(),l=Er(c);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=Sr(e,l,c),t!==null&&(Dt(t,e,c),Ps(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Wt(),c=Er(s);c.tag=2,t!=null&&(c.callback=t),t=Sr(e,c,s),t!==null&&(Dt(t,e,s),Ps(t,e,s))}};function tg(e,t,s,c,l,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,d,y):t.prototype&&t.prototype.isPureReactComponent?!zs(s,c)||!zs(l,d):!0}function ng(e,t,s,c){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,c),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,c),t.state!==e&&wl.enqueueReplaceState(t,t.state,null)}function oa(e,t){var s=t;if("ref"in t){s={};for(var c in t)c!=="ref"&&(s[c]=t[c])}if(e=e.defaultProps){s===t&&(s=v({},s));for(var l in e)s[l]===void 0&&(s[l]=e[l])}return s}function rg(e){so(e)}function ag(e){console.error(e)}function sg(e){so(e)}function Co(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(c){setTimeout(function(){throw c})}}function ig(e,t,s){try{var c=e.onCaughtError;c(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Ol(e,t,s){return s=Er(s),s.tag=3,s.payload={element:null},s.callback=function(){Co(e,t)},s}function og(e){return e=Er(e),e.tag=3,e}function cg(e,t,s,c){var l=s.type.getDerivedStateFromError;if(typeof l=="function"){var d=c.value;e.payload=function(){return l(d)},e.callback=function(){ig(t,s,c)}}var y=s.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){ig(t,s,c),typeof l!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function z_(e,t,s,c,l){if(s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(t=s.alternate,t!==null&&$a(t,s,l,!0),s=Ft.current,s!==null){switch(s.tag){case 31:case 13:return fn===null?qo():s.alternate===null&&nt===0&&(nt=3),s.flags&=-257,s.flags|=65536,s.lanes=l,c===go?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([c]):t.add(c),Ql(e,c,l)),!1;case 22:return s.flags|=65536,c===go?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([c])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([c]):s.add(c)),Ql(e,c,l)),!1}throw Error(i(435,s.tag))}return Ql(e,c,l),qo(),!1}if(Ne)return t=Ft.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,c!==Vu&&(e=Error(i(422),{cause:c}),Us(on(e,s)))):(c!==Vu&&(t=Error(i(423),{cause:c}),Us(on(t,s))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,c=on(c,s),l=Ol(e.stateNode,c,l),tl(e,l),nt!==4&&(nt=2)),!1;var d=Error(i(520),{cause:c});if(d=on(d,s),ni===null?ni=[d]:ni.push(d),nt!==4&&(nt=2),t===null)return!0;c=on(c,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=l&-l,s.lanes|=e,e=Ol(s.stateNode,c,e),tl(s,e),!1;case 1:if(t=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ar===null||!Ar.has(d))))return s.flags|=65536,l&=-l,s.lanes|=l,l=og(l),cg(l,e,s,c),tl(s,l),!1}s=s.return}while(s!==null);return!1}var kl=Error(i(461)),ct=!1;function yt(e,t,s,c){t.child=e===null?dp(t,null,s,c):sa(t,e.child,s,c)}function ug(e,t,s,c,l){s=s.render;var d=t.ref;if("ref"in c){var y={};for(var E in c)E!=="ref"&&(y[E]=c[E])}else y=c;return ta(t),c=ol(e,t,s,y,d,l),E=cl(),e!==null&&!ct?(ul(e,t,l),Qn(e,t,l)):(Ne&&E&&Pu(t),t.flags|=1,yt(e,t,c,l),t.child)}function lg(e,t,s,c,l){if(e===null){var d=s.type;return typeof d=="function"&&!$u(d)&&d.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=d,fg(e,t,d,c,l)):(e=uo(s.type,null,c,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!zl(e,l)){var y=d.memoizedProps;if(s=s.compare,s=s!==null?s:zs,s(y,c)&&e.ref===t.ref)return Qn(e,t,l)}return t.flags|=1,e=Vn(d,c),e.ref=t.ref,e.return=t,t.child=e}function fg(e,t,s,c,l){if(e!==null){var d=e.memoizedProps;if(zs(d,c)&&e.ref===t.ref)if(ct=!1,t.pendingProps=c=d,zl(e,l))(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,Qn(e,t,l)}return Al(e,t,s,c,l)}function dg(e,t,s,c){var l=c.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,e!==null){for(c=t.child=e.child,l=0;c!==null;)l=l|c.lanes|c.childLanes,c=c.sibling;c=l&~d}else c=0,t.child=null;return mg(e,t,d,s,c)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ho(t,d!==null?d.cachePool:null),d!==null?pp(t,d):rl(),gp(t);else return c=t.lanes=536870912,mg(e,t,d!==null?d.baseLanes|s:s,s,c)}else d!==null?(ho(t,d.cachePool),pp(t,d),Tr(),t.memoizedState=null):(e!==null&&ho(t,null),rl(),Tr());return yt(e,t,l,s),t.child}function Fs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function mg(e,t,s,c,l){var d=Ku();return d=d===null?null:{parent:it._currentValue,pool:d},t.memoizedState={baseLanes:s,cachePool:d},e!==null&&ho(t,null),rl(),gp(t),e!==null&&$a(e,t,c,!0),t.childLanes=l,null}function No(e,t){return t=Io({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function hg(e,t,s){return sa(t,e.child,null,s),e=No(t,t.pendingProps),e.flags|=2,Qt(t),t.memoizedState=null,e}function L_(e,t,s){var c=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ne){if(c.mode==="hidden")return e=No(t,c),t.lanes=536870912,Fs(null,e);if(sl(t),(e=Ye)?(e=ky(e,ln),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:pr!==null?{id:Rn,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},s=Kh(e),s.return=t,t.child=s,pt=t,Ye=null)):e=null,e===null)throw yr(t);return t.lanes=536870912,null}return No(t,c)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(sl(t),l)if(t.flags&256)t.flags&=-257,t=hg(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(ct||$a(e,t,s,!1),l=(s&e.childLanes)!==0,ct||l){if(c=He,c!==null&&(y=ah(c,s),y!==0&&y!==d.retryLane))throw d.retryLane=y,Kr(e,y),Dt(c,e,y),kl;qo(),t=hg(e,t,s)}else e=d.treeContext,Ye=dn(y.nextSibling),pt=t,Ne=!0,gr=null,ln=!1,e!==null&&ep(t,e),t=No(t,c),t.flags|=4096;return t}return e=Vn(e.child,{mode:c.mode,children:c.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Mo(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Al(e,t,s,c,l){return ta(t),s=ol(e,t,s,c,void 0,l),c=cl(),e!==null&&!ct?(ul(e,t,l),Qn(e,t,l)):(Ne&&c&&Pu(t),t.flags|=1,yt(e,t,s,l),t.child)}function pg(e,t,s,c,l,d){return ta(t),t.updateQueue=null,s=vp(t,c,s,l),yp(e),c=cl(),e!==null&&!ct?(ul(e,t,d),Qn(e,t,d)):(Ne&&c&&Pu(t),t.flags|=1,yt(e,t,s,d),t.child)}function gg(e,t,s,c,l){if(ta(t),t.stateNode===null){var d=La,y=s.contextType;typeof y=="object"&&y!==null&&(d=gt(y)),d=new s(c,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=wl,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=c,d.state=t.memoizedState,d.refs={},Wu(t),y=s.contextType,d.context=typeof y=="object"&&y!==null?gt(y):La,d.state=t.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Tl(t,s,y,c),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&wl.enqueueReplaceState(d,d.state,null),Vs(t,c,d,l),Gs(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),c=!0}else if(e===null){d=t.stateNode;var E=t.memoizedProps,O=oa(s,E);d.props=O;var D=d.context,V=s.contextType;y=La,typeof V=="object"&&V!==null&&(y=gt(V));var Y=s.getDerivedStateFromProps;V=typeof Y=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=t.pendingProps!==E,V||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||D!==y)&&ng(t,d,c,y),br=!1;var U=t.memoizedState;d.state=U,Vs(t,c,d,l),Gs(),D=t.memoizedState,E||U!==D||br?(typeof Y=="function"&&(Tl(t,s,Y,c),D=t.memoizedState),(O=br||tg(t,s,O,c,U,D,y))?(V||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=c,t.memoizedState=D),d.props=c,d.state=D,d.context=y,c=O):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),c=!1)}else{d=t.stateNode,el(e,t),y=t.memoizedProps,V=oa(s,y),d.props=V,Y=t.pendingProps,U=d.context,D=s.contextType,O=La,typeof D=="object"&&D!==null&&(O=gt(D)),E=s.getDerivedStateFromProps,(D=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==Y||U!==O)&&ng(t,d,c,O),br=!1,U=t.memoizedState,d.state=U,Vs(t,c,d,l),Gs();var P=t.memoizedState;y!==Y||U!==P||br||e!==null&&e.dependencies!==null&&fo(e.dependencies)?(typeof E=="function"&&(Tl(t,s,E,c),P=t.memoizedState),(V=br||tg(t,s,V,c,U,P,O)||e!==null&&e.dependencies!==null&&fo(e.dependencies))?(D||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(c,P,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(c,P,O)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=c,t.memoizedState=P),d.props=c,d.state=P,d.context=O,c=V):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),c=!1)}return d=c,Mo(e,t),c=(t.flags&128)!==0,d||c?(d=t.stateNode,s=c&&typeof s.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&c?(t.child=sa(t,e.child,null,l),t.child=sa(t,null,s,l)):yt(e,t,s,l),t.memoizedState=d.state,e=t.child):e=Qn(e,t,l),e}function yg(e,t,s,c){return Wr(),t.flags|=256,yt(e,t,s,c),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cl(e){return{baseLanes:e,cachePool:ip()}}function Nl(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Jt),e}function vg(e,t,s){var c=t.pendingProps,l=!1,d=(t.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(at.current&2)!==0),y&&(l=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ne){if(l?_r(t):Tr(),(e=Ye)?(e=ky(e,ln),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:pr!==null?{id:Rn,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},s=Kh(e),s.return=t,t.child=s,pt=t,Ye=null)):e=null,e===null)throw yr(t);return mf(e)?t.lanes=32:t.lanes=536870912,null}var E=c.children;return c=c.fallback,l?(Tr(),l=t.mode,E=Io({mode:"hidden",children:E},l),c=Jr(c,l,s,null),E.return=t,c.return=t,E.sibling=c,t.child=E,c=t.child,c.memoizedState=Cl(s),c.childLanes=Nl(e,y,s),t.memoizedState=Rl,Fs(null,c)):(_r(t),Ml(t,E))}var O=e.memoizedState;if(O!==null&&(E=O.dehydrated,E!==null)){if(d)t.flags&256?(_r(t),t.flags&=-257,t=Il(e,t,s)):t.memoizedState!==null?(Tr(),t.child=e.child,t.flags|=128,t=null):(Tr(),E=c.fallback,l=t.mode,c=Io({mode:"visible",children:c.children},l),E=Jr(E,l,s,null),E.flags|=2,c.return=t,E.return=t,c.sibling=E,t.child=c,sa(t,e.child,null,s),c=t.child,c.memoizedState=Cl(s),c.childLanes=Nl(e,y,s),t.memoizedState=Rl,t=Fs(null,c));else if(_r(t),mf(E)){if(y=E.nextSibling&&E.nextSibling.dataset,y)var D=y.dgst;y=D,c=Error(i(419)),c.stack="",c.digest=y,Us({value:c,source:null,stack:null}),t=Il(e,t,s)}else if(ct||$a(e,t,s,!1),y=(s&e.childLanes)!==0,ct||y){if(y=He,y!==null&&(c=ah(y,s),c!==0&&c!==O.retryLane))throw O.retryLane=c,Kr(e,c),Dt(y,e,c),kl;df(E)||qo(),t=Il(e,t,s)}else df(E)?(t.flags|=192,t.child=e.child,t=null):(e=O.treeContext,Ye=dn(E.nextSibling),pt=t,Ne=!0,gr=null,ln=!1,e!==null&&ep(t,e),t=Ml(t,c.children),t.flags|=4096);return t}return l?(Tr(),E=c.fallback,l=t.mode,O=e.child,D=O.sibling,c=Vn(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,D!==null?E=Vn(D,E):(E=Jr(E,l,s,null),E.flags|=2),E.return=t,c.return=t,c.sibling=E,t.child=c,Fs(null,c),c=t.child,E=e.child.memoizedState,E===null?E=Cl(s):(l=E.cachePool,l!==null?(O=it._currentValue,l=l.parent!==O?{parent:O,pool:O}:l):l=ip(),E={baseLanes:E.baseLanes|s,cachePool:l}),c.memoizedState=E,c.childLanes=Nl(e,y,s),t.memoizedState=Rl,Fs(e.child,c)):(_r(t),s=e.child,e=s.sibling,s=Vn(s,{mode:"visible",children:c.children}),s.return=t,s.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=s,t.memoizedState=null,s)}function Ml(e,t){return t=Io({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Io(e,t){return e=Xt(22,e,null,t),e.lanes=0,e}function Il(e,t,s){return sa(t,e.child,null,s),e=Ml(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bg(e,t,s){e.lanes|=t;var c=e.alternate;c!==null&&(c.lanes|=t),Zu(e.return,t,s)}function xl(e,t,s,c,l,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:l,treeForkCount:d}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=s,y.tailMode=l,y.treeForkCount=d)}function Eg(e,t,s){var c=t.pendingProps,l=c.revealOrder,d=c.tail;c=c.children;var y=at.current,E=(y&2)!==0;if(E?(y=y&1|2,t.flags|=128):y&=1,F(at,y),yt(e,t,c,s),c=Ne?Ds:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bg(e,s,t);else if(e.tag===19)bg(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(s=t.child,l=null;s!==null;)e=s.alternate,e!==null&&Eo(e)===null&&(l=s),s=s.sibling;s=l,s===null?(l=t.child,t.child=null):(l=s.sibling,s.sibling=null),xl(t,!1,l,s,d,c);break;case"backwards":case"unstable_legacy-backwards":for(s=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Eo(e)===null){t.child=l;break}e=l.sibling,l.sibling=s,s=l,l=e}xl(t,!0,s,null,d,c);break;case"together":xl(t,!1,null,null,void 0,c);break;default:t.memoizedState=null}return t.child}function Qn(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),kr|=t.lanes,(s&t.childLanes)===0)if(e!==null){if($a(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,s=Vn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Vn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function zl(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&fo(e)))}function D_(e,t,s){switch(t.tag){case 3:Ot(t,t.stateNode.containerInfo),vr(t,it,e.memoizedState.cache),Wr();break;case 27:case 5:Ss(t);break;case 4:Ot(t,t.stateNode.containerInfo);break;case 10:vr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,sl(t),null;break;case 13:var c=t.memoizedState;if(c!==null)return c.dehydrated!==null?(_r(t),t.flags|=128,null):(s&t.child.childLanes)!==0?vg(e,t,s):(_r(t),e=Qn(e,t,s),e!==null?e.sibling:null);_r(t);break;case 19:var l=(e.flags&128)!==0;if(c=(s&t.childLanes)!==0,c||($a(e,t,s,!1),c=(s&t.childLanes)!==0),l){if(c)return Eg(e,t,s);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),F(at,at.current),c)break;return null;case 22:return t.lanes=0,dg(e,t,s,t.pendingProps);case 24:vr(t,it,e.memoizedState.cache)}return Qn(e,t,s)}function Sg(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)ct=!0;else{if(!zl(e,s)&&(t.flags&128)===0)return ct=!1,D_(e,t,s);ct=(e.flags&131072)!==0}else ct=!1,Ne&&(t.flags&1048576)!==0&&Wh(t,Ds,t.index);switch(t.lanes=0,t.tag){case 16:e:{var c=t.pendingProps;if(e=ra(t.elementType),t.type=e,typeof e=="function")$u(e)?(c=oa(e,c),t.tag=1,t=gg(null,t,e,c,s)):(t.tag=0,t=Al(null,t,e,c,s));else{if(e!=null){var l=e.$$typeof;if(l===M){t.tag=11,t=ug(null,t,e,c,s);break e}else if(l===q){t.tag=14,t=lg(null,t,e,c,s);break e}}throw t=W(e)||e,Error(i(306,t,""))}}return t;case 0:return Al(e,t,t.type,t.pendingProps,s);case 1:return c=t.type,l=oa(c,t.pendingProps),gg(e,t,c,l,s);case 3:e:{if(Ot(t,t.stateNode.containerInfo),e===null)throw Error(i(387));c=t.pendingProps;var d=t.memoizedState;l=d.element,el(e,t),Vs(t,c,null,s);var y=t.memoizedState;if(c=y.cache,vr(t,it,c),c!==d.cache&&Xu(t,[it],s,!0),Gs(),c=y.element,d.isDehydrated)if(d={element:c,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=yg(e,t,c,s);break e}else if(c!==l){l=on(Error(i(424)),t),Us(l),t=yg(e,t,c,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ye=dn(e.firstChild),pt=t,Ne=!0,gr=null,ln=!0,s=dp(t,null,c,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Wr(),c===l){t=Qn(e,t,s);break e}yt(e,t,c,s)}t=t.child}return t;case 26:return Mo(e,t),e===null?(s=Iy(t.type,null,t.pendingProps,null))?t.memoizedState=s:Ne||(s=t.type,e=t.pendingProps,c=Xo(ve.current).createElement(s),c[ht]=t,c[Nt]=e,vt(c,s,e),dt(c),t.stateNode=c):t.memoizedState=Iy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ss(t),e===null&&Ne&&(c=t.stateNode=Cy(t.type,t.pendingProps,ve.current),pt=t,ln=!0,l=Ye,Mr(t.type)?(hf=l,Ye=dn(c.firstChild)):Ye=l),yt(e,t,t.pendingProps.children,s),Mo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ne&&((l=c=Ye)&&(c=dT(c,t.type,t.pendingProps,ln),c!==null?(t.stateNode=c,pt=t,Ye=dn(c.firstChild),ln=!1,l=!0):l=!1),l||yr(t)),Ss(t),l=t.type,d=t.pendingProps,y=e!==null?e.memoizedProps:null,c=d.children,uf(l,d)?c=null:y!==null&&uf(l,y)&&(t.flags|=32),t.memoizedState!==null&&(l=ol(e,t,A_,null,null,s),li._currentValue=l),Mo(e,t),yt(e,t,c,s),t.child;case 6:return e===null&&Ne&&((e=s=Ye)&&(s=mT(s,t.pendingProps,ln),s!==null?(t.stateNode=s,pt=t,Ye=null,e=!0):e=!1),e||yr(t)),null;case 13:return vg(e,t,s);case 4:return Ot(t,t.stateNode.containerInfo),c=t.pendingProps,e===null?t.child=sa(t,null,c,s):yt(e,t,c,s),t.child;case 11:return ug(e,t,t.type,t.pendingProps,s);case 7:return yt(e,t,t.pendingProps,s),t.child;case 8:return yt(e,t,t.pendingProps.children,s),t.child;case 12:return yt(e,t,t.pendingProps.children,s),t.child;case 10:return c=t.pendingProps,vr(t,t.type,c.value),yt(e,t,c.children,s),t.child;case 9:return l=t.type._context,c=t.pendingProps.children,ta(t),l=gt(l),c=c(l),t.flags|=1,yt(e,t,c,s),t.child;case 14:return lg(e,t,t.type,t.pendingProps,s);case 15:return fg(e,t,t.type,t.pendingProps,s);case 19:return Eg(e,t,s);case 31:return L_(e,t,s);case 22:return dg(e,t,s,t.pendingProps);case 24:return ta(t),c=gt(it),e===null?(l=Ku(),l===null&&(l=He,d=Fu(),l.pooledCache=d,d.refCount++,d!==null&&(l.pooledCacheLanes|=s),l=d),t.memoizedState={parent:c,cache:l},Wu(t),vr(t,it,l)):((e.lanes&s)!==0&&(el(e,t),Vs(t,null,null,s),Gs()),l=e.memoizedState,d=t.memoizedState,l.parent!==c?(l={parent:c,cache:c},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),vr(t,it,c)):(c=d.cache,vr(t,it,c),c!==l.cache&&Xu(t,[it],s,!0))),yt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Kn(e){e.flags|=4}function Ll(e,t,s,c,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Xg())e.flags|=8192;else throw aa=go,Ju}else e.flags&=-16777217}function _g(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Uy(t))if(Xg())e.flags|=8192;else throw aa=go,Ju}function xo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?th():536870912,e.lanes|=t,Ka|=t)}function Qs(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,c=0;if(t)for(var l=e.child;l!==null;)s|=l.lanes|l.childLanes,c|=l.subtreeFlags&65011712,c|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)s|=l.lanes|l.childLanes,c|=l.subtreeFlags,c|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=c,e.childLanes=s,t}function U_(e,t,s){var c=t.pendingProps;switch(Gu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return Ze(t),null;case 3:return s=t.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),t.memoizedState.cache!==c&&(t.flags|=2048),Zn(it),rt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ja(t)?Kn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Hu())),Ze(t),null;case 26:var l=t.type,d=t.memoizedState;return e===null?(Kn(t),d!==null?(Ze(t),_g(t,d)):(Ze(t),Ll(t,l,null,c,s))):d?d!==e.memoizedState?(Kn(t),Ze(t),_g(t,d)):(Ze(t),t.flags&=-16777217):(e=e.memoizedProps,e!==c&&Kn(t),Ze(t),Ll(t,l,e,c,s)),null;case 27:if(Gi(t),s=ve.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==c&&Kn(t);else{if(!c){if(t.stateNode===null)throw Error(i(166));return Ze(t),null}e=te.current,ja(t)?tp(t):(e=Cy(l,c,s),t.stateNode=e,Kn(t))}return Ze(t),null;case 5:if(Gi(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==c&&Kn(t);else{if(!c){if(t.stateNode===null)throw Error(i(166));return Ze(t),null}if(d=te.current,ja(t))tp(t);else{var y=Xo(ve.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof c.is=="string"?y.createElement("select",{is:c.is}):y.createElement("select"),c.multiple?d.multiple=!0:c.size&&(d.size=c.size);break;default:d=typeof c.is=="string"?y.createElement(l,{is:c.is}):y.createElement(l)}}d[ht]=t,d[Nt]=c;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=d;e:switch(vt(d,l,c),l){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Kn(t)}}return Ze(t),Ll(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==c&&Kn(t);else{if(typeof c!="string"&&t.stateNode===null)throw Error(i(166));if(e=ve.current,ja(t)){if(e=t.stateNode,s=t.memoizedProps,c=null,l=pt,l!==null)switch(l.tag){case 27:case 5:c=l.memoizedProps}e[ht]=t,e=!!(e.nodeValue===s||c!==null&&c.suppressHydrationWarning===!0||vy(e.nodeValue,s)),e||yr(t,!0)}else e=Xo(e).createTextNode(c),e[ht]=t,t.stateNode=e}return Ze(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(c=ja(t),s!==null){if(e===null){if(!c)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[ht]=t}else Wr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),e=!1}else s=Hu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(Qt(t),t):(Qt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Ze(t),null;case 13:if(c=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=ja(t),c!==null&&c.dehydrated!==null){if(e===null){if(!l)throw Error(i(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));l[ht]=t}else Wr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),l=!1}else l=Hu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(Qt(t),t):(Qt(t),null)}return Qt(t),(t.flags&128)!==0?(t.lanes=s,t):(s=c!==null,e=e!==null&&e.memoizedState!==null,s&&(c=t.child,l=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(l=c.alternate.memoizedState.cachePool.pool),d=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(d=c.memoizedState.cachePool.pool),d!==l&&(c.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),xo(t,t.updateQueue),Ze(t),null);case 4:return rt(),e===null&&rf(t.stateNode.containerInfo),Ze(t),null;case 10:return Zn(t.type),Ze(t),null;case 19:if(j(at),c=t.memoizedState,c===null)return Ze(t),null;if(l=(t.flags&128)!==0,d=c.rendering,d===null)if(l)Qs(c,!1);else{if(nt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=Eo(e),d!==null){for(t.flags|=128,Qs(c,!1),e=d.updateQueue,t.updateQueue=e,xo(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Qh(s,e),s=s.sibling;return F(at,at.current&1|2),Ne&&Hn(t,c.treeForkCount),t.child}e=e.sibling}c.tail!==null&&Vt()>jo&&(t.flags|=128,l=!0,Qs(c,!1),t.lanes=4194304)}else{if(!l)if(e=Eo(d),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,xo(t,e),Qs(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!Ne)return Ze(t),null}else 2*Vt()-c.renderingStartTime>jo&&s!==536870912&&(t.flags|=128,l=!0,Qs(c,!1),t.lanes=4194304);c.isBackwards?(d.sibling=t.child,t.child=d):(e=c.last,e!==null?e.sibling=d:t.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Vt(),e.sibling=null,s=at.current,F(at,l?s&1|2:s&1),Ne&&Hn(t,c.treeForkCount),e):(Ze(t),null);case 22:case 23:return Qt(t),al(),c=t.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(t.flags|=8192):c&&(t.flags|=8192),c?(s&536870912)!==0&&(t.flags&128)===0&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),s=t.updateQueue,s!==null&&xo(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),c=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),c!==s&&(t.flags|=2048),e!==null&&j(na),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Zn(it),Ze(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function j_(e,t){switch(Gu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zn(it),rt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Gi(t),null;case 31:if(t.memoizedState!==null){if(Qt(t),t.alternate===null)throw Error(i(340));Wr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Wr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return j(at),null;case 4:return rt(),null;case 10:return Zn(t.type),null;case 22:case 23:return Qt(t),al(),e!==null&&j(na),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Zn(it),null;case 25:return null;default:return null}}function Tg(e,t){switch(Gu(t),t.tag){case 3:Zn(it),rt();break;case 26:case 27:case 5:Gi(t);break;case 4:rt();break;case 31:t.memoizedState!==null&&Qt(t);break;case 13:Qt(t);break;case 19:j(at);break;case 10:Zn(t.type);break;case 22:case 23:Qt(t),al(),e!==null&&j(na);break;case 24:Zn(it)}}function Ks(e,t){try{var s=t.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var l=c.next;s=l;do{if((s.tag&e)===e){c=void 0;var d=s.create,y=s.inst;c=d(),y.destroy=c}s=s.next}while(s!==l)}}catch(E){Be(t,t.return,E)}}function wr(e,t,s){try{var c=t.updateQueue,l=c!==null?c.lastEffect:null;if(l!==null){var d=l.next;c=d;do{if((c.tag&e)===e){var y=c.inst,E=y.destroy;if(E!==void 0){y.destroy=void 0,l=t;var O=s,D=E;try{D()}catch(V){Be(l,O,V)}}}c=c.next}while(c!==d)}}catch(V){Be(t,t.return,V)}}function wg(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{hp(t,s)}catch(c){Be(e,e.return,c)}}}function Og(e,t,s){s.props=oa(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(c){Be(e,t,c)}}function Js(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof s=="function"?e.refCleanup=s(c):s.current=c}}catch(l){Be(e,t,l)}}function Nn(e,t){var s=e.ref,c=e.refCleanup;if(s!==null)if(typeof c=="function")try{c()}catch(l){Be(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(l){Be(e,t,l)}else s.current=null}function kg(e){var t=e.type,s=e.memoizedProps,c=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&c.focus();break e;case"img":s.src?c.src=s.src:s.srcSet&&(c.srcset=s.srcSet)}}catch(l){Be(e,e.return,l)}}function Dl(e,t,s){try{var c=e.stateNode;iT(c,e.type,s,t),c[Nt]=t}catch(l){Be(e,e.return,l)}}function Ag(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mr(e.type)||e.tag===4}function Ul(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ag(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jl(e,t,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Pn));else if(c!==4&&(c===27&&Mr(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(jl(e,t,s),e=e.sibling;e!==null;)jl(e,t,s),e=e.sibling}function zo(e,t,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(c!==4&&(c===27&&Mr(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(zo(e,t,s),e=e.sibling;e!==null;)zo(e,t,s),e=e.sibling}function Rg(e){var t=e.stateNode,s=e.memoizedProps;try{for(var c=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);vt(t,c,s),t[ht]=e,t[Nt]=s}catch(d){Be(e,e.return,d)}}var Jn=!1,ut=!1,$l=!1,Cg=typeof WeakSet=="function"?WeakSet:Set,mt=null;function $_(e,t){if(e=e.containerInfo,of=tc,e=qh(e),Iu(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var l=c.anchorOffset,d=c.focusNode;c=c.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var y=0,E=-1,O=-1,D=0,V=0,Y=e,U=null;t:for(;;){for(var P;Y!==s||l!==0&&Y.nodeType!==3||(E=y+l),Y!==d||c!==0&&Y.nodeType!==3||(O=y+c),Y.nodeType===3&&(y+=Y.nodeValue.length),(P=Y.firstChild)!==null;)U=Y,Y=P;for(;;){if(Y===e)break t;if(U===s&&++D===l&&(E=y),U===d&&++V===c&&(O=y),(P=Y.nextSibling)!==null)break;Y=U,U=Y.parentNode}Y=P}s=E===-1||O===-1?null:{start:E,end:O}}else s=null}s=s||{start:0,end:0}}else s=null;for(cf={focusedElem:e,selectionRange:s},tc=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){switch(t=mt,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)l=e[s],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=t,l=d.memoizedProps,d=d.memoizedState,c=s.stateNode;try{var oe=oa(s.type,l);e=c.getSnapshotBeforeUpdate(oe,d),c.__reactInternalSnapshotBeforeUpdate=e}catch(he){Be(s,s.return,he)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)ff(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ff(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}}function Ng(e,t,s){var c=s.flags;switch(s.tag){case 0:case 11:case 15:er(e,s),c&4&&Ks(5,s);break;case 1:if(er(e,s),c&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(y){Be(s,s.return,y)}else{var l=oa(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Be(s,s.return,y)}}c&64&&wg(s),c&512&&Js(s,s.return);break;case 3:if(er(e,s),c&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{hp(e,t)}catch(y){Be(s,s.return,y)}}break;case 27:t===null&&c&4&&Rg(s);case 26:case 5:er(e,s),t===null&&c&4&&kg(s),c&512&&Js(s,s.return);break;case 12:er(e,s);break;case 31:er(e,s),c&4&&xg(e,s);break;case 13:er(e,s),c&4&&zg(e,s),c&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=X_.bind(null,s),hT(e,s))));break;case 22:if(c=s.memoizedState!==null||Jn,!c){t=t!==null&&t.memoizedState!==null||ut,l=Jn;var d=ut;Jn=c,(ut=t)&&!d?tr(e,s,(s.subtreeFlags&8772)!==0):er(e,s),Jn=l,ut=d}break;case 30:break;default:er(e,s)}}function Mg(e){var t=e.alternate;t!==null&&(e.alternate=null,Mg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&pu(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xe=null,It=!1;function Wn(e,t,s){for(s=s.child;s!==null;)Ig(e,t,s),s=s.sibling}function Ig(e,t,s){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(_s,s)}catch{}switch(s.tag){case 26:ut||Nn(s,t),Wn(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ut||Nn(s,t);var c=Xe,l=It;Mr(s.type)&&(Xe=s.stateNode,It=!1),Wn(e,t,s),oi(s.stateNode),Xe=c,It=l;break;case 5:ut||Nn(s,t);case 6:if(c=Xe,l=It,Xe=null,Wn(e,t,s),Xe=c,It=l,Xe!==null)if(It)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(s.stateNode)}catch(d){Be(s,t,d)}else try{Xe.removeChild(s.stateNode)}catch(d){Be(s,t,d)}break;case 18:Xe!==null&&(It?(e=Xe,wy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),ss(e)):wy(Xe,s.stateNode));break;case 4:c=Xe,l=It,Xe=s.stateNode.containerInfo,It=!0,Wn(e,t,s),Xe=c,It=l;break;case 0:case 11:case 14:case 15:wr(2,s,t),ut||wr(4,s,t),Wn(e,t,s);break;case 1:ut||(Nn(s,t),c=s.stateNode,typeof c.componentWillUnmount=="function"&&Og(s,t,c)),Wn(e,t,s);break;case 21:Wn(e,t,s);break;case 22:ut=(c=ut)||s.memoizedState!==null,Wn(e,t,s),ut=c;break;default:Wn(e,t,s)}}function xg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ss(e)}catch(s){Be(t,t.return,s)}}}function zg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ss(e)}catch(s){Be(t,t.return,s)}}function B_(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Cg),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Cg),t;default:throw Error(i(435,e.tag))}}function Lo(e,t){var s=B_(e);t.forEach(function(c){if(!s.has(c)){s.add(c);var l=F_.bind(null,e,c);c.then(l,l)}})}function xt(e,t){var s=t.deletions;if(s!==null)for(var c=0;c<s.length;c++){var l=s[c],d=e,y=t,E=y;e:for(;E!==null;){switch(E.tag){case 27:if(Mr(E.type)){Xe=E.stateNode,It=!1;break e}break;case 5:Xe=E.stateNode,It=!1;break e;case 3:case 4:Xe=E.stateNode.containerInfo,It=!0;break e}E=E.return}if(Xe===null)throw Error(i(160));Ig(d,y,l),Xe=null,It=!1,d=l.alternate,d!==null&&(d.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Lg(t,e),t=t.sibling}var bn=null;function Lg(e,t){var s=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xt(t,e),zt(e),c&4&&(wr(3,e,e.return),Ks(3,e),wr(5,e,e.return));break;case 1:xt(t,e),zt(e),c&512&&(ut||s===null||Nn(s,s.return)),c&64&&Jn&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?c:s.concat(c))));break;case 26:var l=bn;if(xt(t,e),zt(e),c&512&&(ut||s===null||Nn(s,s.return)),c&4){var d=s!==null?s.memoizedState:null;if(c=e.memoizedState,s===null)if(c===null)if(e.stateNode===null){e:{c=e.type,s=e.memoizedProps,l=l.ownerDocument||l;t:switch(c){case"title":d=l.getElementsByTagName("title")[0],(!d||d[Os]||d[ht]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=l.createElement(c),l.head.insertBefore(d,l.querySelector("head > title"))),vt(d,c,s),d[ht]=e,dt(d),c=d;break e;case"link":var y=Ly("link","href",l).get(c+(s.href||""));if(y){for(var E=0;E<y.length;E++)if(d=y[E],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){y.splice(E,1);break t}}d=l.createElement(c),vt(d,c,s),l.head.appendChild(d);break;case"meta":if(y=Ly("meta","content",l).get(c+(s.content||""))){for(E=0;E<y.length;E++)if(d=y[E],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){y.splice(E,1);break t}}d=l.createElement(c),vt(d,c,s),l.head.appendChild(d);break;default:throw Error(i(468,c))}d[ht]=e,dt(d),c=d}e.stateNode=c}else Dy(l,e.type,e.stateNode);else e.stateNode=zy(l,c,e.memoizedProps);else d!==c?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,c===null?Dy(l,e.type,e.stateNode):zy(l,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Dl(e,e.memoizedProps,s.memoizedProps)}break;case 27:xt(t,e),zt(e),c&512&&(ut||s===null||Nn(s,s.return)),s!==null&&c&4&&Dl(e,e.memoizedProps,s.memoizedProps);break;case 5:if(xt(t,e),zt(e),c&512&&(ut||s===null||Nn(s,s.return)),e.flags&32){l=e.stateNode;try{Ra(l,"")}catch(oe){Be(e,e.return,oe)}}c&4&&e.stateNode!=null&&(l=e.memoizedProps,Dl(e,l,s!==null?s.memoizedProps:l)),c&1024&&($l=!0);break;case 6:if(xt(t,e),zt(e),c&4){if(e.stateNode===null)throw Error(i(162));c=e.memoizedProps,s=e.stateNode;try{s.nodeValue=c}catch(oe){Be(e,e.return,oe)}}break;case 3:if(Ko=null,l=bn,bn=Fo(t.containerInfo),xt(t,e),bn=l,zt(e),c&4&&s!==null&&s.memoizedState.isDehydrated)try{ss(t.containerInfo)}catch(oe){Be(e,e.return,oe)}$l&&($l=!1,Dg(e));break;case 4:c=bn,bn=Fo(e.stateNode.containerInfo),xt(t,e),zt(e),bn=c;break;case 12:xt(t,e),zt(e);break;case 31:xt(t,e),zt(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Lo(e,c)));break;case 13:xt(t,e),zt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Uo=Vt()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Lo(e,c)));break;case 22:l=e.memoizedState!==null;var O=s!==null&&s.memoizedState!==null,D=Jn,V=ut;if(Jn=D||l,ut=V||O,xt(t,e),ut=V,Jn=D,zt(e),c&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(s===null||O||Jn||ut||ca(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){O=s=t;try{if(d=O.stateNode,l)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{E=O.stateNode;var Y=O.memoizedProps.style,U=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(oe){Be(O,O.return,oe)}}}else if(t.tag===6){if(s===null){O=t;try{O.stateNode.nodeValue=l?"":O.memoizedProps}catch(oe){Be(O,O.return,oe)}}}else if(t.tag===18){if(s===null){O=t;try{var P=O.stateNode;l?Oy(P,!0):Oy(O.stateNode,!1)}catch(oe){Be(O,O.return,oe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}c&4&&(c=e.updateQueue,c!==null&&(s=c.retryQueue,s!==null&&(c.retryQueue=null,Lo(e,s))));break;case 19:xt(t,e),zt(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Lo(e,c)));break;case 30:break;case 21:break;default:xt(t,e),zt(e)}}function zt(e){var t=e.flags;if(t&2){try{for(var s,c=e.return;c!==null;){if(Ag(c)){s=c;break}c=c.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var l=s.stateNode,d=Ul(e);zo(e,d,l);break;case 5:var y=s.stateNode;s.flags&32&&(Ra(y,""),s.flags&=-33);var E=Ul(e);zo(e,E,y);break;case 3:case 4:var O=s.stateNode.containerInfo,D=Ul(e);jl(e,D,O);break;default:throw Error(i(161))}}catch(V){Be(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Dg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function er(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ng(e,t.alternate,t),t=t.sibling}function ca(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:wr(4,t,t.return),ca(t);break;case 1:Nn(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Og(t,t.return,s),ca(t);break;case 27:oi(t.stateNode);case 26:case 5:Nn(t,t.return),ca(t);break;case 22:t.memoizedState===null&&ca(t);break;case 30:ca(t);break;default:ca(t)}e=e.sibling}}function tr(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var c=t.alternate,l=e,d=t,y=d.flags;switch(d.tag){case 0:case 11:case 15:tr(l,d,s),Ks(4,d);break;case 1:if(tr(l,d,s),c=d,l=c.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(D){Be(c,c.return,D)}if(c=d,l=c.updateQueue,l!==null){var E=c.stateNode;try{var O=l.shared.hiddenCallbacks;if(O!==null)for(l.shared.hiddenCallbacks=null,l=0;l<O.length;l++)mp(O[l],E)}catch(D){Be(c,c.return,D)}}s&&y&64&&wg(d),Js(d,d.return);break;case 27:Rg(d);case 26:case 5:tr(l,d,s),s&&c===null&&y&4&&kg(d),Js(d,d.return);break;case 12:tr(l,d,s);break;case 31:tr(l,d,s),s&&y&4&&xg(l,d);break;case 13:tr(l,d,s),s&&y&4&&zg(l,d);break;case 22:d.memoizedState===null&&tr(l,d,s),Js(d,d.return);break;case 30:break;default:tr(l,d,s)}t=t.sibling}}function Bl(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&js(s))}function ql(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&js(e))}function En(e,t,s,c){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ug(e,t,s,c),t=t.sibling}function Ug(e,t,s,c){var l=t.flags;switch(t.tag){case 0:case 11:case 15:En(e,t,s,c),l&2048&&Ks(9,t);break;case 1:En(e,t,s,c);break;case 3:En(e,t,s,c),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&js(e)));break;case 12:if(l&2048){En(e,t,s,c),e=t.stateNode;try{var d=t.memoizedProps,y=d.id,E=d.onPostCommit;typeof E=="function"&&E(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Be(t,t.return,O)}}else En(e,t,s,c);break;case 31:En(e,t,s,c);break;case 13:En(e,t,s,c);break;case 23:break;case 22:d=t.stateNode,y=t.alternate,t.memoizedState!==null?d._visibility&2?En(e,t,s,c):Ws(e,t):d._visibility&2?En(e,t,s,c):(d._visibility|=2,Xa(e,t,s,c,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Bl(y,t);break;case 24:En(e,t,s,c),l&2048&&ql(t.alternate,t);break;default:En(e,t,s,c)}}function Xa(e,t,s,c,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,y=t,E=s,O=c,D=y.flags;switch(y.tag){case 0:case 11:case 15:Xa(d,y,E,O,l),Ks(8,y);break;case 23:break;case 22:var V=y.stateNode;y.memoizedState!==null?V._visibility&2?Xa(d,y,E,O,l):Ws(d,y):(V._visibility|=2,Xa(d,y,E,O,l)),l&&D&2048&&Bl(y.alternate,y);break;case 24:Xa(d,y,E,O,l),l&&D&2048&&ql(y.alternate,y);break;default:Xa(d,y,E,O,l)}t=t.sibling}}function Ws(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,c=t,l=c.flags;switch(c.tag){case 22:Ws(s,c),l&2048&&Bl(c.alternate,c);break;case 24:Ws(s,c),l&2048&&ql(c.alternate,c);break;default:Ws(s,c)}t=t.sibling}}var ei=8192;function Fa(e,t,s){if(e.subtreeFlags&ei)for(e=e.child;e!==null;)jg(e,t,s),e=e.sibling}function jg(e,t,s){switch(e.tag){case 26:Fa(e,t,s),e.flags&ei&&e.memoizedState!==null&&kT(s,bn,e.memoizedState,e.memoizedProps);break;case 5:Fa(e,t,s);break;case 3:case 4:var c=bn;bn=Fo(e.stateNode.containerInfo),Fa(e,t,s),bn=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=ei,ei=16777216,Fa(e,t,s),ei=c):Fa(e,t,s));break;default:Fa(e,t,s)}}function $g(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ti(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var c=t[s];mt=c,qg(c,e)}$g(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Bg(e),e=e.sibling}function Bg(e){switch(e.tag){case 0:case 11:case 15:ti(e),e.flags&2048&&wr(9,e,e.return);break;case 3:ti(e);break;case 12:ti(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Do(e)):ti(e);break;default:ti(e)}}function Do(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var c=t[s];mt=c,qg(c,e)}$g(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:wr(8,t,t.return),Do(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Do(t));break;default:Do(t)}e=e.sibling}}function qg(e,t){for(;mt!==null;){var s=mt;switch(s.tag){case 0:case 11:case 15:wr(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var c=s.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:js(s.memoizedState.cache)}if(c=s.child,c!==null)c.return=s,mt=c;else e:for(s=e;mt!==null;){c=mt;var l=c.sibling,d=c.return;if(Mg(c),c===s){mt=null;break e}if(l!==null){l.return=d,mt=l;break e}mt=d}}}var q_={getCacheForType:function(e){var t=gt(it),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return gt(it).controller.signal}},P_=typeof WeakMap=="function"?WeakMap:Map,Le=0,He=null,Te=null,Ae=0,$e=0,Kt=null,Or=!1,Qa=!1,Pl=!1,nr=0,nt=0,kr=0,ua=0,Gl=0,Jt=0,Ka=0,ni=null,Lt=null,Vl=!1,Uo=0,Pg=0,jo=1/0,$o=null,Ar=null,ft=0,Rr=null,Ja=null,rr=0,Hl=0,Yl=null,Gg=null,ri=0,Zl=null;function Wt(){return(Le&2)!==0&&Ae!==0?Ae&-Ae:I.T!==null?Wl():sh()}function Vg(){if(Jt===0)if((Ae&536870912)===0||Ne){var e=Yi;Yi<<=1,(Yi&3932160)===0&&(Yi=262144),Jt=e}else Jt=536870912;return e=Ft.current,e!==null&&(e.flags|=32),Jt}function Dt(e,t,s){(e===He&&($e===2||$e===9)||e.cancelPendingCommit!==null)&&(Wa(e,0),Cr(e,Ae,Jt,!1)),ws(e,s),((Le&2)===0||e!==He)&&(e===He&&((Le&2)===0&&(ua|=s),nt===4&&Cr(e,Ae,Jt,!1)),Mn(e))}function Hg(e,t,s){if((Le&6)!==0)throw Error(i(327));var c=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Ts(e,t),l=c?H_(e,t):Fl(e,t,!0),d=c;do{if(l===0){Qa&&!c&&Cr(e,t,0,!1);break}else{if(s=e.current.alternate,d&&!G_(s)){l=Fl(e,t,!1),d=!1;continue}if(l===2){if(d=t,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var E=e;l=ni;var O=E.current.memoizedState.isDehydrated;if(O&&(Wa(E,y).flags|=256),y=Fl(E,y,!1),y!==2){if(Pl&&!O){E.errorRecoveryDisabledLanes|=d,ua|=d,l=4;break e}d=Lt,Lt=l,d!==null&&(Lt===null?Lt=d:Lt.push.apply(Lt,d))}l=y}if(d=!1,l!==2)continue}}if(l===1){Wa(e,0),Cr(e,t,0,!0);break}e:{switch(c=e,d=l,d){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Cr(c,t,Jt,!Or);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(l=Uo+300-Vt(),10<l)){if(Cr(c,t,Jt,!Or),Xi(c,0,!0)!==0)break e;rr=t,c.timeoutHandle=_y(Yg.bind(null,c,s,Lt,$o,Vl,t,Jt,ua,Ka,Or,d,"Throttled",-0,0),l);break e}Yg(c,s,Lt,$o,Vl,t,Jt,ua,Ka,Or,d,null,-0,0)}}break}while(!0);Mn(e)}function Yg(e,t,s,c,l,d,y,E,O,D,V,Y,U,P){if(e.timeoutHandle=-1,Y=t.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pn},jg(t,d,Y);var oe=(d&62914560)===d?Uo-Vt():(d&4194048)===d?Pg-Vt():0;if(oe=AT(Y,oe),oe!==null){rr=d,e.cancelPendingCommit=oe(ey.bind(null,e,t,d,s,c,l,y,E,O,V,Y,null,U,P)),Cr(e,d,y,!D);return}}ey(e,t,d,s,c,l,y,E,O)}function G_(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var c=0;c<s.length;c++){var l=s[c],d=l.getSnapshot;l=l.value;try{if(!Zt(d(),l))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cr(e,t,s,c){t&=~Gl,t&=~ua,e.suspendedLanes|=t,e.pingedLanes&=~t,c&&(e.warmLanes|=t),c=e.expirationTimes;for(var l=t;0<l;){var d=31-Yt(l),y=1<<d;c[d]=-1,l&=~y}s!==0&&nh(e,s,t)}function Bo(){return(Le&6)===0?(ai(0),!1):!0}function Xl(){if(Te!==null){if($e===0)var e=Te.return;else e=Te,Yn=ea=null,ll(e),Ga=null,Bs=0,e=Te;for(;e!==null;)Tg(e.alternate,e),e=e.return;Te=null}}function Wa(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,uT(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),rr=0,Xl(),He=e,Te=s=Vn(e.current,null),Ae=t,$e=0,Kt=null,Or=!1,Qa=Ts(e,t),Pl=!1,Ka=Jt=Gl=ua=kr=nt=0,Lt=ni=null,Vl=!1,(t&8)!==0&&(t|=t&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=t;0<c;){var l=31-Yt(c),d=1<<l;t|=e[l],c&=~d}return nr=t,io(),s}function Zg(e,t){Ee=null,I.H=Xs,t===Pa||t===po?(t=up(),$e=3):t===Ju?(t=up(),$e=4):$e=t===kl?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Kt=t,Te===null&&(nt=1,Co(e,on(t,e.current)))}function Xg(){var e=Ft.current;return e===null?!0:(Ae&4194048)===Ae?fn===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?e===fn:!1}function Fg(){var e=I.H;return I.H=Xs,e===null?Xs:e}function Qg(){var e=I.A;return I.A=q_,e}function qo(){nt=4,Or||(Ae&4194048)!==Ae&&Ft.current!==null||(Qa=!0),(kr&134217727)===0&&(ua&134217727)===0||He===null||Cr(He,Ae,Jt,!1)}function Fl(e,t,s){var c=Le;Le|=2;var l=Fg(),d=Qg();(He!==e||Ae!==t)&&($o=null,Wa(e,t)),t=!1;var y=nt;e:do try{if($e!==0&&Te!==null){var E=Te,O=Kt;switch($e){case 8:Xl(),y=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(t=!0);var D=$e;if($e=0,Kt=null,es(e,E,O,D),s&&Qa){y=0;break e}break;default:D=$e,$e=0,Kt=null,es(e,E,O,D)}}V_(),y=nt;break}catch(V){Zg(e,V)}while(!0);return t&&e.shellSuspendCounter++,Yn=ea=null,Le=c,I.H=l,I.A=d,Te===null&&(He=null,Ae=0,io()),y}function V_(){for(;Te!==null;)Kg(Te)}function H_(e,t){var s=Le;Le|=2;var c=Fg(),l=Qg();He!==e||Ae!==t?($o=null,jo=Vt()+500,Wa(e,t)):Qa=Ts(e,t);e:do try{if($e!==0&&Te!==null){t=Te;var d=Kt;t:switch($e){case 1:$e=0,Kt=null,es(e,t,d,1);break;case 2:case 9:if(op(d)){$e=0,Kt=null,Jg(t);break}t=function(){$e!==2&&$e!==9||He!==e||($e=7),Mn(e)},d.then(t,t);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:op(d)?($e=0,Kt=null,Jg(t)):($e=0,Kt=null,es(e,t,d,7));break;case 5:var y=null;switch(Te.tag){case 26:y=Te.memoizedState;case 5:case 27:var E=Te;if(y?Uy(y):E.stateNode.complete){$e=0,Kt=null;var O=E.sibling;if(O!==null)Te=O;else{var D=E.return;D!==null?(Te=D,Po(D)):Te=null}break t}}$e=0,Kt=null,es(e,t,d,5);break;case 6:$e=0,Kt=null,es(e,t,d,6);break;case 8:Xl(),nt=6;break e;default:throw Error(i(462))}}Y_();break}catch(V){Zg(e,V)}while(!0);return Yn=ea=null,I.H=c,I.A=l,Le=s,Te!==null?0:(He=null,Ae=0,io(),nt)}function Y_(){for(;Te!==null&&!pS();)Kg(Te)}function Kg(e){var t=Sg(e.alternate,e,nr);e.memoizedProps=e.pendingProps,t===null?Po(e):Te=t}function Jg(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=pg(s,t,t.pendingProps,t.type,void 0,Ae);break;case 11:t=pg(s,t,t.pendingProps,t.type.render,t.ref,Ae);break;case 5:ll(t);default:Tg(s,t),t=Te=Qh(t,nr),t=Sg(s,t,nr)}e.memoizedProps=e.pendingProps,t===null?Po(e):Te=t}function es(e,t,s,c){Yn=ea=null,ll(t),Ga=null,Bs=0;var l=t.return;try{if(z_(e,l,t,s,Ae)){nt=1,Co(e,on(s,e.current)),Te=null;return}}catch(d){if(l!==null)throw Te=l,d;nt=1,Co(e,on(s,e.current)),Te=null;return}t.flags&32768?(Ne||c===1?e=!0:Qa||(Ae&536870912)!==0?e=!1:(Or=e=!0,(c===2||c===9||c===3||c===6)&&(c=Ft.current,c!==null&&c.tag===13&&(c.flags|=16384))),Wg(t,e)):Po(t)}function Po(e){var t=e;do{if((t.flags&32768)!==0){Wg(t,Or);return}e=t.return;var s=U_(t.alternate,t,nr);if(s!==null){Te=s;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);nt===0&&(nt=5)}function Wg(e,t){do{var s=j_(e.alternate,e);if(s!==null){s.flags&=32767,Te=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Te=e;return}Te=e=s}while(e!==null);nt=6,Te=null}function ey(e,t,s,c,l,d,y,E,O){e.cancelPendingCommit=null;do Go();while(ft!==0);if((Le&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(d=t.lanes|t.childLanes,d|=Uu,OS(e,s,d,y,E,O),e===He&&(Te=He=null,Ae=0),Ja=t,Rr=e,rr=s,Hl=d,Yl=l,Gg=c,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Q_(Vi,function(){return sy(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||c){c=I.T,I.T=null,l=G.p,G.p=2,y=Le,Le|=4;try{$_(e,t,s)}finally{Le=y,G.p=l,I.T=c}}ft=1,ty(),ny(),ry()}}function ty(){if(ft===1){ft=0;var e=Rr,t=Ja,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=I.T,I.T=null;var c=G.p;G.p=2;var l=Le;Le|=4;try{Lg(t,e);var d=cf,y=qh(e.containerInfo),E=d.focusedElem,O=d.selectionRange;if(y!==E&&E&&E.ownerDocument&&Bh(E.ownerDocument.documentElement,E)){if(O!==null&&Iu(E)){var D=O.start,V=O.end;if(V===void 0&&(V=D),"selectionStart"in E)E.selectionStart=D,E.selectionEnd=Math.min(V,E.value.length);else{var Y=E.ownerDocument||document,U=Y&&Y.defaultView||window;if(U.getSelection){var P=U.getSelection(),oe=E.textContent.length,he=Math.min(O.start,oe),Ve=O.end===void 0?he:Math.min(O.end,oe);!P.extend&&he>Ve&&(y=Ve,Ve=he,he=y);var x=$h(E,he),R=$h(E,Ve);if(x&&R&&(P.rangeCount!==1||P.anchorNode!==x.node||P.anchorOffset!==x.offset||P.focusNode!==R.node||P.focusOffset!==R.offset)){var L=Y.createRange();L.setStart(x.node,x.offset),P.removeAllRanges(),he>Ve?(P.addRange(L),P.extend(R.node,R.offset)):(L.setEnd(R.node,R.offset),P.addRange(L))}}}}for(Y=[],P=E;P=P.parentNode;)P.nodeType===1&&Y.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var H=Y[E];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}tc=!!of,cf=of=null}finally{Le=l,G.p=c,I.T=s}}e.current=t,ft=2}}function ny(){if(ft===2){ft=0;var e=Rr,t=Ja,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=I.T,I.T=null;var c=G.p;G.p=2;var l=Le;Le|=4;try{Ng(e,t.alternate,t)}finally{Le=l,G.p=c,I.T=s}}ft=3}}function ry(){if(ft===4||ft===3){ft=0,gS();var e=Rr,t=Ja,s=rr,c=Gg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ft=5:(ft=0,Ja=Rr=null,ay(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Ar=null),mu(s),t=t.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(_s,t,void 0,(t.current.flags&128)===128)}catch{}if(c!==null){t=I.T,l=G.p,G.p=2,I.T=null;try{for(var d=e.onRecoverableError,y=0;y<c.length;y++){var E=c[y];d(E.value,{componentStack:E.stack})}}finally{I.T=t,G.p=l}}(rr&3)!==0&&Go(),Mn(e),l=e.pendingLanes,(s&261930)!==0&&(l&42)!==0?e===Zl?ri++:(ri=0,Zl=e):ri=0,ai(0)}}function ay(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,js(t)))}function Go(){return ty(),ny(),ry(),sy()}function sy(){if(ft!==5)return!1;var e=Rr,t=Hl;Hl=0;var s=mu(rr),c=I.T,l=G.p;try{G.p=32>s?32:s,I.T=null,s=Yl,Yl=null;var d=Rr,y=rr;if(ft=0,Ja=Rr=null,rr=0,(Le&6)!==0)throw Error(i(331));var E=Le;if(Le|=4,Bg(d.current),Ug(d,d.current,y,s),Le=E,ai(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(_s,d)}catch{}return!0}finally{G.p=l,I.T=c,ay(e,t)}}function iy(e,t,s){t=on(s,t),t=Ol(e.stateNode,t,2),e=Sr(e,t,2),e!==null&&(ws(e,2),Mn(e))}function Be(e,t,s){if(e.tag===3)iy(e,e,s);else for(;t!==null;){if(t.tag===3){iy(t,e,s);break}else if(t.tag===1){var c=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ar===null||!Ar.has(c))){e=on(s,e),s=og(2),c=Sr(t,s,2),c!==null&&(cg(s,c,t,e),ws(c,2),Mn(c));break}}t=t.return}}function Ql(e,t,s){var c=e.pingCache;if(c===null){c=e.pingCache=new P_;var l=new Set;c.set(t,l)}else l=c.get(t),l===void 0&&(l=new Set,c.set(t,l));l.has(s)||(Pl=!0,l.add(s),e=Z_.bind(null,e,t,s),t.then(e,e))}function Z_(e,t,s){var c=e.pingCache;c!==null&&c.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,He===e&&(Ae&s)===s&&(nt===4||nt===3&&(Ae&62914560)===Ae&&300>Vt()-Uo?(Le&2)===0&&Wa(e,0):Gl|=s,Ka===Ae&&(Ka=0)),Mn(e)}function oy(e,t){t===0&&(t=th()),e=Kr(e,t),e!==null&&(ws(e,t),Mn(e))}function X_(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),oy(e,s)}function F_(e,t){var s=0;switch(e.tag){case 31:case 13:var c=e.stateNode,l=e.memoizedState;l!==null&&(s=l.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(t),oy(e,s)}function Q_(e,t){return uu(e,t)}var Vo=null,ts=null,Kl=!1,Ho=!1,Jl=!1,Nr=0;function Mn(e){e!==ts&&e.next===null&&(ts===null?Vo=ts=e:ts=ts.next=e),Ho=!0,Kl||(Kl=!0,J_())}function ai(e,t){if(!Jl&&Ho){Jl=!0;do for(var s=!1,c=Vo;c!==null;){if(e!==0){var l=c.pendingLanes;if(l===0)var d=0;else{var y=c.suspendedLanes,E=c.pingedLanes;d=(1<<31-Yt(42|e)+1)-1,d&=l&~(y&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,fy(c,d))}else d=Ae,d=Xi(c,c===He?d:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(d&3)===0||Ts(c,d)||(s=!0,fy(c,d));c=c.next}while(s);Jl=!1}}function K_(){cy()}function cy(){Ho=Kl=!1;var e=0;Nr!==0&&cT()&&(e=Nr);for(var t=Vt(),s=null,c=Vo;c!==null;){var l=c.next,d=uy(c,t);d===0?(c.next=null,s===null?Vo=l:s.next=l,l===null&&(ts=s)):(s=c,(e!==0||(d&3)!==0)&&(Ho=!0)),c=l}ft!==0&&ft!==5||ai(e),Nr!==0&&(Nr=0)}function uy(e,t){for(var s=e.suspendedLanes,c=e.pingedLanes,l=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-Yt(d),E=1<<y,O=l[y];O===-1?((E&s)===0||(E&c)!==0)&&(l[y]=wS(E,t)):O<=t&&(e.expiredLanes|=E),d&=~E}if(t=He,s=Ae,s=Xi(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,s===0||e===t&&($e===2||$e===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&lu(c),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Ts(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(c!==null&&lu(c),mu(s)){case 2:case 8:s=Wm;break;case 32:s=Vi;break;case 268435456:s=eh;break;default:s=Vi}return c=ly.bind(null,e),s=uu(s,c),e.callbackPriority=t,e.callbackNode=s,t}return c!==null&&c!==null&&lu(c),e.callbackPriority=2,e.callbackNode=null,2}function ly(e,t){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Go()&&e.callbackNode!==s)return null;var c=Ae;return c=Xi(e,e===He?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Hg(e,c,t),uy(e,Vt()),e.callbackNode!=null&&e.callbackNode===s?ly.bind(null,e):null)}function fy(e,t){if(Go())return null;Hg(e,t,!0)}function J_(){lT(function(){(Le&6)!==0?uu(Jm,K_):cy()})}function Wl(){if(Nr===0){var e=Ba;e===0&&(e=Hi,Hi<<=1,(Hi&261888)===0&&(Hi=256)),Nr=e}return Nr}function dy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ji(""+e)}function my(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function W_(e,t,s,c,l){if(t==="submit"&&s&&s.stateNode===l){var d=dy((l[Nt]||null).action),y=c.submitter;y&&(t=(t=y[Nt]||null)?dy(t.formAction):y.getAttribute("formAction"),t!==null&&(d=t,y=null));var E=new no("action","action",null,c,l);e.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Nr!==0){var O=y?my(l,y):new FormData(l);bl(s,{pending:!0,data:O,method:l.method,action:d},null,O)}}else typeof d=="function"&&(E.preventDefault(),O=y?my(l,y):new FormData(l),bl(s,{pending:!0,data:O,method:l.method,action:d},d,O))},currentTarget:l}]})}}for(var ef=0;ef<Du.length;ef++){var tf=Du[ef],eT=tf.toLowerCase(),tT=tf[0].toUpperCase()+tf.slice(1);vn(eT,"on"+tT)}vn(Vh,"onAnimationEnd"),vn(Hh,"onAnimationIteration"),vn(Yh,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(y_,"onTransitionRun"),vn(v_,"onTransitionStart"),vn(b_,"onTransitionCancel"),vn(Zh,"onTransitionEnd"),ka("onMouseEnter",["mouseout","mouseover"]),ka("onMouseLeave",["mouseout","mouseover"]),ka("onPointerEnter",["pointerout","pointerover"]),ka("onPointerLeave",["pointerout","pointerover"]),Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(si));function hy(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var c=e[s],l=c.event;c=c.listeners;e:{var d=void 0;if(t)for(var y=c.length-1;0<=y;y--){var E=c[y],O=E.instance,D=E.currentTarget;if(E=E.listener,O!==d&&l.isPropagationStopped())break e;d=E,l.currentTarget=D;try{d(l)}catch(V){so(V)}l.currentTarget=null,d=O}else for(y=0;y<c.length;y++){if(E=c[y],O=E.instance,D=E.currentTarget,E=E.listener,O!==d&&l.isPropagationStopped())break e;d=E,l.currentTarget=D;try{d(l)}catch(V){so(V)}l.currentTarget=null,d=O}}}}function we(e,t){var s=t[hu];s===void 0&&(s=t[hu]=new Set);var c=e+"__bubble";s.has(c)||(py(t,e,2,!1),s.add(c))}function nf(e,t,s){var c=0;t&&(c|=4),py(s,e,c,t)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function rf(e){if(!e[Yo]){e[Yo]=!0,ch.forEach(function(s){s!=="selectionchange"&&(nT.has(s)||nf(s,!1,e),nf(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yo]||(t[Yo]=!0,nf("selectionchange",!1,t))}}function py(e,t,s,c){switch(Vy(t)){case 2:var l=NT;break;case 8:l=MT;break;default:l=bf}s=l.bind(null,t,s,e),l=void 0,!Tu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),c?l!==void 0?e.addEventListener(t,s,{capture:!0,passive:l}):e.addEventListener(t,s,!0):l!==void 0?e.addEventListener(t,s,{passive:l}):e.addEventListener(t,s,!1)}function af(e,t,s,c,l){var d=c;if((t&1)===0&&(t&2)===0&&c!==null)e:for(;;){if(c===null)return;var y=c.tag;if(y===3||y===4){var E=c.stateNode.containerInfo;if(E===l)break;if(y===4)for(y=c.return;y!==null;){var O=y.tag;if((O===3||O===4)&&y.stateNode.containerInfo===l)return;y=y.return}for(;E!==null;){if(y=Ta(E),y===null)return;if(O=y.tag,O===5||O===6||O===26||O===27){c=d=y;continue e}E=E.parentNode}}c=c.return}Eh(function(){var D=d,V=Su(s),Y=[];e:{var U=Xh.get(e);if(U!==void 0){var P=no,oe=e;switch(e){case"keypress":if(eo(s)===0)break e;case"keydown":case"keyup":P=FS;break;case"focusin":oe="focus",P=Au;break;case"focusout":oe="blur",P=Au;break;case"beforeblur":case"afterblur":P=Au;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=US;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=JS;break;case Vh:case Hh:case Yh:P=BS;break;case Zh:P=e_;break;case"scroll":case"scrollend":P=LS;break;case"wheel":P=n_;break;case"copy":case"cut":case"paste":P=PS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Oh;break;case"toggle":case"beforetoggle":P=a_}var he=(t&4)!==0,Ve=!he&&(e==="scroll"||e==="scrollend"),x=he?U!==null?U+"Capture":null:U;he=[];for(var R=D,L;R!==null;){var H=R;if(L=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||L===null||x===null||(H=As(R,x),H!=null&&he.push(ii(R,H,L))),Ve)break;R=R.return}0<he.length&&(U=new P(U,oe,null,s,V),Y.push({event:U,listeners:he}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",U&&s!==Eu&&(oe=s.relatedTarget||s.fromElement)&&(Ta(oe)||oe[_a]))break e;if((P||U)&&(U=V.window===V?V:(U=V.ownerDocument)?U.defaultView||U.parentWindow:window,P?(oe=s.relatedTarget||s.toElement,P=D,oe=oe?Ta(oe):null,oe!==null&&(Ve=u(oe),he=oe.tag,oe!==Ve||he!==5&&he!==27&&he!==6)&&(oe=null)):(P=null,oe=D),P!==oe)){if(he=Th,H="onMouseLeave",x="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(he=Oh,H="onPointerLeave",x="onPointerEnter",R="pointer"),Ve=P==null?U:ks(P),L=oe==null?U:ks(oe),U=new he(H,R+"leave",P,s,V),U.target=Ve,U.relatedTarget=L,H=null,Ta(V)===D&&(he=new he(x,R+"enter",oe,s,V),he.target=L,he.relatedTarget=Ve,H=he),Ve=H,P&&oe)t:{for(he=rT,x=P,R=oe,L=0,H=x;H;H=he(H))L++;H=0;for(var de=R;de;de=he(de))H++;for(;0<L-H;)x=he(x),L--;for(;0<H-L;)R=he(R),H--;for(;L--;){if(x===R||R!==null&&x===R.alternate){he=x;break t}x=he(x),R=he(R)}he=null}else he=null;P!==null&&gy(Y,U,P,he,!1),oe!==null&&Ve!==null&&gy(Y,Ve,oe,he,!0)}}e:{if(U=D?ks(D):window,P=U.nodeName&&U.nodeName.toLowerCase(),P==="select"||P==="input"&&U.type==="file")var xe=xh;else if(Mh(U))if(zh)xe=h_;else{xe=d_;var le=f_}else P=U.nodeName,!P||P.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?D&&bu(D.elementType)&&(xe=xh):xe=m_;if(xe&&(xe=xe(e,D))){Ih(Y,xe,s,V);break e}le&&le(e,U,D),e==="focusout"&&D&&U.type==="number"&&D.memoizedProps.value!=null&&vu(U,"number",U.value)}switch(le=D?ks(D):window,e){case"focusin":(Mh(le)||le.contentEditable==="true")&&(Ia=le,xu=D,Ls=null);break;case"focusout":Ls=xu=Ia=null;break;case"mousedown":zu=!0;break;case"contextmenu":case"mouseup":case"dragend":zu=!1,Ph(Y,s,V);break;case"selectionchange":if(g_)break;case"keydown":case"keyup":Ph(Y,s,V)}var Se;if(Cu)e:{switch(e){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ma?Ch(e,s)&&(Re="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Re="onCompositionStart");Re&&(kh&&s.locale!=="ko"&&(Ma||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ma&&(Se=Sh()):(hr=V,wu="value"in hr?hr.value:hr.textContent,Ma=!0)),le=Zo(D,Re),0<le.length&&(Re=new wh(Re,e,null,s,V),Y.push({event:Re,listeners:le}),Se?Re.data=Se:(Se=Nh(s),Se!==null&&(Re.data=Se)))),(Se=i_?o_(e,s):c_(e,s))&&(Re=Zo(D,"onBeforeInput"),0<Re.length&&(le=new wh("onBeforeInput","beforeinput",null,s,V),Y.push({event:le,listeners:Re}),le.data=Se)),W_(Y,e,D,s,V)}hy(Y,t)})}function ii(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Zo(e,t){for(var s=t+"Capture",c=[];e!==null;){var l=e,d=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||d===null||(l=As(e,s),l!=null&&c.unshift(ii(e,l,d)),l=As(e,t),l!=null&&c.push(ii(e,l,d))),e.tag===3)return c;e=e.return}return[]}function rT(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gy(e,t,s,c,l){for(var d=t._reactName,y=[];s!==null&&s!==c;){var E=s,O=E.alternate,D=E.stateNode;if(E=E.tag,O!==null&&O===c)break;E!==5&&E!==26&&E!==27||D===null||(O=D,l?(D=As(s,d),D!=null&&y.unshift(ii(s,D,O))):l||(D=As(s,d),D!=null&&y.push(ii(s,D,O)))),s=s.return}y.length!==0&&e.push({event:t,listeners:y})}var aT=/\r\n?/g,sT=/\u0000|\uFFFD/g;function yy(e){return(typeof e=="string"?e:""+e).replace(aT,`
`).replace(sT,"")}function vy(e,t){return t=yy(t),yy(e)===t}function Ge(e,t,s,c,l,d){switch(s){case"children":typeof c=="string"?t==="body"||t==="textarea"&&c===""||Ra(e,c):(typeof c=="number"||typeof c=="bigint")&&t!=="body"&&Ra(e,""+c);break;case"className":Qi(e,"class",c);break;case"tabIndex":Qi(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Qi(e,s,c);break;case"style":vh(e,c,d);break;case"data":if(t!=="object"){Qi(e,"data",c);break}case"src":case"href":if(c===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(s);break}c=Ji(""+c),e.setAttribute(s,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(t!=="input"&&Ge(e,t,"name",l.name,l,null),Ge(e,t,"formEncType",l.formEncType,l,null),Ge(e,t,"formMethod",l.formMethod,l,null),Ge(e,t,"formTarget",l.formTarget,l,null)):(Ge(e,t,"encType",l.encType,l,null),Ge(e,t,"method",l.method,l,null),Ge(e,t,"target",l.target,l,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(s);break}c=Ji(""+c),e.setAttribute(s,c);break;case"onClick":c!=null&&(e.onclick=Pn);break;case"onScroll":c!=null&&we("scroll",e);break;case"onScrollEnd":c!=null&&we("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(s=c.__html,s!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}s=Ji(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,""+c):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":c===!0?e.setAttribute(s,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,c):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(s,c):e.removeAttribute(s);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(s):e.setAttribute(s,c);break;case"popover":we("beforetoggle",e),we("toggle",e),Fi(e,"popover",c);break;case"xlinkActuate":qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Fi(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=xS.get(s)||s,Fi(e,s,c))}}function sf(e,t,s,c,l,d){switch(s){case"style":vh(e,c,d);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(s=c.__html,s!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"children":typeof c=="string"?Ra(e,c):(typeof c=="number"||typeof c=="bigint")&&Ra(e,""+c);break;case"onScroll":c!=null&&we("scroll",e);break;case"onScrollEnd":c!=null&&we("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Pn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uh.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(l=s.endsWith("Capture"),t=s.slice(2,l?s.length-7:void 0),d=e[Nt]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(t,d,l),typeof c=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,c,l);break e}s in e?e[s]=c:c===!0?e.setAttribute(s,""):Fi(e,s,c)}}}function vt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",e),we("load",e);var c=!1,l=!1,d;for(d in s)if(s.hasOwnProperty(d)){var y=s[d];if(y!=null)switch(d){case"src":c=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ge(e,t,d,y,s,null)}}l&&Ge(e,t,"srcSet",s.srcSet,s,null),c&&Ge(e,t,"src",s.src,s,null);return;case"input":we("invalid",e);var E=d=y=l=null,O=null,D=null;for(c in s)if(s.hasOwnProperty(c)){var V=s[c];if(V!=null)switch(c){case"name":l=V;break;case"type":y=V;break;case"checked":O=V;break;case"defaultChecked":D=V;break;case"value":d=V;break;case"defaultValue":E=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,t));break;default:Ge(e,t,c,V,s,null)}}hh(e,d,E,O,D,y,l,!1);return;case"select":we("invalid",e),c=y=d=null;for(l in s)if(s.hasOwnProperty(l)&&(E=s[l],E!=null))switch(l){case"value":d=E;break;case"defaultValue":y=E;break;case"multiple":c=E;default:Ge(e,t,l,E,s,null)}t=d,s=y,e.multiple=!!c,t!=null?Aa(e,!!c,t,!1):s!=null&&Aa(e,!!c,s,!0);return;case"textarea":we("invalid",e),d=l=c=null;for(y in s)if(s.hasOwnProperty(y)&&(E=s[y],E!=null))switch(y){case"value":c=E;break;case"defaultValue":l=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Ge(e,t,y,E,s,null)}gh(e,c,l,d);return;case"option":for(O in s)if(s.hasOwnProperty(O)&&(c=s[O],c!=null))switch(O){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ge(e,t,O,c,s,null)}return;case"dialog":we("beforetoggle",e),we("toggle",e),we("cancel",e),we("close",e);break;case"iframe":case"object":we("load",e);break;case"video":case"audio":for(c=0;c<si.length;c++)we(si[c],e);break;case"image":we("error",e),we("load",e);break;case"details":we("toggle",e);break;case"embed":case"source":case"link":we("error",e),we("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in s)if(s.hasOwnProperty(D)&&(c=s[D],c!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ge(e,t,D,c,s,null)}return;default:if(bu(t)){for(V in s)s.hasOwnProperty(V)&&(c=s[V],c!==void 0&&sf(e,t,V,c,s,void 0));return}}for(E in s)s.hasOwnProperty(E)&&(c=s[E],c!=null&&Ge(e,t,E,c,s,null))}function iT(e,t,s,c){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,d=null,y=null,E=null,O=null,D=null,V=null;for(P in s){var Y=s[P];if(s.hasOwnProperty(P)&&Y!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":O=Y;default:c.hasOwnProperty(P)||Ge(e,t,P,null,c,Y)}}for(var U in c){var P=c[U];if(Y=s[U],c.hasOwnProperty(U)&&(P!=null||Y!=null))switch(U){case"type":d=P;break;case"name":l=P;break;case"checked":D=P;break;case"defaultChecked":V=P;break;case"value":y=P;break;case"defaultValue":E=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,t));break;default:P!==Y&&Ge(e,t,U,P,c,Y)}}yu(e,y,E,O,D,V,d,l);return;case"select":P=y=E=U=null;for(d in s)if(O=s[d],s.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":P=O;default:c.hasOwnProperty(d)||Ge(e,t,d,null,c,O)}for(l in c)if(d=c[l],O=s[l],c.hasOwnProperty(l)&&(d!=null||O!=null))switch(l){case"value":U=d;break;case"defaultValue":E=d;break;case"multiple":y=d;default:d!==O&&Ge(e,t,l,d,c,O)}t=E,s=y,c=P,U!=null?Aa(e,!!s,U,!1):!!c!=!!s&&(t!=null?Aa(e,!!s,t,!0):Aa(e,!!s,s?[]:"",!1));return;case"textarea":P=U=null;for(E in s)if(l=s[E],s.hasOwnProperty(E)&&l!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ge(e,t,E,null,c,l)}for(y in c)if(l=c[y],d=s[y],c.hasOwnProperty(y)&&(l!=null||d!=null))switch(y){case"value":U=l;break;case"defaultValue":P=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(i(91));break;default:l!==d&&Ge(e,t,y,l,c,d)}ph(e,U,P);return;case"option":for(var oe in s)if(U=s[oe],s.hasOwnProperty(oe)&&U!=null&&!c.hasOwnProperty(oe))switch(oe){case"selected":e.selected=!1;break;default:Ge(e,t,oe,null,c,U)}for(O in c)if(U=c[O],P=s[O],c.hasOwnProperty(O)&&U!==P&&(U!=null||P!=null))switch(O){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Ge(e,t,O,U,c,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in s)U=s[he],s.hasOwnProperty(he)&&U!=null&&!c.hasOwnProperty(he)&&Ge(e,t,he,null,c,U);for(D in c)if(U=c[D],P=s[D],c.hasOwnProperty(D)&&U!==P&&(U!=null||P!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(137,t));break;default:Ge(e,t,D,U,c,P)}return;default:if(bu(t)){for(var Ve in s)U=s[Ve],s.hasOwnProperty(Ve)&&U!==void 0&&!c.hasOwnProperty(Ve)&&sf(e,t,Ve,void 0,c,U);for(V in c)U=c[V],P=s[V],!c.hasOwnProperty(V)||U===P||U===void 0&&P===void 0||sf(e,t,V,U,c,P);return}}for(var x in s)U=s[x],s.hasOwnProperty(x)&&U!=null&&!c.hasOwnProperty(x)&&Ge(e,t,x,null,c,U);for(Y in c)U=c[Y],P=s[Y],!c.hasOwnProperty(Y)||U===P||U==null&&P==null||Ge(e,t,Y,U,c,P)}function by(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oT(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),c=0;c<s.length;c++){var l=s[c],d=l.transferSize,y=l.initiatorType,E=l.duration;if(d&&E&&by(y)){for(y=0,E=l.responseEnd,c+=1;c<s.length;c++){var O=s[c],D=O.startTime;if(D>E)break;var V=O.transferSize,Y=O.initiatorType;V&&by(Y)&&(O=O.responseEnd,y+=V*(O<E?1:(E-D)/(O-D)))}if(--c,t+=8*(d+y)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var of=null,cf=null;function Xo(e){return e.nodeType===9?e:e.ownerDocument}function Ey(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sy(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function uf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lf=null;function cT(){var e=window.event;return e&&e.type==="popstate"?e===lf?!1:(lf=e,!0):(lf=null,!1)}var _y=typeof setTimeout=="function"?setTimeout:void 0,uT=typeof clearTimeout=="function"?clearTimeout:void 0,Ty=typeof Promise=="function"?Promise:void 0,lT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ty<"u"?function(e){return Ty.resolve(null).then(e).catch(fT)}:_y;function fT(e){setTimeout(function(){throw e})}function Mr(e){return e==="head"}function wy(e,t){var s=t,c=0;do{var l=s.nextSibling;if(e.removeChild(s),l&&l.nodeType===8)if(s=l.data,s==="/$"||s==="/&"){if(c===0){e.removeChild(l),ss(t);return}c--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")c++;else if(s==="html")oi(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,oi(s);for(var d=s.firstChild;d;){var y=d.nextSibling,E=d.nodeName;d[Os]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=y}}else s==="body"&&oi(e.ownerDocument.body);s=l}while(s);ss(t)}function Oy(e,t){var s=e;e=0;do{var c=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=c}while(s)}function ff(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":ff(s),pu(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function dT(e,t,s,c){for(;e.nodeType===1;){var l=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Os])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=dn(e.nextSibling),e===null)break}return null}function mT(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=dn(e.nextSibling),e===null))return null;return e}function ky(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=dn(e.nextSibling),e===null))return null;return e}function df(e){return e.data==="$?"||e.data==="$~"}function mf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function hT(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var c=function(){t(),s.removeEventListener("DOMContentLoaded",c)};s.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var hf=null;function Ay(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return dn(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Ry(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function Cy(e,t,s){switch(t=Xo(s),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function oi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);pu(e)}var mn=new Map,Ny=new Set;function Fo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ar=G.d;G.d={f:pT,r:gT,D:yT,C:vT,L:bT,m:ET,X:_T,S:ST,M:TT};function pT(){var e=ar.f(),t=Bo();return e||t}function gT(e){var t=wa(e);t!==null&&t.tag===5&&t.type==="form"?Zp(t):ar.r(e)}var ns=typeof document>"u"?null:document;function My(e,t,s){var c=ns;if(c&&typeof t=="string"&&t){var l=an(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof s=="string"&&(l+='[crossorigin="'+s+'"]'),Ny.has(l)||(Ny.add(l),e={rel:e,crossOrigin:s,href:t},c.querySelector(l)===null&&(t=c.createElement("link"),vt(t,"link",e),dt(t),c.head.appendChild(t)))}}function yT(e){ar.D(e),My("dns-prefetch",e,null)}function vT(e,t){ar.C(e,t),My("preconnect",e,t)}function bT(e,t,s){ar.L(e,t,s);var c=ns;if(c&&e&&t){var l='link[rel="preload"][as="'+an(t)+'"]';t==="image"&&s&&s.imageSrcSet?(l+='[imagesrcset="'+an(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(l+='[imagesizes="'+an(s.imageSizes)+'"]')):l+='[href="'+an(e)+'"]';var d=l;switch(t){case"style":d=rs(e);break;case"script":d=as(e)}mn.has(d)||(e=v({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),mn.set(d,e),c.querySelector(l)!==null||t==="style"&&c.querySelector(ci(d))||t==="script"&&c.querySelector(ui(d))||(t=c.createElement("link"),vt(t,"link",e),dt(t),c.head.appendChild(t)))}}function ET(e,t){ar.m(e,t);var s=ns;if(s&&e){var c=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+an(c)+'"][href="'+an(e)+'"]',d=l;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=as(e)}if(!mn.has(d)&&(e=v({rel:"modulepreload",href:e},t),mn.set(d,e),s.querySelector(l)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ui(d)))return}c=s.createElement("link"),vt(c,"link",e),dt(c),s.head.appendChild(c)}}}function ST(e,t,s){ar.S(e,t,s);var c=ns;if(c&&e){var l=Oa(c).hoistableStyles,d=rs(e);t=t||"default";var y=l.get(d);if(!y){var E={loading:0,preload:null};if(y=c.querySelector(ci(d)))E.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},s),(s=mn.get(d))&&pf(e,s);var O=y=c.createElement("link");dt(O),vt(O,"link",e),O._p=new Promise(function(D,V){O.onload=D,O.onerror=V}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Qo(y,t,c)}y={type:"stylesheet",instance:y,count:1,state:E},l.set(d,y)}}}function _T(e,t){ar.X(e,t);var s=ns;if(s&&e){var c=Oa(s).hoistableScripts,l=as(e),d=c.get(l);d||(d=s.querySelector(ui(l)),d||(e=v({src:e,async:!0},t),(t=mn.get(l))&&gf(e,t),d=s.createElement("script"),dt(d),vt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},c.set(l,d))}}function TT(e,t){ar.M(e,t);var s=ns;if(s&&e){var c=Oa(s).hoistableScripts,l=as(e),d=c.get(l);d||(d=s.querySelector(ui(l)),d||(e=v({src:e,async:!0,type:"module"},t),(t=mn.get(l))&&gf(e,t),d=s.createElement("script"),dt(d),vt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},c.set(l,d))}}function Iy(e,t,s,c){var l=(l=ve.current)?Fo(l):null;if(!l)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=rs(s.href),s=Oa(l).hoistableStyles,c=s.get(t),c||(c={type:"style",instance:null,count:0,state:null},s.set(t,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=rs(s.href);var d=Oa(l).hoistableStyles,y=d.get(e);if(y||(l=l.ownerDocument||l,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=l.querySelector(ci(e)))&&!d._p&&(y.instance=d,y.state.loading=5),mn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},mn.set(e,s),d||wT(l,e,s,y.state))),t&&c===null)throw Error(i(528,""));return y}if(t&&c!==null)throw Error(i(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=as(s),s=Oa(l).hoistableScripts,c=s.get(t),c||(c={type:"script",instance:null,count:0,state:null},s.set(t,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function rs(e){return'href="'+an(e)+'"'}function ci(e){return'link[rel="stylesheet"]['+e+"]"}function xy(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function wT(e,t,s,c){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?c.loading=1:(t=e.createElement("link"),c.preload=t,t.addEventListener("load",function(){return c.loading|=1}),t.addEventListener("error",function(){return c.loading|=2}),vt(t,"link",s),dt(t),e.head.appendChild(t))}function as(e){return'[src="'+an(e)+'"]'}function ui(e){return"script[async]"+e}function zy(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var c=e.querySelector('style[data-href~="'+an(s.href)+'"]');if(c)return t.instance=c,dt(c),c;var l=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),dt(c),vt(c,"style",l),Qo(c,s.precedence,e),t.instance=c;case"stylesheet":l=rs(s.href);var d=e.querySelector(ci(l));if(d)return t.state.loading|=4,t.instance=d,dt(d),d;c=xy(s),(l=mn.get(l))&&pf(c,l),d=(e.ownerDocument||e).createElement("link"),dt(d);var y=d;return y._p=new Promise(function(E,O){y.onload=E,y.onerror=O}),vt(d,"link",c),t.state.loading|=4,Qo(d,s.precedence,e),t.instance=d;case"script":return d=as(s.src),(l=e.querySelector(ui(d)))?(t.instance=l,dt(l),l):(c=s,(l=mn.get(d))&&(c=v({},s),gf(c,l)),e=e.ownerDocument||e,l=e.createElement("script"),dt(l),vt(l,"link",c),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(c=t.instance,t.state.loading|=4,Qo(c,s.precedence,e));return t.instance}function Qo(e,t,s){for(var c=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=c.length?c[c.length-1]:null,d=l,y=0;y<c.length;y++){var E=c[y];if(E.dataset.precedence===t)d=E;else if(d!==l)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function pf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function gf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ko=null;function Ly(e,t,s){if(Ko===null){var c=new Map,l=Ko=new Map;l.set(s,c)}else l=Ko,c=l.get(s),c||(c=new Map,l.set(s,c));if(c.has(e))return c;for(c.set(e,null),s=s.getElementsByTagName(e),l=0;l<s.length;l++){var d=s[l];if(!(d[Os]||d[ht]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(t)||"";y=e+y;var E=c.get(y);E?E.push(d):c.set(y,[d])}}return c}function Dy(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function OT(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Uy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function kT(e,t,s,c){if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var l=rs(c.href),d=t.querySelector(ci(l));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Jo.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=d,dt(d);return}d=t.ownerDocument||t,c=xy(c),(l=mn.get(l))&&pf(c,l),d=d.createElement("link"),dt(d);var y=d;y._p=new Promise(function(E,O){y.onload=E,y.onerror=O}),vt(d,"link",c),s.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Jo.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var yf=0;function AT(e,t){return e.stylesheets&&e.count===0&&ec(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var c=setTimeout(function(){if(e.stylesheets&&ec(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&yf===0&&(yf=62500*oT());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ec(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>yf?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(l)}}:null}function Jo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ec(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wo=null;function ec(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wo=new Map,t.forEach(RT,e),Wo=null,Jo.call(e))}function RT(e,t){if(!(t.state.loading&4)){var s=Wo.get(e);if(s)var c=s.get(null);else{s=new Map,Wo.set(e,s);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<l.length;d++){var y=l[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(s.set(y.dataset.precedence,y),c=y)}c&&s.set(null,c)}l=t.instance,y=l.getAttribute("data-precedence"),d=s.get(y)||c,d===c&&s.set(null,l),s.set(y,l),this.count++,c=Jo.bind(this),l.addEventListener("load",c),l.addEventListener("error",c),d?d.parentNode.insertBefore(l,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var li={$$typeof:N,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function CT(e,t,s,c,l,d,y,E,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.hiddenUpdates=fu(null),this.identifierPrefix=c,this.onUncaughtError=l,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function jy(e,t,s,c,l,d,y,E,O,D,V,Y){return e=new CT(e,t,s,y,O,D,V,Y,E),t=1,d===!0&&(t|=24),d=Xt(3,null,null,t),e.current=d,d.stateNode=e,t=Fu(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:c,isDehydrated:s,cache:t},Wu(d),e}function $y(e){return e?(e=La,e):La}function By(e,t,s,c,l,d){l=$y(l),c.context===null?c.context=l:c.pendingContext=l,c=Er(t),c.payload={element:s},d=d===void 0?null:d,d!==null&&(c.callback=d),s=Sr(e,c,t),s!==null&&(Dt(s,e,t),Ps(s,e,t))}function qy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function vf(e,t){qy(e,t),(e=e.alternate)&&qy(e,t)}function Py(e){if(e.tag===13||e.tag===31){var t=Kr(e,67108864);t!==null&&Dt(t,e,67108864),vf(e,67108864)}}function Gy(e){if(e.tag===13||e.tag===31){var t=Wt();t=du(t);var s=Kr(e,t);s!==null&&Dt(s,e,t),vf(e,t)}}var tc=!0;function NT(e,t,s,c){var l=I.T;I.T=null;var d=G.p;try{G.p=2,bf(e,t,s,c)}finally{G.p=d,I.T=l}}function MT(e,t,s,c){var l=I.T;I.T=null;var d=G.p;try{G.p=8,bf(e,t,s,c)}finally{G.p=d,I.T=l}}function bf(e,t,s,c){if(tc){var l=Ef(c);if(l===null)af(e,t,c,nc,s),Hy(e,c);else if(xT(l,e,t,s,c))c.stopPropagation();else if(Hy(e,c),t&4&&-1<IT.indexOf(e)){for(;l!==null;){var d=wa(l);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=Yr(d.pendingLanes);if(y!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;y;){var O=1<<31-Yt(y);E.entanglements[1]|=O,y&=~O}Mn(d),(Le&6)===0&&(jo=Vt()+500,ai(0))}}break;case 31:case 13:E=Kr(d,2),E!==null&&Dt(E,d,2),Bo(),vf(d,2)}if(d=Ef(c),d===null&&af(e,t,c,nc,s),d===l)break;l=d}l!==null&&c.stopPropagation()}else af(e,t,c,null,s)}}function Ef(e){return e=Su(e),Sf(e)}var nc=null;function Sf(e){if(nc=null,e=Ta(e),e!==null){var t=u(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return nc=e,null}function Vy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yS()){case Jm:return 2;case Wm:return 8;case Vi:case vS:return 32;case eh:return 268435456;default:return 32}default:return 32}}var _f=!1,Ir=null,xr=null,zr=null,fi=new Map,di=new Map,Lr=[],IT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hy(e,t){switch(e){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":fi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(t.pointerId)}}function mi(e,t,s,c,l,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:s,eventSystemFlags:c,nativeEvent:d,targetContainers:[l]},t!==null&&(t=wa(t),t!==null&&Py(t)),e):(e.eventSystemFlags|=c,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function xT(e,t,s,c,l){switch(t){case"focusin":return Ir=mi(Ir,e,t,s,c,l),!0;case"dragenter":return xr=mi(xr,e,t,s,c,l),!0;case"mouseover":return zr=mi(zr,e,t,s,c,l),!0;case"pointerover":var d=l.pointerId;return fi.set(d,mi(fi.get(d)||null,e,t,s,c,l)),!0;case"gotpointercapture":return d=l.pointerId,di.set(d,mi(di.get(d)||null,e,t,s,c,l)),!0}return!1}function Yy(e){var t=Ta(e.target);if(t!==null){var s=u(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,ih(e.priority,function(){Gy(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,ih(e.priority,function(){Gy(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Ef(e.nativeEvent);if(s===null){s=e.nativeEvent;var c=new s.constructor(s.type,s);Eu=c,s.target.dispatchEvent(c),Eu=null}else return t=wa(s),t!==null&&Py(t),e.blockedOn=s,!1;t.shift()}return!0}function Zy(e,t,s){rc(e)&&s.delete(t)}function zT(){_f=!1,Ir!==null&&rc(Ir)&&(Ir=null),xr!==null&&rc(xr)&&(xr=null),zr!==null&&rc(zr)&&(zr=null),fi.forEach(Zy),di.forEach(Zy)}function ac(e,t){e.blockedOn===t&&(e.blockedOn=null,_f||(_f=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zT)))}var sc=null;function Xy(e){sc!==e&&(sc=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sc===e&&(sc=null);for(var t=0;t<e.length;t+=3){var s=e[t],c=e[t+1],l=e[t+2];if(typeof c!="function"){if(Sf(c||s)===null)continue;break}var d=wa(s);d!==null&&(e.splice(t,3),t-=3,bl(d,{pending:!0,data:l,method:s.method,action:c},c,l))}}))}function ss(e){function t(O){return ac(O,e)}Ir!==null&&ac(Ir,e),xr!==null&&ac(xr,e),zr!==null&&ac(zr,e),fi.forEach(t),di.forEach(t);for(var s=0;s<Lr.length;s++){var c=Lr[s];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Lr.length&&(s=Lr[0],s.blockedOn===null);)Yy(s),s.blockedOn===null&&Lr.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(c=0;c<s.length;c+=3){var l=s[c],d=s[c+1],y=l[Nt]||null;if(typeof d=="function")y||Xy(s);else if(y){var E=null;if(d&&d.hasAttribute("formAction")){if(l=d,y=d[Nt]||null)E=y.formAction;else if(Sf(l)!==null)continue}else E=y.action;typeof E=="function"?s[c+1]=E:(s.splice(c,3),c-=3),Xy(s)}}}function Fy(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return l=y})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),c||setTimeout(s,20)}function s(){if(!c&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function Tf(e){this._internalRoot=e}ic.prototype.render=Tf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var s=t.current,c=Wt();By(s,c,e,t,null,null)},ic.prototype.unmount=Tf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;By(e.current,2,null,e,null,null),Bo(),t[_a]=null}};function ic(e){this._internalRoot=e}ic.prototype.unstable_scheduleHydration=function(e){if(e){var t=sh();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Lr.length&&t!==0&&t<Lr[s].priority;s++);Lr.splice(s,0,e),s===0&&Yy(e)}};var Qy=r.version;if(Qy!=="19.2.0")throw Error(i(527,Qy,"19.2.0"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var LT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{_s=oc.inject(LT),Ht=oc}catch{}}return pi.createRoot=function(e,t){if(!o(e))throw Error(i(299));var s=!1,c="",l=rg,d=ag,y=sg;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(c=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=jy(e,1,!1,null,null,s,c,null,l,d,y,Fy),e[_a]=t.current,rf(e),new Tf(t)},pi.hydrateRoot=function(e,t,s){if(!o(e))throw Error(i(299));var c=!1,l="",d=rg,y=ag,E=sg,O=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.formState!==void 0&&(O=s.formState)),t=jy(e,1,!0,t,s??null,c,l,O,d,y,E,Fy),t.context=$y(null),s=t.current,c=Wt(),c=du(c),l=Er(c),l.callback=null,Sr(s,l,c),s=c,t.current.lanes=s,ws(t,s),Mn(t),e[_a]=t.current,rf(e),new ic(t)},pi.version="19.2.0",pi}var iv;function YT(){if(iv)return kf.exports;iv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),kf.exports=HT(),kf.exports}var ZT=YT();function ms(){return globalThis.process?.env?.NODE_ENV!=="production"}function XT(n){const r={type:n.type,tick:n.tick,issuedAt:n.issuedAt,payload:n.payload};return ms()?KT(r):r}function FT(n){const a=[...n.entries].sort((o,u)=>o.channel!==u.channel?o.channel-u.channel:o.type!==u.type?o.type<u.type?-1:1:o.version-u.version).map(o=>`${o.channel}:${o.type}:${o.version}`).join("|");return`${QT(a).toString(16).padStart(8,"0")}`}function QT(n){let r=2166136261;for(let a=0;a<n.length;a+=1)r^=n.charCodeAt(a),r=Math.imul(r,16777619),r>>>=0;return r}function KT(n){return typeof n.payload=="object"&&n.payload!==null&&Rc(n.payload),Object.freeze(n)}function Rc(n){if(typeof n!="object"||n===null||Object.isFrozen(n))return;if(Object.freeze(n),Array.isArray(n)){for(const i of n)Rc(i);return}const r=Object.getOwnPropertyNames(n);for(const i of r)Rc(n[i]);const a=Object.getOwnPropertySymbols(n);for(const i of a)Rc(n[i])}const JT={recordError(){},recordWarning(){},recordProgress(){},recordCounters(){},recordTick(){}};let gi=JT;const J={recordError(n,r){yi(gi,"recordError",n,r)},recordWarning(n,r){yi(gi,"recordWarning",n,r)},recordProgress(n,r){yi(gi,"recordProgress",n,r)},recordCounters(n,r){yi(gi,"recordCounters",n,r)},recordTick(){yi(gi,"recordTick")}};function yi(n,r,...a){try{n[r].call(n,...a)}catch(i){console.error("[telemetry] invocation failed",i)}}const WT=1e3,e1=2;class t1{constructor(r){Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.channels=r.map(a=>a?{config:a,timestamps:[],startIndex:0,nextLogTick:0,currentCooldown:a.cooldownTicks,cooldownTicksRemaining:0,breaches:0,eventsPerSecond:0}:null)}beginTick(r){for(const a of this.channels)a&&(r>a.nextLogTick&&(a.currentCooldown=a.config.cooldownTicks),a.cooldownTicksRemaining=Math.max(0,a.nextLogTick-r))}recordPublish(r,a,i,o){const u=this.channels[r];if(!u)return;const{timestamps:f}=u;f.push(i);const m=i-WT;for(;u.startIndex<f.length&&f[u.startIndex]<=m;)u.startIndex+=1;u.startIndex>64&&(f.splice(0,u.startIndex),u.startIndex=0);const h=f.length-u.startIndex;u.eventsPerSecond=h;const p=u.config.maxEventsPerSecond;typeof p=="number"&&p>0&&h>=p&&this.logBreach({channel:r,tick:a,eventType:o,timestamp:i,reason:"rate-per-second",eventsPerSecond:h,maxEventsPerSecond:p})}handleSoftLimit(r){const{channel:a}=r;this.channels[a]&&this.logBreach({...r,reason:"soft-limit"})}getChannelSnapshot(r,a){const i=this.channels[r];if(!i)return null;const o=Math.max(0,i.nextLogTick-a);return{channel:r,cooldownTicksRemaining:o,breaches:i.breaches,eventsPerSecond:i.eventsPerSecond}}logBreach(r){const a=this.channels[r.channel];if(!a)return;const{tick:i}=r;if(i<a.nextLogTick){a.cooldownTicksRemaining=Math.max(0,a.nextLogTick-i);return}J.recordWarning("EventSoftLimitBreach",{channel:r.channel,tick:r.tick,reason:r.reason,eventType:r.eventType,bufferSize:r.bufferSize,capacity:r.capacity,softLimit:r.softLimit,remainingCapacity:r.remainingCapacity,eventsPerSecond:r.eventsPerSecond,maxEventsPerSecond:r.maxEventsPerSecond,cooldownTicks:a.currentCooldown}),J.recordCounters("events.soft_limit_breaches",{[`channel:${r.channel}`]:1}),a.breaches+=1,a.nextLogTick=i+a.currentCooldown,a.cooldownTicksRemaining=a.currentCooldown,a.currentCooldown=Math.min(a.currentCooldown*e1,a.config.maxCooldownTicks)}}const n1=256,r1=2;class a1{constructor(r,a={}){if(Object.defineProperty(this,"history",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"windowLength",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"densityThreshold",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channelCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"featureFlagEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"historyIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"historySize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"runningTotal",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"currentFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!Number.isFinite(r)||r<=0)throw new Error(`RuntimeEventFrameFormatController requires a positive channel count (received ${r}).`);const i=a.defaultFormat??"struct-of-arrays",o=a.autoFallback??{enabled:!1},u=o.windowLength??n1,f=o.densityThreshold??r1;if(!Number.isFinite(u)||u<=0)throw new Error(`RuntimeEventFrameFormatController window length must be a positive number (received ${u}).`);if(!Number.isFinite(f)||f<0)throw new Error(`RuntimeEventFrameFormatController density threshold must be non-negative (received ${f}).`);this.channelCount=r,this.currentFormat=i,this.featureFlagEnabled=o.enabled===!0,this.windowLength=Math.floor(u),this.densityThreshold=f,this.history=new Array(this.windowLength).fill(0)}beginTick(r,a){if(!Number.isFinite(r)||r<0)throw new Error(`RuntimeEventFrameFormatController cannot record negative events for a tick (received ${r}).`);if(!this.featureFlagEnabled)return this.recordSample(r),null;const i=this.currentFormat;this.recordSample(r);const o=this.getDiagnostics(),u=o.averageEventsPerChannel<this.densityThreshold;return this.currentFormat=u?"object-array":"struct-of-arrays",this.currentFormat===i?null:(J.recordWarning("RuntimeEventFrameFormatChanged",{tick:a,previousFormat:i,nextFormat:this.currentFormat,averageEventsPerChannel:o.averageEventsPerChannel,densityThreshold:o.densityThreshold,windowLength:o.windowLength,samples:o.samples,featureFlagEnabled:o.featureFlagEnabled}),{previousFormat:i,nextFormat:this.currentFormat,diagnostics:o})}getExportState(){return{format:this.currentFormat,diagnostics:this.getDiagnostics()}}recordSample(r){const a=this.channelCount===0?0:r/this.channelCount;if(this.historySize===this.windowLength){const i=this.history[this.historyIndex];this.runningTotal-=i}else this.historySize+=1;this.history[this.historyIndex]=a,this.runningTotal+=a,this.historyIndex=(this.historyIndex+1)%this.windowLength}getDiagnostics(){const r=this.historySize,a=r===0?0:this.runningTotal/r;return{windowLength:this.windowLength,samples:r,averageEventsPerChannel:a,densityThreshold:this.densityThreshold,featureFlagEnabled:this.featureFlagEnabled}}}const s1=256,i1=.75,o1=1,c1=16,u1=4;class ov extends Error{constructor(r,a,i){super(`Event buffer overflow on channel ${a} for ${r} (capacity ${i}).`),Object.defineProperty(this,"eventType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"capacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="EventBufferOverflowError",this.eventType=r,this.channel=a,this.capacity=i}}class l1{constructor(){Object.defineProperty(this,"pool",{enumerable:!0,configurable:!0,writable:!0,value:[]})}acquire(){const r=this.pool.pop();return r!==void 0?r:{type:"",tick:0,issuedAt:0,payload:void 0,dispatchOrder:0}}release(r){r.type="",r.tick=0,r.issuedAt=0,r.payload=void 0,r.dispatchOrder=0,this.pool.push(r)}}class cv{constructor(r,a){Object.defineProperty(this,"pool",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"capacity",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"slots",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"lengthValue",{enumerable:!0,configurable:!0,writable:!0,value:0})}get length(){return this.lengthValue}getCapacity(){return this.capacity}isAtCapacity(){return this.lengthValue>=this.capacity}push(r){this.slots[this.lengthValue]=r,this.lengthValue+=1}at(r){if(r<0||r>=this.lengthValue)throw new RangeError(`EventBuffer index ${r} is out of bounds (${this.lengthValue}).`);return this.slots[r]}reset(){for(let r=0;r<this.lengthValue;r+=1){const a=this.slots[r];this.pool.release(a),this.slots[r]=void 0}this.lengthValue=0}}class f1{constructor(r,a={}){Object.defineProperty(this,"descriptors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"byType",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"manifest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manifestHash",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.descriptors=r.map((o,u)=>{const f=a[o.definition.type],m=f?.capacity??o.capacity??s1;if(!Number.isFinite(m)||m<=0)throw new Error(`Invalid capacity for channel ${o.definition.type}: ${m}.`);const h=f?.softLimit??o.softLimit??Math.max(1,Math.floor(m*i1));if(!Number.isFinite(h)||h<=0)throw new Error(`Invalid soft limit for channel ${o.definition.type}: ${h}.`);if(h>m)throw new Error(`Soft limit ${h} exceeds capacity ${m} for channel ${o.definition.type}.`);const p={index:u,definition:o.definition,capacity:m,softLimit:h,diagnostics:d1(o,f,h),onSoftLimit:o.onSoftLimit},g=this.byType.get(o.definition.type);if(g!==void 0)throw new Error(`Duplicate event type registered: ${o.definition.type} (${g.index} vs ${u}).`);return this.byType.set(o.definition.type,p),p});const i=this.descriptors.map(o=>({type:o.definition.type,channel:o.index,version:o.definition.version}));this.manifest={entries:i},this.manifestHash=FT(this.manifest)}getDescriptor(r){const a=this.byType.get(r);if(!a)throw new Error(`Unknown runtime event type: ${r}`);return a}getDescriptors(){return this.descriptors}getManifest(){return this.manifest}getManifestHash(){return this.manifestHash}}function d1(n,r,a){const i={...n.diagnostics??{},...r?.diagnostics??{}},o=i.maxEventsPerTick??a;if(!Number.isFinite(o)||o<=0)throw new Error(`Invalid diagnostics maxEventsPerTick for channel ${n.definition.type}: ${o}.`);const u=Math.max(1,Math.floor(o)),f=i.maxEventsPerSecond??u*u1,m=Number.isFinite(f)&&f>0?f:void 0,h=i.cooldownTicks??o1;if(!Number.isFinite(h)||h<=0)throw new Error(`Invalid diagnostics cooldownTicks for channel ${n.definition.type}: ${h}.`);const p=Math.max(1,Math.floor(h)),g=i.maxCooldownTicks??p*c1;if(!Number.isFinite(g)||g<=0)throw new Error(`Invalid diagnostics maxCooldownTicks for channel ${n.definition.type}: ${g}.`);const v=Math.max(p,Math.floor(g));return{maxEventsPerTick:u,maxEventsPerSecond:m,cooldownTicks:p,maxCooldownTicks:v}}class m1{constructor(r){if(Object.defineProperty(this,"registry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"slotPool",{enumerable:!0,configurable:!0,writable:!0,value:new l1}),Object.defineProperty(this,"channelStates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"slowHandlerThresholdMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onSlowHandler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"diagnostics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frameFormatController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"telemetryCounters",{enumerable:!0,configurable:!0,writable:!0,value:{published:0,softLimited:0,overflowed:0,subscribers:0}}),Object.defineProperty(this,"currentTick",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"dispatchCounter",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"tickAborted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lastOverflowError",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"eventsPublishedThisTick",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"firstTickPending",{enumerable:!0,configurable:!0,writable:!0,value:!0}),r.channels.length===0)throw new Error("EventBus requires at least one channel configuration.");this.registry=new f1(r.channels,r.channelConfigs),this.channelStates=this.registry.getDescriptors().map(i=>({descriptor:i,internalBuffer:new cv(this.slotPool,i.capacity),outboundBuffer:new cv(this.slotPool,i.capacity),subscribers:[],softLimitActive:!1,currentOccupancy:0,highWaterMark:0})),this.clock=r.clock??h1;const a=this.registry.getDescriptors().map(i=>i.diagnostics??null);this.diagnostics=a.some(i=>i!==null)?new t1(a):null,this.slowHandlerThresholdMs=typeof r.slowHandlerThresholdMs=="number"?Math.max(0,r.slowHandlerThresholdMs):2,this.onSlowHandler=r.onSlowHandler,this.frameFormatController=new a1(this.channelStates.length,r.frameExport)}getManifest(){return this.registry.getManifest()}getManifestHash(){return this.registry.getManifestHash()}getFrameExportState(){return this.frameFormatController.getExportState()}beginTick(r,a){const{resetOutbound:i=!0}=a??{},o=!this.firstTickPending&&r===this.currentTick;this.firstTickPending?this.firstTickPending=!1:o||this.frameFormatController.beginTick(this.eventsPublishedThisTick,r),o||(this.eventsPublishedThisTick=0),this.currentTick=r,this.dispatchCounter=0,this.tickAborted=!1,this.lastOverflowError=null,this.telemetryCounters={published:0,softLimited:0,overflowed:0,subscribers:0},this.diagnostics?.beginTick(r);for(const u of this.channelStates)u.internalBuffer.reset(),i&&u.outboundBuffer.reset(),u.softLimitActive=!1,u.currentOccupancy=0,u.highWaterMark=0,this.compactSubscribers(u)}publish(r,a,i){const o=this.registry.getDescriptor(r),u=this.channelStates[o.index];if(this.tickAborted)throw this.lastOverflowError??new ov(r,o.index,o.capacity);if(u.internalBuffer.isAtCapacity()||u.outboundBuffer.isAtCapacity()){const w=new ov(r,o.index,o.capacity);throw this.tickAborted=!0,this.lastOverflowError=w,this.telemetryCounters.overflowed+=1,J.recordWarning("EventBufferOverflow",{type:r,channel:o.index,capacity:o.capacity,tick:this.currentTick}),w}const f=i?.issuedAt??this.clock.now(),m=this.dispatchCounter;this.dispatchCounter+=1;const h=o.definition.validator;h?.(a);const p=this.slotPool.acquire();p.type=r,p.tick=this.currentTick,p.issuedAt=f,p.payload=a,p.dispatchOrder=m,u.internalBuffer.push(p);const g=this.slotPool.acquire();g.type=r,g.tick=this.currentTick,g.issuedAt=f,g.payload=a,g.dispatchOrder=m,u.outboundBuffer.push(g);const v=u.internalBuffer.length,b=Math.max(0,o.capacity-v);u.currentOccupancy=v,u.highWaterMark=Math.max(u.highWaterMark,v),this.telemetryCounters.published+=1,this.eventsPublishedThisTick+=1,this.diagnostics?.recordPublish(o.index,this.currentTick,f,r);let T="accepted";return v>=o.softLimit&&(T="soft-limit",this.telemetryCounters.softLimited+=1,u.softLimitActive||(u.softLimitActive=!0,o.onSoftLimit?.({type:r,channel:o.index,bufferSize:v,capacity:o.capacity,softLimit:o.softLimit,remainingCapacity:b}),this.diagnostics?.handleSoftLimit({channel:o.index,tick:this.currentTick,eventType:r,timestamp:f,reason:"soft-limit",bufferSize:v,capacity:o.capacity,softLimit:o.softLimit,remainingCapacity:b}))),{accepted:!0,state:T,type:r,channel:o.index,bufferSize:v,remainingCapacity:b,dispatchOrder:m,softLimitActive:u.softLimitActive}}dispatch(r){const a=new Array(this.channelStates.length).fill(0);for(;;){let i=-1,o;for(let m=0;m<this.channelStates.length;m+=1){const h=this.channelStates[m],p=a[m],g=h.internalBuffer;if(p>=g.length)continue;const v=g.at(p);(o===void 0||v.dispatchOrder<o.dispatchOrder)&&(o=v,i=m)}if(o===void 0||i===-1)break;const u=this.channelStates[i],f=XT({type:o.type,tick:o.tick,issuedAt:o.issuedAt,payload:o.payload});for(const m of u.subscribers)if(m.active)if(this.slowHandlerThresholdMs>0){const h=this.clock.now();try{m.handler(f,r)}finally{const p=this.clock.now()-h;if(p>this.slowHandlerThresholdMs){const g={type:f.type,channel:i,tick:f.tick,dispatchOrder:o.dispatchOrder,durationMs:p,thresholdMs:this.slowHandlerThresholdMs,handlerLabel:m.label};this.onSlowHandler?.(g),J.recordWarning("EventHandlerSlow",{eventType:f.type,channel:i,tick:f.tick,dispatchOrder:o.dispatchOrder,durationMs:p,thresholdMs:this.slowHandlerThresholdMs,handler:m.label})}}}else m.handler(f,r);a[i]+=1}for(const i of this.channelStates)i.internalBuffer.reset(),i.currentOccupancy=0}getBackPressureSnapshot(){const r=this.channelStates.map(o=>{const u=o.subscribers.reduce((h,p)=>p.active?h+1:h,0),f=Math.max(0,o.descriptor.capacity-o.currentOccupancy),m=this.diagnostics?.getChannelSnapshot(o.descriptor.index,this.currentTick)??null;return{type:o.descriptor.definition.type,channel:o.descriptor.index,capacity:o.descriptor.capacity,softLimit:o.descriptor.softLimit,inUse:o.currentOccupancy,remainingCapacity:f,highWaterMark:o.highWaterMark,softLimitActive:o.softLimitActive,subscribers:u,cooldownTicksRemaining:m?.cooldownTicksRemaining??0,softLimitBreaches:m?.breaches??0,eventsPerSecond:m?.eventsPerSecond??0}}),a=r.reduce((o,u)=>o+u.subscribers,0),i={published:this.telemetryCounters.published,softLimited:this.telemetryCounters.softLimited,overflowed:this.telemetryCounters.overflowed,subscribers:a};return this.telemetryCounters=i,{tick:this.currentTick,channels:r,counters:{...i}}}on(r,a,i){const o=this.registry.getDescriptor(r),u=this.channelStates[o.index],f={handler:a,active:!0,label:i?.label};return u.subscribers.push(f),{unsubscribe:()=>{f.active=!1}}}getOutboundBuffer(r){const a=this.channelStates[r];if(!a)throw new Error(`Unknown channel index ${r}`);const i=a.outboundBuffer;return{get length(){return i.length},at(o){const u=i.at(o);return{type:u.type,tick:u.tick,issuedAt:u.issuedAt,payload:u.payload,dispatchOrder:u.dispatchOrder}}}}compactSubscribers(r){if(r.subscribers.length===0)return;let a=0;for(const i of r.subscribers)i.active&&(r.subscribers[a]=i,a+=1);r.subscribers.length=a}}const h1={now(){return performance.now()}},p1=[{definition:{type:"sample:reactor-primed",version:2}}];function g1(n){if(typeof n.resourceId!="string"||n.resourceId.length===0)throw new Error("resourceId must be a non-empty string.");if(!Number.isFinite(n.threshold))throw new Error("threshold must be a finite number.")}function y1(n){if(typeof n.automationId!="string"||n.automationId.length===0)throw new Error("automationId must be a non-empty string.");if(typeof n.enabled!="boolean")throw new Error("enabled must be a boolean.")}const v1=[{definition:{type:"resource:threshold-reached",version:1,validator:g1}},{definition:{type:"automation:toggled",version:1,validator:y1}}],b1=[...v1,...p1],E1={channels:b1,slowHandlerThresholdMs:2};var At;(function(n){n[n.SYSTEM=0]="SYSTEM",n[n.PLAYER=1]="PLAYER",n[n.AUTOMATION=2]="AUTOMATION"})(At||(At={}));const $r=Object.freeze([At.SYSTEM,At.PLAYER,At.AUTOMATION]),St=Object.freeze({PURCHASE_GENERATOR:"PURCHASE_GENERATOR",PURCHASE_UPGRADE:"PURCHASE_UPGRADE",TOGGLE_GENERATOR:"TOGGLE_GENERATOR",TOGGLE_AUTOMATION:"TOGGLE_AUTOMATION",COLLECT_RESOURCE:"COLLECT_RESOURCE",PRESTIGE_RESET:"PRESTIGE_RESET",OFFLINE_CATCHUP:"OFFLINE_CATCHUP",APPLY_MIGRATION:"APPLY_MIGRATION"}),S1=Object.freeze({PURCHASE_GENERATOR:{type:St.PURCHASE_GENERATOR,allowedPriorities:$r,rationale:"Purchases are gated by resource costs; any priority may attempt them."},PURCHASE_UPGRADE:{type:St.PURCHASE_UPGRADE,allowedPriorities:$r,rationale:"Upgrades share the purchase gating model and may originate from any priority."},TOGGLE_GENERATOR:{type:St.TOGGLE_GENERATOR,allowedPriorities:$r,rationale:"Generator toggles can originate from automation, player, or system flows."},TOGGLE_AUTOMATION:{type:St.TOGGLE_AUTOMATION,allowedPriorities:$r,rationale:"Automation toggles can originate from any priority tier for manual or programmatic control."},COLLECT_RESOURCE:{type:St.COLLECT_RESOURCE,allowedPriorities:$r,rationale:"Manual and automation-driven collection share the same execution path."},PRESTIGE_RESET:{type:St.PRESTIGE_RESET,allowedPriorities:Object.freeze([At.SYSTEM,At.PLAYER]),rationale:"Automation may not trigger prestige; only player/system contexts are permitted.",unauthorizedEvent:"AutomationPrestigeBlocked"},OFFLINE_CATCHUP:{type:St.OFFLINE_CATCHUP,allowedPriorities:Object.freeze([At.SYSTEM,At.AUTOMATION]),rationale:"Offline reconciliation is engine-driven; automations may also trigger catchup logic.",unauthorizedEvent:"UnauthorizedSystemCommand"},APPLY_MIGRATION:{type:St.APPLY_MIGRATION,allowedPriorities:Object.freeze([At.SYSTEM]),rationale:"Schema migrations run exclusively under system authority for integrity.",unauthorizedEvent:"UnauthorizedSystemCommand"}}),_1="CommandPriorityViolation";function T1(n){return S1[n]}function tE(n,r={}){const a=T1(n.type);if(!a||a.allowedPriorities.includes(n.priority))return!0;const i=a.unauthorizedEvent??_1,o={type:n.type,attemptedPriority:n.priority,allowedPriorities:a.allowedPriorities,phase:r.phase??"live"};return r.reason&&(o.reason=r.reason),J.recordWarning(i,o),!1}class w1{constructor(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"eventPublisher",{enumerable:!0,configurable:!0,writable:!0,value:k1})}register(r,a){this.handlers.set(r,a)}setEventPublisher(r){this.eventPublisher=r}getHandler(r){return this.handlers.get(r)}forEachHandler(r){for(const[a,i]of this.handlers.entries())r(a,i)}execute(r){const a=this.handlers.get(r.type);if(!a){J.recordError("UnknownCommandType",{type:r.type});return}if(!tE(r,{phase:"live",reason:"dispatcher"}))return;const i={step:r.step,timestamp:r.timestamp,priority:r.priority,events:this.eventPublisher};try{const o=a(r.payload,i);O1(o)&&o.catch(u=>{J.recordError("CommandExecutionFailed",{type:r.type,error:u instanceof Error?u.message:String(u)})})}catch(o){J.recordError("CommandExecutionFailed",{type:r.type,error:o instanceof Error?o.message:String(o)})}}}function O1(n){return typeof n=="object"&&n!==null&&typeof n.then=="function"}const k1={publish(){throw new Error("Event publisher has not been configured on this CommandDispatcher instance.")}},A1=1e4;class R1{constructor(r={}){Object.defineProperty(this,"lanes",{enumerable:!0,configurable:!0,writable:!0,value:new Map([[At.SYSTEM,[]],[At.PLAYER,[]],[At.AUTOMATION,[]]])}),Object.defineProperty(this,"nextSequence",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"totalSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const a=r.maxSize??A1;if(!Number.isFinite(a)||a<=0)throw new Error("maxSize must be a positive finite number");this.maxSize=a}enqueue(r){if(!tE(r,{phase:"live",reason:"queue"}))return;const a=this.lanes.get(r.priority);if(!a)throw new Error(`Invalid command priority: ${r.priority}`);if(this.totalSize>=this.maxSize&&(J.recordWarning("CommandQueueOverflow",{size:this.totalSize,maxSize:this.maxSize,priority:r.priority}),!this.dropLowestPriorityUpTo(r.priority))){J.recordWarning("CommandRejected",{type:r.type,priority:r.priority,timestamp:r.timestamp,size:this.totalSize,maxSize:this.maxSize});return}const i={command:H1(r),sequence:this.nextSequence++};let o=0,u=a.length;for(;o<u;){const f=o+u>>>1,m=a[f];m.command.timestamp<i.command.timestamp||m.command.timestamp===i.command.timestamp&&m.sequence<i.sequence?o=f+1:u=f}a.splice(o,0,i),this.totalSize+=1}dequeueAll(){return this.dequeueUpToStep(Number.POSITIVE_INFINITY)}dequeueUpToStep(r){if(this.totalSize===0)return[];const a=[];let i=0;for(const o of $r){const u=this.lanes.get(o);if(!u||u.length===0)continue;let f=0;for(let m=0;m<u.length;m+=1){const h=u[m];if(h.command.step<=r){a.push(h.command),i+=1;continue}f!==m&&(u[f]=h),f+=1}f===0?u.length=0:f<u.length&&(u.length=f)}return this.totalSize-=i,a}clear(){if(this.totalSize!==0){for(const r of this.lanes.values())this.totalSize-=r.length,r.length=0;this.totalSize=0}}get size(){return this.totalSize}dropLowestPriorityUpTo(r){for(let a=$r.length-1;a>=0;a-=1){const i=$r[a];if(i<r)continue;const o=this.lanes.get(i);if(!o||o.length===0)continue;const u=o.shift();if(u)return this.totalSize-=1,J.recordWarning("CommandDropped",{type:u.command.type,priority:i,timestamp:u.command.timestamp}),!0}return!1}}const C1=new Set(["set","delete","clear"]),N1=new Set(["add","delete","clear"]),M1=new Set(["copyWithin","fill","reverse","set","sort"]),I1=new Set(["every","filter","find","findIndex","findLast","findLastIndex","forEach","map","reduce","reduceRight","some"]),x1=new Set(["setInt8","setUint8","setInt16","setUint16","setInt32","setUint32","setBigInt64","setBigUint64","setFloat32","setFloat64"]),en=globalThis.SharedArrayBuffer;function z1(n){return Ri(n,new WeakMap)}function Ri(n,r){if(!n||typeof n!="object")return n;const a=r.get(n);return a||(n instanceof Map?L1(n,r):n instanceof Set?D1(n,r):n instanceof Date?U1(n,r):n instanceof ArrayBuffer?nE(n,r):typeof en=="function"&&n instanceof en?rE(n,r):n instanceof RegExp?j1(n,r):ArrayBuffer.isView(n)?tm(n,r):q1(n,r))}function L1(n,r){const a=new Map,i=new Proxy(a,$1());r.set(n,i);for(const[o,u]of n.entries()){const f=Ri(o,r),m=Ri(u,r);a.set(f,m)}return i}function D1(n,r){const a=new Set,i=new Proxy(a,B1());r.set(n,i);for(const o of n.values()){const u=Ri(o,r);a.add(u)}return i}function U1(n,r){const a=new Date(n.getTime()),i=new Proxy(a,{get(o,u,f){if(typeof u=="string"&&u.startsWith("set"))return()=>{throw new TypeError("Cannot mutate immutable Date snapshot")};const m=Reflect.get(o,u,f);return typeof m=="function"?m.bind(o):m},set(){throw new TypeError("Cannot mutate immutable Date snapshot")},defineProperty(){throw new TypeError("Cannot mutate immutable Date snapshot")},deleteProperty(){throw new TypeError("Cannot mutate immutable Date snapshot")}});return r.set(n,i),i}function nE(n,r){const a=n.slice(0),i=aE(a);return r.set(n,i),i}function rE(n,r){if(typeof en!="function")throw new Error("SharedArrayBuffer is not supported in this environment.");const a=new en(n.byteLength);new Uint8Array(a).set(new Uint8Array(n));const i=sE(a);return r.set(n,i),i}function j1(n,r){const a=new RegExp(n.source,n.flags);return a.lastIndex=n.lastIndex,r.set(n,a),a}function tm(n,r){let a;if(n instanceof DataView){const o=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);a=new DataView(o,0,n.byteLength)}else{const o=n,u=o.constructor;if(typeof en=="function"&&o.buffer instanceof en){const f=iE(o.buffer);a=new u(f,o.byteOffset,o.length)}else{const f=o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength);a=new u(f)}}const i=new Proxy(a,P1(n,r));return r.set(n,i),i}function $1(){return{get(n,r,a){if(r==="valueOf")return()=>a;if(r==="forEach"){const o=n.forEach;return(u,f)=>typeof u!="function"?o.call(n,u,f):o.call(n,(m,h)=>{u.call(f,m,h,a)},f)}if(C1.has(r))return()=>{throw new TypeError("Cannot mutate immutable Map snapshot")};const i=Reflect.get(n,r,a);return typeof i=="function"?i.bind(n):i},set(){throw new TypeError("Cannot mutate immutable Map snapshot")},defineProperty(){throw new TypeError("Cannot mutate immutable Map snapshot")},deleteProperty(){throw new TypeError("Cannot mutate immutable Map snapshot")}}}function B1(){return{get(n,r,a){if(r==="valueOf")return()=>a;if(r==="forEach"){const o=n.forEach;return(u,f)=>typeof u!="function"?o.call(n,u,f):o.call(n,(m,h)=>{u.call(f,m,h,a)},f)}if(N1.has(r))return()=>{throw new TypeError("Cannot mutate immutable Set snapshot")};const i=Reflect.get(n,r,a);return typeof i=="function"?i.bind(n):i},set(){throw new TypeError("Cannot mutate immutable Set snapshot")},defineProperty(){throw new TypeError("Cannot mutate immutable Set snapshot")},deleteProperty(){throw new TypeError("Cannot mutate immutable Set snapshot")}}}function q1(n,r){const a=Object.getPrototypeOf(n),i=Array.isArray(n)?[]:Object.create(a===null?null:a);r.set(n,i);const o=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const u of o){const f=Object.getOwnPropertyDescriptor(n,u);f&&("value"in f&&(f.value=Ri(f.value,r)),Object.defineProperty(i,u,f))}return Object.freeze(i),i}function P1(n,r){const a=n instanceof DataView,i=a?"DataView":n.constructor.name||"TypedArray";return{get(o,u,f){if(u==="buffer"){const h=o.buffer;return h instanceof ArrayBuffer?nE(h,r):typeof en=="function"&&h instanceof en?rE(h,r):h}if(u==="valueOf")return()=>f;if(a&&(u==="byteOffset"||u==="byteLength"))return Reflect.get(o,u,o);if(typeof u=="string"&&I1.has(u)&&!a){const h=Reflect.get(o,u,f);if(typeof h=="function"){const p=h;return(...g)=>{const[v,...b]=g;if(typeof v!="function")return p.call(o,v,...b);const T=function(...S){return S.length>0&&(S[S.length-1]=f),v.apply(this,S)},w=p.call(o,T,...b);return ArrayBuffer.isView(w)&&!(w instanceof DataView)?tm(w,r):w}}}if(!a&&u==="subarray")return(...h)=>{const g=o.subarray(...h);return tm(g,r)};if(typeof u=="string"&&(a&&x1.has(u)||!a&&M1.has(u)))return()=>{throw new TypeError(`Cannot mutate immutable ${i} snapshot`)};const m=Reflect.get(o,u,f);return typeof m=="function"?m.bind(o):m},set(){throw new TypeError(`Cannot mutate immutable ${i} snapshot`)},defineProperty(){throw new TypeError(`Cannot mutate immutable ${i} snapshot`)},deleteProperty(){throw new TypeError(`Cannot mutate immutable ${i} snapshot`)}}}function aE(n){const r=n;return Object.freeze({get byteLength(){return r.byteLength},slice(i,o){const u=r.slice(i??0,o??r.byteLength);return aE(u)},toArrayBuffer(){return r.slice(0)},toDataView(){return new DataView(r.slice(0))},toUint8Array(){return new Uint8Array(r.slice(0))},valueOf(){return r.slice(0)},[Symbol.toStringTag]:"ImmutableArrayBufferSnapshot"})}function sE(n){if(typeof en!="function")throw new Error("SharedArrayBuffer is not supported in this environment.");const r=n;return Object.freeze({get byteLength(){return r.byteLength},slice(i,o){const u=G1(r,i,o);return sE(u)},toSharedArrayBuffer(){return iE(r)},toArrayBuffer(){return Nf(r)},toDataView(){return new DataView(Nf(r))},toUint8Array(){return new Uint8Array(Nf(r))},valueOf(){return this.toSharedArrayBuffer()},[Symbol.toStringTag]:"ImmutableSharedArrayBufferSnapshot"})}function G1(n,r,a){if(typeof en!="function")throw new Error("SharedArrayBuffer is not supported in this environment.");const{start:i,finish:o}=V1(r,a,n.byteLength),u=new en(o-i),f=new Uint8Array(n,i,o-i);return new Uint8Array(u).set(f),u}function V1(n,r,a){const i=uv(n,a,0),o=uv(r,a,a);return{start:i,finish:Math.max(o,i)}}function uv(n,r,a){if(n===void 0)return a;const i=Number(n);if(Number.isNaN(i))return a;if(!Number.isFinite(i))return i<0?0:r;const o=Math.trunc(i);return o<0?Math.max(r+o,0):Math.min(o,r)}function iE(n){if(typeof en!="function")throw new Error("SharedArrayBuffer is not supported in this environment.");const r=new en(n.byteLength);return new Uint8Array(r).set(new Uint8Array(n)),r}function Nf(n){const r=new Uint8Array(n),a=new ArrayBuffer(r.byteLength);return new Uint8Array(a).set(r),a}function H1(n){const r=Y1(n);return z1(r)}function Y1(n){const r=globalThis.structuredClone;if(typeof r!="function")throw new Error("structuredClone is required for deterministic command queue snapshots.");return r(n)}const Z1=120,X1=50,nm=Object.freeze([]),Mf=globalThis.performance;function oE(){if(Mf&&typeof Mf.now=="function")return{now:()=>Mf.now()};const n=globalThis.process,r=n?.hrtime?.bigint;if(typeof r=="function"){const a=r.call(n);return{now:()=>{const i=r.call(n)-a;return Number(i)/1e6}}}return{now:()=>Date.now()}}const F1=oE();function Q1(n={}){const r=n.capacity,a=typeof r=="number"&&Number.isFinite(r)&&r>=0?Math.floor(r):Z1,i=n.slowTickBudgetMs??X1,o=n.clock??F1,u=new Array(a);let f=0,m=0,h=0,p=0,g;const v=Object.freeze({capacity:a,slowTickBudgetMs:i});function b(M){const $=u[M];if($!==void 0)return $;const B={tick:0,head:0,startedAt:0,endedAt:0,durationMs:0,budgetMs:void 0,isSlow:!1,overBudgetMs:0,error:void 0,metadata:void 0};return u[M]=B,B}function T(M){m===a?h+=1:m+=1,a>0&&(f=(f+1)%a),g=M.tick}function w(M,$){const B=o.now(),q=$?.budgetMs??i;let X=!1;const ue={tick:M,startedAt:B,end(me){if(X)return;X=!0;const ke=me?.endedAt??o.now(),Ue=ke>=B?ke-B:0,et=me?.budgetMs??q,W=p+1;if(p=W,a===0){h+=1,g=M;return}const I=b(f);I.tick=M,I.head=W,I.startedAt=B,I.endedAt=ke,I.durationMs=Ue,I.budgetMs=et,I.isSlow=et!==void 0&&Ue>et,I.overBudgetMs=I.isSlow&&et!==void 0?Ue-et:0,I.error=cE(me?.error),I.metadata=W1(me?.metadata),T(I)},fail(me,ke){ue.end({...ke,error:me})}};return ue}function S(M){const $=M.error===void 0?void 0:Object.freeze({name:M.error.name,message:M.error.message,stack:M.error.stack});return Object.freeze({tick:M.tick,startedAt:M.startedAt,endedAt:M.endedAt,durationMs:M.durationMs,budgetMs:M.budgetMs,isSlow:M.isSlow,overBudgetMs:M.overBudgetMs,error:$,metadata:M.metadata})}function A(M){if(m===0||a===0)return nm;const $=[],B=m===a?f:0;for(let q=0;q<m;q+=1){const X=(B+q)%a,ue=u[X];ue&&(M!==void 0&&ue.head<=M||$.push(S(ue)))}return Object.freeze($)}function _(M){const $=p,B=typeof M=="number"&&Number.isFinite(M)&&M>=0?M:void 0,q=B!==void 0&&B>$,X=A(q?void 0:B);let ue=B===void 0||q?h:0;if(B!==void 0&&!q){const me=B>=$?0:$-B;ue=Math.max(0,me-X.length)}return Object.freeze({entries:X,head:$,dropped:ue,configuration:v})}function C(){const M=_();return Object.freeze({capacity:a,size:m,droppedEntries:h,lastTick:g,entries:M.entries})}function N(){f=0,m=0,h=0,p=0,g=void 0;for(let M=0;M<a;M+=1){const $=u[M];$&&($.metadata=void 0)}}return{startTick:w,snapshot:C,readDelta:_,clear:N}}function K1(){const n=Object.freeze({capacity:0,slowTickBudgetMs:void 0,enabled:!1}),r=Object.freeze({capacity:0,size:0,droppedEntries:0,lastTick:void 0,entries:nm}),a=Object.freeze({entries:nm,head:0,dropped:0,configuration:n});return{startTick(i){return{tick:i,startedAt:0,end(){},fail(){}}},snapshot(){return r},readDelta(){return a},clear(){}}}function cE(n){if(n!=null){if(J1(n)){const r={};return n.name!==void 0&&(r.name=n.name),n.message!==void 0&&(r.message=n.message),n.stack!==void 0&&(r.stack=n.stack),r}return typeof n=="string"?{message:n}:{message:String(n)}}}function J1(n){return!n||typeof n!="object"?!1:typeof n.message=="string"||typeof n.name=="string"||typeof n.stack=="string"}function W1(n){if(!n)return;const r=n.queue?Object.freeze({...n.queue}):void 0,a=n.events?Object.freeze({counters:Object.freeze({...n.events.counters}),channels:Object.freeze(n.events.channels.map(u=>Object.freeze({...u})))}):void 0,i=n.systems?Object.freeze(n.systems.map(u=>Object.freeze({id:u.id,durationMs:u.durationMs,budgetMs:u.budgetMs,isSlow:u.isSlow,overBudgetMs:u.overBudgetMs,history:u.history?Object.freeze({...u.history}):void 0,error:u.error?Object.freeze({...u.error}):void 0}))):void 0,o=n.phases?Object.freeze(n.phases.map(u=>Object.freeze({name:u.name,durationMs:u.durationMs,offsetMs:u.offsetMs}))):void 0;return Object.freeze({accumulatorBacklogMs:n.accumulatorBacklogMs,queue:r,events:a,systems:i,phases:o})}const ew=16,tw=60,If=K1(),nw={end(){},fail(n){throw n}},rw={tick:-1,recordQueueMetrics(){},recordEventMetrics(){},setAccumulatorBacklogMs(){},addPhase(){},startSystem(){return nw},complete(){},fail(n){throw n}};class aw{constructor(r,a){Object.defineProperty(this,"isEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"timeline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"slowSystemBudgetMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"systemHistorySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tickBudgetMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"systemHistory",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"resolvedConfiguration",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const i=r.clock??oE();this.clock=i;const o={capacity:r.capacity,slowTickBudgetMs:r.slowTickBudgetMs,clock:i};this.timeline=Q1(o);const u=typeof r.slowSystemBudgetMs=="number"&&Number.isFinite(r.slowSystemBudgetMs)&&r.slowSystemBudgetMs>0?r.slowSystemBudgetMs:Math.min(a.stepSizeMs,ew);this.slowSystemBudgetMs=u>0?u:void 0;const f=typeof r.systemHistorySize=="number"&&Number.isFinite(r.systemHistorySize)&&r.systemHistorySize>0?Math.floor(r.systemHistorySize):tw;this.systemHistorySize=Math.max(1,f);const m=typeof r.slowTickBudgetMs=="number"&&Number.isFinite(r.slowTickBudgetMs)&&r.slowTickBudgetMs>0?r.slowTickBudgetMs:a.stepSizeMs;this.tickBudgetMs=m>0?m:void 0;const h=this.timeline.readDelta().configuration;this.resolvedConfiguration=Object.freeze({...h,enabled:!0,slowSystemBudgetMs:this.slowSystemBudgetMs,systemHistorySize:this.systemHistorySize,tickBudgetMs:this.tickBudgetMs})}beginTick(r){const a=this.timeline.startTick(r,{budgetMs:this.tickBudgetMs});return new sw({tick:r,handle:a,clock:this.clock,controller:this,tickBudgetMs:this.tickBudgetMs})}readDelta(r){const a=this.timeline.readDelta(r);return a.configuration===this.resolvedConfiguration?a:Object.freeze({entries:a.entries,head:a.head,dropped:a.dropped,configuration:this.resolvedConfiguration})}getConfiguration(){return this.resolvedConfiguration}snapshot(){return this.readDelta()}clear(){this.timeline.clear(),this.systemHistory.clear()}completeSystemSpan(r,a,i,o){const u=this.recordSystemHistory(r,i),f=this.slowSystemBudgetMs,m=typeof f=="number"&&i>f,h=m&&typeof f=="number"?i-f:0;return m&&f!==void 0&&J.recordWarning("SystemExecutionSlow",{systemId:r,tick:a,durationMs:i,budgetMs:f,overBudgetMs:h,averageDurationMs:u.averageMs,maxDurationMs:u.maxMs,sampleCount:u.sampleCount}),{id:r,durationMs:i,budgetMs:f,isSlow:m,overBudgetMs:h,history:u,error:cE(o)}}recordSystemHistory(r,a){let i=this.systemHistory.get(r);i||(i={values:[]},this.systemHistory.set(r,i)),i.values.push(a),i.values.length>this.systemHistorySize&&i.values.shift();const{values:o}=i;let u=0,f=0;for(const p of o)u+=p,p>f&&(f=p);const m=o.length,h=m>0?u/m:0;return{sampleCount:m,averageMs:h,maxMs:f}}maybeRecordSlowTickWarning(r,a,i){const o=this.tickBudgetMs;if(typeof o!="number"||o<=0||a<=o)return;const u=a-o,f=i.systems?i.systems.reduce((m,h)=>!m||h.durationMs>m.durationMs?h:m,void 0):void 0;J.recordWarning("TickExecutionSlow",{tick:r,durationMs:a,budgetMs:o,overBudgetMs:u,accumulatorBacklogMs:i.accumulatorBacklogMs,queueCaptured:i.queue?.captured,queueExecuted:i.queue?.executed,queueSkipped:i.queue?.skipped,slowestSystemId:f?.id,slowestSystemDurationMs:f?.durationMs,slowestSystemOverBudgetMs:f?.overBudgetMs})}}class sw{constructor(r){Object.defineProperty(this,"tick",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tickBudgetMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"queueMetrics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"eventMetrics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"accumulatorBacklogMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"systemSpans",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"phases",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.tick=r.tick,this.handle=r.handle,this.clock=r.clock,this.controller=r.controller,this.tickBudgetMs=r.tickBudgetMs}recordQueueMetrics(r){this.queueMetrics={...r}}recordEventMetrics(r){this.eventMetrics={counters:{...r.counters},channels:r.channels.map(a=>({...a}))}}setAccumulatorBacklogMs(r){this.accumulatorBacklogMs=r}addPhase(r,a,i){if(!Number.isFinite(a)||a<0)return;const o=Number.isFinite(i??NaN)?i:void 0,u=o===void 0?{name:r,durationMs:a}:{name:r,durationMs:a,offsetMs:o};this.phases.push(u)}startSystem(r){return new iw({systemId:r,tick:this.tick,controller:this.controller,parent:this,clock:this.clock})}complete(){if(this.completed)return;this.completed=!0;const r=this.clock.now(),a=this.buildMetadata();this.handle.end({endedAt:r,budgetMs:this.tickBudgetMs,metadata:a}),this.controller.maybeRecordSlowTickWarning(this.tick,r-this.handle.startedAt,a)}fail(r){if(!this.completed){this.completed=!0;const a=this.clock.now(),i=this.buildMetadata();this.handle.fail(r,{endedAt:a,budgetMs:this.tickBudgetMs,metadata:i})}throw r}addSystemSpan(r){this.systemSpans.push(r)}buildMetadata(){return{accumulatorBacklogMs:this.accumulatorBacklogMs,queue:this.queueMetrics,events:this.eventMetrics,systems:this.systemSpans.slice(),phases:this.phases.length>0?this.phases.map(a=>({name:a.name,durationMs:a.durationMs,offsetMs:a.offsetMs})):void 0}}}class iw{constructor(r){Object.defineProperty(this,"systemId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tick",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startedAt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.systemId=r.systemId,this.tick=r.tick,this.controller=r.controller,this.parent=r.parent,this.clock=r.clock,this.startedAt=r.clock.now()}end(){this.finish(void 0)}fail(r){throw this.finish(r),r}finish(r){if(this.completed)return;this.completed=!0;const a=this.clock.now(),i=a>=this.startedAt?a-this.startedAt:0,o=this.controller.completeSystemSpan(this.systemId,this.tick,i,r);this.parent.addSystemSpan(o)}}const ow=Object.freeze({capacity:0,slowTickBudgetMs:void 0,enabled:!1});class cw{constructor(r,a){Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"active",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"timelineRecorder",{enumerable:!0,configurable:!0,writable:!0,value:If}),Object.defineProperty(this,"configuration",{enumerable:!0,configurable:!0,writable:!0,value:ow}),Object.defineProperty(this,"preservedOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.context=a;const i=r?.timeline;i!==void 0&&i!==!1&&(i.enabled===!1?(this.preservedOptions=this.normalizeRequestedOptions(i),this.disable()):this.enable(i))}get isEnabled(){return this.active!==null}get timeline(){return this.timelineRecorder}beginTick(r){return this.active?this.active.beginTick(r):rw}readDelta(r){if(!this.active){const i=If.readDelta(r);return i.configuration===this.configuration?i:Object.freeze({entries:i.entries,head:i.head,dropped:i.dropped,configuration:this.configuration})}const a=this.active.readDelta(r);return a.configuration===this.configuration?a:Object.freeze({entries:a.entries,head:a.head,dropped:a.dropped,configuration:this.configuration})}snapshot(){return this.readDelta()}enable(r){const a=this.preservedOptions!==void 0?{...this.preservedOptions}:{},i=r!==void 0?{...a,...r}:a;if(i.enabled===!1){this.preservedOptions=this.normalizeRequestedOptions(i),this.disable();return}const o={...i,enabled:!0};this.active=new aw(o,this.context),this.timelineRecorder=this.active.timeline,this.configuration=this.active.getConfiguration(),this.preservedOptions=this.mergePreservedOptions(o,this.configuration)}disable(){const r=this.configuration;if(this.active){const a=this.preservedOptions!==void 0?this.preservedOptions:{};this.preservedOptions=this.mergePreservedOptions(a,r)}this.active=null,this.timelineRecorder=If,this.configuration=Object.freeze({...r,enabled:!1})}getConfiguration(){return this.configuration}clear(){this.active?.clear()}normalizeRequestedOptions(r){return{...r,enabled:!0}}mergePreservedOptions(r,a){const{capacity:i,slowTickBudgetMs:o,slowSystemBudgetMs:u,systemHistorySize:f,enabled:m,...h}=r;return{...h,enabled:!0,capacity:i??a.capacity,slowTickBudgetMs:o??a.slowTickBudgetMs,slowSystemBudgetMs:u??a.slowSystemBudgetMs,systemHistorySize:f??a.systemHistorySize}}}function uw(n,r){return new cw(n,r)}const lw=new Set(["copyWithin","fill","reverse","set","sort"]),fw=new Set(["every","filter","find","findIndex","findLast","findLastIndex","forEach","map","reduce","reduceRight","some"]),lv=Object.getPrototypeOf(Int8Array.prototype),da=globalThis.SharedArrayBuffer,fv=new WeakMap,dv=da?new WeakMap:void 0,dw=new WeakSet,vi="Immutable typed array snapshots are read-only. Clone the array before mutating.";function uE(n){const r=fv.get(n);if(r)return r;const a={get byteLength(){return n.byteLength},slice(i,o){const u=n.slice(i??0,o??n.byteLength);return uE(u)},toArrayBuffer(){return n.slice(0)},toDataView(){return new DataView(n.slice(0))},toUint8Array(){return new Uint8Array(n.slice(0))},valueOf(){return n.slice(0)},[Symbol.toStringTag]:"ImmutableArrayBufferSnapshot"};return fv.set(n,a),a}function mv(n){if(!da)throw new TypeError("SharedArrayBuffer is not supported in this environment");const r=new da(n.byteLength),a=new Uint8Array(n);return new Uint8Array(r).set(a),r}function mw(n,r,a){const i=r===void 0?0:r<0?Math.max(n+r,0):Math.min(r,n),o=a===void 0?n:a<0?Math.max(n+a,0):Math.min(a,n),u=Math.max(0,Math.min(o,n));return[i,Math.max(i,u)]}function lE(n){const r=dv?.get(n);if(r)return r;if(!da)throw new TypeError("SharedArrayBuffer is not supported in this environment");const a={get byteLength(){return n.byteLength},slice(i,o){const[u,f]=mw(n.byteLength,i,o),m=new da(f-u),h=new Uint8Array(n,u,f-u);return new Uint8Array(m).set(h),lE(m)},toSharedArrayBuffer(){return mv(n)},toArrayBuffer(){const i=new ArrayBuffer(n.byteLength);return new Uint8Array(i).set(new Uint8Array(n)),i},toDataView(){const i=new ArrayBuffer(n.byteLength);return new Uint8Array(i).set(new Uint8Array(n)),new DataView(i)},toUint8Array(){const i=new Uint8Array(n.byteLength);return i.set(new Uint8Array(n)),i},valueOf(){return mv(n)},[Symbol.toStringTag]:"ImmutableSharedArrayBufferSnapshot"};return dv?.set(n,a),a}function hw(n,r){return function(...a){return a.length>0&&(a[a.length-1]=n),r.apply(this,a)}}function xf(n,r,a){return r&&n===r&&a?a:ArrayBuffer.isView(n)&&!(n instanceof DataView)?Tm(n):n}function pw(n){return lv?Object.prototype.hasOwnProperty.call(lv,n):!1}function Tm(n){const r=n.buffer,a=da&&r instanceof da?lE(r):void 0,i=a===void 0?uE(r):void 0,o=new Proxy(n,{get(u,f,m){if(f==="buffer")return a??i;if(f==="valueOf")return()=>m;if(typeof f=="string"&&lw.has(f))return()=>{throw new TypeError(vi)};if(typeof f=="string"&&f==="subarray")return(...p)=>{const v=u.subarray(...p);return Tm(v)};if(typeof f=="string"&&fw.has(f)){const p=Reflect.get(u,f,u);if(typeof p=="function")return(...g)=>{if(g.length>0&&typeof g[0]=="function"){const[b,...T]=g,w=hw(m,b),S=p.apply(u,[w,...T]);return xf(S,u,m)}const v=p.apply(u,g);return xf(v,u,m)}}const h=Reflect.get(u,f);return typeof h=="function"?f==="constructor"?h:pw(f)||ArrayBuffer.isView(u)?(...p)=>{const g=h.apply(u,p);return xf(g,u,m)}:h.bind(u):h},set(){throw new TypeError(vi)},defineProperty(){throw new TypeError(vi)},deleteProperty(){throw new TypeError(vi)},setPrototypeOf(){throw new TypeError(vi)}});return dw.add(o),o}const Ci=1e-9,gw=1e-9,wm=.001,hv=.5,Cc=1,Nc=2,qt=4,Vc=-1,pv=-2,yw="ResourceDirtyToleranceSaturated",vw="ResourceForceClearDirtyState",bw="ResourceSaveLengthMismatch",zf="ResourceHydrationMismatch",hn="ResourceHydrationInvalidData",Ew="SNAPSHOT_GUARDS";var Tn;(function(n){n[n.Idle=0]="Idle",n[n.Finalized=1]="Finalized",n[n.Published=2]="Published"})(Tn||(Tn={}));const fE=new WeakMap;function Sw(n){const r=n.length,a=new Array(r),i=new Map,o=new Set;for(let q=0;q<r;q+=1){const ue=n[q]?.id;if(!ue)throw J.recordError("ResourceDefinitionMissingId",{index:q}),new Error(`Resource definition at index ${q} is missing an id.`);if(o.has(ue))throw J.recordError("ResourceDefinitionDuplicateId",{id:ue}),new Error(`Resource definition with id "${ue}" is duplicated.`);o.add(ue),a[q]=ue,i.set(ue,q)}const u=Object.freeze([...a]),f=Ow(i),m=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT*7*Math.max(1,r)),h=r*Float64Array.BYTES_PER_ELEMENT,p=new Float64Array(m,0*h,r),g=new Float64Array(m,1*h,r),v=new Float64Array(m,2*h,r),b=new Float64Array(m,3*h,r),T=new Float64Array(m,4*h,r),w=new Float64Array(m,5*h,r),S=new Float64Array(m,6*h,r),A=new Uint8Array(r),_=[yv(r),yv(r)],C=new Uint32Array(r),N=new Int32Array(r);N.fill(Vc);const M={ids:u,indexById:f,amounts:p,capacities:g,incomePerSecond:v,expensePerSecond:b,netPerSecond:T,tickDelta:w,flags:A,dirtyTolerance:S,publish:_,dirtyIndexScratch:C,dirtyIndexPositions:N};_w(M,n);const $={buffers:M,activePublishIndex:0,dirtyIndexCount:0,publishGuardState:Tn.Idle,definitionDigest:rm(u)},B=kw($);return fE.set(B,$),B}function gv(n,r,a){const i=fE.get(n);if(i===void 0)throw J.recordError("ResourceStateInternalUnavailable"),new Error("ResourceState internals are unavailable for the provided instance.");Mw(i,r,a)}function _w(n,r){const{amounts:a,capacities:i,incomePerSecond:o,expensePerSecond:u,netPerSecond:f,tickDelta:m,flags:h,dirtyTolerance:p,publish:g}=n,v=g[0],b=g[1],{resources:T}=Tw(r);for(let w=0;w<T.length;w+=1){const S=T[w];a[w]=S.amount,i[w]=S.capacity,o[w]=0,u[w]=0,f[w]=S.netPerSecond,m[w]=0,h[w]=S.flags,p[w]=S.dirtyTolerance,v.amounts[w]=S.amount,v.capacities[w]=S.capacity,v.incomePerSecond[w]=0,v.expensePerSecond[w]=0,v.netPerSecond[w]=S.netPerSecond,v.tickDelta[w]=0,v.flags[w]=S.flags&~qt,v.dirtyTolerance[w]=S.dirtyTolerance,b.amounts[w]=S.amount,b.capacities[w]=S.capacity,b.incomePerSecond[w]=0,b.expensePerSecond[w]=0,b.netPerSecond[w]=S.netPerSecond,b.tickDelta[w]=0,b.flags[w]=S.flags&~qt,b.dirtyTolerance[w]=S.dirtyTolerance}v.dirtyCount=0,b.dirtyCount=0}function Tw(n){return{resources:n.map((a,i)=>{const o=a.startAmount??0,u=a.capacity??Number.POSITIVE_INFINITY,f=a.unlocked??!0,m=a.visible??!0,h=a.dirtyTolerance??wm;if(!Number.isFinite(o))throw J.recordError("ResourceDefinitionInvalidStartAmount",{id:a.id,value:o}),new Error(`Resource definition "${a.id}" has a non-finite startAmount.`);let p;if(u===null)p=Number.POSITIVE_INFINITY;else if(typeof u=="number"){if(Number.isNaN(u)||u<0)throw J.recordError("ResourceDefinitionInvalidCapacity",{id:a.id,value:u}),new Error(`Resource definition "${a.id}" has an invalid capacity.`);p=u}else p=Number.POSITIVE_INFINITY;let g=o;g<0&&(J.recordWarning("ResourceInitialAmountClampLow",{id:a.id,value:g}),g=0),g>p&&(J.recordWarning("ResourceInitialAmountClampHigh",{id:a.id,value:g,capacity:p}),g=p);const v=ww(h,a.id),b=(m?Cc:0)|(f?Nc:0);return{amount:g,capacity:p,flags:b,netPerSecond:0,dirtyTolerance:v}})}}function ww(n,r){return Number.isFinite(n)?n<Ci?Ci:n>hv?(J.recordWarning("ResourceDirtyToleranceClamped",{resourceId:r,value:n}),hv):n:wm}function yv(n){const r=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT*7*Math.max(1,n)),a=n*Float64Array.BYTES_PER_ELEMENT,i=new Float64Array(r,0*a,n),o=new Float64Array(r,1*a,n),u=new Float64Array(r,2*a,n),f=new Float64Array(r,3*a,n),m=new Float64Array(r,4*a,n),h=new Float64Array(r,5*a,n),p=new Float64Array(r,6*a,n),g=new Uint8Array(n),v=new Uint32Array(n);return{amounts:i,capacities:o,incomePerSecond:u,expensePerSecond:f,netPerSecond:m,tickDelta:h,flags:g,dirtyTolerance:p,dirtyIndices:v,dirtyCount:0}}function Ow(n){const r=new Map(n);return new Proxy(r,{get(a,i,o){if(i==="set"||i==="delete"||i==="clear")return()=>{throw new Error("ResourceState index map is immutable once created.")};const u=Reflect.get(a,i,o);return typeof u=="function"?u.bind(a):u}})}function kw(n){const{buffers:r}=n;return{getIndex:a=>n.buffers.indexById.get(a),requireIndex:a=>Aw(n,a),getAmount:a=>(_n(n,a),r.amounts[a]),getCapacity:a=>(_n(n,a),r.capacities[a]),getNetPerSecond:a=>(_n(n,a),r.netPerSecond[a]),isUnlocked:a=>(_n(n,a),(r.flags[a]&Nc)!==0),isVisible:a=>(_n(n,a),(r.flags[a]&Cc)!==0),grantVisibility:a=>{Ev(n,a,Cc)},unlock:a=>{Ev(n,a,Nc)},setCapacity:(a,i)=>Rw(n,a,i),addAmount:(a,i)=>Cw(n,a,i),spendAmount:(a,i,o)=>Nw(n,a,i,o),applyIncome:(a,i)=>vv(n,a,i,"income"),applyExpense:(a,i)=>vv(n,a,i,"expense"),finalizeTick:a=>Iw(n,a),resetPerTickAccumulators:()=>xw(n),forceClearDirtyState:()=>zw(n),clearDirtyScratch:()=>dE(n),snapshot:a=>Dw(n,a??{}),exportForSave:a=>Pw(n,a),getDefinitionDigest:()=>n.definitionDigest}}function Aw(n,r){const a=n.buffers.indexById.get(r);if(a===void 0)throw J.recordError("ResourceUnknownId",{id:r}),new Error(`Resource with id "${r}" does not exist.`);return a}function _n(n,r){if(!Number.isInteger(r)||r<0||r>=n.buffers.ids.length)throw J.recordError("ResourceIndexViolation",{index:r}),new Error(`Resource index ${r} is out of bounds.`)}function Rw(n,r,a){if(_n(n,r),(Number.isNaN(a)||a<0)&&a!==Number.POSITIVE_INFINITY)throw J.recordError("ResourceCapacityInvalidInput",{index:r,value:a}),new Error("Capacity must be a finite, non-negative number or Infinity.");const{buffers:i}=n,o=a===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:a,u=i.capacities[r];Object.is(u,o)||Pr(n,i.capacities,m=>m.capacities,r,o,"capacity");const f=i.amounts[r];if(f>o){const m=o,h=m-f;Pr(n,i.amounts,p=>p.amounts,r,m,"amount"),Hc(n,r,h)}return i.capacities[r]}function Cw(n,r,a){if(_n(n,r),!Number.isFinite(a))throw J.recordError("ResourceAddAmountNonFinite",{index:r,amount:a}),new Error("addAmount requires a finite input.");if(a<0)throw J.recordError("ResourceAddAmountNegativeInput",{index:r,amount:a}),new Error("addAmount cannot receive a negative value.");if(a===0)return 0;const{buffers:i}=n,o=i.amounts[r],u=i.capacities[r],f=o+a,m=Math.min(f,u),h=m-o;return h===0?0:(Pr(n,i.amounts,p=>p.amounts,r,m,"amount"),Hc(n,r,h),h)}function Nw(n,r,a,i){if(_n(n,r),!Number.isFinite(a))throw J.recordError("ResourceSpendAmountNonFinite",{index:r,amount:a}),new Error("spendAmount requires a finite input.");if(a<0)throw J.recordError("ResourceSpendAmountNegativeInput",{index:r,amount:a}),new Error("spendAmount cannot receive a negative value.");if(a===0)return!0;const{buffers:o}=n,u=o.amounts[r];if(u<a)return J.recordWarning("ResourceSpendFailed",{index:r,amount:a,available:u,commandId:i?.commandId,systemId:i?.systemId}),!1;const f=u-a;return Pr(n,o.amounts,m=>m.amounts,r,f,"amount"),Hc(n,r,-a),!0}function Mw(n,r,a){if(_n(n,r),!Number.isFinite(a))throw J.recordError("ResourceWriteAmountDirectNonFinite",{index:r,amount:a}),new Error("writeAmountDirect requires a finite amount.");Pr(n,n.buffers.amounts,i=>i.amounts,r,a,"amount")}function vv(n,r,a,i){if(_n(n,r),!Number.isFinite(a)||a<0)throw J.recordError("ResourceRateInvalidInput",{index:r,amountPerSecond:a,field:i}),new Error(`${i} amount must be a finite, non-negative value.`);if(a===0)return;const{buffers:o}=n,u=i==="income"?o.incomePerSecond:o.expensePerSecond,f=i==="income"?"incomePerSecond":"expensePerSecond",m=u[r]+a;Pr(n,u,h=>i==="income"?h.incomePerSecond:h.expensePerSecond,r,m,f)}function Iw(n,r){if(!Number.isFinite(r)||r<0)throw J.recordError("ResourceFinalizeInvalidDelta",{deltaMs:r}),new Error("finalizeTick requires a finite, non-negative deltaMs.");const{buffers:a}=n,i=r/1e3,o=a.ids.length;for(let u=0;u<o;u+=1){const f=a.incomePerSecond[u],m=a.expensePerSecond[u],h=a.amounts[u],p=a.capacities[u],g=f*i,v=m*i,b=g-v,T=Jw(h+b,p),w=T-h;Object.is(h,T)||Pr(n,a.amounts,A=>A.amounts,u,T,"amount"),w!==0&&Hc(n,u,w);const S=f-m;Pr(n,a.netPerSecond,A=>A.netPerSecond,u,S,"netPerSecond")}n.publishGuardState=Tn.Finalized}function xw(n){if(n.publishGuardState!==Tn.Published)throw J.recordError("ResourceResetOutOfOrder"),new Error("resetPerTickAccumulators requires a publish snapshot before clearing.");const{buffers:r}=n;r.incomePerSecond.fill(0),r.expensePerSecond.fill(0),r.tickDelta.fill(0),n.publishGuardState=Tn.Idle}function dE(n){n.dirtyIndexCount=0,n.buffers.dirtyIndexPositions.fill(Vc);const{flags:r}=n.buffers;for(let a=0;a<r.length;a+=1)r[a]&=~qt}function zw(n){const r=n.dirtyIndexCount,a=n.publishGuardState;dE(n),n.buffers.incomePerSecond.fill(0),n.buffers.expensePerSecond.fill(0),n.buffers.tickDelta.fill(0),n.publishGuardState=Tn.Idle,J.recordProgress(vw,{dirtyCountBefore:r,publishGuardState:Lw(a)})}function Lw(n){switch(n){case Tn.Idle:return"idle";case Tn.Finalized:return"finalized";case Tn.Published:return"published";default:return"idle"}}function Dw(n,r){return r.mode==="recorder"?Uw(n):jw(n)}function Uw(n){const{buffers:r}=n,a=r.ids.length,i=u=>{const f=u.constructor,m=new f(u.length);return m.set(u),m},o=new Uint32Array(a);return o.set(r.dirtyIndexScratch.subarray(0,n.dirtyIndexCount)),{ids:r.ids,amounts:i(r.amounts),capacities:i(r.capacities),incomePerSecond:i(r.incomePerSecond),expensePerSecond:i(r.expensePerSecond),netPerSecond:i(r.netPerSecond),tickDelta:i(r.tickDelta),flags:i(r.flags),dirtyTolerance:i(r.dirtyTolerance),dirtyIndices:o,dirtyCount:n.dirtyIndexCount}}function jw(n){const{buffers:r}=n,a=r.publish[n.activePublishIndex],i=n.activePublishIndex^1,o=r.publish[i],u=[],f=h=>r.dirtyIndexPositions[h]===pv?!1:(u.push(h),r.dirtyIndexPositions[h]=pv,!0);for(let h=0;h<a.dirtyCount;h+=1){const p=a.dirtyIndices[h];f(p)&&(o.tickDelta[p]=0)}for(let h=0;h<n.dirtyIndexCount;h+=1){const p=r.dirtyIndexScratch[h];f(p)&&(o.tickDelta[p]=0)}for(let h=0;h<a.dirtyCount;h+=1){const p=a.dirtyIndices[h];is(o.amounts,a.amounts,p),is(o.capacities,a.capacities,p),is(o.incomePerSecond,a.incomePerSecond,p),is(o.expensePerSecond,a.expensePerSecond,p),is(o.netPerSecond,a.netPerSecond,p),o.flags[p]=a.flags[p]&~qt,is(o.dirtyTolerance,a.dirtyTolerance,p)}const m=$w(n,a,o);o.dirtyCount=m;for(const h of u)r.dirtyIndexPositions[h]=Vc;return n.dirtyIndexCount=0,n.activePublishIndex=i,bv(r.flags,u),bv(o.flags,u),n.publishGuardState=Tn.Published,{ids:r.ids,amounts:sr(o.amounts),capacities:sr(o.capacities),incomePerSecond:sr(o.incomePerSecond),expensePerSecond:sr(o.expensePerSecond),netPerSecond:sr(o.netPerSecond),tickDelta:sr(o.tickDelta),flags:sr(o.flags),dirtyTolerance:sr(o.dirtyTolerance),dirtyIndices:sr(o.dirtyIndices),dirtyCount:o.dirtyCount}}function is(n,r,a){n[a]=r[a]}function $w(n,r,a){let i=0;for(let o=0;o<n.dirtyIndexCount;o+=1){const u=n.buffers.dirtyIndexScratch[o];Bw(n,r,u)&&(qw(n,a,u),a.dirtyIndices[i]=u,i+=1)}return i}function Bw(n,r,a){const i=n.buffers.dirtyTolerance[a],{buffers:o}=n;if(!_t(o.amounts[a],r.amounts[a],i,Bt(n,a,"amount",i))||!_t(o.capacities[a],r.capacities[a],i,Bt(n,a,"capacity",i))||!_t(o.incomePerSecond[a],r.incomePerSecond[a],i,Bt(n,a,"incomePerSecond",i))||!_t(o.expensePerSecond[a],r.expensePerSecond[a],i,Bt(n,a,"expensePerSecond",i))||!_t(o.netPerSecond[a],r.netPerSecond[a],i,Bt(n,a,"netPerSecond",i))||!_t(o.tickDelta[a],r.tickDelta[a],i,Bt(n,a,"tickDelta",i))||!_t(o.dirtyTolerance[a],r.dirtyTolerance[a],Ci))return!0;const u=o.flags[a]&~qt,f=r.flags[a]&~qt;return u!==f}function qw(n,r,a){const{buffers:i}=n;r.amounts[a]=i.amounts[a],r.capacities[a]=i.capacities[a],r.incomePerSecond[a]=i.incomePerSecond[a],r.expensePerSecond[a]=i.expensePerSecond[a],r.netPerSecond[a]=i.netPerSecond[a],r.tickDelta[a]=i.tickDelta[a],r.flags[a]=i.flags[a]&~qt,r.dirtyTolerance[a]=i.dirtyTolerance[a]}function bv(n,r){for(const a of r)n[a]&=~qt}function Pw(n,r){const{buffers:a}=n,i=a.ids.length,o=new Array(i),u=new Array(i),f=new Array(i),m=new Array(i),h=new Array(i);for(let g=0;g<i;g+=1)o[g]=a.amounts[g],u[g]=a.capacities[g]===Number.POSITIVE_INFINITY?null:a.capacities[g],f[g]=a.flags[g],m[g]=(a.flags[g]&Nc)!==0,h[g]=(a.flags[g]&Cc)!==0;const p={ids:a.ids,amounts:o,capacities:u,unlocked:m,visible:h,flags:f,definitionDigest:n.definitionDigest};if(r&&r.size>0){const g=Array.from(r.values()).map(v=>({id:v.id,enabled:v.enabled,lastFiredStep:Number.isFinite(v.lastFiredStep)?v.lastFiredStep:null,cooldownExpiresStep:v.cooldownExpiresStep,unlocked:v.unlocked,lastThresholdSatisfied:v.lastThresholdSatisfied}));return{...p,automationState:g}}return p}function Gw(n,r){const a=n.ids.length;bi("amounts",n.amounts.length,a),bi("capacities",n.capacities.length,a),bi("flags",n.flags.length,a),n.unlocked!==void 0&&bi("unlocked",n.unlocked.length,a),n.visible!==void 0&&bi("visible",n.visible.length,a),Vw(n.ids),n.definitionDigest==null&&J.recordWarning(hn,{reason:"missing-digest",ids:n.ids,recovery:"reconstructed"});const i=n.definitionDigest??rm(n.ids);Hw(i,n.ids),Yw(n,a);const{liveIds:o,indexById:u}=Zw(r),f=[],m=[],h=new Set,p=new Map;for(let T=0;T<a;T+=1){const w=n.ids[T],S=p.get(w);if(S!==void 0)throw J.recordError(hn,{reason:"duplicate-id",id:w,firstIndex:S,duplicateIndex:T}),new Error(`Serialized resource id "${w}" appears multiple times.`);h.add(w),p.set(w,T);const A=u.get(w);if(A===void 0){m.push(w);continue}f.push(A)}const g=o.filter(T=>!h.has(T)),v=rm(o),b=i.hash===v.hash&&i.version===v.version;if(m.length>0)throw J.recordError(zf,{addedIds:g,removedIds:m,expectedDigest:v,receivedDigest:i}),new Error("Serialized resource definitions are incompatible with live definitions.");return g.length>0&&J.recordProgress(zf,{addedIds:g,removedIds:m,expectedDigest:v,receivedDigest:i,reason:"definitions-added"}),b||J.recordProgress(zf,{addedIds:g,removedIds:m,expectedDigest:v,receivedDigest:i,reason:"digest-mismatch"}),{remap:Object.freeze(f),addedIds:Object.freeze(g),removedIds:Object.freeze(m),digestsMatch:b}}function bi(n,r,a){if(r!==a)throw J.recordError(bw,{field:n,expected:a,actual:r}),new Error(`Serialized resource state field "${n}" length (${r}) does not match ids length (${a}).`)}function Vw(n){for(let r=0;r<n.length;r+=1){const a=n[r];if(typeof a!="string"||a.length===0)throw J.recordError(hn,{reason:"invalid-id",index:r,value:a}),new Error("Serialized resource ids must be non-empty strings.")}}function Hw(n,r){if(!Number.isInteger(n.version)||n.version<0)throw J.recordError(hn,{reason:"invalid-digest-version",version:n.version}),new Error("Serialized resource digest has an invalid version.");if(n.version!==r.length)throw J.recordError(hn,{reason:"digest-version-mismatch",version:n.version,idsLength:r.length}),new Error("Serialized resource digest version does not match saved ids length.");if(!Xw(n.ids,r))throw J.recordError(hn,{reason:"digest-ids-mismatch",digestIds:n.ids,ids:r}),new Error("Serialized resource digest ids diverge from the saved ids.");const a=mE(r);if(n.hash!==a)throw J.recordError(hn,{reason:"digest-hash-mismatch",digestHash:n.hash,expectedHash:a}),new Error(`Serialized resource digest hash mismatch: expected "${a}" but got "${n.hash}". This may indicate a corrupted or tampered save file.`)}function Yw(n,r){for(let a=0;a<r;a+=1){const i=n.amounts[a];if(!Number.isFinite(i))throw J.recordError(hn,{reason:"invalid-amount",index:a,value:i}),new Error("Serialized resource amounts must be finite numbers.");const o=n.capacities[a];if(o!==null&&(!Number.isFinite(o)||o<0))throw J.recordError(hn,{reason:"invalid-capacity",index:a,value:o}),new Error("Serialized resource capacities must be null or finite, non-negative numbers.");const u=n.flags[a];if(!Number.isInteger(u)||u<0||u>255)throw J.recordError(hn,{reason:"invalid-flag",index:a,value:u}),new Error("Serialized resource flags must be integers between 0 and 255.");if(n.unlocked!==void 0){const f=n.unlocked[a];if(typeof f!="boolean")throw J.recordError(hn,{reason:"invalid-unlocked",index:a,value:f}),new Error("Serialized resource unlocked values must be boolean when provided.")}if(n.visible!==void 0){const f=n.visible[a];if(typeof f!="boolean")throw J.recordError(hn,{reason:"invalid-visible",index:a,value:f}),new Error("Serialized resource visible values must be boolean when provided.")}}}function Zw(n){const r=new Array(n.length),a=new Map,i=new Set;for(let o=0;o<n.length;o+=1){const f=n[o]?.id;if(!f)throw J.recordError("ResourceDefinitionMissingId",{index:o}),new Error(`Resource definition at index ${o} is missing an id.`);if(i.has(f))throw J.recordError("ResourceDefinitionDuplicateId",{id:f}),new Error(`Resource definition with id "${f}" is duplicated.`);i.add(f),r[o]=f,a.set(f,o)}return{liveIds:r,indexById:a}}function Xw(n,r){if(n===r)return!0;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a+=1)if(n[a]!==r[a])return!1;return!0}function Pr(n,r,a,i,o,u){const f=r[i];Object.is(f,o)||(r[i]=o,Om(n,i,o,a(n.buffers.publish[n.activePublishIndex])[i],u))}function Ev(n,r,a,i){_n(n,r);const{buffers:o}=n,u=o.flags[r],f=u|a;if(u===f)return;o.flags[r]=f;const m=n.buffers.publish[n.activePublishIndex].flags[r];Om(n,r,f&~qt,m&~qt,"flags")}function Bt(n,r,a,i){const o=n.buffers.ids[r];if(o!==void 0)return{resourceId:o,field:a,hasOverride:!Object.is(i,wm)}}function Om(n,r,a,i,o){const u=n.buffers.dirtyTolerance[r];if(!_t(a,i,u,Bt(n,r,o,u))){Fw(n,r);return}Qw(n,r)}function Fw(n,r){const{buffers:a}=n,i=a.dirtyIndexPositions[r];if(a.flags[r]|=qt,i>=0)return;const o=n.dirtyIndexCount;a.dirtyIndexScratch[o]=r,a.dirtyIndexPositions[r]=o,n.dirtyIndexCount+=1}function Qw(n,r){if(!Kw(n,r))return;const{buffers:a}=n,i=a.dirtyIndexPositions[r];if(i>=0){const o=n.dirtyIndexCount-1,u=a.dirtyIndexScratch[o];a.dirtyIndexScratch[i]=u,a.dirtyIndexPositions[u]=i,a.dirtyIndexPositions[r]=Vc,n.dirtyIndexCount-=1}a.flags[r]&=~qt}function Kw(n,r){const a=n.buffers.publish[n.activePublishIndex],i=n.buffers.dirtyTolerance[r],{buffers:o}=n;return!(!_t(o.amounts[r],a.amounts[r],i,Bt(n,r,"amount",i))||!_t(o.capacities[r],a.capacities[r],i,Bt(n,r,"capacity",i))||!_t(o.incomePerSecond[r],a.incomePerSecond[r],i,Bt(n,r,"incomePerSecond",i))||!_t(o.expensePerSecond[r],a.expensePerSecond[r],i,Bt(n,r,"expensePerSecond",i))||!_t(o.netPerSecond[r],a.netPerSecond[r],i,Bt(n,r,"netPerSecond",i))||!_t(o.tickDelta[r],a.tickDelta[r],i,Bt(n,r,"tickDelta",i))||!_t(o.dirtyTolerance[r],a.dirtyTolerance[r],Ci)||(o.flags[r]&~qt)!==(a.flags[r]&~qt))}function Hc(n,r,a){if(a===0)return;const{buffers:i}=n,o=i.tickDelta[r],u=o+a,f=i.dirtyTolerance[r],m=Bt(n,r,"tickDelta",f),h=_t(u,0,f,m,{floorToleranceOverride:!1})?0:u;Object.is(o,h)||(i.tickDelta[r]=h,Om(n,r,h,n.buffers.publish[n.activePublishIndex].tickDelta[r],"tickDelta"))}function Jw(n,r){return n<0?0:n>r?r:n}function _t(n,r,a,i,o){if(Object.is(n,r))return!0;const u=Math.abs(n-r);if(Number.isNaN(u))return!1;const f=Math.max(Math.abs(n),Math.abs(r)),m=gw*f,h=Math.min(a,m),p=Math.max(Ci,h),g=i?.hasOverride===!0,b=o?.floorToleranceOverride??g?Math.max(p,a):p;return i?.hasOverride&&Number.isFinite(m)&&Number.isFinite(a)&&m>a&&J.recordWarning(yw,{resourceId:i.resourceId,field:i.field,difference:u,toleranceCeiling:a,relativeTolerance:m,magnitude:f}),u<=b}function rm(n){return{ids:n,version:n.length,hash:mE(n)}}function mE(n){let r=2166136261;for(const a of n){for(let i=0;i<a.length;i+=1)r^=a.charCodeAt(i),r=Math.imul(r,16777619),r>>>=0;r^=255,r=Math.imul(r,16777619),r>>>=0}return`fnv1a-${r.toString(16).padStart(8,"0")}`}function sr(n){return Ww()?Tm(n):n}function Ww(){const n=eO();return n==="force-on"?!0:n==="force-off"?!1:tO()!=="production"}function eO(){const r=globalThis.process?.env?.[Ew];return r==="force-on"||r==="force-off"||r==="auto"?r:"auto"}function tO(){return globalThis.process?.env?.NODE_ENV}const nO="automation";function rO(n){const{dispatcher:r,resources:a,generatorPurchases:i}=n,o=n.automationSystemId??nO;r.register(St.COLLECT_RESOURCE,aO(a)),r.register(St.PURCHASE_GENERATOR,sO(a,i,{automationSystemId:o})),n.upgradePurchases&&r.register(St.PURCHASE_UPGRADE,iO(a,n.upgradePurchases,{automationSystemId:o})),n.prestigeSystem&&r.register(St.PRESTIGE_RESET,oO(n.prestigeSystem))}function aO(n){return(r,a)=>{const i=n.requireIndex(r.resourceId),o=n.addAmount(i,r.amount);o!==r.amount&&J.recordWarning("ResourceCollectClamped",{command:St.COLLECT_RESOURCE,resourceId:r.resourceId,requested:r.amount,applied:o,step:a.step,priority:a.priority})}}function sO(n,r,a){const{automationSystemId:i}=a;return(o,u)=>{if(!cO(o.count)){J.recordError("GeneratorPurchaseInvalidCount",{generatorId:o.generatorId,count:o.count,step:u.step,priority:u.priority});return}const f=r.getPurchaseQuote(o.generatorId,o.count);if(!f){J.recordError("GeneratorPurchaseUnknown",{generatorId:o.generatorId,count:o.count,step:u.step,priority:u.priority});return}if(!Array.isArray(f.costs)||f.costs.length===0){J.recordError("GeneratorPurchaseInvalidQuote",{generatorId:o.generatorId,count:o.count,reason:"costs-empty"});return}const m={commandId:St.PURCHASE_GENERATOR,systemId:u.priority===At.AUTOMATION?i:void 0},h=[];for(const p of f.costs){if(!hE(p.amount)){J.recordError("GeneratorPurchaseInvalidQuote",{generatorId:o.generatorId,count:o.count,reason:"cost-invalid",resourceId:p.resourceId,amount:p.amount}),qr(n,m,h);return}let g;try{g=n.requireIndex(p.resourceId)}catch(b){throw qr(n,m,h),b}if(p.amount===0)continue;if(!n.spendAmount(g,p.amount,m)){J.recordWarning("InsufficientResources",{generatorId:o.generatorId,resourceId:p.resourceId,required:p.amount,count:o.count,step:u.step,priority:u.priority}),qr(n,m,h);return}h.push({index:g,amount:p.amount})}try{r.applyPurchase(o.generatorId,o.count)}catch(p){throw J.recordError("GeneratorPurchaseApplyFailed",{generatorId:o.generatorId,count:o.count,message:p instanceof Error?p.message:String(p)}),qr(n,m,h),p}}}function iO(n,r,a){const{automationSystemId:i}=a;return(o,u)=>{if(typeof o.upgradeId!="string"||o.upgradeId.trim().length===0){J.recordError("UpgradePurchaseInvalidId",{upgradeId:o.upgradeId,step:u.step,priority:u.priority});return}const f=o.upgradeId.trim(),m=r.getPurchaseQuote(f);if(!m){J.recordError("UpgradePurchaseUnknown",{upgradeId:f,step:u.step,priority:u.priority});return}if(m.status==="purchased"){J.recordWarning("UpgradePurchaseAlreadyOwned",{upgradeId:f,step:u.step,priority:u.priority});return}if(m.status==="locked"){J.recordWarning("UpgradePurchaseLocked",{upgradeId:f,step:u.step,priority:u.priority});return}if(!Array.isArray(m.costs)){J.recordError("UpgradePurchaseInvalidQuote",{upgradeId:f,reason:"costs-missing"});return}const h={commandId:St.PURCHASE_UPGRADE,systemId:u.priority===At.AUTOMATION?i:void 0},p=[];for(const g of m.costs){if(!hE(g.amount)){J.recordError("UpgradePurchaseInvalidQuote",{upgradeId:f,reason:"cost-invalid",resourceId:g.resourceId,amount:g.amount}),qr(n,h,p);return}if(g.amount===0)continue;let v;try{v=n.requireIndex(g.resourceId)}catch(T){throw qr(n,h,p),T}if(!n.spendAmount(v,g.amount,h)){J.recordWarning("UpgradePurchaseDenied",{upgradeId:f,resourceId:g.resourceId,required:g.amount,step:u.step,priority:u.priority,reason:"insufficient-resources"}),qr(n,h,p);return}p.push({index:v,amount:g.amount})}try{r.applyPurchase(f,{metadata:o.metadata})}catch(g){throw J.recordError("UpgradePurchaseApplyFailed",{upgradeId:f,message:g instanceof Error?g.message:String(g)}),qr(n,h,p),g}J.recordProgress("UpgradePurchaseConfirmed",{upgradeId:f,step:u.step,priority:u.priority})}}function oO(n){return(r,a)=>{if(typeof r.layerId!="string"||r.layerId.trim().length===0){J.recordError("PrestigeResetInvalidLayer",{layerId:r.layerId,step:a.step,priority:a.priority});return}const i=r.layerId.trim(),o=n.getPrestigeQuote(i);if(!o){J.recordError("PrestigeResetUnknown",{layerId:i,step:a.step,priority:a.priority});return}if(o.status==="locked"){J.recordWarning("PrestigeResetLocked",{layerId:i,step:a.step,priority:a.priority});return}try{n.applyPrestige(i,r.confirmationToken)}catch(u){throw J.recordError("PrestigeResetApplyFailed",{layerId:i,message:u instanceof Error?u.message:String(u),step:a.step,priority:a.priority}),u}J.recordProgress("PrestigeResetConfirmed",{layerId:i,step:a.step,priority:a.priority})}}function qr(n,r,a){if(a.length!==0)for(let i=a.length-1;i>=0;i-=1){const{index:o,amount:u}=a[i],f=n.addAmount(o,u);f!==u&&J.recordError("GeneratorPurchaseRefundMismatch",{index:o,attempted:u,applied:f,commandId:r.commandId})}}function cO(n){return Number.isInteger(n)&&n>0}function hE(n){return Number.isFinite(n)&&n>=0}const wt=Object.freeze([]),uO=1,lO=2;function Sv(n,r,a){const i=a?.stepDurationMs??100,o=fO(i,a?.resources),u=dO(n,a?.generators,a?.generatorPurchases),f=mO(a?.upgrades,a?.upgradePurchases),m=vO(a?.prestigeLayers,a?.prestigeSystem);return Object.freeze({step:n,publishedAt:r,resources:o,generators:u,upgrades:f,prestigeLayers:m})}function fO(n,r){if(!r)return wt;if(r.state){const a=r.state.snapshot({mode:"publish"}),i=[];for(let o=0;o<a.ids.length;o+=1){const u=a.ids[o],f=r.metadata?.get(u)?.displayName??u,m=r.state.getCapacity(o),h=Number.isFinite(m)&&m>=0?m:void 0,g=r.state.getNetPerSecond(o)*(n/1e3),v=Object.freeze({id:u,displayName:f,amount:a.amounts[o]??0,isUnlocked:r.state.isUnlocked(o),isVisible:r.state.isVisible(o),...h!==void 0?{capacity:h}:{},perTick:g});i.push(v)}return Object.freeze(i)}if(r.serialized){const{serialized:a}=r,i=[];for(let o=0;o<a.ids.length;o+=1){const u=a.ids[o],f=r.metadata?.get(u)?.displayName??u,m=a.capacities[o]??void 0,h=m??void 0,p=a.unlocked?.[o]??((a.flags[o]??0)&lO)!==0,g=a.visible?.[o]??((a.flags[o]??0)&uO)!==0,v=Object.freeze({id:u,displayName:f,amount:a.amounts[o]??0,isUnlocked:!!p,isVisible:!!g,...h!==void 0?{capacity:h}:{},perTick:0});i.push(v)}return Object.freeze(i)}return wt}function dO(n,r,a){if(!r||r.length===0)return wt;const i=[];for(const o of r){const u=hO(a,o.id),f=_v(o.produces),m=_v(o.consumes),h=o.nextPurchaseReadyAtStep??n+1,p=Object.freeze({id:o.id,displayName:o.displayName??o.id,owned:Number.isFinite(o.owned)?o.owned:0,isUnlocked:!!o.isUnlocked,isVisible:!!o.isVisible,costs:u,produces:f,consumes:m,nextPurchaseReadyAtStep:h});i.push(p)}return Object.freeze(i)}function mO(n,r){if(!n||n.length===0)return wt;const a=[];for(const i of n){const o=gO(r,i.id),u=o?.costs??i.costs??wt,f=yO(u),m=o?.status??i.status??"locked",h=Object.freeze({id:i.id,displayName:i.displayName??i.id,status:m,costs:f.length>0?f:void 0,unlockHint:i.unlockHint,isVisible:!!i.isVisible});a.push(h)}return Object.freeze(a)}function _v(n){return!n||n.length===0?wt:Object.freeze(n.map(r=>Object.freeze({resourceId:r.resourceId,rate:Number.isFinite(r.rate)?r.rate:0})))}function hO(n,r){if(!n)return wt;let a;try{a=n.getPurchaseQuote(r,1)}catch{return wt}return!a||!Array.isArray(a.costs)?wt:pO(a.costs)}function pO(n){if(!n||n.length===0)return wt;const r=[];for(const a of n){if(typeof a.resourceId!="string")continue;const i=Number(a.amount);!Number.isFinite(i)||i<0||r.push(Object.freeze({resourceId:a.resourceId,amount:i}))}return r.length>0?Object.freeze(r):wt}function gO(n,r){if(n)try{return n.getPurchaseQuote(r)}catch{return}}function yO(n){if(!n||n.length===0)return wt;const r=[];for(const a of n){if(typeof a?.resourceId!="string")continue;const i=Number(a.amount);!Number.isFinite(i)||i<0||r.push(Object.freeze({resourceId:a.resourceId,amount:i}))}return r.length>0?Object.freeze(r):wt}function vO(n,r){if(!n||n.length===0)return wt;const a=[];for(const i of n){const o=bO(r,i.id),u=Object.freeze({id:i.id,displayName:i.displayName??i.id,summary:i.summary,status:o?.status??"locked",unlockHint:i.unlockHint,isVisible:!!i.isVisible,rewardPreview:o?.reward,resetTargets:o?.resetTargets??wt,retainedTargets:o?.retainedTargets??wt});a.push(u)}return Object.freeze(a)}function bO(n,r){if(n)try{return n.getPrestigeQuote(r)}catch{return}}var Lf={},cc={exports:{}},Sn={},Tv;function lr(){if(Tv)return Sn;Tv=1,Sn.getValueAsString=function(o){return Number.isNaN(o)?"Nan":Number.isFinite(o)?`${o}`:o<0?"-Inf":"+Inf"},Sn.removeLabels=function(o,u,f){const m=r(u,f);delete o[m]},Sn.setValue=function(o,u,f){const m=r(f);return o[m]={value:typeof u=="number"?u:0,labels:f||{}},o},Sn.setValueDelta=function(o,u,f,m=""){const h=typeof u=="number"?u:0;return o[m]?o[m].value+=h:o[m]={value:h,labels:f},o},Sn.getLabels=function(i,o){if(typeof o[0]=="object")return o[0];if(i.length!==o.length)throw new Error(`Invalid number of arguments (${o.length}): "${o.join(", ")}" for label names (${i.length}): "${i.join(", ")}".`);const u={};for(let f=0;f<i.length;f++)u[i[f]]=o[f];return u};function n(i,o){if(i.length===0)return"";let u="";for(let f=0;f<i.length;f++){const m=i[f],h=o[m];h!==void 0&&(u+=`${m}:${h},`)}return u}function r(i,o){if(o)return n(o,i);const u=Object.keys(i);return u.length>1&&u.sort(),n(u,i)}Sn.hashObject=r,Sn.isObject=function(o){return o!==null&&typeof o=="object"},Sn.nowTimestamp=function(){return Date.now()/1e3};class a extends Map{add(o,u){this.has(o)?this.get(o).push(u):this.set(o,[u])}}return Sn.Grouper=a,Sn}var wv;function Ni(){if(wv)return cc.exports;wv=1;const{getValueAsString:n}=lr();class r{static get PROMETHEUS_CONTENT_TYPE(){return"text/plain; version=0.0.4; charset=utf-8"}static get OPENMETRICS_CONTENT_TYPE(){return"application/openmetrics-text; version=1.0.0; charset=utf-8"}constructor(p=r.PROMETHEUS_CONTENT_TYPE){if(this._metrics={},this._collectors=[],this._defaultLabels={},p!==r.PROMETHEUS_CONTENT_TYPE&&p!==r.OPENMETRICS_CONTENT_TYPE)throw new TypeError(`Content type ${p} is unsupported`);this._contentType=p}getMetricsAsArray(){return Object.values(this._metrics)}async getMetricsAsString(p){const g=typeof p.getForPromString=="function"?await p.getForPromString():await p.get(),v=f(g.name),b=`# HELP ${v} ${f(g.help)}`,T=`# TYPE ${v} ${g.type}`,w=[b,T],S=Object.keys(this._defaultLabels).length>0?this._defaultLabels:null,A=this.contentType===r.OPENMETRICS_CONTENT_TYPE;for(const _ of g.values||[]){let{metricName:C=v,labels:N={}}=_;const{sharedLabels:M={}}=_;A&&g.type==="counter"&&(C=`${C}_total`),S&&(N={...N,...S,...N});const $=a(N,M),B=o(M),q=[...$,B].filter(Boolean),X=q.length?`{${q.join(",")}}`:"";let ue=`${C}${X} ${n(_.value)}`;const{exemplar:me}=_;if(me&&A){const ke=a(me.labelSet);ue+=` # {${ke.join(",")}} ${n(me.value)} ${me.timestamp}`}w.push(ue)}return w.join(`
`)}async metrics(){const p=this.contentType===r.OPENMETRICS_CONTENT_TYPE,g=this.getMetricsAsArray().map(b=>(p&&b.type==="counter"&&(b.name=m(b.name)),this.getMetricsAsString(b))),v=await Promise.all(g);return p?`${v.join(`
`)}
# EOF
`:`${v.join(`

`)}
`}registerMetric(p){if(this._metrics[p.name]&&this._metrics[p.name]!==p)throw new Error(`A metric with the name ${p.name} has already been registered.`);this._metrics[p.name]=p}clear(){this._metrics={},this._defaultLabels={}}async getMetricsAsJSON(){const p=[],g=Object.keys(this._defaultLabels),v=[];for(const T of this.getMetricsAsArray())v.push(T.get());const b=await Promise.all(v);for(const T of b){if(T.values&&g.length>0)for(const w of T.values){w.labels=Object.assign({},w.labels);for(const S of g)w.labels[S]=w.labels[S]||this._defaultLabels[S]}p.push(T)}return p}removeSingleMetric(p){delete this._metrics[p]}getSingleMetricAsString(p){return this.getMetricsAsString(this._metrics[p])}getSingleMetric(p){return this._metrics[p]}setDefaultLabels(p){this._defaultLabels=p}resetMetrics(){for(const p in this._metrics)this._metrics[p].reset()}get contentType(){return this._contentType}setContentType(p){if(p===r.OPENMETRICS_CONTENT_TYPE||p===r.PROMETHEUS_CONTENT_TYPE)this._contentType=p;else throw new Error(`Content type ${p} is unsupported`)}static merge(p){const g=p[0].contentType;for(const T of p)if(T.contentType!==g)throw new Error("Registers can only be merged if they have the same content type");const v=new r(g);return p.reduce((T,w)=>T.concat(w.getMetricsAsArray()),[]).forEach(v.registerMetric,v),v}}function a(h,p){const{hasOwnProperty:g}=Object.prototype,v=[];for(const[b,T]of Object.entries(h))(!p||!g.call(p,b))&&v.push(`${b}="${u(T)}"`);return v}const i=new WeakMap;function o(h){const p=i.get(h);if(p)return p;const v=a(h).join(",");return i.set(h,v),v}function u(h){return typeof h!="string"?h:f(h).replace(/"/g,'\\"')}function f(h){return h.replace(/\\/g,"\\\\").replace(/\n/g,"\\n")}function m(h){return h.replace(/_total$/,"")}return cc.exports=r,cc.exports.globalRegistry=new r,cc.exports}var Ei={};const EO={},SO=Object.freeze(Object.defineProperty({__proto__:null,default:EO},Symbol.toStringTag,{value:"Module"})),Tt=eE(SO);var Ov;function bs(){if(Ov)return Ei;Ov=1;const n=Tt,r=/^[a-zA-Z_:][a-zA-Z0-9_:]*$/,a=/^[a-zA-Z_][a-zA-Z0-9_]*$/;return Ei.validateMetricName=function(i){return r.test(i)},Ei.validateLabelName=function(i=[]){return i.every(o=>a.test(o))},Ei.validateLabel=function(o,u){for(const f in u)if(!o.includes(f))throw new Error(`Added label "${f}" is not included in initial labelset: ${n.inspect(o)}`)},Ei}var Df,kv;function Yc(){if(kv)return Df;kv=1;const n=Ni(),{isObject:r}=lr(),{validateMetricName:a,validateLabelName:i}=bs();class o{constructor(f,m={}){if(!r(f))throw new TypeError("constructor expected a config object");if(Object.assign(this,{labelNames:[],registers:[n.globalRegistry],aggregator:"sum",enableExemplars:!1},m,f),this.registers||(this.registers=[n.globalRegistry]),!this.help)throw new Error("Missing mandatory help parameter");if(!this.name)throw new Error("Missing mandatory name parameter");if(!a(this.name))throw new Error("Invalid metric name");if(!i(this.labelNames))throw new Error("Invalid label name");if(this.collect&&typeof this.collect!="function")throw new Error('Optional "collect" parameter must be a function');this.labelNames?this.sortedLabelNames=[...this.labelNames].sort():this.sortedLabelNames=[],this.reset();for(const h of this.registers){if(this.enableExemplars&&h.contentType===n.PROMETHEUS_CONTENT_TYPE)throw new TypeError("Exemplars are supported only on OpenMetrics registries");h.registerMetric(this)}}reset(){}}return Df={Metric:o},Df}var Uf,Av;function pE(){if(Av)return Uf;Av=1;class n{constructor(a={},i=null){this.labelSet=a,this.value=i}validateExemplarLabelSet(a){let i="";for(const[o,u]of Object.entries(a))i+=`${o}${u}`;if(i.length>128)throw new RangeError("Label set size must be smaller than 128 UTF-8 chars")}}return Uf=n,Uf}var jf,Rv;function gE(){if(Rv)return jf;Rv=1;const n=Tt,{hashObject:r,isObject:a,getLabels:i,removeLabels:o,nowTimestamp:u}=lr(),{validateLabel:f}=bs(),{Metric:m}=Yc(),h=pE();class p extends m{constructor(b){super(b),this.type="counter",this.defaultLabels={},this.defaultValue=1,this.defaultExemplarLabelSet={},b.enableExemplars?(this.enableExemplars=!0,this.inc=this.incWithExemplar):this.inc=this.incWithoutExemplar}incWithoutExemplar(b,T){let w="";if(a(b)?(w=r(b,this.sortedLabelNames),f(this.labelNames,b)):(T=b,b={}),T&&!Number.isFinite(T))throw new TypeError(`Value is not a valid number: ${n.format(T)}`);if(T<0)throw new Error("It is not possible to decrease a counter");return T==null&&(T=1),g(this.hashMap,T,b,w),{labelHash:w}}incWithExemplar({labels:b=this.defaultLabels,value:T=this.defaultValue,exemplarLabels:w=this.defaultExemplarLabelSet}={}){const S=this.incWithoutExemplar(b,T);this.updateExemplar(w,T,S.labelHash)}updateExemplar(b,T,w){b!==this.defaultExemplarLabelSet&&(a(this.hashMap[w].exemplar)||(this.hashMap[w].exemplar=new h),this.hashMap[w].exemplar.validateExemplarLabelSet(b),this.hashMap[w].exemplar.labelSet=b,this.hashMap[w].exemplar.value=T||1,this.hashMap[w].exemplar.timestamp=u())}reset(){this.hashMap={},this.labelNames.length===0&&g(this.hashMap,0)}async get(){if(this.collect){const b=this.collect();b instanceof Promise&&await b}return{help:this.help,name:this.name,type:this.type,values:Object.values(this.hashMap),aggregator:this.aggregator}}labels(...b){const T=i(this.labelNames,b)||{};return{inc:this.inc.bind(this,T)}}remove(...b){const T=i(this.labelNames,b)||{};return f(this.labelNames,T),o.call(this,this.hashMap,T,this.sortedLabelNames)}}function g(v,b,T={},w=""){return v[w]?v[w].value+=b:v[w]={value:b,labels:T},v}return jf=p,jf}var $f,Cv;function nn(){if(Cv)return $f;Cv=1;const n=Tt,{setValue:r,setValueDelta:a,getLabels:i,hashObject:o,isObject:u,removeLabels:f}=lr(),{validateLabel:m}=bs(),{Metric:h}=Yc();class p extends h{constructor(S){super(S),this.type="gauge"}set(S,A){A=T(S,A),S=b(S),g(this,S,A)}reset(){this.hashMap={},this.labelNames.length===0&&r(this.hashMap,0,{})}inc(S,A){A=T(S,A),S=b(S),A===void 0&&(A=1),v(this,S,A)}dec(S,A){A=T(S,A),S=b(S),A===void 0&&(A=1),v(this,S,-A)}setToCurrentTime(S){const A=Date.now()/1e3;S===void 0?this.set(A):this.set(S,A)}startTimer(S){const A=process.hrtime();return _=>{const C=process.hrtime(A),N=C[0]+C[1]/1e9;return this.set(Object.assign({},S,_),N),N}}async get(){if(this.collect){const S=this.collect();S instanceof Promise&&await S}return{help:this.help,name:this.name,type:this.type,values:Object.values(this.hashMap),aggregator:this.aggregator}}_getValue(S){const A=o(S||{},this.sortedLabelNames);return this.hashMap[A]?this.hashMap[A].value:0}labels(...S){const A=i(this.labelNames,S);return m(this.labelNames,A),{inc:this.inc.bind(this,A),dec:this.dec.bind(this,A),set:this.set.bind(this,A),setToCurrentTime:this.setToCurrentTime.bind(this,A),startTimer:this.startTimer.bind(this,A)}}remove(...S){const A=i(this.labelNames,S);m(this.labelNames,A),f.call(this,this.hashMap,A,this.sortedLabelNames)}}function g(w,S,A){if(typeof A!="number")throw new TypeError(`Value is not a valid number: ${n.format(A)}`);m(w.labelNames,S),r(w.hashMap,A,S)}function v(w,S,A){if(typeof A!="number")throw new TypeError(`Delta is not a valid number: ${n.format(A)}`);m(w.labelNames,S);const _=o(S,w.sortedLabelNames);a(w.hashMap,A,S,_)}function b(w){return u(w)?w:{}}function T(w,S){return u(w)?S:w}return $f=p,$f}var Bf,Nv;function yE(){if(Nv)return Bf;Nv=1;const n=Tt,{getLabels:r,hashObject:a,isObject:i,removeLabels:o,nowTimestamp:u}=lr(),{validateLabel:f}=bs(),{Metric:m}=Yc(),h=pE();class p extends m{constructor($){super($,{buckets:[.005,.01,.025,.05,.1,.25,.5,1,2.5,5,10]}),this.type="histogram",this.defaultLabels={},this.defaultExemplarLabelSet={},this.enableExemplars=!1;for(const B of this.labelNames)if(B==="le")throw new Error("le is a reserved label keyword");this.upperBounds=this.buckets,this.bucketValues=this.upperBounds.reduce((B,q)=>(B[q]=0,B),{}),$.enableExemplars?(this.enableExemplars=!0,this.bucketExemplars=this.upperBounds.reduce((B,q)=>(B[q]=null,B),{}),Object.freeze(this.bucketExemplars),this.observe=this.observeWithExemplar):this.observe=this.observeWithoutExemplar,Object.freeze(this.bucketValues),Object.freeze(this.upperBounds),this.labelNames.length===0&&(this.hashMap={[a({})]:S({},this.bucketValues,this.bucketExemplars)})}observeWithoutExemplar($,B){w.call(this,$===0?0:$||{})(B)}observeWithExemplar({labels:$=this.defaultLabels,value:B,exemplarLabels:q=this.defaultExemplarLabelSet}={}){w.call(this,$===0?0:$||{})(B),this.updateExemplar($,B,q)}updateExemplar($,B,q){if(Object.keys(q).length===0)return;const X=a($,this.sortedLabelNames),ue=T(this.upperBounds,B),{bucketExemplars:me}=this.hashMap[X];let ke=me[ue];i(ke)||(ke=new h,me[ue]=ke),ke.validateExemplarLabelSet(q),ke.labelSet=q,ke.value=B,ke.timestamp=u()}async get(){const $=await this.getForPromString();return $.values=$.values.map(N),$}async getForPromString(){if(this.collect){const q=this.collect();q instanceof Promise&&await q}const B=Object.values(this.hashMap).map(_(this)).reduce(C(this),[]);return{name:this.name,help:this.help,type:this.type,values:B,aggregator:this.aggregator}}reset(){this.hashMap={}}zero($){const B=a($,this.sortedLabelNames);this.hashMap[B]=S($,this.bucketValues,this.bucketExemplars)}startTimer($,B){return this.enableExemplars?v.call(this,$,B)():g.call(this,$)()}labels(...$){const B=r(this.labelNames,$);return f(this.labelNames,B),{observe:w.call(this,B),startTimer:g.call(this,B)}}remove(...$){const B=r(this.labelNames,$);f(this.labelNames,B),o.call(this,this.hashMap,B,this.sortedLabelNames)}}function g(M){return()=>{const $=process.hrtime();return B=>{const q=process.hrtime($),X=q[0]+q[1]/1e9;return this.observe(Object.assign({},M,B),X),X}}}function v(M,$){return()=>{const B=process.hrtime();return(q,X)=>{const ue=process.hrtime(B),me=ue[0]+ue[1]/1e9;return this.observe({labels:Object.assign({},M,q),value:me,exemplarLabels:Object.assign({},$,X)}),me}}}function b(M,$,B,q,X={}){return{labels:M,sharedLabels:X,value:$,metricName:B,exemplar:q}}function T(M,$){for(let B=0;B<M.length;B++){const q=M[B];if($<=q)return q}return-1}function w(M){return $=>{const B=A(M,$);if(f(this.labelNames,B.labels),!Number.isFinite(B.value))throw new TypeError(`Value is not a valid number: ${n.format(B.value)}`);const q=a(B.labels,this.sortedLabelNames);let X=this.hashMap[q];X||(X=S(B.labels,this.bucketValues,this.bucketExemplars));const ue=T(this.upperBounds,B.value);X.sum+=B.value,X.count+=1,Object.prototype.hasOwnProperty.call(X.bucketValues,ue)&&(X.bucketValues[ue]+=1),this.hashMap[q]=X}}function S(M,$,B){const q={labels:M,bucketValues:{...$},sum:0,count:0};return B&&(q.bucketExemplars={...B}),q}function A(M,$){return i(M)?{labels:M,value:$}:{value:M,labels:{}}}function _(M){const $=`${M.name}_bucket`;return B=>{let q=0;return{buckets:M.upperBounds.map(ue=>(q+=B.bucketValues[ue],b({le:ue},q,$,B.bucketExemplars?B.bucketExemplars[ue]:null,B.labels))),data:B}}}function C(M){return($,B)=>{$.push(...B.buckets);const q={le:"+Inf"};return $.push(b(q,B.data.count,`${M.name}_bucket`,B.data.bucketExemplars?B.data.bucketExemplars[-1]:null,B.data.labels),b({},B.data.sum,`${M.name}_sum`,void 0,B.data.labels),b({},B.data.count,`${M.name}_count`,void 0,B.data.labels)),$}}function N(M){const{sharedLabels:$,labels:B,...q}=M;for(const X of Object.keys($))B[X]=$[X];return q.labels=B,q}return Bf=p,Bf}var qf,Mv;function vE(){if(Mv)return qf;Mv=1;function n(){}n.prototype.clear=function(){this._root=null,this.size=0},n.prototype.find=function(a){for(var i=this._root;i!==null;){var o=this._comparator(a,i.data);if(o===0)return i.data;i=i.get_child(o>0)}return null},n.prototype.findIter=function(a){for(var i=this._root,o=this.iterator();i!==null;){var u=this._comparator(a,i.data);if(u===0)return o._cursor=i,o;o._ancestors.push(i),i=i.get_child(u>0)}return null},n.prototype.lowerBound=function(a){for(var i=this._root,o=this.iterator(),u=this._comparator;i!==null;){var f=u(a,i.data);if(f===0)return o._cursor=i,o;o._ancestors.push(i),i=i.get_child(f>0)}for(var m=o._ancestors.length-1;m>=0;--m)if(i=o._ancestors[m],u(a,i.data)<0)return o._cursor=i,o._ancestors.length=m,o;return o._ancestors.length=0,o},n.prototype.upperBound=function(a){for(var i=this.lowerBound(a),o=this._comparator;i.data()!==null&&o(i.data(),a)===0;)i.next();return i},n.prototype.min=function(){var a=this._root;if(a===null)return null;for(;a.left!==null;)a=a.left;return a.data},n.prototype.max=function(){var a=this._root;if(a===null)return null;for(;a.right!==null;)a=a.right;return a.data},n.prototype.iterator=function(){return new r(this)},n.prototype.each=function(a){for(var i=this.iterator(),o;(o=i.next())!==null;)if(a(o)===!1)return},n.prototype.reach=function(a){for(var i=this.iterator(),o;(o=i.prev())!==null;)if(a(o)===!1)return};function r(a){this._tree=a,this._ancestors=[],this._cursor=null}return r.prototype.data=function(){return this._cursor!==null?this._cursor.data:null},r.prototype.next=function(){if(this._cursor===null){var a=this._tree._root;a!==null&&this._minNode(a)}else if(this._cursor.right===null){var i;do if(i=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===i)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return this._cursor!==null?this._cursor.data:null},r.prototype.prev=function(){if(this._cursor===null){var a=this._tree._root;a!==null&&this._maxNode(a)}else if(this._cursor.left===null){var i;do if(i=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===i)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return this._cursor!==null?this._cursor.data:null},r.prototype._minNode=function(a){for(;a.left!==null;)this._ancestors.push(a),a=a.left;this._cursor=a},r.prototype._maxNode=function(a){for(;a.right!==null;)this._ancestors.push(a),a=a.right;this._cursor=a},qf=n,qf}var Pf,Iv;function _O(){if(Iv)return Pf;Iv=1;var n=vE();function r(f){this.data=f,this.left=null,this.right=null,this.red=!0}r.prototype.get_child=function(f){return f?this.right:this.left},r.prototype.set_child=function(f,m){f?this.right=m:this.left=m};function a(f){this._root=null,this._comparator=f,this.size=0}a.prototype=new n,a.prototype.insert=function(f){var m=!1;if(this._root===null)this._root=new r(f),m=!0,this.size++;else{var h=new r(void 0),p=0,g=0,v=null,b=h,T=null,w=this._root;for(b.right=this._root;;){if(w===null?(w=new r(f),T.set_child(p,w),m=!0,this.size++):i(w.left)&&i(w.right)&&(w.red=!0,w.left.red=!1,w.right.red=!1),i(w)&&i(T)){var S=b.right===v;w===T.get_child(g)?b.set_child(S,o(v,!g)):b.set_child(S,u(v,!g))}var A=this._comparator(w.data,f);if(A===0)break;g=p,p=A<0,v!==null&&(b=v),v=T,T=w,w=w.get_child(p)}this._root=h.right}return this._root.red=!1,m},a.prototype.remove=function(f){if(this._root===null)return!1;var m=new r(void 0),h=m;h.right=this._root;for(var p=null,g=null,v=null,b=1;h.get_child(b)!==null;){var T=b;g=p,p=h,h=h.get_child(b);var w=this._comparator(f,h.data);if(b=w>0,w===0&&(v=h),!i(h)&&!i(h.get_child(b))){if(i(h.get_child(!b))){var S=o(h,b);p.set_child(T,S),p=S}else if(!i(h.get_child(!b))){var A=p.get_child(!T);if(A!==null)if(!i(A.get_child(!T))&&!i(A.get_child(T)))p.red=!1,A.red=!0,h.red=!0;else{var _=g.right===p;i(A.get_child(T))?g.set_child(_,u(p,T)):i(A.get_child(!T))&&g.set_child(_,o(p,T));var C=g.get_child(_);C.red=!0,h.red=!0,C.left.red=!1,C.right.red=!1}}}}return v!==null&&(v.data=h.data,p.set_child(p.right===h,h.get_child(h.left===null)),this.size--),this._root=m.right,this._root!==null&&(this._root.red=!1),v!==null};function i(f){return f!==null&&f.red}function o(f,m){var h=f.get_child(!m);return f.set_child(!m,h.get_child(m)),h.set_child(m,f),f.red=!0,h.red=!1,h}function u(f,m){return f.set_child(!m,o(f.get_child(!m),!m)),o(f,m)}return Pf=a,Pf}var Gf,xv;function TO(){if(xv)return Gf;xv=1;var n=vE();function r(i){this.data=i,this.left=null,this.right=null}r.prototype.get_child=function(i){return i?this.right:this.left},r.prototype.set_child=function(i,o){i?this.right=o:this.left=o};function a(i){this._root=null,this._comparator=i,this.size=0}return a.prototype=new n,a.prototype.insert=function(i){if(this._root===null)return this._root=new r(i),this.size++,!0;for(var o=0,u=null,f=this._root;;){if(f===null)return f=new r(i),u.set_child(o,f),ret=!0,this.size++,!0;if(this._comparator(f.data,i)===0)return!1;o=this._comparator(f.data,i)<0,u=f,f=f.get_child(o)}},a.prototype.remove=function(i){if(this._root===null)return!1;var o=new r(void 0),u=o;u.right=this._root;for(var f=null,m=null,h=1;u.get_child(h)!==null;){f=u,u=u.get_child(h);var p=this._comparator(i,u.data);h=p>0,p===0&&(m=u)}return m!==null?(m.data=u.data,f.set_child(f.right===u,u.get_child(u.left===null)),this._root=o.right,this.size--,!0):!1},Gf=a,Gf}var Vf,zv;function wO(){return zv||(zv=1,Vf={RBTree:_O(),BinTree:TO()}),Vf}var Hf,Lv;function OO(){if(Lv)return Hf;Lv=1;var n=wO().RBTree;function r(f,m,h){this.discrete=f===!1,this.delta=f||.01,this.K=m===void 0?25:m,this.CX=h===void 0?1.1:h,this.centroids=new n(a),this.nreset=0,this.reset()}r.prototype.reset=function(){this.centroids.clear(),this.n=0,this.nreset+=1,this.last_cumulate=0},r.prototype.size=function(){return this.centroids.size},r.prototype.toArray=function(f){var m=[];return f?(this._cumulate(!0),this.centroids.each(function(h){m.push(h)})):this.centroids.each(function(h){m.push({mean:h.mean,n:h.n})}),m},r.prototype.summary=function(){var f=this.discrete?"exact ":"approximating ",m=[f+this.n+" samples using "+this.size()+" centroids","min = "+this.percentile(0),"Q1  = "+this.percentile(.25),"Q2  = "+this.percentile(.5),"Q3  = "+this.percentile(.75),"max = "+this.percentile(1)];return m.join(`
`)};function a(f,m){return f.mean>m.mean?1:f.mean<m.mean?-1:0}function i(f,m){return f.mean_cumn-m.mean_cumn}r.prototype.push=function(f,m){m=m||1,f=Array.isArray(f)?f:[f];for(var h=0;h<f.length;h++)this._digest(f[h],m)},r.prototype.push_centroid=function(f){f=Array.isArray(f)?f:[f];for(var m=0;m<f.length;m++)this._digest(f[m].mean,f[m].n)},r.prototype._cumulate=function(f){if(!(this.n===this.last_cumulate||!f&&this.CX&&this.CX>this.n/this.last_cumulate)){var m=0;this.centroids.each(function(h){h.mean_cumn=m+h.n/2,m=h.cumn=m+h.n}),this.n=this.last_cumulate=m}},r.prototype.find_nearest=function(f){if(this.size()===0)return null;var m=this.centroids.lowerBound({mean:f}),h=m.data()===null?m.prev():m.data();if(h.mean===f||this.discrete)return h;var p=m.prev();return p&&Math.abs(p.mean-f)<Math.abs(h.mean-f)?p:h},r.prototype._new_centroid=function(f,m,h){var p={mean:f,n:m,cumn:h};return this.centroids.insert(p),this.n+=m,p},r.prototype._addweight=function(f,m,h){m!==f.mean&&(f.mean+=h*(m-f.mean)/(f.n+h)),f.cumn+=h,f.mean_cumn+=h/2,f.n+=h,this.n+=h},r.prototype._digest=function(f,m){var h=this.centroids.min(),p=this.centroids.max(),g=this.find_nearest(f);if(g&&g.mean===f)this._addweight(g,f,m);else if(g===h)this._new_centroid(f,m,0);else if(g===p)this._new_centroid(f,m,this.n);else if(this.discrete)this._new_centroid(f,m,g.cumn);else{var v=g.mean_cumn/this.n,b=Math.floor(4*this.n*this.delta*v*(1-v));b-g.n>=m?this._addweight(g,f,m):this._new_centroid(f,m,g.cumn)}this._cumulate(!1),!this.discrete&&this.K&&this.size()>this.K/this.delta&&this.compress()},r.prototype.bound_mean=function(f){var m=this.centroids.upperBound({mean:f}),h=m.prev(),p=h.mean===f?h:m.next();return[h,p]},r.prototype.p_rank=function(f){var m=Array.isArray(f)?f:[f],h=m.map(this._p_rank,this);return Array.isArray(f)?h:h[0]},r.prototype._p_rank=function(f){if(this.size()!==0){{if(f<this.centroids.min().mean)return 0;if(f>this.centroids.max().mean)return 1}this._cumulate(!0);var m=this.bound_mean(f),h=m[0],p=m[1];if(this.discrete)return h.cumn/this.n;var g=h.mean_cumn;return h!==p&&(g+=(f-h.mean)*(p.mean_cumn-h.mean_cumn)/(p.mean-h.mean)),g/this.n}},r.prototype.bound_mean_cumn=function(f){this.centroids._comparator=i;var m=this.centroids.upperBound({mean_cumn:f});this.centroids._comparator=a;var h=m.prev(),p=h&&h.mean_cumn===f?h:m.next();return[h,p]},r.prototype.percentile=function(f){var m=Array.isArray(f)?f:[f],h=m.map(this._percentile,this);return Array.isArray(f)?h:h[0]},r.prototype._percentile=function(f){if(this.size()!==0){this._cumulate(!0);var m=this.n*f,h=this.bound_mean_cumn(m),p=h[0],g=h[1];return g===p||p===null||g===null?(p||g).mean:this.discrete?m<=p.cumn?p.mean:g.mean:p.mean+(m-p.mean_cumn)*(g.mean-p.mean)/(g.mean_cumn-p.mean_cumn)}};function o(f){var m=Math.floor(Math.random()*f.length);return f.splice(m,1)[0]}r.prototype.compress=function(){if(!this.compressing){var f=this.toArray();for(this.reset(),this.compressing=!0;f.length>0;)this.push_centroid(o(f));this._cumulate(!0),this.compressing=!1}};function u(f){this.config=f||{},this.mode=this.config.mode||"auto",r.call(this,this.mode==="cont"?f.delta:!1),this.digest_ratio=this.config.ratio||.9,this.digest_thresh=this.config.thresh||1e3,this.n_unique=0}return u.prototype=Object.create(r.prototype),u.prototype.constructor=u,u.prototype.push=function(f){r.prototype.push.call(this,f),this.check_continuous()},u.prototype._new_centroid=function(f,m,h){this.n_unique+=1,r.prototype._new_centroid.call(this,f,m,h)},u.prototype._addweight=function(f,m,h){f.n===1&&(this.n_unique-=1),r.prototype._addweight.call(this,f,m,h)},u.prototype.check_continuous=function(){return this.mode!=="auto"||this.size()<this.digest_thresh?!1:this.n_unique/this.size()>this.digest_ratio?(this.mode="cont",this.discrete=!1,this.delta=this.config.delta||.01,this.compress(),!0):!1},Hf={TDigest:r,Digest:u},Hf}var Yf,Dv;function kO(){if(Dv)return Yf;Dv=1;const{TDigest:n}=OO();class r{constructor(o,u){this.maxAgeSeconds=o||0,this.ageBuckets=u||0,this.shouldRotate=o&&u,this.ringBuffer=Array(u).fill(new n),this.currentBuffer=0,this.lastRotateTimestampMillis=Date.now(),this.durationBetweenRotatesMillis=o*1e3/u||1/0}size(){return a.call(this).size()}percentile(o){return a.call(this).percentile(o)}push(o){a.call(this),this.ringBuffer.forEach(u=>{u.push(o)})}reset(){this.ringBuffer.forEach(o=>{o.reset()})}compress(){this.ringBuffer.forEach(o=>{o.compress()})}}function a(){let i=Date.now()-this.lastRotateTimestampMillis;for(;i>this.durationBetweenRotatesMillis&&this.shouldRotate;)this.ringBuffer[this.currentBuffer]=new n,++this.currentBuffer>=this.ringBuffer.length&&(this.currentBuffer=0),i-=this.durationBetweenRotatesMillis,this.lastRotateTimestampMillis+=this.durationBetweenRotatesMillis;return this.ringBuffer[this.currentBuffer]}return Yf=r,Yf}var Zf,Uv;function AO(){if(Uv)return Zf;Uv=1;const n=Tt,{getLabels:r,hashObject:a,removeLabels:i}=lr(),{validateLabel:o}=bs(),{Metric:u}=Yc(),f=kO(),m=1e3;class h extends u{constructor(A){super(A,{percentiles:[.01,.05,.5,.9,.95,.99,.999],compressCount:m,hashMap:{}}),this.type="summary";for(const _ of this.labelNames)if(_==="quantile")throw new Error("quantile is a reserved label keyword");this.labelNames.length===0&&(this.hashMap={[a({})]:{labels:{},td:new f(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}})}observe(A,_){T.call(this,A===0?0:A||{})(_)}async get(){if(this.collect){const C=this.collect();C instanceof Promise&&await C}const A=Object.keys(this.hashMap),_=[];return A.forEach(C=>{const N=this.hashMap[C];N&&(this.pruneAgedBuckets&&N.td.size()===0?delete this.hashMap[C]:(p(N,this.percentiles).forEach(M=>{_.push(M)}),_.push(v(N,this)),_.push(g(N,this))))}),{name:this.name,help:this.help,type:this.type,values:_,aggregator:this.aggregator}}reset(){Object.values(this.hashMap).forEach(_=>{_.td.reset(),_.count=0,_.sum=0})}startTimer(A){return b.call(this,A)()}labels(...A){const _=r(this.labelNames,A);return o(this.labelNames,_),{observe:T.call(this,_),startTimer:b.call(this,_)}}remove(...A){const _=r(this.labelNames,A);o(this.labelNames,_),i.call(this,this.hashMap,_,this.sortedLabelNames)}}function p(S,A){return S.td.compress(),A.map(_=>{const C=S.td.percentile(_);return{labels:Object.assign({quantile:_},S.labels),value:C||0}})}function g(S,A){return{metricName:`${A.name}_count`,labels:S.labels,value:S.count}}function v(S,A){return{metricName:`${A.name}_sum`,labels:S.labels,value:S.sum}}function b(S){return()=>{const A=process.hrtime();return _=>{const C=process.hrtime(A),N=C[0]+C[1]/1e9;return this.observe(Object.assign({},S,_),N),N}}}function T(S){return A=>{const _=w(S,A);if(o(this.labelNames,S),!Number.isFinite(_.value))throw new TypeError(`Value is not a valid number: ${n.format(_.value)}`);const C=a(_.labels,this.sortedLabelNames);let N=this.hashMap[C];N||(N={labels:_.labels,td:new f(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}),N.td.push(_.value),N.count++,N.count%this.compressCount===0&&N.td.compress(),N.sum+=_.value,this.hashMap[C]=N}}function w(S,A){return A===void 0?{value:S,labels:{}}:{labels:S,value:A}}return Zf=h,Zf}var Xf,jv;function RO(){if(jv)return Xf;jv=1;const n=Tt,r=Tt,a=Tt,{gzipSync:i}=Tt,{globalRegistry:o}=Ni();class u{constructor(g,v,b){b||(b=o),this.registry=b,this.gatewayUrl=g;const{requireJobName:T,...w}={requireJobName:!0,...v};this.requireJobName=T,this.requestOptions=w}pushAdd(g={}){if(this.requireJobName&&!g.jobName)throw new Error("Missing jobName parameter");return f.call(this,"POST",g.jobName,g.groupings)}push(g={}){if(this.requireJobName&&!g.jobName)throw new Error("Missing jobName parameter");return f.call(this,"PUT",g.jobName,g.groupings)}delete(g={}){if(this.requireJobName&&!g.jobName)throw new Error("Missing jobName parameter");return f.call(this,"DELETE",g.jobName,g.groupings)}}async function f(p,g,v){const b=n.parse(this.gatewayUrl),T=b.pathname&&b.pathname!=="/"?b.pathname:"",w=g?`/job/${encodeURIComponent(g)}${m(v)}`:"",S=`${T}/metrics${w}`,A=n.resolve(this.gatewayUrl,S),_=n.parse(A),C=h(_.href)?a:r,N=Object.assign(_,this.requestOptions,{method:p});return new Promise((M,$)=>{p==="DELETE"&&N.headers&&delete N.headers["Content-Encoding"];const B=C.request(N,q=>{let X="";q.setEncoding("utf8"),q.on("data",ue=>{X+=ue}),q.on("end",()=>{q.statusCode>=400?$(new Error(`push failed with status ${q.statusCode}, ${X}`)):M({resp:q,body:X})})});B.on("error",q=>{$(q)}),B.on("timeout",()=>{B.destroy(new Error("Pushgateway request timed out"))}),p!=="DELETE"?this.registry.metrics().then(q=>{N.headers&&N.headers["Content-Encoding"]==="gzip"&&(q=i(q)),B.write(q),B.end()}).catch(q=>{$(q)}):B.end()})}function m(p){return p?Object.keys(p).map(g=>`/${encodeURIComponent(g)}/${encodeURIComponent(p[g])}`).join(""):""}function h(p){return p.search(/^https/)!==-1}return Xf=u,Xf}var uc={},$v;function Bv(){return $v||($v=1,uc.linearBuckets=(n,r,a)=>{if(a<1)throw new Error("Linear buckets needs a positive count");const i=new Array(a);for(let o=0;o<a;o++)i[o]=n+o*r;return i},uc.exponentialBuckets=(n,r,a)=>{if(n<=0)throw new Error("Exponential buckets needs a positive start");if(a<1)throw new Error("Exponential buckets needs a positive count");if(r<=1)throw new Error("Exponential buckets needs a factor greater than 1");const i=new Array(a);for(let o=0;o<a;o++)i[o]=n,n*=r;return i}),uc}var lc={exports:{}},fc={exports:{}},CO=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},fa="1.9.0",qv=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function NO(n){var r=new Set([n]),a=new Set,i=n.match(qv);if(!i)return function(){return!1};var o={major:+i[1],minor:+i[2],patch:+i[3],prerelease:i[4]};if(o.prerelease!=null)return function(h){return h===n};function u(m){return a.add(m),!1}function f(m){return r.add(m),!0}return function(h){if(r.has(h))return!0;if(a.has(h))return!1;var p=h.match(qv);if(!p)return u(h);var g={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return g.prerelease!=null||o.major!==g.major?u(h):o.major===0?o.minor===g.minor&&o.patch<=g.patch?f(h):u(h):o.minor<=g.minor?f(h):u(h)}}var MO=NO(fa),IO=fa.split(".")[0],Mi=Symbol.for("opentelemetry.js.api."+IO),Ii=CO;function Ui(n,r,a,i){var o;i===void 0&&(i=!1);var u=Ii[Mi]=(o=Ii[Mi])!==null&&o!==void 0?o:{version:fa};if(!i&&u[n]){var f=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+n);return a.error(f.stack||f.message),!1}if(u.version!==fa){var f=new Error("@opentelemetry/api: Registration of version v"+u.version+" for "+n+" does not match previously registered API v"+fa);return a.error(f.stack||f.message),!1}return u[n]=r,a.debug("@opentelemetry/api: Registered a global for "+n+" v"+fa+"."),!0}function ma(n){var r,a,i=(r=Ii[Mi])===null||r===void 0?void 0:r.version;if(!(!i||!MO(i)))return(a=Ii[Mi])===null||a===void 0?void 0:a[n]}function ji(n,r){r.debug("@opentelemetry/api: Unregistering a global for "+n+" v"+fa+".");var a=Ii[Mi];a&&delete a[n]}var xO=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],f;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){f={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(f)throw f.error}}return u},zO=function(n,r,a){if(a||arguments.length===2)for(var i=0,o=r.length,u;i<o;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return n.concat(u||Array.prototype.slice.call(r))},LO=(function(){function n(r){this._namespace=r.namespace||"DiagComponentLogger"}return n.prototype.debug=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("debug",this._namespace,r)},n.prototype.error=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("error",this._namespace,r)},n.prototype.info=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("info",this._namespace,r)},n.prototype.warn=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("warn",this._namespace,r)},n.prototype.verbose=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return Si("verbose",this._namespace,r)},n})();function Si(n,r,a){var i=ma("diag");if(i)return a.unshift(r),i[n].apply(i,zO([],xO(a),!1))}var $t;(function(n){n[n.NONE=0]="NONE",n[n.ERROR=30]="ERROR",n[n.WARN=50]="WARN",n[n.INFO=60]="INFO",n[n.DEBUG=70]="DEBUG",n[n.VERBOSE=80]="VERBOSE",n[n.ALL=9999]="ALL"})($t||($t={}));function DO(n,r){n<$t.NONE?n=$t.NONE:n>$t.ALL&&(n=$t.ALL),r=r||{};function a(i,o){var u=r[i];return typeof u=="function"&&n>=o?u.bind(r):function(){}}return{error:a("error",$t.ERROR),warn:a("warn",$t.WARN),info:a("info",$t.INFO),debug:a("debug",$t.DEBUG),verbose:a("verbose",$t.VERBOSE)}}var UO=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],f;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){f={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(f)throw f.error}}return u},jO=function(n,r,a){if(a||arguments.length===2)for(var i=0,o=r.length,u;i<o;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return n.concat(u||Array.prototype.slice.call(r))},$O="diag",jn=(function(){function n(){function r(o){return function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var m=ma("diag");if(m)return m[o].apply(m,jO([],UO(u),!1))}}var a=this,i=function(o,u){var f,m,h;if(u===void 0&&(u={logLevel:$t.INFO}),o===a){var p=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return a.error((f=p.stack)!==null&&f!==void 0?f:p.message),!1}typeof u=="number"&&(u={logLevel:u});var g=ma("diag"),v=DO((m=u.logLevel)!==null&&m!==void 0?m:$t.INFO,o);if(g&&!u.suppressOverrideMessage){var b=(h=new Error().stack)!==null&&h!==void 0?h:"<failed to generate stacktrace>";g.warn("Current logger will be overwritten from "+b),v.warn("Current logger will overwrite one already registered from "+b)}return Ui("diag",v,a,!0)};a.setLogger=i,a.disable=function(){ji($O,a)},a.createComponentLogger=function(o){return new LO(o)},a.verbose=r("verbose"),a.debug=r("debug"),a.info=r("info"),a.warn=r("warn"),a.error=r("error")}return n.instance=function(){return this._instance||(this._instance=new n),this._instance},n})(),BO=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],f;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){f={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(f)throw f.error}}return u},qO=function(n){var r=typeof Symbol=="function"&&Symbol.iterator,a=r&&n[r],i=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},PO=(function(){function n(r){this._entries=r?new Map(r):new Map}return n.prototype.getEntry=function(r){var a=this._entries.get(r);if(a)return Object.assign({},a)},n.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(r){var a=BO(r,2),i=a[0],o=a[1];return[i,o]})},n.prototype.setEntry=function(r,a){var i=new n(this._entries);return i._entries.set(r,a),i},n.prototype.removeEntry=function(r){var a=new n(this._entries);return a._entries.delete(r),a},n.prototype.removeEntries=function(){for(var r,a,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var u=new n(this._entries);try{for(var f=qO(i),m=f.next();!m.done;m=f.next()){var h=m.value;u._entries.delete(h)}}catch(p){r={error:p}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}return u},n.prototype.clear=function(){return new n},n})(),GO=Symbol("BaggageEntryMetadata"),VO=jn.instance();function HO(n){return n===void 0&&(n={}),new PO(new Map(Object.entries(n)))}function YO(n){return typeof n!="string"&&(VO.error("Cannot create baggage metadata from unknown type: "+typeof n),n=""),{__TYPE__:GO,toString:function(){return n}}}function km(n){return Symbol.for(n)}var ZO=(function(){function n(r){var a=this;a._currentContext=r?new Map(r):new Map,a.getValue=function(i){return a._currentContext.get(i)},a.setValue=function(i,o){var u=new n(a._currentContext);return u._currentContext.set(i,o),u},a.deleteValue=function(i){var o=new n(a._currentContext);return o._currentContext.delete(i),o}}return n})(),bE=new ZO,Ff=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],XO=(function(){function n(){function r(i){return function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];if(console){var f=console[i];if(typeof f!="function"&&(f=console.log),typeof f=="function")return f.apply(console,o)}}}for(var a=0;a<Ff.length;a++)this[Ff[a].n]=r(Ff[a].c)}return n})(),Ea=(function(){var n=function(r,a){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u])},n(r,a)};return function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");n(r,a);function i(){this.constructor=r}r.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}})(),FO=(function(){function n(){}return n.prototype.createGauge=function(r,a){return ak},n.prototype.createHistogram=function(r,a){return sk},n.prototype.createCounter=function(r,a){return rk},n.prototype.createUpDownCounter=function(r,a){return ik},n.prototype.createObservableGauge=function(r,a){return ck},n.prototype.createObservableCounter=function(r,a){return ok},n.prototype.createObservableUpDownCounter=function(r,a){return uk},n.prototype.addBatchObservableCallback=function(r,a){},n.prototype.removeBatchObservableCallback=function(r){},n})(),Zc=(function(){function n(){}return n})(),QO=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.add=function(a,i){},r})(Zc),KO=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.add=function(a,i){},r})(Zc),JO=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.record=function(a,i){},r})(Zc),WO=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.record=function(a,i){},r})(Zc),Am=(function(){function n(){}return n.prototype.addCallback=function(r){},n.prototype.removeCallback=function(r){},n})(),ek=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r})(Am),tk=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r})(Am),nk=(function(n){Ea(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r})(Am),EE=new FO,rk=new QO,ak=new JO,sk=new WO,ik=new KO,ok=new ek,ck=new tk,uk=new nk;function lk(){return EE}var am;(function(n){n[n.INT=0]="INT",n[n.DOUBLE=1]="DOUBLE"})(am||(am={}));var SE={get:function(n,r){if(n!=null)return n[r]},keys:function(n){return n==null?[]:Object.keys(n)}},_E={set:function(n,r,a){n!=null&&(n[r]=a)}},fk=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],f;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){f={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(f)throw f.error}}return u},dk=function(n,r,a){if(a||arguments.length===2)for(var i=0,o=r.length,u;i<o;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return n.concat(u||Array.prototype.slice.call(r))},mk=(function(){function n(){}return n.prototype.active=function(){return bE},n.prototype.with=function(r,a,i){for(var o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];return a.call.apply(a,dk([i],fk(o),!1))},n.prototype.bind=function(r,a){return a},n.prototype.enable=function(){return this},n.prototype.disable=function(){return this},n})(),hk=function(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var i=a.call(n),o,u=[],f;try{for(;(r===void 0||r-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(m){f={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(f)throw f.error}}return u},pk=function(n,r,a){if(a||arguments.length===2)for(var i=0,o=r.length,u;i<o;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return n.concat(u||Array.prototype.slice.call(r))},Qf="context",gk=new mk,Xc=(function(){function n(){}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalContextManager=function(r){return Ui(Qf,r,jn.instance())},n.prototype.active=function(){return this._getContextManager().active()},n.prototype.with=function(r,a,i){for(var o,u=[],f=3;f<arguments.length;f++)u[f-3]=arguments[f];return(o=this._getContextManager()).with.apply(o,pk([r,a,i],hk(u),!1))},n.prototype.bind=function(r,a){return this._getContextManager().bind(r,a)},n.prototype._getContextManager=function(){return ma(Qf)||gk},n.prototype.disable=function(){this._getContextManager().disable(),ji(Qf,jn.instance())},n})(),Mc;(function(n){n[n.NONE=0]="NONE",n[n.SAMPLED=1]="SAMPLED"})(Mc||(Mc={}));var Rm="0000000000000000",Cm="00000000000000000000000000000000",TE={traceId:Cm,spanId:Rm,traceFlags:Mc.NONE},Oi=(function(){function n(r){r===void 0&&(r=TE),this._spanContext=r}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(r,a){return this},n.prototype.setAttributes=function(r){return this},n.prototype.addEvent=function(r,a){return this},n.prototype.addLink=function(r){return this},n.prototype.addLinks=function(r){return this},n.prototype.setStatus=function(r){return this},n.prototype.updateName=function(r){return this},n.prototype.end=function(r){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(r,a){},n})(),Nm=km("OpenTelemetry Context Key SPAN");function Mm(n){return n.getValue(Nm)||void 0}function yk(){return Mm(Xc.getInstance().active())}function Im(n,r){return n.setValue(Nm,r)}function vk(n){return n.deleteValue(Nm)}function bk(n,r){return Im(n,new Oi(r))}function wE(n){var r;return(r=Mm(n))===null||r===void 0?void 0:r.spanContext()}var Ek=/^([0-9a-f]{32})$/i,Sk=/^[0-9a-f]{16}$/i;function OE(n){return Ek.test(n)&&n!==Cm}function kE(n){return Sk.test(n)&&n!==Rm}function xm(n){return OE(n.traceId)&&kE(n.spanId)}function _k(n){return new Oi(n)}var Kf=Xc.getInstance(),AE=(function(){function n(){}return n.prototype.startSpan=function(r,a,i){i===void 0&&(i=Kf.active());var o=!!a?.root;if(o)return new Oi;var u=i&&wE(i);return Tk(u)&&xm(u)?new Oi(u):new Oi},n.prototype.startActiveSpan=function(r,a,i,o){var u,f,m;if(!(arguments.length<2)){arguments.length===2?m=a:arguments.length===3?(u=a,m=i):(u=a,f=i,m=o);var h=f??Kf.active(),p=this.startSpan(r,u,h),g=Im(h,p);return Kf.with(g,m,void 0,p)}},n})();function Tk(n){return typeof n=="object"&&typeof n.spanId=="string"&&typeof n.traceId=="string"&&typeof n.traceFlags=="number"}var wk=new AE,RE=(function(){function n(r,a,i,o){this._provider=r,this.name=a,this.version=i,this.options=o}return n.prototype.startSpan=function(r,a,i){return this._getTracer().startSpan(r,a,i)},n.prototype.startActiveSpan=function(r,a,i,o){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},n.prototype._getTracer=function(){if(this._delegate)return this._delegate;var r=this._provider.getDelegateTracer(this.name,this.version,this.options);return r?(this._delegate=r,this._delegate):wk},n})(),Ok=(function(){function n(){}return n.prototype.getTracer=function(r,a,i){return new AE},n})(),kk=new Ok,sm=(function(){function n(){}return n.prototype.getTracer=function(r,a,i){var o;return(o=this.getDelegateTracer(r,a,i))!==null&&o!==void 0?o:new RE(this,r,a,i)},n.prototype.getDelegate=function(){var r;return(r=this._delegate)!==null&&r!==void 0?r:kk},n.prototype.setDelegate=function(r){this._delegate=r},n.prototype.getDelegateTracer=function(r,a,i){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(r,a,i)},n})(),im;(function(n){n[n.NOT_RECORD=0]="NOT_RECORD",n[n.RECORD=1]="RECORD",n[n.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(im||(im={}));var om;(function(n){n[n.INTERNAL=0]="INTERNAL",n[n.SERVER=1]="SERVER",n[n.CLIENT=2]="CLIENT",n[n.PRODUCER=3]="PRODUCER",n[n.CONSUMER=4]="CONSUMER"})(om||(om={}));var cm;(function(n){n[n.UNSET=0]="UNSET",n[n.OK=1]="OK",n[n.ERROR=2]="ERROR"})(cm||(cm={}));var um="[_0-9a-z-*/]",Ak="[a-z]"+um+"{0,255}",Rk="[a-z0-9]"+um+"{0,240}@[a-z]"+um+"{0,13}",Ck=new RegExp("^(?:"+Ak+"|"+Rk+")$"),Nk=/^[ -~]{0,255}[!-~]$/,Mk=/,|=/;function Ik(n){return Ck.test(n)}function xk(n){return Nk.test(n)&&!Mk.test(n)}var Pv=32,zk=512,Gv=",",Vv="=",Lk=(function(){function n(r){this._internalState=new Map,r&&this._parse(r)}return n.prototype.set=function(r,a){var i=this._clone();return i._internalState.has(r)&&i._internalState.delete(r),i._internalState.set(r,a),i},n.prototype.unset=function(r){var a=this._clone();return a._internalState.delete(r),a},n.prototype.get=function(r){return this._internalState.get(r)},n.prototype.serialize=function(){var r=this;return this._keys().reduce(function(a,i){return a.push(i+Vv+r.get(i)),a},[]).join(Gv)},n.prototype._parse=function(r){r.length>zk||(this._internalState=r.split(Gv).reverse().reduce(function(a,i){var o=i.trim(),u=o.indexOf(Vv);if(u!==-1){var f=o.slice(0,u),m=o.slice(u+1,i.length);Ik(f)&&xk(m)&&a.set(f,m)}return a},new Map),this._internalState.size>Pv&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Pv))))},n.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},n.prototype._clone=function(){var r=new n;return r._internalState=new Map(this._internalState),r},n})();function Dk(n){return new Lk(n)}var CE=Xc.getInstance(),NE=jn.instance(),Uk=(function(){function n(){}return n.prototype.getMeter=function(r,a,i){return EE},n})(),jk=new Uk,Jf="metrics",$k=(function(){function n(){}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalMeterProvider=function(r){return Ui(Jf,r,jn.instance())},n.prototype.getMeterProvider=function(){return ma(Jf)||jk},n.prototype.getMeter=function(r,a,i){return this.getMeterProvider().getMeter(r,a,i)},n.prototype.disable=function(){ji(Jf,jn.instance())},n})(),ME=$k.getInstance(),Bk=(function(){function n(){}return n.prototype.inject=function(r,a){},n.prototype.extract=function(r,a){return r},n.prototype.fields=function(){return[]},n})(),zm=km("OpenTelemetry Baggage Key");function IE(n){return n.getValue(zm)||void 0}function qk(){return IE(Xc.getInstance().active())}function Pk(n,r){return n.setValue(zm,r)}function Gk(n){return n.deleteValue(zm)}var Wf="propagation",Vk=new Bk,Hk=(function(){function n(){this.createBaggage=HO,this.getBaggage=IE,this.getActiveBaggage=qk,this.setBaggage=Pk,this.deleteBaggage=Gk}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalPropagator=function(r){return Ui(Wf,r,jn.instance())},n.prototype.inject=function(r,a,i){return i===void 0&&(i=_E),this._getGlobalPropagator().inject(r,a,i)},n.prototype.extract=function(r,a,i){return i===void 0&&(i=SE),this._getGlobalPropagator().extract(r,a,i)},n.prototype.fields=function(){return this._getGlobalPropagator().fields()},n.prototype.disable=function(){ji(Wf,jn.instance())},n.prototype._getGlobalPropagator=function(){return ma(Wf)||Vk},n})(),xE=Hk.getInstance(),ed="trace",Yk=(function(){function n(){this._proxyTracerProvider=new sm,this.wrapSpanContext=_k,this.isSpanContextValid=xm,this.deleteSpan=vk,this.getSpan=Mm,this.getActiveSpan=yk,this.getSpanContext=wE,this.setSpan=Im,this.setSpanContext=bk}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalTracerProvider=function(r){var a=Ui(ed,this._proxyTracerProvider,jn.instance());return a&&this._proxyTracerProvider.setDelegate(r),a},n.prototype.getTracerProvider=function(){return ma(ed)||this._proxyTracerProvider},n.prototype.getTracer=function(r,a){return this.getTracerProvider().getTracer(r,a)},n.prototype.disable=function(){ji(ed,jn.instance()),this._proxyTracerProvider=new sm},n})(),zE=Yk.getInstance();const Zk={context:CE,diag:NE,metrics:ME,propagation:xE,trace:zE},Xk=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger:XO,get DiagLogLevel(){return $t},INVALID_SPANID:Rm,INVALID_SPAN_CONTEXT:TE,INVALID_TRACEID:Cm,ProxyTracer:RE,ProxyTracerProvider:sm,ROOT_CONTEXT:bE,get SamplingDecision(){return im},get SpanKind(){return om},get SpanStatusCode(){return cm},get TraceFlags(){return Mc},get ValueType(){return am},baggageEntryMetadataFromString:YO,context:CE,createContextKey:km,createNoopMeter:lk,createTraceState:Dk,default:Zk,defaultTextMapGetter:SE,defaultTextMapSetter:_E,diag:NE,isSpanContextValid:xm,isValidSpanId:kE,isValidTraceId:OE,metrics:ME,propagation:xE,trace:zE},Symbol.toStringTag,{value:"Module"})),Fk=eE(Xk);var Hv;function Qk(){if(Hv)return fc.exports;Hv=1;const n=Fk,r=gE(),a="process_cpu_user_seconds_total",i="process_cpu_system_seconds_total",o="process_cpu_seconds_total";return fc.exports=(u,f={})=>{const m=u?[u]:void 0,h=f.prefix?f.prefix:"",p=f.labels?f.labels:{},g=f.enableExemplars?f.enableExemplars:!1,v=Object.keys(p);let b=process.cpuUsage();const T=new r({name:h+a,help:"Total user CPU time spent in seconds.",enableExemplars:g,registers:m,labelNames:v,collect(){const A=process.cpuUsage(),_=A.user-b.user,C=A.system-b.system;if(b=A,this.enableExemplars){let N={};const M=n.trace.getSpan(n.context.active());M&&(N={traceId:M.spanContext().traceId,spanId:M.spanContext().spanId}),T.inc({labels:p,value:_/1e6,exemplarLabels:N}),w.inc({labels:p,value:C/1e6,exemplarLabels:N}),S.inc({labels:p,value:(_+C)/1e6,exemplarLabels:N})}else T.inc(p,_/1e6),w.inc(p,C/1e6),S.inc(p,(_+C)/1e6)}}),w=new r({name:h+i,help:"Total system CPU time spent in seconds.",enableExemplars:g,registers:m,labelNames:v}),S=new r({name:h+o,help:"Total user and system CPU time spent in seconds.",enableExemplars:g,registers:m,labelNames:v})},fc.exports.metricNames=[a,i,o],fc.exports}var dc={exports:{}},Yv;function Kk(){if(Yv)return dc.exports;Yv=1;const n=nn(),r=Math.round(Date.now()/1e3-process.uptime()),a="process_start_time_seconds";return dc.exports=(i,o={})=>{const u=o.prefix?o.prefix:"",f=o.labels?o.labels:{},m=Object.keys(f);new n({name:u+a,help:"Start time of the process since unix epoch in seconds.",registers:i?[i]:void 0,labelNames:m,aggregator:"omit",collect(){this.set(f,r)}})},dc.exports.metricNames=[a],dc.exports}var mc={exports:{}},hc={exports:{}},Zv;function Jk(){if(Zv)return hc.exports;Zv=1;const n=nn(),r=Tt,a=["VmSize","VmRSS","VmData"],i="process_resident_memory_bytes",o="process_virtual_memory_bytes",u="process_heap_bytes";function f(m){return m.split(`
`).reduce((h,p)=>{if(!a.some(b=>p.startsWith(b)))return h;const g=p.split(":");let v=g[1].trim();return v=v.substr(0,v.length-3),v=Number(v)*1024,h[g[0]]=v,h},{})}return hc.exports=(m,h={})=>{const p=m?[m]:void 0,g=h.prefix?h.prefix:"",v=h.labels?h.labels:{},b=Object.keys(v),T=new n({name:g+i,help:"Resident memory size in bytes.",registers:p,labelNames:b,collect(){try{const A=r.readFileSync("/proc/self/status","utf8"),_=f(A);T.set(v,_.VmRSS),w.set(v,_.VmSize),S.set(v,_.VmData)}catch{}}}),w=new n({name:g+o,help:"Virtual memory size in bytes.",registers:p,labelNames:b}),S=new n({name:g+u,help:"Process heap size in bytes.",registers:p,labelNames:b})},hc.exports.metricNames=[i,o,u],hc.exports}var td,Xv;function LE(){if(Xv)return td;Xv=1;function n(){try{return process.memoryUsage()}catch{return}}return td=n,td}var Fv;function Wk(){if(Fv)return mc.exports;Fv=1;const n=nn(),r=Jk(),a=LE(),i="process_resident_memory_bytes";function o(u,f={}){const m=f.prefix?f.prefix:"",h=f.labels?f.labels:{},p=Object.keys(h);new n({name:m+i,help:"Resident memory size in bytes.",registers:u?[u]:void 0,labelNames:p,collect(){const g=a();g&&this.set(h,g.rss)}})}return mc.exports=(u,f)=>process.platform==="linux"?r(u,f):o(u,f),mc.exports.metricNames=process.platform==="linux"?r.metricNames:[i],mc.exports}var pc={exports:{}},nd={exports:{}},Qv;function eA(){if(Qv)return nd.exports;Qv=1;var n=nd.exports={},r,a;function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=i}catch{r=i}try{typeof clearTimeout=="function"?a=clearTimeout:a=o}catch{a=o}})();function u(S){if(r===setTimeout)return setTimeout(S,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(S,0);try{return r(S,0)}catch{try{return r.call(null,S,0)}catch{return r.call(this,S,0)}}}function f(S){if(a===clearTimeout)return clearTimeout(S);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(S);try{return a(S)}catch{try{return a.call(null,S)}catch{return a.call(this,S)}}}var m=[],h=!1,p,g=-1;function v(){!h||!p||(h=!1,p.length?m=p.concat(m):g=-1,m.length&&b())}function b(){if(!h){var S=u(v);h=!0;for(var A=m.length;A;){for(p=m,m=[];++g<A;)p&&p[g].run();g=-1,A=m.length}p=null,h=!1,f(S)}}n.nextTick=function(S){var A=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)A[_-1]=arguments[_];m.push(new T(S,A)),m.length===1&&!h&&u(b)};function T(S,A){this.fun=S,this.array=A}T.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function w(){}return n.on=w,n.addListener=w,n.once=w,n.off=w,n.removeListener=w,n.removeAllListeners=w,n.emit=w,n.prependListener=w,n.prependOnceListener=w,n.listeners=function(S){return[]},n.binding=function(S){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(S){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},nd.exports}var Kv;function tA(){if(Kv)return pc.exports;Kv=1;const n=nn(),r=Tt,a=eA(),i="process_open_fds";return pc.exports=(o,u={})=>{if(a.platform!=="linux")return;const f=u.prefix?u.prefix:"",m=u.labels?u.labels:{},h=Object.keys(m);new n({name:f+i,help:"Number of open file descriptors.",registers:o?[o]:void 0,labelNames:h,collect(){try{const p=r.readdirSync("/proc/self/fd");this.set(m,p.length-1)}catch{}}})},pc.exports.metricNames=[i],pc.exports}var gc={exports:{}},Jv;function nA(){if(Jv)return gc.exports;Jv=1;const n=nn(),r=Tt,a="process_max_fds";let i;return gc.exports=(o,u={})=>{if(i===void 0)try{const g=r.readFileSync("/proc/self/limits","utf8").split(`
`);for(const v of g)if(v.startsWith("Max open files")){const b=v.split(/  +/);i=Number(b[1]);break}}catch{return}if(i===void 0)return;const f=u.prefix?u.prefix:"",m=u.labels?u.labels:{},h=Object.keys(m);new n({name:f+a,help:"Maximum number of open file descriptors.",registers:o?[o]:void 0,labelNames:h,collect(){i!==void 0&&this.set(m,i)}})},gc.exports.metricNames=[a],gc.exports}var yc={exports:{}},Wv;function rA(){if(Wv)return yc.exports;Wv=1;const n=nn();let r;try{r=Tt}catch{}const a="nodejs_eventloop_lag_seconds",i="nodejs_eventloop_lag_min_seconds",o="nodejs_eventloop_lag_max_seconds",u="nodejs_eventloop_lag_mean_seconds",f="nodejs_eventloop_lag_stddev_seconds",m="nodejs_eventloop_lag_p50_seconds",h="nodejs_eventloop_lag_p90_seconds",p="nodejs_eventloop_lag_p99_seconds";function g(v,b,T){const w=process.hrtime(v),A=(w[0]*1e9+w[1])/1e9;b.set(T,A)}return yc.exports=(v,b={})=>{const T=b.prefix?b.prefix:"",w=b.labels?b.labels:{},S=Object.keys(w),A=v?[v]:void 0;let _=()=>{const me=process.hrtime();setImmediate(g,me,C,w)};if(r&&r.monitorEventLoopDelay)try{const me=r.monitorEventLoopDelay({resolution:b.eventLoopMonitoringPrecision});me.enable(),_=()=>{const ke=process.hrtime();setImmediate(g,ke,C,w),N.set(w,me.min/1e9),M.set(w,me.max/1e9),$.set(w,me.mean/1e9),B.set(w,me.stddev/1e9),q.set(w,me.percentile(50)/1e9),X.set(w,me.percentile(90)/1e9),ue.set(w,me.percentile(99)/1e9),me.reset()}}catch(me){if(me.code==="ERR_NOT_IMPLEMENTED")return;throw me}const C=new n({name:T+a,help:"Lag of event loop in seconds.",registers:A,labelNames:S,aggregator:"average",collect:_}),N=new n({name:T+i,help:"The minimum recorded event loop delay.",registers:A,labelNames:S,aggregator:"min"}),M=new n({name:T+o,help:"The maximum recorded event loop delay.",registers:A,labelNames:S,aggregator:"max"}),$=new n({name:T+u,help:"The mean of the recorded event loop delays.",registers:A,labelNames:S,aggregator:"average"}),B=new n({name:T+f,help:"The standard deviation of the recorded event loop delays.",registers:A,labelNames:S,aggregator:"average"}),q=new n({name:T+m,help:"The 50th percentile of the recorded event loop delays.",registers:A,labelNames:S,aggregator:"average"}),X=new n({name:T+h,help:"The 90th percentile of the recorded event loop delays.",registers:A,labelNames:S,aggregator:"average"}),ue=new n({name:T+p,help:"The 99th percentile of the recorded event loop delays.",registers:A,labelNames:S,aggregator:"average"})},yc.exports.metricNames=[a,i,o,u,f,m,h,p],yc.exports}var vc={exports:{}},rd,eb;function xi(){if(eb)return rd;eb=1;function n(a){const i={};for(let o=0;o<a.length;o++){const u=a[o];!u||typeof u.constructor>"u"||(Object.hasOwnProperty.call(i,u.constructor.name)?i[u.constructor.name]+=1:i[u.constructor.name]=1)}return i}function r(a,i,o){a.reset();for(const u in i)a.set(Object.assign({type:u},o||{}),i[u])}return rd={aggregateByObjectName:n,updateMetrics:r},rd}var tb;function aA(){if(tb)return vc.exports;tb=1;const{aggregateByObjectName:n}=xi(),{updateMetrics:r}=xi(),a=nn(),i="nodejs_active_handles",o="nodejs_active_handles_total";return vc.exports=(u,f={})=>{if(typeof process._getActiveHandles!="function")return;const m=u?[u]:void 0,h=f.prefix?f.prefix:"",p=f.labels?f.labels:{},g=Object.keys(p);new a({name:h+i,help:"Number of active libuv handles grouped by handle type. Every handle type is C++ class name.",labelNames:["type",...g],registers:m,collect(){const v=process._getActiveHandles();r(this,n(v),p)}}),new a({name:h+o,help:"Total number of active handles.",registers:m,labelNames:g,collect(){const v=process._getActiveHandles();this.set(p,v.length)}})},vc.exports.metricNames=[i,o],vc.exports}var bc={exports:{}},nb;function sA(){if(nb)return bc.exports;nb=1;const n=nn(),{aggregateByObjectName:r}=xi(),{updateMetrics:a}=xi(),i="nodejs_active_requests",o="nodejs_active_requests_total";return bc.exports=(u,f={})=>{if(typeof process._getActiveRequests!="function")return;const m=f.prefix?f.prefix:"",h=f.labels?f.labels:{},p=Object.keys(h);new n({name:m+i,help:"Number of active libuv requests grouped by request type. Every request type is C++ class name.",labelNames:["type",...p],registers:u?[u]:void 0,collect(){const g=process._getActiveRequests();a(this,r(g),h)}}),new n({name:m+o,help:"Total number of active requests.",registers:u?[u]:void 0,labelNames:p,collect(){const g=process._getActiveRequests();this.set(h,g.length)}})},bc.exports.metricNames=[i,o],bc.exports}var Ec={exports:{}},rb;function iA(){if(rb)return Ec.exports;rb=1;const n=nn(),{updateMetrics:r}=xi(),a="nodejs_active_resources",i="nodejs_active_resources_total";return Ec.exports=(o,u={})=>{if(typeof process.getActiveResourcesInfo!="function")return;const f=u.prefix?u.prefix:"",m=u.labels?u.labels:{},h=Object.keys(m);new n({name:f+a,help:"Number of active resources that are currently keeping the event loop alive, grouped by async resource type.",labelNames:["type",...h],registers:o?[o]:void 0,collect(){const p=process.getActiveResourcesInfo(),g={};for(let v=0;v<p.length;v++){const b=p[v];Object.hasOwn(g,b)?g[b]+=1:g[b]=1}r(this,g,m)}}),new n({name:f+i,help:"Total number of active resources.",registers:o?[o]:void 0,labelNames:h,collect(){const p=process.getActiveResourcesInfo();this.set(m,p.length)}})},Ec.exports.metricNames=[a,i],Ec.exports}var Sc={exports:{}},ab;function oA(){if(ab)return Sc.exports;ab=1;const n=nn(),r=LE(),a="nodejs_heap_size_total_bytes",i="nodejs_heap_size_used_bytes",o="nodejs_external_memory_bytes";return Sc.exports=(u,f={})=>{if(typeof process.memoryUsage!="function")return;const m=f.labels?f.labels:{},h=Object.keys(m),p=u?[u]:void 0,g=f.prefix?f.prefix:"",v=()=>{const S=r();S&&(b.set(m,S.heapTotal),T.set(m,S.heapUsed),S.external!==void 0&&w.set(m,S.external))},b=new n({name:g+a,help:"Process heap size from Node.js in bytes.",registers:p,labelNames:h,collect:v}),T=new n({name:g+i,help:"Process heap size used from Node.js in bytes.",registers:p,labelNames:h}),w=new n({name:g+o,help:"Node.js external memory size in bytes.",registers:p,labelNames:h})},Sc.exports.metricNames=[a,i,o],Sc.exports}var _c={exports:{}},sb;function cA(){if(sb)return _c.exports;sb=1;const n=nn(),r=Tt,a=["total","used","available"],i={};return a.forEach(o=>{i[o]=`nodejs_heap_space_size_${o}_bytes`}),_c.exports=(o,u={})=>{try{r.getHeapSpaceStatistics()}catch(v){if(v.code==="ERR_NOT_IMPLEMENTED")return;throw v}const f=o?[o]:void 0,m=u.prefix?u.prefix:"",h=u.labels?u.labels:{},p=["space",...Object.keys(h)],g={};a.forEach(v=>{g[v]=new n({name:m+i[v],help:`Process heap space size ${v} from Node.js in bytes.`,labelNames:p,registers:f})}),g.total.collect=()=>{for(const v of r.getHeapSpaceStatistics()){const b=v.space_name.substr(0,v.space_name.indexOf("_space"));g.total.set({space:b,...h},v.space_size),g.used.set({space:b,...h},v.space_used_size),g.available.set({space:b,...h},v.space_available_size)}}},_c.exports.metricNames=Object.values(i),_c.exports}var Tc={exports:{}},ib;function uA(){if(ib)return Tc.exports;ib=1;const n=nn(),r=process.version,a=r.slice(1).split(".").map(Number),i="nodejs_version_info";return Tc.exports=(o,u={})=>{const f=u.prefix?u.prefix:"",m=u.labels?u.labels:{},h=Object.keys(m);new n({name:f+i,help:"Node.js version info.",labelNames:["version","major","minor","patch",...h],registers:o?[o]:void 0,aggregator:"first",collect(){this.labels(r,a[0],a[1],a[2],...Object.values(m)).set(1)}})},Tc.exports.metricNames=[i],Tc.exports}var wc={exports:{}},ob;function lA(){if(ob)return wc.exports;ob=1;const n=yE();let r;try{r=Tt}catch{}const a="nodejs_gc_duration_seconds",i=[.001,.01,.1,1,2,5],o=[];return r&&r.constants&&(o[r.constants.NODE_PERFORMANCE_GC_MAJOR]="major",o[r.constants.NODE_PERFORMANCE_GC_MINOR]="minor",o[r.constants.NODE_PERFORMANCE_GC_INCREMENTAL]="incremental",o[r.constants.NODE_PERFORMANCE_GC_WEAKCB]="weakcb"),wc.exports=(u,f={})=>{if(!r)return;const m=f.prefix?f.prefix:"",h=f.labels?f.labels:{},p=Object.keys(h),g=f.gcDurationBuckets?f.gcDurationBuckets:i,v=new n({name:m+a,help:"Garbage collection duration by kind, one of major, minor, incremental or weakcb.",labelNames:["kind",...p],enableExemplars:!1,buckets:g,registers:u?[u]:void 0});new r.PerformanceObserver(T=>{const w=T.getEntries()[0],S=w.detail?o[w.detail.kind]:o[w.kind];v.observe(Object.assign({kind:S},h),w.duration/1e3)}).observe({entryTypes:["gc"]})},wc.exports.metricNames=[a],wc.exports}var cb;function fA(){if(cb)return lc.exports;cb=1;const{isObject:n}=lr(),r=Qk(),a=Kk(),i=Wk(),o=tA(),u=nA(),f=rA(),m=aA(),h=sA(),p=iA(),g=oA(),v=cA(),b=uA(),T=lA(),w={processCpuTotal:r,processStartTime:a,osMemoryHeap:i,processOpenFileDescriptors:o,processMaxFileDescriptors:u,eventLoopLag:f,...typeof process.getActiveResourcesInfo=="function"?{processResources:p}:{},processHandles:m,processRequests:h,heapSizeAndUsed:g,heapSpacesSizeAndUsed:v,version:b,gc:T},S=Object.keys(w);return lc.exports=function(_){if(_!=null&&!n(_))throw new TypeError("config must be null, undefined, or an object");_={eventLoopMonitoringPrecision:10,..._};for(const C of Object.values(w))C(_.register,_)},lc.exports.metricsList=S,lc.exports}var Oc={},ub;function DE(){if(ub)return Oc;ub=1;const{Grouper:n,hashObject:r}=lr();function a(i){return o=>{if(o.length===0)return;const u={help:o[0].help,name:o[0].name,type:o[0].type,values:[],aggregator:o[0].aggregator},f=new n;return o.forEach(m=>{m.values.forEach(h=>{const p=r(h.labels);f.add(`${h.metricName}_${p}`,h)})}),f.forEach(m=>{if(m.length===0)return;const h={value:i(m),labels:m[0].labels};m[0].metricName&&(h.metricName=m[0].metricName),u.values.push(h)}),u}}return Oc.AggregatorFactory=a,Oc.aggregators={sum:a(i=>i.reduce((o,u)=>o+u.value,0)),first:a(i=>i[0].value),omit:()=>{},average:a(i=>i.reduce((o,u)=>o+u.value,0)/i.length),min:a(i=>i.reduce((o,u)=>Math.min(o,u.value),1/0)),max:a(i=>i.reduce((o,u)=>Math.max(o,u.value),-1/0))},Oc}var ad,lb;function dA(){if(lb)return ad;lb=1;const n=Ni(),{Grouper:r}=lr(),{aggregators:a}=DE();let i=()=>{const b=Tt;return i=()=>b,b};const o="prom-client:getMetricsReq",u="prom-client:getMetricsRes";let f=[n.globalRegistry],m=0,h=!1;const p=new Map;class g extends n{constructor(T=n.PROMETHEUS_CONTENT_TYPE){super(T),v()}clusterMetrics(){const T=m++;return new Promise((w,S)=>{let A=!1;function _(M,$){A||(A=!0,M?S(M):w($))}const C={responses:[],pending:0,done:_,errorTimeout:setTimeout(()=>{const M=new Error("Operation timed out.");C.done(M)},5e3)};p.set(T,C);const N={type:o,requestId:T};for(const M in i().workers)i().workers[M].isConnected()&&(i().workers[M].send(N),C.pending++);C.pending===0&&(clearTimeout(C.errorTimeout),process.nextTick(()=>_(null,"")))})}get contentType(){return super.contentType}static aggregate(T,w=n.PROMETHEUS_CONTENT_TYPE){const S=new n,A=new r;return S.setContentType(w),T.forEach(_=>{_.forEach(C=>{A.add(C.name,C)})}),A.forEach(_=>{const C=_[0].aggregator,N=a[C];if(typeof N!="function")throw new Error(`'${C}' is not a defined aggregator.`);const M=N(_);if(M){const $=Object.assign({get:()=>M},M);S.registerMetric($)}}),S}static setRegistries(T){Array.isArray(T)||(T=[T]),T.forEach(w=>{if(!(w instanceof n))throw new TypeError(`Expected Registry, got ${typeof w}`)}),f=T}}function v(){h||(h=!0,i().isMaster&&i().on("message",(b,T)=>{if(T.type===u){const w=p.get(T.requestId);if(T.error){w.done(new Error(T.error));return}if(T.metrics.forEach(S=>w.responses.push(S)),w.pending--,w.pending===0){p.delete(T.requestId),clearTimeout(w.errorTimeout);const A=g.aggregate(w.responses).metrics();w.done(null,A)}}}),i().isWorker&&process.on("message",b=>{b.type===o&&Promise.all(f.map(T=>T.getMetricsAsJSON())).then(T=>{process.send({type:u,requestId:b.requestId,metrics:T})}).catch(T=>{process.send({type:u,requestId:b.requestId,error:T.message})})}))}return ad=g,ad}var fb;function mA(){return fb||(fb=1,(function(n){n.register=Ni().globalRegistry,n.Registry=Ni(),Object.defineProperty(n,"contentType",{configurable:!1,enumerable:!0,get(){return n.register.contentType},set(r){n.register.setContentType(r)}}),n.prometheusContentType=n.Registry.PROMETHEUS_CONTENT_TYPE,n.openMetricsContentType=n.Registry.OPENMETRICS_CONTENT_TYPE,n.validateMetricName=bs().validateMetricName,n.Counter=gE(),n.Gauge=nn(),n.Histogram=yE(),n.Summary=AO(),n.Pushgateway=RO(),n.linearBuckets=Bv().linearBuckets,n.exponentialBuckets=Bv().exponentialBuckets,n.collectDefaultMetrics=fA(),n.aggregators=DE().aggregators,n.AggregatorRegistry=dA()})(Lf)),Lf}mA();var Ie;(function(n){n.assertEqual=o=>{};function r(o){}n.assertIs=r;function a(o){throw new Error}n.assertNever=a,n.arrayToEnum=o=>{const u={};for(const f of o)u[f]=f;return u},n.getValidEnumValues=o=>{const u=n.objectKeys(o).filter(m=>typeof o[o[m]]!="number"),f={};for(const m of u)f[m]=o[m];return n.objectValues(f)},n.objectValues=o=>n.objectKeys(o).map(function(u){return o[u]}),n.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const u=[];for(const f in o)Object.prototype.hasOwnProperty.call(o,f)&&u.push(f);return u},n.find=(o,u)=>{for(const f of o)if(u(f))return f},n.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function i(o,u=" | "){return o.map(f=>typeof f=="string"?`'${f}'`:f).join(u)}n.joinValues=i,n.jsonStringifyReplacer=(o,u)=>typeof u=="bigint"?u.toString():u})(Ie||(Ie={}));var db;(function(n){n.mergeShapes=(r,a)=>({...r,...a})})(db||(db={}));const ie=Ie.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),jr=n=>{switch(typeof n){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return Number.isNaN(n)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"symbol":return ie.symbol;case"object":return Array.isArray(n)?ie.array:n===null?ie.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ie.promise:typeof Map<"u"&&n instanceof Map?ie.map:typeof Set<"u"&&n instanceof Set?ie.set:typeof Date<"u"&&n instanceof Date?ie.date:ie.object;default:return ie.unknown}},z=Ie.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class $n extends Error{get errors(){return this.issues}constructor(r){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=r}format(r){const a=r||function(u){return u.message},i={_errors:[]},o=u=>{for(const f of u.issues)if(f.code==="invalid_union")f.unionErrors.map(o);else if(f.code==="invalid_return_type")o(f.returnTypeError);else if(f.code==="invalid_arguments")o(f.argumentsError);else if(f.path.length===0)i._errors.push(a(f));else{let m=i,h=0;for(;h<f.path.length;){const p=f.path[h];h===f.path.length-1?(m[p]=m[p]||{_errors:[]},m[p]._errors.push(a(f))):m[p]=m[p]||{_errors:[]},m=m[p],h++}}};return o(this),i}static assert(r){if(!(r instanceof $n))throw new Error(`Not a ZodError: ${r}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ie.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(r=a=>a.message){const a={},i=[];for(const o of this.issues)if(o.path.length>0){const u=o.path[0];a[u]=a[u]||[],a[u].push(r(o))}else i.push(r(o));return{formErrors:i,fieldErrors:a}}get formErrors(){return this.flatten()}}$n.create=n=>new $n(n);const lm=(n,r)=>{let a;switch(n.code){case z.invalid_type:n.received===ie.undefined?a="Required":a=`Expected ${n.expected}, received ${n.received}`;break;case z.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(n.expected,Ie.jsonStringifyReplacer)}`;break;case z.unrecognized_keys:a=`Unrecognized key(s) in object: ${Ie.joinValues(n.keys,", ")}`;break;case z.invalid_union:a="Invalid input";break;case z.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Ie.joinValues(n.options)}`;break;case z.invalid_enum_value:a=`Invalid enum value. Expected ${Ie.joinValues(n.options)}, received '${n.received}'`;break;case z.invalid_arguments:a="Invalid function arguments";break;case z.invalid_return_type:a="Invalid function return type";break;case z.invalid_date:a="Invalid date";break;case z.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(a=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?a=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?a=`Invalid input: must end with "${n.validation.endsWith}"`:Ie.assertNever(n.validation):n.validation!=="regex"?a=`Invalid ${n.validation}`:a="Invalid";break;case z.too_small:n.type==="array"?a=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?a=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?a=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?a=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?a=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:a="Invalid input";break;case z.too_big:n.type==="array"?a=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?a=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?a=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?a=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?a=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:a="Invalid input";break;case z.custom:a="Invalid input";break;case z.invalid_intersection_types:a="Intersection results could not be merged";break;case z.not_multiple_of:a=`Number must be a multiple of ${n.multipleOf}`;break;case z.not_finite:a="Number must be finite";break;default:a=r.defaultError,Ie.assertNever(n)}return{message:a}};let hA=lm;function pA(){return hA}const gA=n=>{const{data:r,path:a,errorMaps:i,issueData:o}=n,u=[...a,...o.path||[]],f={...o,path:u};if(o.message!==void 0)return{...o,path:u,message:o.message};let m="";const h=i.filter(p=>!!p).slice().reverse();for(const p of h)m=p(f,{data:r,defaultError:m}).message;return{...o,path:u,message:m}};function ne(n,r){const a=pA(),i=gA({issueData:r,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,a,a===lm?void 0:lm].filter(o=>!!o)});n.common.issues.push(i)}class Rt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(r,a){const i=[];for(const o of a){if(o.status==="aborted")return pe;o.status==="dirty"&&r.dirty(),i.push(o.value)}return{status:r.value,value:i}}static async mergeObjectAsync(r,a){const i=[];for(const o of a){const u=await o.key,f=await o.value;i.push({key:u,value:f})}return Rt.mergeObjectSync(r,i)}static mergeObjectSync(r,a){const i={};for(const o of a){const{key:u,value:f}=o;if(u.status==="aborted"||f.status==="aborted")return pe;u.status==="dirty"&&r.dirty(),f.status==="dirty"&&r.dirty(),u.value!=="__proto__"&&(typeof f.value<"u"||o.alwaysSet)&&(i[u.value]=f.value)}return{status:r.value,value:i}}}const pe=Object.freeze({status:"aborted"}),Ti=n=>({status:"dirty",value:n}),pn=n=>({status:"valid",value:n}),mb=n=>n.status==="aborted",hb=n=>n.status==="dirty",hs=n=>n.status==="valid",Ic=n=>typeof Promise<"u"&&n instanceof Promise;var fe;(function(n){n.errToObj=r=>typeof r=="string"?{message:r}:r||{},n.toString=r=>typeof r=="string"?r:r?.message})(fe||(fe={}));class Bn{constructor(r,a,i,o){this._cachedPath=[],this.parent=r,this.data=a,this._path=i,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pb=(n,r)=>{if(hs(r))return{success:!0,data:r.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new $n(n.common.issues);return this._error=a,this._error}}};function _e(n){if(!n)return{};const{errorMap:r,invalid_type_error:a,required_error:i,description:o}=n;if(r&&(a||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return r?{errorMap:r,description:o}:{errorMap:(f,m)=>{const{message:h}=n;return f.code==="invalid_enum_value"?{message:h??m.defaultError}:typeof m.data>"u"?{message:h??i??m.defaultError}:f.code!=="invalid_type"?{message:m.defaultError}:{message:h??a??m.defaultError}},description:o}}class Ce{get description(){return this._def.description}_getType(r){return jr(r.data)}_getOrReturnCtx(r,a){return a||{common:r.parent.common,data:r.data,parsedType:jr(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}_processInputParams(r){return{status:new Rt,ctx:{common:r.parent.common,data:r.data,parsedType:jr(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}}_parseSync(r){const a=this._parse(r);if(Ic(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(r){const a=this._parse(r);return Promise.resolve(a)}parse(r,a){const i=this.safeParse(r,a);if(i.success)return i.data;throw i.error}safeParse(r,a){const i={common:{issues:[],async:a?.async??!1,contextualErrorMap:a?.errorMap},path:a?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:jr(r)},o=this._parseSync({data:r,path:i.path,parent:i});return pb(i,o)}"~validate"(r){const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:jr(r)};if(!this["~standard"].async)try{const i=this._parseSync({data:r,path:[],parent:a});return hs(i)?{value:i.value}:{issues:a.common.issues}}catch(i){i?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:r,path:[],parent:a}).then(i=>hs(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(r,a){const i=await this.safeParseAsync(r,a);if(i.success)return i.data;throw i.error}async safeParseAsync(r,a){const i={common:{issues:[],contextualErrorMap:a?.errorMap,async:!0},path:a?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:jr(r)},o=this._parse({data:r,path:i.path,parent:i}),u=await(Ic(o)?o:Promise.resolve(o));return pb(i,u)}refine(r,a){const i=o=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(o):a;return this._refinement((o,u)=>{const f=r(o),m=()=>u.addIssue({code:z.custom,...i(o)});return typeof Promise<"u"&&f instanceof Promise?f.then(h=>h?!0:(m(),!1)):f?!0:(m(),!1)})}refinement(r,a){return this._refinement((i,o)=>r(i)?!0:(o.addIssue(typeof a=="function"?a(i,o):a),!1))}_refinement(r){return new va({schema:this,typeName:ge.ZodEffects,effect:{type:"refinement",refinement:r}})}superRefine(r){return this._refinement(r)}constructor(r){this.spa=this.safeParseAsync,this._def=r,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return ur.create(this,this._def)}nullable(){return ba.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Un.create(this)}promise(){return $c.create(this,this._def)}or(r){return zc.create([this,r],this._def)}and(r){return Lc.create(this,r,this._def)}transform(r){return new va({..._e(this._def),schema:this,typeName:ge.ZodEffects,effect:{type:"transform",transform:r}})}default(r){const a=typeof r=="function"?r:()=>r;return new Bc({..._e(this._def),innerType:this,defaultValue:a,typeName:ge.ZodDefault})}brand(){return new BE({typeName:ge.ZodBranded,type:this,..._e(this._def)})}catch(r){const a=typeof r=="function"?r:()=>r;return new qc({..._e(this._def),innerType:this,catchValue:a,typeName:ge.ZodCatch})}describe(r){const a=this.constructor;return new a({...this._def,description:r})}pipe(r){return Dm.create(this,r)}readonly(){return Pc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yA=/^c[^\s-]{8,}$/i,vA=/^[0-9a-z]+$/,bA=/^[0-9A-HJKMNP-TV-Z]{26}$/i,EA=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,SA=/^[a-z0-9_-]{21}$/i,_A=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,TA=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wA=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,OA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sd;const kA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,AA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,RA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,CA=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,NA=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,MA=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,UE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",IA=new RegExp(`^${UE}$`);function jE(n){let r="[0-5]\\d";n.precision?r=`${r}\\.\\d{${n.precision}}`:n.precision==null&&(r=`${r}(\\.\\d+)?`);const a=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${r})${a}`}function xA(n){return new RegExp(`^${jE(n)}$`)}function zA(n){let r=`${UE}T${jE(n)}`;const a=[];return a.push(n.local?"Z?":"Z"),n.offset&&a.push("([+-]\\d{2}:?\\d{2})"),r=`${r}(${a.join("|")})`,new RegExp(`^${r}$`)}function LA(n,r){return!!((r==="v4"||!r)&&kA.test(n)||(r==="v6"||!r)&&RA.test(n))}function DA(n,r){if(!_A.test(n))return!1;try{const[a]=n.split(".");if(!a)return!1;const i=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),o=JSON.parse(atob(i));return!(typeof o!="object"||o===null||"typ"in o&&o?.typ!=="JWT"||!o.alg||r&&o.alg!==r)}catch{return!1}}function UA(n,r){return!!((r==="v4"||!r)&&AA.test(n)||(r==="v6"||!r)&&CA.test(n))}class Dn extends Ce{_parse(r){if(this._def.coerce&&(r.data=String(r.data)),this._getType(r)!==ie.string){const u=this._getOrReturnCtx(r);return ne(u,{code:z.invalid_type,expected:ie.string,received:u.parsedType}),pe}const i=new Rt;let o;for(const u of this._def.checks)if(u.kind==="min")r.data.length<u.value&&(o=this._getOrReturnCtx(r,o),ne(o,{code:z.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),i.dirty());else if(u.kind==="max")r.data.length>u.value&&(o=this._getOrReturnCtx(r,o),ne(o,{code:z.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),i.dirty());else if(u.kind==="length"){const f=r.data.length>u.value,m=r.data.length<u.value;(f||m)&&(o=this._getOrReturnCtx(r,o),f?ne(o,{code:z.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):m&&ne(o,{code:z.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),i.dirty())}else if(u.kind==="email")wA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"email",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="emoji")sd||(sd=new RegExp(OA,"u")),sd.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"emoji",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="uuid")EA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"uuid",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="nanoid")SA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"nanoid",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="cuid")yA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"cuid",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="cuid2")vA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"cuid2",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="ulid")bA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"ulid",code:z.invalid_string,message:u.message}),i.dirty());else if(u.kind==="url")try{new URL(r.data)}catch{o=this._getOrReturnCtx(r,o),ne(o,{validation:"url",code:z.invalid_string,message:u.message}),i.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"regex",code:z.invalid_string,message:u.message}),i.dirty())):u.kind==="trim"?r.data=r.data.trim():u.kind==="includes"?r.data.includes(u.value,u.position)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),i.dirty()):u.kind==="toLowerCase"?r.data=r.data.toLowerCase():u.kind==="toUpperCase"?r.data=r.data.toUpperCase():u.kind==="startsWith"?r.data.startsWith(u.value)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:{startsWith:u.value},message:u.message}),i.dirty()):u.kind==="endsWith"?r.data.endsWith(u.value)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:{endsWith:u.value},message:u.message}),i.dirty()):u.kind==="datetime"?zA(u).test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:"datetime",message:u.message}),i.dirty()):u.kind==="date"?IA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:"date",message:u.message}),i.dirty()):u.kind==="time"?xA(u).test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{code:z.invalid_string,validation:"time",message:u.message}),i.dirty()):u.kind==="duration"?TA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"duration",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="ip"?LA(r.data,u.version)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"ip",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="jwt"?DA(r.data,u.alg)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"jwt",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="cidr"?UA(r.data,u.version)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"cidr",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="base64"?NA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"base64",code:z.invalid_string,message:u.message}),i.dirty()):u.kind==="base64url"?MA.test(r.data)||(o=this._getOrReturnCtx(r,o),ne(o,{validation:"base64url",code:z.invalid_string,message:u.message}),i.dirty()):Ie.assertNever(u);return{status:i.value,value:r.data}}_regex(r,a,i){return this.refinement(o=>r.test(o),{validation:a,code:z.invalid_string,...fe.errToObj(i)})}_addCheck(r){return new Dn({...this._def,checks:[...this._def.checks,r]})}email(r){return this._addCheck({kind:"email",...fe.errToObj(r)})}url(r){return this._addCheck({kind:"url",...fe.errToObj(r)})}emoji(r){return this._addCheck({kind:"emoji",...fe.errToObj(r)})}uuid(r){return this._addCheck({kind:"uuid",...fe.errToObj(r)})}nanoid(r){return this._addCheck({kind:"nanoid",...fe.errToObj(r)})}cuid(r){return this._addCheck({kind:"cuid",...fe.errToObj(r)})}cuid2(r){return this._addCheck({kind:"cuid2",...fe.errToObj(r)})}ulid(r){return this._addCheck({kind:"ulid",...fe.errToObj(r)})}base64(r){return this._addCheck({kind:"base64",...fe.errToObj(r)})}base64url(r){return this._addCheck({kind:"base64url",...fe.errToObj(r)})}jwt(r){return this._addCheck({kind:"jwt",...fe.errToObj(r)})}ip(r){return this._addCheck({kind:"ip",...fe.errToObj(r)})}cidr(r){return this._addCheck({kind:"cidr",...fe.errToObj(r)})}datetime(r){return typeof r=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:r}):this._addCheck({kind:"datetime",precision:typeof r?.precision>"u"?null:r?.precision,offset:r?.offset??!1,local:r?.local??!1,...fe.errToObj(r?.message)})}date(r){return this._addCheck({kind:"date",message:r})}time(r){return typeof r=="string"?this._addCheck({kind:"time",precision:null,message:r}):this._addCheck({kind:"time",precision:typeof r?.precision>"u"?null:r?.precision,...fe.errToObj(r?.message)})}duration(r){return this._addCheck({kind:"duration",...fe.errToObj(r)})}regex(r,a){return this._addCheck({kind:"regex",regex:r,...fe.errToObj(a)})}includes(r,a){return this._addCheck({kind:"includes",value:r,position:a?.position,...fe.errToObj(a?.message)})}startsWith(r,a){return this._addCheck({kind:"startsWith",value:r,...fe.errToObj(a)})}endsWith(r,a){return this._addCheck({kind:"endsWith",value:r,...fe.errToObj(a)})}min(r,a){return this._addCheck({kind:"min",value:r,...fe.errToObj(a)})}max(r,a){return this._addCheck({kind:"max",value:r,...fe.errToObj(a)})}length(r,a){return this._addCheck({kind:"length",value:r,...fe.errToObj(a)})}nonempty(r){return this.min(1,fe.errToObj(r))}trim(){return new Dn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Dn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Dn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(r=>r.kind==="datetime")}get isDate(){return!!this._def.checks.find(r=>r.kind==="date")}get isTime(){return!!this._def.checks.find(r=>r.kind==="time")}get isDuration(){return!!this._def.checks.find(r=>r.kind==="duration")}get isEmail(){return!!this._def.checks.find(r=>r.kind==="email")}get isURL(){return!!this._def.checks.find(r=>r.kind==="url")}get isEmoji(){return!!this._def.checks.find(r=>r.kind==="emoji")}get isUUID(){return!!this._def.checks.find(r=>r.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(r=>r.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(r=>r.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(r=>r.kind==="cuid2")}get isULID(){return!!this._def.checks.find(r=>r.kind==="ulid")}get isIP(){return!!this._def.checks.find(r=>r.kind==="ip")}get isCIDR(){return!!this._def.checks.find(r=>r.kind==="cidr")}get isBase64(){return!!this._def.checks.find(r=>r.kind==="base64")}get isBase64url(){return!!this._def.checks.find(r=>r.kind==="base64url")}get minLength(){let r=null;for(const a of this._def.checks)a.kind==="min"&&(r===null||a.value>r)&&(r=a.value);return r}get maxLength(){let r=null;for(const a of this._def.checks)a.kind==="max"&&(r===null||a.value<r)&&(r=a.value);return r}}Dn.create=n=>new Dn({checks:[],typeName:ge.ZodString,coerce:n?.coerce??!1,..._e(n)});function jA(n,r){const a=(n.toString().split(".")[1]||"").length,i=(r.toString().split(".")[1]||"").length,o=a>i?a:i,u=Number.parseInt(n.toFixed(o).replace(".","")),f=Number.parseInt(r.toFixed(o).replace(".",""));return u%f/10**o}class ha extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(r){if(this._def.coerce&&(r.data=Number(r.data)),this._getType(r)!==ie.number){const u=this._getOrReturnCtx(r);return ne(u,{code:z.invalid_type,expected:ie.number,received:u.parsedType}),pe}let i;const o=new Rt;for(const u of this._def.checks)u.kind==="int"?Ie.isInteger(r.data)||(i=this._getOrReturnCtx(r,i),ne(i,{code:z.invalid_type,expected:"integer",received:"float",message:u.message}),o.dirty()):u.kind==="min"?(u.inclusive?r.data<u.value:r.data<=u.value)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),o.dirty()):u.kind==="max"?(u.inclusive?r.data>u.value:r.data>=u.value)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),o.dirty()):u.kind==="multipleOf"?jA(r.data,u.value)!==0&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.not_multiple_of,multipleOf:u.value,message:u.message}),o.dirty()):u.kind==="finite"?Number.isFinite(r.data)||(i=this._getOrReturnCtx(r,i),ne(i,{code:z.not_finite,message:u.message}),o.dirty()):Ie.assertNever(u);return{status:o.value,value:r.data}}gte(r,a){return this.setLimit("min",r,!0,fe.toString(a))}gt(r,a){return this.setLimit("min",r,!1,fe.toString(a))}lte(r,a){return this.setLimit("max",r,!0,fe.toString(a))}lt(r,a){return this.setLimit("max",r,!1,fe.toString(a))}setLimit(r,a,i,o){return new ha({...this._def,checks:[...this._def.checks,{kind:r,value:a,inclusive:i,message:fe.toString(o)}]})}_addCheck(r){return new ha({...this._def,checks:[...this._def.checks,r]})}int(r){return this._addCheck({kind:"int",message:fe.toString(r)})}positive(r){return this._addCheck({kind:"min",value:0,inclusive:!1,message:fe.toString(r)})}negative(r){return this._addCheck({kind:"max",value:0,inclusive:!1,message:fe.toString(r)})}nonpositive(r){return this._addCheck({kind:"max",value:0,inclusive:!0,message:fe.toString(r)})}nonnegative(r){return this._addCheck({kind:"min",value:0,inclusive:!0,message:fe.toString(r)})}multipleOf(r,a){return this._addCheck({kind:"multipleOf",value:r,message:fe.toString(a)})}finite(r){return this._addCheck({kind:"finite",message:fe.toString(r)})}safe(r){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:fe.toString(r)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:fe.toString(r)})}get minValue(){let r=null;for(const a of this._def.checks)a.kind==="min"&&(r===null||a.value>r)&&(r=a.value);return r}get maxValue(){let r=null;for(const a of this._def.checks)a.kind==="max"&&(r===null||a.value<r)&&(r=a.value);return r}get isInt(){return!!this._def.checks.find(r=>r.kind==="int"||r.kind==="multipleOf"&&Ie.isInteger(r.value))}get isFinite(){let r=null,a=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(a===null||i.value>a)&&(a=i.value):i.kind==="max"&&(r===null||i.value<r)&&(r=i.value)}return Number.isFinite(a)&&Number.isFinite(r)}}ha.create=n=>new ha({checks:[],typeName:ge.ZodNumber,coerce:n?.coerce||!1,..._e(n)});class pa extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(r){if(this._def.coerce)try{r.data=BigInt(r.data)}catch{return this._getInvalidInput(r)}if(this._getType(r)!==ie.bigint)return this._getInvalidInput(r);let i;const o=new Rt;for(const u of this._def.checks)u.kind==="min"?(u.inclusive?r.data<u.value:r.data<=u.value)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),o.dirty()):u.kind==="max"?(u.inclusive?r.data>u.value:r.data>=u.value)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),o.dirty()):u.kind==="multipleOf"?r.data%u.value!==BigInt(0)&&(i=this._getOrReturnCtx(r,i),ne(i,{code:z.not_multiple_of,multipleOf:u.value,message:u.message}),o.dirty()):Ie.assertNever(u);return{status:o.value,value:r.data}}_getInvalidInput(r){const a=this._getOrReturnCtx(r);return ne(a,{code:z.invalid_type,expected:ie.bigint,received:a.parsedType}),pe}gte(r,a){return this.setLimit("min",r,!0,fe.toString(a))}gt(r,a){return this.setLimit("min",r,!1,fe.toString(a))}lte(r,a){return this.setLimit("max",r,!0,fe.toString(a))}lt(r,a){return this.setLimit("max",r,!1,fe.toString(a))}setLimit(r,a,i,o){return new pa({...this._def,checks:[...this._def.checks,{kind:r,value:a,inclusive:i,message:fe.toString(o)}]})}_addCheck(r){return new pa({...this._def,checks:[...this._def.checks,r]})}positive(r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:fe.toString(r)})}negative(r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:fe.toString(r)})}nonpositive(r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:fe.toString(r)})}nonnegative(r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:fe.toString(r)})}multipleOf(r,a){return this._addCheck({kind:"multipleOf",value:r,message:fe.toString(a)})}get minValue(){let r=null;for(const a of this._def.checks)a.kind==="min"&&(r===null||a.value>r)&&(r=a.value);return r}get maxValue(){let r=null;for(const a of this._def.checks)a.kind==="max"&&(r===null||a.value<r)&&(r=a.value);return r}}pa.create=n=>new pa({checks:[],typeName:ge.ZodBigInt,coerce:n?.coerce??!1,..._e(n)});class xc extends Ce{_parse(r){if(this._def.coerce&&(r.data=!!r.data),this._getType(r)!==ie.boolean){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.boolean,received:i.parsedType}),pe}return pn(r.data)}}xc.create=n=>new xc({typeName:ge.ZodBoolean,coerce:n?.coerce||!1,..._e(n)});class ps extends Ce{_parse(r){if(this._def.coerce&&(r.data=new Date(r.data)),this._getType(r)!==ie.date){const u=this._getOrReturnCtx(r);return ne(u,{code:z.invalid_type,expected:ie.date,received:u.parsedType}),pe}if(Number.isNaN(r.data.getTime())){const u=this._getOrReturnCtx(r);return ne(u,{code:z.invalid_date}),pe}const i=new Rt;let o;for(const u of this._def.checks)u.kind==="min"?r.data.getTime()<u.value&&(o=this._getOrReturnCtx(r,o),ne(o,{code:z.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),i.dirty()):u.kind==="max"?r.data.getTime()>u.value&&(o=this._getOrReturnCtx(r,o),ne(o,{code:z.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),i.dirty()):Ie.assertNever(u);return{status:i.value,value:new Date(r.data.getTime())}}_addCheck(r){return new ps({...this._def,checks:[...this._def.checks,r]})}min(r,a){return this._addCheck({kind:"min",value:r.getTime(),message:fe.toString(a)})}max(r,a){return this._addCheck({kind:"max",value:r.getTime(),message:fe.toString(a)})}get minDate(){let r=null;for(const a of this._def.checks)a.kind==="min"&&(r===null||a.value>r)&&(r=a.value);return r!=null?new Date(r):null}get maxDate(){let r=null;for(const a of this._def.checks)a.kind==="max"&&(r===null||a.value<r)&&(r=a.value);return r!=null?new Date(r):null}}ps.create=n=>new ps({checks:[],coerce:n?.coerce||!1,typeName:ge.ZodDate,..._e(n)});class gb extends Ce{_parse(r){if(this._getType(r)!==ie.symbol){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.symbol,received:i.parsedType}),pe}return pn(r.data)}}gb.create=n=>new gb({typeName:ge.ZodSymbol,..._e(n)});class fm extends Ce{_parse(r){if(this._getType(r)!==ie.undefined){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.undefined,received:i.parsedType}),pe}return pn(r.data)}}fm.create=n=>new fm({typeName:ge.ZodUndefined,..._e(n)});class dm extends Ce{_parse(r){if(this._getType(r)!==ie.null){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.null,received:i.parsedType}),pe}return pn(r.data)}}dm.create=n=>new dm({typeName:ge.ZodNull,..._e(n)});class yb extends Ce{constructor(){super(...arguments),this._any=!0}_parse(r){return pn(r.data)}}yb.create=n=>new yb({typeName:ge.ZodAny,..._e(n)});class vb extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(r){return pn(r.data)}}vb.create=n=>new vb({typeName:ge.ZodUnknown,..._e(n)});class Gr extends Ce{_parse(r){const a=this._getOrReturnCtx(r);return ne(a,{code:z.invalid_type,expected:ie.never,received:a.parsedType}),pe}}Gr.create=n=>new Gr({typeName:ge.ZodNever,..._e(n)});class bb extends Ce{_parse(r){if(this._getType(r)!==ie.undefined){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.void,received:i.parsedType}),pe}return pn(r.data)}}bb.create=n=>new bb({typeName:ge.ZodVoid,..._e(n)});class Un extends Ce{_parse(r){const{ctx:a,status:i}=this._processInputParams(r),o=this._def;if(a.parsedType!==ie.array)return ne(a,{code:z.invalid_type,expected:ie.array,received:a.parsedType}),pe;if(o.exactLength!==null){const f=a.data.length>o.exactLength.value,m=a.data.length<o.exactLength.value;(f||m)&&(ne(a,{code:f?z.too_big:z.too_small,minimum:m?o.exactLength.value:void 0,maximum:f?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&a.data.length<o.minLength.value&&(ne(a,{code:z.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&a.data.length>o.maxLength.value&&(ne(a,{code:z.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),a.common.async)return Promise.all([...a.data].map((f,m)=>o.type._parseAsync(new Bn(a,f,a.path,m)))).then(f=>Rt.mergeArray(i,f));const u=[...a.data].map((f,m)=>o.type._parseSync(new Bn(a,f,a.path,m)));return Rt.mergeArray(i,u)}get element(){return this._def.type}min(r,a){return new Un({...this._def,minLength:{value:r,message:fe.toString(a)}})}max(r,a){return new Un({...this._def,maxLength:{value:r,message:fe.toString(a)}})}length(r,a){return new Un({...this._def,exactLength:{value:r,message:fe.toString(a)}})}nonempty(r){return this.min(1,r)}}Un.create=(n,r)=>new Un({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ge.ZodArray,..._e(r)});function cs(n){if(n instanceof lt){const r={};for(const a in n.shape){const i=n.shape[a];r[a]=ur.create(cs(i))}return new lt({...n._def,shape:()=>r})}else return n instanceof Un?new Un({...n._def,type:cs(n.element)}):n instanceof ur?ur.create(cs(n.unwrap())):n instanceof ba?ba.create(cs(n.unwrap())):n instanceof ga?ga.create(n.items.map(r=>cs(r))):n}class lt extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const r=this._def.shape(),a=Ie.objectKeys(r);return this._cached={shape:r,keys:a},this._cached}_parse(r){if(this._getType(r)!==ie.object){const p=this._getOrReturnCtx(r);return ne(p,{code:z.invalid_type,expected:ie.object,received:p.parsedType}),pe}const{status:i,ctx:o}=this._processInputParams(r),{shape:u,keys:f}=this._getCached(),m=[];if(!(this._def.catchall instanceof Gr&&this._def.unknownKeys==="strip"))for(const p in o.data)f.includes(p)||m.push(p);const h=[];for(const p of f){const g=u[p],v=o.data[p];h.push({key:{status:"valid",value:p},value:g._parse(new Bn(o,v,o.path,p)),alwaysSet:p in o.data})}if(this._def.catchall instanceof Gr){const p=this._def.unknownKeys;if(p==="passthrough")for(const g of m)h.push({key:{status:"valid",value:g},value:{status:"valid",value:o.data[g]}});else if(p==="strict")m.length>0&&(ne(o,{code:z.unrecognized_keys,keys:m}),i.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const g of m){const v=o.data[g];h.push({key:{status:"valid",value:g},value:p._parse(new Bn(o,v,o.path,g)),alwaysSet:g in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const p=[];for(const g of h){const v=await g.key,b=await g.value;p.push({key:v,value:b,alwaysSet:g.alwaysSet})}return p}).then(p=>Rt.mergeObjectSync(i,p)):Rt.mergeObjectSync(i,h)}get shape(){return this._def.shape()}strict(r){return fe.errToObj,new lt({...this._def,unknownKeys:"strict",...r!==void 0?{errorMap:(a,i)=>{const o=this._def.errorMap?.(a,i).message??i.defaultError;return a.code==="unrecognized_keys"?{message:fe.errToObj(r).message??o}:{message:o}}}:{}})}strip(){return new lt({...this._def,unknownKeys:"strip"})}passthrough(){return new lt({...this._def,unknownKeys:"passthrough"})}extend(r){return new lt({...this._def,shape:()=>({...this._def.shape(),...r})})}merge(r){return new lt({unknownKeys:r._def.unknownKeys,catchall:r._def.catchall,shape:()=>({...this._def.shape(),...r._def.shape()}),typeName:ge.ZodObject})}setKey(r,a){return this.augment({[r]:a})}catchall(r){return new lt({...this._def,catchall:r})}pick(r){const a={};for(const i of Ie.objectKeys(r))r[i]&&this.shape[i]&&(a[i]=this.shape[i]);return new lt({...this._def,shape:()=>a})}omit(r){const a={};for(const i of Ie.objectKeys(this.shape))r[i]||(a[i]=this.shape[i]);return new lt({...this._def,shape:()=>a})}deepPartial(){return cs(this)}partial(r){const a={};for(const i of Ie.objectKeys(this.shape)){const o=this.shape[i];r&&!r[i]?a[i]=o:a[i]=o.optional()}return new lt({...this._def,shape:()=>a})}required(r){const a={};for(const i of Ie.objectKeys(this.shape))if(r&&!r[i])a[i]=this.shape[i];else{let u=this.shape[i];for(;u instanceof ur;)u=u._def.innerType;a[i]=u}return new lt({...this._def,shape:()=>a})}keyof(){return $E(Ie.objectKeys(this.shape))}}lt.create=(n,r)=>new lt({shape:()=>n,unknownKeys:"strip",catchall:Gr.create(),typeName:ge.ZodObject,..._e(r)});lt.strictCreate=(n,r)=>new lt({shape:()=>n,unknownKeys:"strict",catchall:Gr.create(),typeName:ge.ZodObject,..._e(r)});lt.lazycreate=(n,r)=>new lt({shape:n,unknownKeys:"strip",catchall:Gr.create(),typeName:ge.ZodObject,..._e(r)});class zc extends Ce{_parse(r){const{ctx:a}=this._processInputParams(r),i=this._def.options;function o(u){for(const m of u)if(m.result.status==="valid")return m.result;for(const m of u)if(m.result.status==="dirty")return a.common.issues.push(...m.ctx.common.issues),m.result;const f=u.map(m=>new $n(m.ctx.common.issues));return ne(a,{code:z.invalid_union,unionErrors:f}),pe}if(a.common.async)return Promise.all(i.map(async u=>{const f={...a,common:{...a.common,issues:[]},parent:null};return{result:await u._parseAsync({data:a.data,path:a.path,parent:f}),ctx:f}})).then(o);{let u;const f=[];for(const h of i){const p={...a,common:{...a.common,issues:[]},parent:null},g=h._parseSync({data:a.data,path:a.path,parent:p});if(g.status==="valid")return g;g.status==="dirty"&&!u&&(u={result:g,ctx:p}),p.common.issues.length&&f.push(p.common.issues)}if(u)return a.common.issues.push(...u.ctx.common.issues),u.result;const m=f.map(h=>new $n(h));return ne(a,{code:z.invalid_union,unionErrors:m}),pe}}get options(){return this._def.options}}zc.create=(n,r)=>new zc({options:n,typeName:ge.ZodUnion,..._e(r)});const or=n=>n instanceof Uc?or(n.schema):n instanceof va?or(n.innerType()):n instanceof jc?[n.value]:n instanceof ya?n.options:n instanceof hm?Ie.objectValues(n.enum):n instanceof Bc?or(n._def.innerType):n instanceof fm?[void 0]:n instanceof dm?[null]:n instanceof ur?[void 0,...or(n.unwrap())]:n instanceof ba?[null,...or(n.unwrap())]:n instanceof BE||n instanceof Pc?or(n.unwrap()):n instanceof qc?or(n._def.innerType):[];class Lm extends Ce{_parse(r){const{ctx:a}=this._processInputParams(r);if(a.parsedType!==ie.object)return ne(a,{code:z.invalid_type,expected:ie.object,received:a.parsedType}),pe;const i=this.discriminator,o=a.data[i],u=this.optionsMap.get(o);return u?a.common.async?u._parseAsync({data:a.data,path:a.path,parent:a}):u._parseSync({data:a.data,path:a.path,parent:a}):(ne(a,{code:z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(r,a,i){const o=new Map;for(const u of a){const f=or(u.shape[r]);if(!f.length)throw new Error(`A discriminator value for key \`${r}\` could not be extracted from all schema options`);for(const m of f){if(o.has(m))throw new Error(`Discriminator property ${String(r)} has duplicate value ${String(m)}`);o.set(m,u)}}return new Lm({typeName:ge.ZodDiscriminatedUnion,discriminator:r,options:a,optionsMap:o,..._e(i)})}}function mm(n,r){const a=jr(n),i=jr(r);if(n===r)return{valid:!0,data:n};if(a===ie.object&&i===ie.object){const o=Ie.objectKeys(r),u=Ie.objectKeys(n).filter(m=>o.indexOf(m)!==-1),f={...n,...r};for(const m of u){const h=mm(n[m],r[m]);if(!h.valid)return{valid:!1};f[m]=h.data}return{valid:!0,data:f}}else if(a===ie.array&&i===ie.array){if(n.length!==r.length)return{valid:!1};const o=[];for(let u=0;u<n.length;u++){const f=n[u],m=r[u],h=mm(f,m);if(!h.valid)return{valid:!1};o.push(h.data)}return{valid:!0,data:o}}else return a===ie.date&&i===ie.date&&+n==+r?{valid:!0,data:n}:{valid:!1}}class Lc extends Ce{_parse(r){const{status:a,ctx:i}=this._processInputParams(r),o=(u,f)=>{if(mb(u)||mb(f))return pe;const m=mm(u.value,f.value);return m.valid?((hb(u)||hb(f))&&a.dirty(),{status:a.value,value:m.data}):(ne(i,{code:z.invalid_intersection_types}),pe)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([u,f])=>o(u,f)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Lc.create=(n,r,a)=>new Lc({left:n,right:r,typeName:ge.ZodIntersection,..._e(a)});class ga extends Ce{_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.parsedType!==ie.array)return ne(i,{code:z.invalid_type,expected:ie.array,received:i.parsedType}),pe;if(i.data.length<this._def.items.length)return ne(i,{code:z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pe;!this._def.rest&&i.data.length>this._def.items.length&&(ne(i,{code:z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const u=[...i.data].map((f,m)=>{const h=this._def.items[m]||this._def.rest;return h?h._parse(new Bn(i,f,i.path,m)):null}).filter(f=>!!f);return i.common.async?Promise.all(u).then(f=>Rt.mergeArray(a,f)):Rt.mergeArray(a,u)}get items(){return this._def.items}rest(r){return new ga({...this._def,rest:r})}}ga.create=(n,r)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ga({items:n,typeName:ge.ZodTuple,rest:null,..._e(r)})};class Dc extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.parsedType!==ie.object)return ne(i,{code:z.invalid_type,expected:ie.object,received:i.parsedType}),pe;const o=[],u=this._def.keyType,f=this._def.valueType;for(const m in i.data)o.push({key:u._parse(new Bn(i,m,i.path,m)),value:f._parse(new Bn(i,i.data[m],i.path,m)),alwaysSet:m in i.data});return i.common.async?Rt.mergeObjectAsync(a,o):Rt.mergeObjectSync(a,o)}get element(){return this._def.valueType}static create(r,a,i){return a instanceof Ce?new Dc({keyType:r,valueType:a,typeName:ge.ZodRecord,..._e(i)}):new Dc({keyType:Dn.create(),valueType:r,typeName:ge.ZodRecord,..._e(a)})}}class Eb extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.parsedType!==ie.map)return ne(i,{code:z.invalid_type,expected:ie.map,received:i.parsedType}),pe;const o=this._def.keyType,u=this._def.valueType,f=[...i.data.entries()].map(([m,h],p)=>({key:o._parse(new Bn(i,m,i.path,[p,"key"])),value:u._parse(new Bn(i,h,i.path,[p,"value"]))}));if(i.common.async){const m=new Map;return Promise.resolve().then(async()=>{for(const h of f){const p=await h.key,g=await h.value;if(p.status==="aborted"||g.status==="aborted")return pe;(p.status==="dirty"||g.status==="dirty")&&a.dirty(),m.set(p.value,g.value)}return{status:a.value,value:m}})}else{const m=new Map;for(const h of f){const p=h.key,g=h.value;if(p.status==="aborted"||g.status==="aborted")return pe;(p.status==="dirty"||g.status==="dirty")&&a.dirty(),m.set(p.value,g.value)}return{status:a.value,value:m}}}}Eb.create=(n,r,a)=>new Eb({valueType:r,keyType:n,typeName:ge.ZodMap,..._e(a)});class zi extends Ce{_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.parsedType!==ie.set)return ne(i,{code:z.invalid_type,expected:ie.set,received:i.parsedType}),pe;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(ne(i,{code:z.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),a.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(ne(i,{code:z.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),a.dirty());const u=this._def.valueType;function f(h){const p=new Set;for(const g of h){if(g.status==="aborted")return pe;g.status==="dirty"&&a.dirty(),p.add(g.value)}return{status:a.value,value:p}}const m=[...i.data.values()].map((h,p)=>u._parse(new Bn(i,h,i.path,p)));return i.common.async?Promise.all(m).then(h=>f(h)):f(m)}min(r,a){return new zi({...this._def,minSize:{value:r,message:fe.toString(a)}})}max(r,a){return new zi({...this._def,maxSize:{value:r,message:fe.toString(a)}})}size(r,a){return this.min(r,a).max(r,a)}nonempty(r){return this.min(1,r)}}zi.create=(n,r)=>new zi({valueType:n,minSize:null,maxSize:null,typeName:ge.ZodSet,..._e(r)});class Uc extends Ce{get schema(){return this._def.getter()}_parse(r){const{ctx:a}=this._processInputParams(r);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}Uc.create=(n,r)=>new Uc({getter:n,typeName:ge.ZodLazy,..._e(r)});class jc extends Ce{_parse(r){if(r.data!==this._def.value){const a=this._getOrReturnCtx(r);return ne(a,{received:a.data,code:z.invalid_literal,expected:this._def.value}),pe}return{status:"valid",value:r.data}}get value(){return this._def.value}}jc.create=(n,r)=>new jc({value:n,typeName:ge.ZodLiteral,..._e(r)});function $E(n,r){return new ya({values:n,typeName:ge.ZodEnum,..._e(r)})}class ya extends Ce{_parse(r){if(typeof r.data!="string"){const a=this._getOrReturnCtx(r),i=this._def.values;return ne(a,{expected:Ie.joinValues(i),received:a.parsedType,code:z.invalid_type}),pe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(r.data)){const a=this._getOrReturnCtx(r),i=this._def.values;return ne(a,{received:a.data,code:z.invalid_enum_value,options:i}),pe}return pn(r.data)}get options(){return this._def.values}get enum(){const r={};for(const a of this._def.values)r[a]=a;return r}get Values(){const r={};for(const a of this._def.values)r[a]=a;return r}get Enum(){const r={};for(const a of this._def.values)r[a]=a;return r}extract(r,a=this._def){return ya.create(r,{...this._def,...a})}exclude(r,a=this._def){return ya.create(this.options.filter(i=>!r.includes(i)),{...this._def,...a})}}ya.create=$E;class hm extends Ce{_parse(r){const a=Ie.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(r);if(i.parsedType!==ie.string&&i.parsedType!==ie.number){const o=Ie.objectValues(a);return ne(i,{expected:Ie.joinValues(o),received:i.parsedType,code:z.invalid_type}),pe}if(this._cache||(this._cache=new Set(Ie.getValidEnumValues(this._def.values))),!this._cache.has(r.data)){const o=Ie.objectValues(a);return ne(i,{received:i.data,code:z.invalid_enum_value,options:o}),pe}return pn(r.data)}get enum(){return this._def.values}}hm.create=(n,r)=>new hm({values:n,typeName:ge.ZodNativeEnum,..._e(r)});class $c extends Ce{unwrap(){return this._def.type}_parse(r){const{ctx:a}=this._processInputParams(r);if(a.parsedType!==ie.promise&&a.common.async===!1)return ne(a,{code:z.invalid_type,expected:ie.promise,received:a.parsedType}),pe;const i=a.parsedType===ie.promise?a.data:Promise.resolve(a.data);return pn(i.then(o=>this._def.type.parseAsync(o,{path:a.path,errorMap:a.common.contextualErrorMap})))}}$c.create=(n,r)=>new $c({type:n,typeName:ge.ZodPromise,..._e(r)});class va extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(r){const{status:a,ctx:i}=this._processInputParams(r),o=this._def.effect||null,u={addIssue:f=>{ne(i,f),f.fatal?a.abort():a.dirty()},get path(){return i.path}};if(u.addIssue=u.addIssue.bind(u),o.type==="preprocess"){const f=o.transform(i.data,u);if(i.common.async)return Promise.resolve(f).then(async m=>{if(a.value==="aborted")return pe;const h=await this._def.schema._parseAsync({data:m,path:i.path,parent:i});return h.status==="aborted"?pe:h.status==="dirty"||a.value==="dirty"?Ti(h.value):h});{if(a.value==="aborted")return pe;const m=this._def.schema._parseSync({data:f,path:i.path,parent:i});return m.status==="aborted"?pe:m.status==="dirty"||a.value==="dirty"?Ti(m.value):m}}if(o.type==="refinement"){const f=m=>{const h=o.refinement(m,u);if(i.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return m};if(i.common.async===!1){const m=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return m.status==="aborted"?pe:(m.status==="dirty"&&a.dirty(),f(m.value),{status:a.value,value:m.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(m=>m.status==="aborted"?pe:(m.status==="dirty"&&a.dirty(),f(m.value).then(()=>({status:a.value,value:m.value}))))}if(o.type==="transform")if(i.common.async===!1){const f=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!hs(f))return pe;const m=o.transform(f.value,u);if(m instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:m}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(f=>hs(f)?Promise.resolve(o.transform(f.value,u)).then(m=>({status:a.value,value:m})):pe);Ie.assertNever(o)}}va.create=(n,r,a)=>new va({schema:n,typeName:ge.ZodEffects,effect:r,..._e(a)});va.createWithPreprocess=(n,r,a)=>new va({schema:r,effect:{type:"preprocess",transform:n},typeName:ge.ZodEffects,..._e(a)});class ur extends Ce{_parse(r){return this._getType(r)===ie.undefined?pn(void 0):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}ur.create=(n,r)=>new ur({innerType:n,typeName:ge.ZodOptional,..._e(r)});class ba extends Ce{_parse(r){return this._getType(r)===ie.null?pn(null):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}ba.create=(n,r)=>new ba({innerType:n,typeName:ge.ZodNullable,..._e(r)});class Bc extends Ce{_parse(r){const{ctx:a}=this._processInputParams(r);let i=a.data;return a.parsedType===ie.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}Bc.create=(n,r)=>new Bc({innerType:n,typeName:ge.ZodDefault,defaultValue:typeof r.default=="function"?r.default:()=>r.default,..._e(r)});class qc extends Ce{_parse(r){const{ctx:a}=this._processInputParams(r),i={...a,common:{...a.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Ic(o)?o.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new $n(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new $n(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}qc.create=(n,r)=>new qc({innerType:n,typeName:ge.ZodCatch,catchValue:typeof r.catch=="function"?r.catch:()=>r.catch,..._e(r)});class Sb extends Ce{_parse(r){if(this._getType(r)!==ie.nan){const i=this._getOrReturnCtx(r);return ne(i,{code:z.invalid_type,expected:ie.nan,received:i.parsedType}),pe}return{status:"valid",value:r.data}}}Sb.create=n=>new Sb({typeName:ge.ZodNaN,..._e(n)});class BE extends Ce{_parse(r){const{ctx:a}=this._processInputParams(r),i=a.data;return this._def.type._parse({data:i,path:a.path,parent:a})}unwrap(){return this._def.type}}class Dm extends Ce{_parse(r){const{status:a,ctx:i}=this._processInputParams(r);if(i.common.async)return(async()=>{const u=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return u.status==="aborted"?pe:u.status==="dirty"?(a.dirty(),Ti(u.value)):this._def.out._parseAsync({data:u.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?pe:o.status==="dirty"?(a.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(r,a){return new Dm({in:r,out:a,typeName:ge.ZodPipeline})}}class Pc extends Ce{_parse(r){const a=this._def.innerType._parse(r),i=o=>(hs(o)&&(o.value=Object.freeze(o.value)),o);return Ic(a)?a.then(o=>i(o)):i(a)}unwrap(){return this._def.innerType}}Pc.create=(n,r)=>new Pc({innerType:n,typeName:ge.ZodReadonly,..._e(r)});var ge;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ge||(ge={}));const Oe=Dn.create,$A=ha.create;pa.create;const Li=xc.create;ps.create;Gr.create;const be=Un.create,Z=lt.create,Fc=zc.create,Pt=Lm.create;Lc.create;ga.create;const Um=Dc.create,jm=Uc.create,ae=jc.create,We=ya.create;$c.create;ur.create;ba.create;const qE={string:(n=>Dn.create({...n,coerce:!0})),number:(n=>ha.create({...n,coerce:!0})),boolean:(n=>xc.create({...n,coerce:!0})),bigint:(n=>pa.create({...n,coerce:!0})),date:(n=>ps.create({...n,coerce:!0}))},gs=pe;var kc={exports:{}},id,_b;function Qc(){if(_b)return id;_b=1;const n="2.0.0",r=256,a=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,o=r-6;return id={MAX_LENGTH:r,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:o,MAX_SAFE_INTEGER:a,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},id}var od,Tb;function Kc(){if(Tb)return od;Tb=1;var n={};return od=typeof process=="object"&&n&&n.NODE_DEBUG&&/\bsemver\b/i.test(n.NODE_DEBUG)?(...a)=>console.error("SEMVER",...a):()=>{},od}var wb;function $i(){return wb||(wb=1,(function(n,r){const{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=Qc(),u=Kc();r=n.exports={};const f=r.re=[],m=r.safeRe=[],h=r.src=[],p=r.safeSrc=[],g=r.t={};let v=0;const b="[a-zA-Z0-9-]",T=[["\\s",1],["\\d",o],[b,i]],w=A=>{for(const[_,C]of T)A=A.split(`${_}*`).join(`${_}{0,${C}}`).split(`${_}+`).join(`${_}{1,${C}}`);return A},S=(A,_,C)=>{const N=w(_),M=v++;u(A,M,_),g[A]=M,h[M]=_,p[M]=N,f[M]=new RegExp(_,C?"g":void 0),m[M]=new RegExp(N,C?"g":void 0)};S("NUMERICIDENTIFIER","0|[1-9]\\d*"),S("NUMERICIDENTIFIERLOOSE","\\d+"),S("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${b}*`),S("MAINVERSION",`(${h[g.NUMERICIDENTIFIER]})\\.(${h[g.NUMERICIDENTIFIER]})\\.(${h[g.NUMERICIDENTIFIER]})`),S("MAINVERSIONLOOSE",`(${h[g.NUMERICIDENTIFIERLOOSE]})\\.(${h[g.NUMERICIDENTIFIERLOOSE]})\\.(${h[g.NUMERICIDENTIFIERLOOSE]})`),S("PRERELEASEIDENTIFIER",`(?:${h[g.NONNUMERICIDENTIFIER]}|${h[g.NUMERICIDENTIFIER]})`),S("PRERELEASEIDENTIFIERLOOSE",`(?:${h[g.NONNUMERICIDENTIFIER]}|${h[g.NUMERICIDENTIFIERLOOSE]})`),S("PRERELEASE",`(?:-(${h[g.PRERELEASEIDENTIFIER]}(?:\\.${h[g.PRERELEASEIDENTIFIER]})*))`),S("PRERELEASELOOSE",`(?:-?(${h[g.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[g.PRERELEASEIDENTIFIERLOOSE]})*))`),S("BUILDIDENTIFIER",`${b}+`),S("BUILD",`(?:\\+(${h[g.BUILDIDENTIFIER]}(?:\\.${h[g.BUILDIDENTIFIER]})*))`),S("FULLPLAIN",`v?${h[g.MAINVERSION]}${h[g.PRERELEASE]}?${h[g.BUILD]}?`),S("FULL",`^${h[g.FULLPLAIN]}$`),S("LOOSEPLAIN",`[v=\\s]*${h[g.MAINVERSIONLOOSE]}${h[g.PRERELEASELOOSE]}?${h[g.BUILD]}?`),S("LOOSE",`^${h[g.LOOSEPLAIN]}$`),S("GTLT","((?:<|>)?=?)"),S("XRANGEIDENTIFIERLOOSE",`${h[g.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),S("XRANGEIDENTIFIER",`${h[g.NUMERICIDENTIFIER]}|x|X|\\*`),S("XRANGEPLAIN",`[v=\\s]*(${h[g.XRANGEIDENTIFIER]})(?:\\.(${h[g.XRANGEIDENTIFIER]})(?:\\.(${h[g.XRANGEIDENTIFIER]})(?:${h[g.PRERELEASE]})?${h[g.BUILD]}?)?)?`),S("XRANGEPLAINLOOSE",`[v=\\s]*(${h[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[g.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[g.XRANGEIDENTIFIERLOOSE]})(?:${h[g.PRERELEASELOOSE]})?${h[g.BUILD]}?)?)?`),S("XRANGE",`^${h[g.GTLT]}\\s*${h[g.XRANGEPLAIN]}$`),S("XRANGELOOSE",`^${h[g.GTLT]}\\s*${h[g.XRANGEPLAINLOOSE]}$`),S("COERCEPLAIN",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?`),S("COERCE",`${h[g.COERCEPLAIN]}(?:$|[^\\d])`),S("COERCEFULL",h[g.COERCEPLAIN]+`(?:${h[g.PRERELEASE]})?(?:${h[g.BUILD]})?(?:$|[^\\d])`),S("COERCERTL",h[g.COERCE],!0),S("COERCERTLFULL",h[g.COERCEFULL],!0),S("LONETILDE","(?:~>?)"),S("TILDETRIM",`(\\s*)${h[g.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",S("TILDE",`^${h[g.LONETILDE]}${h[g.XRANGEPLAIN]}$`),S("TILDELOOSE",`^${h[g.LONETILDE]}${h[g.XRANGEPLAINLOOSE]}$`),S("LONECARET","(?:\\^)"),S("CARETTRIM",`(\\s*)${h[g.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",S("CARET",`^${h[g.LONECARET]}${h[g.XRANGEPLAIN]}$`),S("CARETLOOSE",`^${h[g.LONECARET]}${h[g.XRANGEPLAINLOOSE]}$`),S("COMPARATORLOOSE",`^${h[g.GTLT]}\\s*(${h[g.LOOSEPLAIN]})$|^$`),S("COMPARATOR",`^${h[g.GTLT]}\\s*(${h[g.FULLPLAIN]})$|^$`),S("COMPARATORTRIM",`(\\s*)${h[g.GTLT]}\\s*(${h[g.LOOSEPLAIN]}|${h[g.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",S("HYPHENRANGE",`^\\s*(${h[g.XRANGEPLAIN]})\\s+-\\s+(${h[g.XRANGEPLAIN]})\\s*$`),S("HYPHENRANGELOOSE",`^\\s*(${h[g.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[g.XRANGEPLAINLOOSE]})\\s*$`),S("STAR","(<|>)?=?\\s*\\*"),S("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),S("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(kc,kc.exports)),kc.exports}var cd,Ob;function $m(){if(Ob)return cd;Ob=1;const n=Object.freeze({loose:!0}),r=Object.freeze({});return cd=i=>i?typeof i!="object"?n:i:r,cd}var ud,kb;function PE(){if(kb)return ud;kb=1;const n=/^[0-9]+$/,r=(i,o)=>{if(typeof i=="number"&&typeof o=="number")return i===o?0:i<o?-1:1;const u=n.test(i),f=n.test(o);return u&&f&&(i=+i,o=+o),i===o?0:u&&!f?-1:f&&!u?1:i<o?-1:1};return ud={compareIdentifiers:r,rcompareIdentifiers:(i,o)=>r(o,i)},ud}var ld,Ab;function Ct(){if(Ab)return ld;Ab=1;const n=Kc(),{MAX_LENGTH:r,MAX_SAFE_INTEGER:a}=Qc(),{safeRe:i,t:o}=$i(),u=$m(),{compareIdentifiers:f}=PE();class m{constructor(p,g){if(g=u(g),p instanceof m){if(p.loose===!!g.loose&&p.includePrerelease===!!g.includePrerelease)return p;p=p.version}else if(typeof p!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof p}".`);if(p.length>r)throw new TypeError(`version is longer than ${r} characters`);n("SemVer",p,g),this.options=g,this.loose=!!g.loose,this.includePrerelease=!!g.includePrerelease;const v=p.trim().match(g.loose?i[o.LOOSE]:i[o.FULL]);if(!v)throw new TypeError(`Invalid Version: ${p}`);if(this.raw=p,this.major=+v[1],this.minor=+v[2],this.patch=+v[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");v[4]?this.prerelease=v[4].split(".").map(b=>{if(/^[0-9]+$/.test(b)){const T=+b;if(T>=0&&T<a)return T}return b}):this.prerelease=[],this.build=v[5]?v[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(p){if(n("SemVer.compare",this.version,this.options,p),!(p instanceof m)){if(typeof p=="string"&&p===this.version)return 0;p=new m(p,this.options)}return p.version===this.version?0:this.compareMain(p)||this.comparePre(p)}compareMain(p){return p instanceof m||(p=new m(p,this.options)),this.major<p.major?-1:this.major>p.major?1:this.minor<p.minor?-1:this.minor>p.minor?1:this.patch<p.patch?-1:this.patch>p.patch?1:0}comparePre(p){if(p instanceof m||(p=new m(p,this.options)),this.prerelease.length&&!p.prerelease.length)return-1;if(!this.prerelease.length&&p.prerelease.length)return 1;if(!this.prerelease.length&&!p.prerelease.length)return 0;let g=0;do{const v=this.prerelease[g],b=p.prerelease[g];if(n("prerelease compare",g,v,b),v===void 0&&b===void 0)return 0;if(b===void 0)return 1;if(v===void 0)return-1;if(v===b)continue;return f(v,b)}while(++g)}compareBuild(p){p instanceof m||(p=new m(p,this.options));let g=0;do{const v=this.build[g],b=p.build[g];if(n("build compare",g,v,b),v===void 0&&b===void 0)return 0;if(b===void 0)return 1;if(v===void 0)return-1;if(v===b)continue;return f(v,b)}while(++g)}inc(p,g,v){if(p.startsWith("pre")){if(!g&&v===!1)throw new Error("invalid increment argument: identifier is empty");if(g){const b=`-${g}`.match(this.options.loose?i[o.PRERELEASELOOSE]:i[o.PRERELEASE]);if(!b||b[1]!==g)throw new Error(`invalid identifier: ${g}`)}}switch(p){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",g,v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",g,v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",g,v),this.inc("pre",g,v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",g,v),this.inc("pre",g,v);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const b=Number(v)?1:0;if(this.prerelease.length===0)this.prerelease=[b];else{let T=this.prerelease.length;for(;--T>=0;)typeof this.prerelease[T]=="number"&&(this.prerelease[T]++,T=-2);if(T===-1){if(g===this.prerelease.join(".")&&v===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(b)}}if(g){let T=[g,b];v===!1&&(T=[g]),f(this.prerelease[0],g)===0?isNaN(this.prerelease[1])&&(this.prerelease=T):this.prerelease=T}break}default:throw new Error(`invalid increment argument: ${p}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ld=m,ld}var fd,Rb;function Es(){if(Rb)return fd;Rb=1;const n=Ct();return fd=(a,i,o=!1)=>{if(a instanceof n)return a;try{return new n(a,i)}catch(u){if(!o)return null;throw u}},fd}var dd,Cb;function BA(){if(Cb)return dd;Cb=1;const n=Es();return dd=(a,i)=>{const o=n(a,i);return o?o.version:null},dd}var md,Nb;function qA(){if(Nb)return md;Nb=1;const n=Es();return md=(a,i)=>{const o=n(a.trim().replace(/^[=v]+/,""),i);return o?o.version:null},md}var hd,Mb;function PA(){if(Mb)return hd;Mb=1;const n=Ct();return hd=(a,i,o,u,f)=>{typeof o=="string"&&(f=u,u=o,o=void 0);try{return new n(a instanceof n?a.version:a,o).inc(i,u,f).version}catch{return null}},hd}var pd,Ib;function GA(){if(Ib)return pd;Ib=1;const n=Es();return pd=(a,i)=>{const o=n(a,null,!0),u=n(i,null,!0),f=o.compare(u);if(f===0)return null;const m=f>0,h=m?o:u,p=m?u:o,g=!!h.prerelease.length;if(!!p.prerelease.length&&!g){if(!p.patch&&!p.minor)return"major";if(p.compareMain(h)===0)return p.minor&&!p.patch?"minor":"patch"}const b=g?"pre":"";return o.major!==u.major?b+"major":o.minor!==u.minor?b+"minor":o.patch!==u.patch?b+"patch":"prerelease"},pd}var gd,xb;function VA(){if(xb)return gd;xb=1;const n=Ct();return gd=(a,i)=>new n(a,i).major,gd}var yd,zb;function HA(){if(zb)return yd;zb=1;const n=Ct();return yd=(a,i)=>new n(a,i).minor,yd}var vd,Lb;function YA(){if(Lb)return vd;Lb=1;const n=Ct();return vd=(a,i)=>new n(a,i).patch,vd}var bd,Db;function ZA(){if(Db)return bd;Db=1;const n=Es();return bd=(a,i)=>{const o=n(a,i);return o&&o.prerelease.length?o.prerelease:null},bd}var Ed,Ub;function kn(){if(Ub)return Ed;Ub=1;const n=Ct();return Ed=(a,i,o)=>new n(a,o).compare(new n(i,o)),Ed}var Sd,jb;function XA(){if(jb)return Sd;jb=1;const n=kn();return Sd=(a,i,o)=>n(i,a,o),Sd}var _d,$b;function FA(){if($b)return _d;$b=1;const n=kn();return _d=(a,i)=>n(a,i,!0),_d}var Td,Bb;function Bm(){if(Bb)return Td;Bb=1;const n=Ct();return Td=(a,i,o)=>{const u=new n(a,o),f=new n(i,o);return u.compare(f)||u.compareBuild(f)},Td}var wd,qb;function QA(){if(qb)return wd;qb=1;const n=Bm();return wd=(a,i)=>a.sort((o,u)=>n(o,u,i)),wd}var Od,Pb;function KA(){if(Pb)return Od;Pb=1;const n=Bm();return Od=(a,i)=>a.sort((o,u)=>n(u,o,i)),Od}var kd,Gb;function Jc(){if(Gb)return kd;Gb=1;const n=kn();return kd=(a,i,o)=>n(a,i,o)>0,kd}var Ad,Vb;function qm(){if(Vb)return Ad;Vb=1;const n=kn();return Ad=(a,i,o)=>n(a,i,o)<0,Ad}var Rd,Hb;function GE(){if(Hb)return Rd;Hb=1;const n=kn();return Rd=(a,i,o)=>n(a,i,o)===0,Rd}var Cd,Yb;function VE(){if(Yb)return Cd;Yb=1;const n=kn();return Cd=(a,i,o)=>n(a,i,o)!==0,Cd}var Nd,Zb;function Pm(){if(Zb)return Nd;Zb=1;const n=kn();return Nd=(a,i,o)=>n(a,i,o)>=0,Nd}var Md,Xb;function Gm(){if(Xb)return Md;Xb=1;const n=kn();return Md=(a,i,o)=>n(a,i,o)<=0,Md}var Id,Fb;function HE(){if(Fb)return Id;Fb=1;const n=GE(),r=VE(),a=Jc(),i=Pm(),o=qm(),u=Gm();return Id=(m,h,p,g)=>{switch(h){case"===":return typeof m=="object"&&(m=m.version),typeof p=="object"&&(p=p.version),m===p;case"!==":return typeof m=="object"&&(m=m.version),typeof p=="object"&&(p=p.version),m!==p;case"":case"=":case"==":return n(m,p,g);case"!=":return r(m,p,g);case">":return a(m,p,g);case">=":return i(m,p,g);case"<":return o(m,p,g);case"<=":return u(m,p,g);default:throw new TypeError(`Invalid operator: ${h}`)}},Id}var xd,Qb;function JA(){if(Qb)return xd;Qb=1;const n=Ct(),r=Es(),{safeRe:a,t:i}=$i();return xd=(u,f)=>{if(u instanceof n)return u;if(typeof u=="number"&&(u=String(u)),typeof u!="string")return null;f=f||{};let m=null;if(!f.rtl)m=u.match(f.includePrerelease?a[i.COERCEFULL]:a[i.COERCE]);else{const T=f.includePrerelease?a[i.COERCERTLFULL]:a[i.COERCERTL];let w;for(;(w=T.exec(u))&&(!m||m.index+m[0].length!==u.length);)(!m||w.index+w[0].length!==m.index+m[0].length)&&(m=w),T.lastIndex=w.index+w[1].length+w[2].length;T.lastIndex=-1}if(m===null)return null;const h=m[2],p=m[3]||"0",g=m[4]||"0",v=f.includePrerelease&&m[5]?`-${m[5]}`:"",b=f.includePrerelease&&m[6]?`+${m[6]}`:"";return r(`${h}.${p}.${g}${v}${b}`,f)},xd}var zd,Kb;function WA(){if(Kb)return zd;Kb=1;class n{constructor(){this.max=1e3,this.map=new Map}get(a){const i=this.map.get(a);if(i!==void 0)return this.map.delete(a),this.map.set(a,i),i}delete(a){return this.map.delete(a)}set(a,i){if(!this.delete(a)&&i!==void 0){if(this.map.size>=this.max){const u=this.map.keys().next().value;this.delete(u)}this.map.set(a,i)}return this}}return zd=n,zd}var Ld,Jb;function An(){if(Jb)return Ld;Jb=1;const n=/\s+/g;class r{constructor(K,I){if(I=o(I),K instanceof r)return K.loose===!!I.loose&&K.includePrerelease===!!I.includePrerelease?K:new r(K.raw,I);if(K instanceof u)return this.raw=K.value,this.set=[[K]],this.formatted=void 0,this;if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=K.trim().replace(n," "),this.set=this.raw.split("||").map(G=>this.parseRange(G.trim())).filter(G=>G.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const G=this.set[0];if(this.set=this.set.filter(Q=>!S(Q[0])),this.set.length===0)this.set=[G];else if(this.set.length>1){for(const Q of this.set)if(Q.length===1&&A(Q[0])){this.set=[Q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let K=0;K<this.set.length;K++){K>0&&(this.formatted+="||");const I=this.set[K];for(let G=0;G<I.length;G++)G>0&&(this.formatted+=" "),this.formatted+=I[G].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(K){const G=((this.options.includePrerelease&&T)|(this.options.loose&&w))+":"+K,Q=i.get(G);if(Q)return Q;const ee=this.options.loose,re=ee?h[p.HYPHENRANGELOOSE]:h[p.HYPHENRANGE];K=K.replace(re,Ue(this.options.includePrerelease)),f("hyphen replace",K),K=K.replace(h[p.COMPARATORTRIM],g),f("comparator trim",K),K=K.replace(h[p.TILDETRIM],v),f("tilde trim",K),K=K.replace(h[p.CARETTRIM],b),f("caret trim",K);let k=K.split(" ").map(ce=>C(ce,this.options)).join(" ").split(/\s+/).map(ce=>ke(ce,this.options));ee&&(k=k.filter(ce=>(f("loose invalid filter",ce,this.options),!!ce.match(h[p.COMPARATORLOOSE])))),f("range list",k);const j=new Map,F=k.map(ce=>new u(ce,this.options));for(const ce of F){if(S(ce))return[ce];j.set(ce.value,ce)}j.size>1&&j.has("")&&j.delete("");const te=[...j.values()];return i.set(G,te),te}intersects(K,I){if(!(K instanceof r))throw new TypeError("a Range is required");return this.set.some(G=>_(G,I)&&K.set.some(Q=>_(Q,I)&&G.every(ee=>Q.every(re=>ee.intersects(re,I)))))}test(K){if(!K)return!1;if(typeof K=="string")try{K=new m(K,this.options)}catch{return!1}for(let I=0;I<this.set.length;I++)if(et(this.set[I],K,this.options))return!0;return!1}}Ld=r;const a=WA(),i=new a,o=$m(),u=Wc(),f=Kc(),m=Ct(),{safeRe:h,t:p,comparatorTrimReplace:g,tildeTrimReplace:v,caretTrimReplace:b}=$i(),{FLAG_INCLUDE_PRERELEASE:T,FLAG_LOOSE:w}=Qc(),S=W=>W.value==="<0.0.0-0",A=W=>W.value==="",_=(W,K)=>{let I=!0;const G=W.slice();let Q=G.pop();for(;I&&G.length;)I=G.every(ee=>Q.intersects(ee,K)),Q=G.pop();return I},C=(W,K)=>(W=W.replace(h[p.BUILD],""),f("comp",W,K),W=B(W,K),f("caret",W),W=M(W,K),f("tildes",W),W=X(W,K),f("xrange",W),W=me(W,K),f("stars",W),W),N=W=>!W||W.toLowerCase()==="x"||W==="*",M=(W,K)=>W.trim().split(/\s+/).map(I=>$(I,K)).join(" "),$=(W,K)=>{const I=K.loose?h[p.TILDELOOSE]:h[p.TILDE];return W.replace(I,(G,Q,ee,re,k)=>{f("tilde",W,G,Q,ee,re,k);let j;return N(Q)?j="":N(ee)?j=`>=${Q}.0.0 <${+Q+1}.0.0-0`:N(re)?j=`>=${Q}.${ee}.0 <${Q}.${+ee+1}.0-0`:k?(f("replaceTilde pr",k),j=`>=${Q}.${ee}.${re}-${k} <${Q}.${+ee+1}.0-0`):j=`>=${Q}.${ee}.${re} <${Q}.${+ee+1}.0-0`,f("tilde return",j),j})},B=(W,K)=>W.trim().split(/\s+/).map(I=>q(I,K)).join(" "),q=(W,K)=>{f("caret",W,K);const I=K.loose?h[p.CARETLOOSE]:h[p.CARET],G=K.includePrerelease?"-0":"";return W.replace(I,(Q,ee,re,k,j)=>{f("caret",W,Q,ee,re,k,j);let F;return N(ee)?F="":N(re)?F=`>=${ee}.0.0${G} <${+ee+1}.0.0-0`:N(k)?ee==="0"?F=`>=${ee}.${re}.0${G} <${ee}.${+re+1}.0-0`:F=`>=${ee}.${re}.0${G} <${+ee+1}.0.0-0`:j?(f("replaceCaret pr",j),ee==="0"?re==="0"?F=`>=${ee}.${re}.${k}-${j} <${ee}.${re}.${+k+1}-0`:F=`>=${ee}.${re}.${k}-${j} <${ee}.${+re+1}.0-0`:F=`>=${ee}.${re}.${k}-${j} <${+ee+1}.0.0-0`):(f("no pr"),ee==="0"?re==="0"?F=`>=${ee}.${re}.${k}${G} <${ee}.${re}.${+k+1}-0`:F=`>=${ee}.${re}.${k}${G} <${ee}.${+re+1}.0-0`:F=`>=${ee}.${re}.${k} <${+ee+1}.0.0-0`),f("caret return",F),F})},X=(W,K)=>(f("replaceXRanges",W,K),W.split(/\s+/).map(I=>ue(I,K)).join(" ")),ue=(W,K)=>{W=W.trim();const I=K.loose?h[p.XRANGELOOSE]:h[p.XRANGE];return W.replace(I,(G,Q,ee,re,k,j)=>{f("xRange",W,G,Q,ee,re,k,j);const F=N(ee),te=F||N(re),ce=te||N(k),ve=ce;return Q==="="&&ve&&(Q=""),j=K.includePrerelease?"-0":"",F?Q===">"||Q==="<"?G="<0.0.0-0":G="*":Q&&ve?(te&&(re=0),k=0,Q===">"?(Q=">=",te?(ee=+ee+1,re=0,k=0):(re=+re+1,k=0)):Q==="<="&&(Q="<",te?ee=+ee+1:re=+re+1),Q==="<"&&(j="-0"),G=`${Q+ee}.${re}.${k}${j}`):te?G=`>=${ee}.0.0${j} <${+ee+1}.0.0-0`:ce&&(G=`>=${ee}.${re}.0${j} <${ee}.${+re+1}.0-0`),f("xRange return",G),G})},me=(W,K)=>(f("replaceStars",W,K),W.trim().replace(h[p.STAR],"")),ke=(W,K)=>(f("replaceGTE0",W,K),W.trim().replace(h[K.includePrerelease?p.GTE0PRE:p.GTE0],"")),Ue=W=>(K,I,G,Q,ee,re,k,j,F,te,ce,ve)=>(N(G)?I="":N(Q)?I=`>=${G}.0.0${W?"-0":""}`:N(ee)?I=`>=${G}.${Q}.0${W?"-0":""}`:re?I=`>=${I}`:I=`>=${I}${W?"-0":""}`,N(F)?j="":N(te)?j=`<${+F+1}.0.0-0`:N(ce)?j=`<${F}.${+te+1}.0-0`:ve?j=`<=${F}.${te}.${ce}-${ve}`:W?j=`<${F}.${te}.${+ce+1}-0`:j=`<=${j}`,`${I} ${j}`.trim()),et=(W,K,I)=>{for(let G=0;G<W.length;G++)if(!W[G].test(K))return!1;if(K.prerelease.length&&!I.includePrerelease){for(let G=0;G<W.length;G++)if(f(W[G].semver),W[G].semver!==u.ANY&&W[G].semver.prerelease.length>0){const Q=W[G].semver;if(Q.major===K.major&&Q.minor===K.minor&&Q.patch===K.patch)return!0}return!1}return!0};return Ld}var Dd,Wb;function Wc(){if(Wb)return Dd;Wb=1;const n=Symbol("SemVer ANY");class r{static get ANY(){return n}constructor(g,v){if(v=a(v),g instanceof r){if(g.loose===!!v.loose)return g;g=g.value}g=g.trim().split(/\s+/).join(" "),f("comparator",g,v),this.options=v,this.loose=!!v.loose,this.parse(g),this.semver===n?this.value="":this.value=this.operator+this.semver.version,f("comp",this)}parse(g){const v=this.options.loose?i[o.COMPARATORLOOSE]:i[o.COMPARATOR],b=g.match(v);if(!b)throw new TypeError(`Invalid comparator: ${g}`);this.operator=b[1]!==void 0?b[1]:"",this.operator==="="&&(this.operator=""),b[2]?this.semver=new m(b[2],this.options.loose):this.semver=n}toString(){return this.value}test(g){if(f("Comparator.test",g,this.options.loose),this.semver===n||g===n)return!0;if(typeof g=="string")try{g=new m(g,this.options)}catch{return!1}return u(g,this.operator,this.semver,this.options)}intersects(g,v){if(!(g instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new h(g.value,v).test(this.value):g.operator===""?g.value===""?!0:new h(this.value,v).test(g.semver):(v=a(v),v.includePrerelease&&(this.value==="<0.0.0-0"||g.value==="<0.0.0-0")||!v.includePrerelease&&(this.value.startsWith("<0.0.0")||g.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&g.operator.startsWith(">")||this.operator.startsWith("<")&&g.operator.startsWith("<")||this.semver.version===g.semver.version&&this.operator.includes("=")&&g.operator.includes("=")||u(this.semver,"<",g.semver,v)&&this.operator.startsWith(">")&&g.operator.startsWith("<")||u(this.semver,">",g.semver,v)&&this.operator.startsWith("<")&&g.operator.startsWith(">")))}}Dd=r;const a=$m(),{safeRe:i,t:o}=$i(),u=HE(),f=Kc(),m=Ct(),h=An();return Dd}var Ud,e0;function eu(){if(e0)return Ud;e0=1;const n=An();return Ud=(a,i,o)=>{try{i=new n(i,o)}catch{return!1}return i.test(a)},Ud}var jd,t0;function eR(){if(t0)return jd;t0=1;const n=An();return jd=(a,i)=>new n(a,i).set.map(o=>o.map(u=>u.value).join(" ").trim().split(" ")),jd}var $d,n0;function tR(){if(n0)return $d;n0=1;const n=Ct(),r=An();return $d=(i,o,u)=>{let f=null,m=null,h=null;try{h=new r(o,u)}catch{return null}return i.forEach(p=>{h.test(p)&&(!f||m.compare(p)===-1)&&(f=p,m=new n(f,u))}),f},$d}var Bd,r0;function nR(){if(r0)return Bd;r0=1;const n=Ct(),r=An();return Bd=(i,o,u)=>{let f=null,m=null,h=null;try{h=new r(o,u)}catch{return null}return i.forEach(p=>{h.test(p)&&(!f||m.compare(p)===1)&&(f=p,m=new n(f,u))}),f},Bd}var qd,a0;function rR(){if(a0)return qd;a0=1;const n=Ct(),r=An(),a=Jc();return qd=(o,u)=>{o=new r(o,u);let f=new n("0.0.0");if(o.test(f)||(f=new n("0.0.0-0"),o.test(f)))return f;f=null;for(let m=0;m<o.set.length;++m){const h=o.set[m];let p=null;h.forEach(g=>{const v=new n(g.semver.version);switch(g.operator){case">":v.prerelease.length===0?v.patch++:v.prerelease.push(0),v.raw=v.format();case"":case">=":(!p||a(v,p))&&(p=v);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${g.operator}`)}}),p&&(!f||a(f,p))&&(f=p)}return f&&o.test(f)?f:null},qd}var Pd,s0;function aR(){if(s0)return Pd;s0=1;const n=An();return Pd=(a,i)=>{try{return new n(a,i).range||"*"}catch{return null}},Pd}var Gd,i0;function Vm(){if(i0)return Gd;i0=1;const n=Ct(),r=Wc(),{ANY:a}=r,i=An(),o=eu(),u=Jc(),f=qm(),m=Gm(),h=Pm();return Gd=(g,v,b,T)=>{g=new n(g,T),v=new i(v,T);let w,S,A,_,C;switch(b){case">":w=u,S=m,A=f,_=">",C=">=";break;case"<":w=f,S=h,A=u,_="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(g,v,T))return!1;for(let N=0;N<v.set.length;++N){const M=v.set[N];let $=null,B=null;if(M.forEach(q=>{q.semver===a&&(q=new r(">=0.0.0")),$=$||q,B=B||q,w(q.semver,$.semver,T)?$=q:A(q.semver,B.semver,T)&&(B=q)}),$.operator===_||$.operator===C||(!B.operator||B.operator===_)&&S(g,B.semver))return!1;if(B.operator===C&&A(g,B.semver))return!1}return!0},Gd}var Vd,o0;function sR(){if(o0)return Vd;o0=1;const n=Vm();return Vd=(a,i,o)=>n(a,i,">",o),Vd}var Hd,c0;function iR(){if(c0)return Hd;c0=1;const n=Vm();return Hd=(a,i,o)=>n(a,i,"<",o),Hd}var Yd,u0;function oR(){if(u0)return Yd;u0=1;const n=An();return Yd=(a,i,o)=>(a=new n(a,o),i=new n(i,o),a.intersects(i,o)),Yd}var Zd,l0;function cR(){if(l0)return Zd;l0=1;const n=eu(),r=kn();return Zd=(a,i,o)=>{const u=[];let f=null,m=null;const h=a.sort((b,T)=>r(b,T,o));for(const b of h)n(b,i,o)?(m=b,f||(f=b)):(m&&u.push([f,m]),m=null,f=null);f&&u.push([f,null]);const p=[];for(const[b,T]of u)b===T?p.push(b):!T&&b===h[0]?p.push("*"):T?b===h[0]?p.push(`<=${T}`):p.push(`${b} - ${T}`):p.push(`>=${b}`);const g=p.join(" || "),v=typeof i.raw=="string"?i.raw:String(i);return g.length<v.length?g:i},Zd}var Xd,f0;function uR(){if(f0)return Xd;f0=1;const n=An(),r=Wc(),{ANY:a}=r,i=eu(),o=kn(),u=(v,b,T={})=>{if(v===b)return!0;v=new n(v,T),b=new n(b,T);let w=!1;e:for(const S of v.set){for(const A of b.set){const _=h(S,A,T);if(w=w||_!==null,_)continue e}if(w)return!1}return!0},f=[new r(">=0.0.0-0")],m=[new r(">=0.0.0")],h=(v,b,T)=>{if(v===b)return!0;if(v.length===1&&v[0].semver===a){if(b.length===1&&b[0].semver===a)return!0;T.includePrerelease?v=f:v=m}if(b.length===1&&b[0].semver===a){if(T.includePrerelease)return!0;b=m}const w=new Set;let S,A;for(const X of v)X.operator===">"||X.operator===">="?S=p(S,X,T):X.operator==="<"||X.operator==="<="?A=g(A,X,T):w.add(X.semver);if(w.size>1)return null;let _;if(S&&A){if(_=o(S.semver,A.semver,T),_>0)return null;if(_===0&&(S.operator!==">="||A.operator!=="<="))return null}for(const X of w){if(S&&!i(X,String(S),T)||A&&!i(X,String(A),T))return null;for(const ue of b)if(!i(X,String(ue),T))return!1;return!0}let C,N,M,$,B=A&&!T.includePrerelease&&A.semver.prerelease.length?A.semver:!1,q=S&&!T.includePrerelease&&S.semver.prerelease.length?S.semver:!1;B&&B.prerelease.length===1&&A.operator==="<"&&B.prerelease[0]===0&&(B=!1);for(const X of b){if($=$||X.operator===">"||X.operator===">=",M=M||X.operator==="<"||X.operator==="<=",S){if(q&&X.semver.prerelease&&X.semver.prerelease.length&&X.semver.major===q.major&&X.semver.minor===q.minor&&X.semver.patch===q.patch&&(q=!1),X.operator===">"||X.operator===">="){if(C=p(S,X,T),C===X&&C!==S)return!1}else if(S.operator===">="&&!i(S.semver,String(X),T))return!1}if(A){if(B&&X.semver.prerelease&&X.semver.prerelease.length&&X.semver.major===B.major&&X.semver.minor===B.minor&&X.semver.patch===B.patch&&(B=!1),X.operator==="<"||X.operator==="<="){if(N=g(A,X,T),N===X&&N!==A)return!1}else if(A.operator==="<="&&!i(A.semver,String(X),T))return!1}if(!X.operator&&(A||S)&&_!==0)return!1}return!(S&&M&&!A&&_!==0||A&&$&&!S&&_!==0||q||B)},p=(v,b,T)=>{if(!v)return b;const w=o(v.semver,b.semver,T);return w>0?v:w<0||b.operator===">"&&v.operator===">="?b:v},g=(v,b,T)=>{if(!v)return b;const w=o(v.semver,b.semver,T);return w<0?v:w>0||b.operator==="<"&&v.operator==="<="?b:v};return Xd=u,Xd}var Fd,d0;function lR(){if(d0)return Fd;d0=1;const n=$i(),r=Qc(),a=Ct(),i=PE(),o=Es(),u=BA(),f=qA(),m=PA(),h=GA(),p=VA(),g=HA(),v=YA(),b=ZA(),T=kn(),w=XA(),S=FA(),A=Bm(),_=QA(),C=KA(),N=Jc(),M=qm(),$=GE(),B=VE(),q=Pm(),X=Gm(),ue=HE(),me=JA(),ke=Wc(),Ue=An(),et=eu(),W=eR(),K=tR(),I=nR(),G=rR(),Q=aR(),ee=Vm(),re=sR(),k=iR(),j=oR(),F=cR(),te=uR();return Fd={parse:o,valid:u,clean:f,inc:m,diff:h,major:p,minor:g,patch:v,prerelease:b,compare:T,rcompare:w,compareLoose:S,compareBuild:A,sort:_,rsort:C,gt:N,lt:M,eq:$,neq:B,gte:q,lte:X,cmp:ue,coerce:me,Comparator:ke,Range:Ue,satisfies:et,toComparators:W,maxSatisfying:K,minSatisfying:I,minVersion:G,validRange:Q,outside:ee,gtr:re,ltr:k,intersects:j,simplifyRange:F,subset:te,SemVer:a,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:r.SEMVER_SPEC_VERSION,RELEASE_TYPES:r.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers},Fd}var fR=lR();const fs=UT(fR),dR=/^[A-Za-z0-9][-./:\w]{0,63}$/,mR=/^(?:@[a-z0-9][a-z0-9\-._]*\/)?[a-z0-9][a-z0-9\-._]*$/,hR=/\/{2,}/g,pR=new Set(["offline-catchup","research-daemon"]),YE=n=>n.trim().toLowerCase(),gR=n=>n.trim().replace(hR,"/").toLowerCase(),yR=(n,r)=>{try{const[a]=Intl.getCanonicalLocales(n);return a||(r.addIssue({code:z.custom,message:"Unable to canonicalize locale code."}),gs)}catch(a){return r.addIssue({code:z.custom,message:a instanceof RangeError?"Locale code must follow BCP-47 syntax.":"Invalid locale code."}),gs}},vR=(n,r)=>{const a=YE(n);return pR.has(a)?a:(r.addIssue({code:z.custom,message:`Unknown system automation target id "${n}".`}),gs)},bR=(n,r)=>{const a=fs.clean(n.trim());return a||(r.addIssue({code:z.custom,message:"Invalid semantic version."}),gs)},ER=(n,r)=>{const a=n.trim(),i=fs.validRange(a,{includePrerelease:!0});return i||(r.addIssue({code:z.custom,message:"Invalid semantic version range."}),gs)},tu=Oe().trim().min(1,{message:"Pack slug must contain at least one character."}).max(64,{message:"Pack slug must contain at most 64 characters."}).transform(gR).refine(n=>mR.test(n),{message:'Pack slug must match npm-style package syntax (optionally "@scope/name").'}).pipe(Oe().brand()),Vr=Oe().trim().min(2,{message:"Locale code must contain at least two characters."}).transform((n,r)=>yR(n,r)).pipe(Oe().brand()),Hm=n=>Oe().trim().min(1,{message:`${n} must contain at least one character.`}).max(64,{message:`${n} must contain at most 64 characters.`}).regex(dR,{message:`${n} must start with an alphanumeric character and may include "-", "_", ".", "/", or ":" thereafter.`}).transform(YE).pipe(Oe().brand()),se=Hm("Content id"),Bi=Hm("Flag id"),qi=Hm("Script id"),ZE=Oe().trim().min(1,{message:"System automation target id must contain at least one character."}).transform((n,r)=>vR(n,r)).pipe(Oe().brand()),SR=Oe().trim().min(1,{message:"Semantic versions must not be empty."}).transform((n,r)=>bR(n,r)).pipe(Oe().brand()),XE=Oe().trim().min(1,{message:"Semantic version ranges must not be empty."}).transform((n,r)=>ER(n,r)).pipe(Oe().brand()),_R=256,m0=512,FE={defaultVariantMismatch:"localization.defaultLocaleMismatch",missingVariant:"localization.missingVariant"},pm=n=>Oe().trim().min(1,{message:"Localized text must contain at least one character."}).max(n,{message:`Localized text must contain at most ${n} characters.`}),QE=n=>typeof globalThis.structuredClone=="function"?globalThis.structuredClone(n):JSON.parse(JSON.stringify(n)),TR=n=>{const r={};for(const[a,i]of Object.entries(n)){if(i===void 0)continue;const o=Vr.safeParse(a);if(!o.success){r[a]=i;continue}const u=o.data;u in r&&u!==a||(r[u]=i)}return r},KE=(n,r)=>{n&&n(r)},gm=pm(_R);Um(Vr,gm);const tn=Z({default:gm,variants:Um(Vr,gm).default({}).transform(n=>QE(n))}).strict(),nu=Z({default:pm(m0),variants:Um(Vr,pm(m0)).default({}).transform(n=>QE(n))}).strict(),wR=(n,r,a,i)=>{const o=n.variants[r];if(o===void 0){n.variants[r]=n.default;return}o!==n.default&&KE(a,{code:FE.defaultVariantMismatch,message:`Default locale "${r}" variant differs from the canonical default string.`,path:i,severity:"warning",suggestion:"Align the default variant with the canonical default string or suppress the variant if differences are intentional."})},OR=(n,r,a,i,o)=>{const u=new Set(r);u.delete(a);for(const f of u)f in n.variants||KE(i,{code:FE.missingVariant,message:`Missing localized string for locale "${f}".`,path:o,severity:"warning",suggestion:"Add a localized variant for the missing locale."})},ys=(n,r)=>{const{defaultLocale:a,supportedLocales:i=[],warningSink:o,path:u=[]}=r,f=Vr.parse(a),m=i.map(g=>Vr.parse(g)),h=TR(n.variants),p={...n,variants:h};return wR(p,f,o,u),OR(p,m,f,o,u),p},kR="Value must be a finite number.",AR="Value must be greater than or equal to 0.",h0="Value must be a positive integer greater than 0.",RR="Value must be between 0 and 1 inclusive.",JE=(n,r)=>Number.isFinite(n)?n:(r.addIssue({code:z.custom,message:kR}),gs),Ke=qE.number().transform((n,r)=>JE(n,r)),Ym=Ke.refine(n=>n>=0,{message:AR}),On=qE.number().transform((n,r)=>JE(n,r)).refine(Number.isInteger,{message:h0}).refine(n=>n>0,{message:h0});Ke.refine(n=>n>=0&&n<=1,{message:RR});Ke.refine(Number.isInteger,{message:"Value must be an integer."});const CR=["add","sub","mul","div","pow","min","max"],NR=["abs","ceil","floor","round","sqrt","log10","ln"],MR=["clamp","lerp","min3","max3","pow10","root"],la={clamp:3,lerp:3,min3:3,max3:3,pow10:1,root:2},p0=16,g0=256,y0=16,v0=256,IR=Z({type:ae("variable"),name:We(["level","time","deltaTime"])}).strict(),xR=Z({type:We(["resource","generator","upgrade","automation","prestigeLayer"]),id:se}).strict(),zR=Pt("type",[IR,xR]),LR=Z({kind:ae("literal"),value:Ke}).strict(),DR=n=>Pt("kind",[LR,Z({kind:ae("ref"),target:zR}).strict(),Z({kind:ae("binary"),op:We(CR),left:n,right:n}).strict(),Z({kind:ae("unary"),op:We(NR),operand:n}).strict(),Z({kind:ae("call"),name:We(MR),args:be(n)}).strict()]).superRefine((r,a)=>{if(r.kind!=="call")return;const i=la[r.name];r.args.length!==i&&a.addIssue({code:z.custom,message:`Function ${r.name} expects ${i} arguments, received ${r.args.length}.`,path:["args"]})}),WE=jm(()=>DR(WE)).superRefine((n,r)=>{ls(n)>p0&&r.addIssue({code:z.custom,message:`Expression depth exceeds maximum allowed depth (${p0}).`});const i=us(n);i>g0&&r.addIssue({code:z.custom,message:`Expression node count ${i} exceeds the maximum of ${g0}.`})}),UR=n=>Z({untilLevel:Ke.optional(),formula:n}).strict(),jR=n=>Pt("kind",[Z({kind:ae("constant"),value:Ke}).strict(),Z({kind:ae("linear"),base:Ke,slope:Ke}).strict(),Z({kind:ae("exponential"),base:Ke.default(1),growth:Ke,offset:Ke.optional()}).strict(),Z({kind:ae("polynomial"),coefficients:be(Ke,{invalid_type_error:"Polynomial coefficients must be numeric."}).min(1,{message:"Polynomial formulas require at least one coefficient."})}).strict(),Z({kind:ae("piecewise"),pieces:be(UR(n)).min(1,{message:"Piecewise formulas require at least one piece."})}).strict(),Z({kind:ae("expression"),expression:WE}).strict()]),Me=jm(()=>jR(Me)).superRefine((n,r)=>{n.kind==="piecewise"&&$R(n.pieces,r);const a=eS(n);a>y0&&r.addIssue({code:z.custom,message:`Formula depth ${a} exceeds the maximum of ${y0}.`});const i=tS(n);i>v0&&r.addIssue({code:z.custom,message:`Formula node count ${i} exceeds the maximum of ${v0}.`})});function us(n){switch(n.kind){case"literal":case"ref":return 1;case"unary":return 1+us(n.operand);case"binary":return 1+us(n.left)+us(n.right);case"call":return 1+n.args.reduce((r,a)=>r+us(a),0);default:return 1}}function ls(n){switch(n.kind){case"literal":case"ref":return 1;case"unary":return 1+ls(n.operand);case"binary":return 1+Math.max(ls(n.left),ls(n.right));case"call":return 1+n.args.reduce((r,a)=>Math.max(r,ls(a)),0);default:return 1}}function eS(n){return n.kind==="piecewise"?1+n.pieces.reduce((r,a)=>Math.max(r,eS(a.formula)),0):n.kind==="expression"?ls(n.expression):1}function tS(n){return n.kind==="piecewise"?1+n.pieces.reduce((r,a)=>r+tS(a.formula),0):n.kind==="expression"?1+us(n.expression):1}function $R(n,r){let a=!1,i=Number.NEGATIVE_INFINITY;n.forEach((o,u)=>{if(u===n.length-1){a=o.untilLevel===void 0,a||r.addIssue({code:z.custom,path:["pieces",u,"untilLevel"],message:"Final piecewise segment must omit untilLevel to act as a catch-all."});return}if(o.untilLevel===void 0){r.addIssue({code:z.custom,path:["pieces",u,"untilLevel"],message:"Non-terminal piecewise segments must specify untilLevel."});return}o.untilLevel<=i&&r.addIssue({code:z.custom,path:["pieces",u,"untilLevel"],message:"Piecewise segments must declare strictly increasing untilLevel values."}),i=o.untilLevel}),a||r.addIssue({code:z.custom,path:["pieces"],message:"Piecewise formulas must terminate with a catch-all segment."})}const b0=16,E0=256,BR=["gte","gt","lte","lt"],S0=We(BR),qR=n=>Pt("kind",[Z({kind:ae("always")}).strict(),Z({kind:ae("never")}).strict(),Z({kind:ae("resourceThreshold"),resourceId:se,comparator:S0,amount:Me}).strict(),Z({kind:ae("generatorLevel"),generatorId:se,comparator:S0,level:Me}).strict(),Z({kind:ae("upgradeOwned"),upgradeId:se,requiredPurchases:On.default(1)}).strict(),Z({kind:ae("prestigeUnlocked"),prestigeLayerId:se}).strict(),Z({kind:ae("flag"),flagId:Bi}).strict(),Z({kind:ae("script"),scriptId:qi}).strict(),Z({kind:ae("allOf"),conditions:be(n).min(1,{message:"allOf conditions must include at least one nested condition."})}).strict(),Z({kind:ae("anyOf"),conditions:be(n).min(1,{message:"anyOf conditions must include at least one nested condition."})}).strict(),Z({kind:ae("not"),condition:n}).strict()]),ym=n=>{const r=n;switch(r.kind){case"allOf":case"anyOf":return 1+(Array.isArray(r.conditions)?r.conditions.reduce((a,i)=>a+ym(i),0):0);case"not":return 1+ym(r.condition);default:return 1}},vm=n=>{const r=n;switch(r.kind){case"allOf":case"anyOf":return 1+(Array.isArray(r.conditions)?r.conditions.reduce((a,i)=>Math.max(a,vm(i)),0):0);case"not":return 1+vm(r.condition);default:return 1}},bt=jm(()=>qR(bt)).superRefine((n,r)=>{const a=vm(n);a>b0&&r.addIssue({code:z.custom,message:`Condition depth ${a} exceeds the maximum of ${b0}.`});const i=ym(n);i>E0&&r.addIssue({code:z.custom,message:`Condition node count ${i} exceeds the maximum of ${E0}.`})}),_0=128,T0=24,ki=Object.freeze({kind:"constant",value:1}),PR=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(T0,{message:`Tags must contain at most ${T0} characters.`}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),GR=We(["gte","gt","lte","lt"]).default("gte"),VR=Pt("kind",[Z({kind:ae("resource"),resourceId:se,threshold:Me,comparator:GR}).strict(),Z({kind:ae("generator-level"),generatorId:se,level:Me}).strict(),Z({kind:ae("upgrade-owned"),upgradeId:se,purchases:Me.optional()}).strict(),Z({kind:ae("flag"),flagId:Bi}).strict(),Z({kind:ae("script"),scriptId:qi}).strict(),Z({kind:ae("custom-metric"),metricId:se,threshold:Me}).strict()]),HR=Z({resetWindow:Me,maxRepeats:On.optional(),rewardScaling:Me.default(ki)}).strict(),YR=Z({target:Me.optional(),mode:We(["oneShot","incremental","repeatable"]).default("oneShot"),repeatable:HR.optional()}).strict().default({mode:"oneShot"}),ZR=Pt("kind",[Z({kind:ae("grantResource"),resourceId:se,amount:Me}).strict(),Z({kind:ae("grantUpgrade"),upgradeId:se}).strict(),Z({kind:ae("grantGuildPerk"),perkId:se}).strict(),Z({kind:ae("emitEvent"),eventId:se}).strict(),Z({kind:ae("unlockAutomation"),automationId:se}).strict(),Z({kind:ae("grantFlag"),flagId:Bi,value:Li().default(!0)}).strict()]),XR=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),FR=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),QR=(n,r)=>{const a=n.displayOrder===void 0?Number.POSITIVE_INFINITY:n.displayOrder,i=r.displayOrder===void 0?Number.POSITIVE_INFINITY:r.displayOrder;return a!==i?a-i:n.id.localeCompare(r.id)},w0=({progress:n,track:r})=>{if(n.target)return n.target;switch(r.kind){case"resource":return r.threshold;case"generator-level":return r.level;case"upgrade-owned":return r.purchases??ki;case"custom-metric":return r.threshold;case"flag":case"script":return ki;default:return ki}},KR=(n,r)=>{if(n.mode==="repeatable"){if(!n.repeatable){r.addIssue({code:z.custom,path:["progress","repeatable"],message:"Repeatable achievements must define repeatable progress configuration."});return}}else n.repeatable&&r.addIssue({code:z.custom,path:["progress","repeatable"],message:'Repeatable configuration is only valid when progress mode is "repeatable".'})},JR=(n,r)=>{n.kind==="constant"&&n.value<=0&&r.addIssue({code:z.custom,path:["progress","target"],message:"Achievement progress targets must be greater than 0."})},nS=Z({id:se,name:tn,description:nu,category:We(["progression","prestige","automation","social","collection"]),tier:We(["bronze","silver","gold","platinum"]),icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(_0,{message:`Icon paths must contain at most ${_0} characters.`}).optional(),tags:be(PR).default([]),track:VR,progress:YR,reward:ZR.optional(),unlockCondition:bt.optional(),visibilityCondition:bt.optional(),onUnlockEvents:be(se).default([]),displayOrder:Ke.optional()}).strict().superRefine((n,r)=>{KR(n.progress,r);const a=w0({progress:n.progress,track:n.track});JR(a,r)}).transform(n=>{const r=w0({progress:n.progress,track:n.track});let a;if(n.progress.mode==="repeatable"){const i=n.progress.repeatable;a={...i,rewardScaling:i.rewardScaling??ki}}return{...n,tags:XR(n.tags),progress:{target:r,mode:n.progress.mode,repeatable:a},onUnlockEvents:FR(n.onUnlockEvents)}}),WR=be(nS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate achievement id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>QR(r,a)))),eC=We(["gte","gt","lte","lt"]),tC=Z({resourceId:se,rate:Me}).strict(),nC=Pt("kind",[Z({kind:ae("interval"),interval:Me}).strict(),Z({kind:ae("resourceThreshold"),resourceId:se,comparator:eC.default("gte"),threshold:Me}).strict(),Z({kind:ae("commandQueueEmpty")}).strict(),Z({kind:ae("event"),eventId:se}).strict()]),rS=Z({id:se,name:tn,description:tn,targetType:We(["generator","upgrade","system"]),targetId:se.optional(),systemTargetId:ZE.optional(),trigger:nC,cooldown:Ke.optional(),resourceCost:tC.optional(),unlockCondition:bt,enabledByDefault:Li().default(!1),order:Ke.optional(),scriptId:qi.optional()}).strict().superRefine((n,r)=>{n.targetType==="system"?(n.systemTargetId||r.addIssue({code:z.custom,path:["systemTargetId"],message:"System automations must declare a systemTargetId."}),n.targetId!==void 0&&r.addIssue({code:z.custom,path:["targetId"],message:"System automations must not declare a targetId."})):(n.targetId||r.addIssue({code:z.custom,path:["targetId"],message:`Automations targeting ${n.targetType}s must provide a targetId.`}),n.systemTargetId!==void 0&&r.addIssue({code:z.custom,path:["systemTargetId"],message:"Only system automations may declare a systemTargetId."}))}),rC=be(rS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate automation id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),aC=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(24,{message:"Tags must contain at most 24 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),Ac=We(["add","multiply","set"]),sC=Pt("kind",[Z({kind:ae("resource"),id:se}).strict(),Z({kind:ae("generator"),id:se}).strict(),Z({kind:ae("automation"),id:se}).strict(),Z({kind:ae("prestigeLayer"),id:se}).strict(),Z({kind:ae("guildPerk"),id:se}).strict(),Z({kind:ae("global")}).strict()]),iC=Z({currencyId:se,baseCost:Ym,costCurve:Me,maxBulk:On.optional()}).strict(),aS=Pt("kind",[Z({kind:ae("modifyResourceRate"),resourceId:se,operation:Ac,value:Me}).strict(),Z({kind:ae("modifyGeneratorRate"),generatorId:se,operation:Ac,value:Me}).strict(),Z({kind:ae("modifyGeneratorCost"),generatorId:se,operation:Ac,value:Me}).strict(),Z({kind:ae("grantAutomation"),automationId:se}).strict(),Z({kind:ae("grantFlag"),flagId:Bi,value:Li().default(!0)}).strict(),Z({kind:ae("unlockResource"),resourceId:se}).strict(),Z({kind:ae("unlockGenerator"),generatorId:se}).strict(),Z({kind:ae("alterDirtyTolerance"),resourceId:se,operation:Ac,value:Me}).strict(),Z({kind:ae("emitEvent"),eventId:se}).strict()]),oC=Fc([bt,se]).transform(n=>typeof n=="string"?{kind:"upgradeOwned",upgradeId:n,requiredPurchases:1}:n),cC=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),uC=(n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=i.kind==="global"?"global":`${i.kind}:${i.id}`,f=a.get(u);if(f!==void 0){r.addIssue({code:z.custom,path:["targets",o],message:`Duplicate upgrade target "${u}" also declared at index ${f}.`});return}a.set(u,o)})},lC=(n,r)=>{const a=n.order===void 0?Number.POSITIVE_INFINITY:n.order,i=r.order===void 0?Number.POSITIVE_INFINITY:r.order;return a!==i?a-i:n.id.localeCompare(r.id)},sS=Z({id:se,name:tn,icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(128,{message:"Icon paths must contain at most 128 characters."}).optional(),tags:be(aC).default([]),category:We(["global","resource","generator","automation","prestige","guild"]),targets:be(sC).min(1,{message:"Upgrades must target at least one entity."}),cost:iC,repeatable:Z({maxPurchases:On.optional(),costCurve:Me.optional(),effectCurve:Me.optional()}).strict().optional(),prerequisites:be(oC).default([]),order:Ke.optional(),effects:be(aS).min(1,{message:"Upgrades must declare at least one effect."}),unlockCondition:bt.optional(),visibilityCondition:bt.optional()}).strict().superRefine((n,r)=>{if(uC(n.targets,r),n.repeatable){const{repeatable:i}=n;i.maxPurchases===void 0&&i.costCurve===void 0&&i.effectCurve===void 0&&r.addIssue({code:z.custom,path:["repeatable"],message:"Repeatable upgrades must declare at least one progression parameter."})}const a=new Map;n.effects.forEach((i,o)=>{const u=i.kind==="grantFlag"?`grantFlag:${i.flagId}`:i.kind==="grantAutomation"?`grantAutomation:${i.automationId}`:i.kind==="emitEvent"?`emitEvent:${i.eventId}`:void 0;if(u){const f=a.get(u);f!==void 0?r.addIssue({code:z.custom,path:["effects",o],message:`Duplicate effect "${u}" also declared at index ${f}.`}):a.set(u,o)}})}).transform(n=>({...n,tags:cC(n.tags),targets:Object.freeze([...n.targets]),effects:Object.freeze([...n.effects]),prerequisites:Object.freeze([...n.prerequisites])})),fC=be(sS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);u!==void 0?r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate upgrade id "${i.id}" also defined at index ${u}.`}):a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>lC(r,a)))),iS=aS,dC=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(24,{message:"Tags must contain at most 24 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),mC=Z({resourceId:se,rate:Me}).strict(),hC=Z({resourceId:se,rate:Me}).strict(),O0=(n,r,a)=>{const i=new Map;n.forEach((o,u)=>{const f=i.get(o.resourceId);if(f!==void 0){r.addIssue({code:z.custom,path:[...a,u,"resourceId"],message:`Duplicate resource reference "${o.resourceId}" also declared at index ${f}.`});return}i.set(o.resourceId,u)})},pC=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),gC=Z({currencyId:se,baseCost:Ym,costCurve:Me,maxBulk:On.optional()}).strict(),yC=(n,r)=>{const a=n.order===void 0?Number.POSITIVE_INFINITY:n.order,i=r.order===void 0?Number.POSITIVE_INFINITY:r.order;return a!==i?a-i:n.id.localeCompare(r.id)},oS=Z({id:se,name:tn,icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(128,{message:"Icon paths must contain at most 128 characters."}).optional(),tags:be(dC).default([]),produces:be(mC).min(1,{message:"Generators must produce at least one resource."}),consumes:be(hC).default([]),purchase:gC,maxLevel:On.optional(),order:Ke.optional(),baseUnlock:bt,visibilityCondition:bt.optional(),automation:Z({automationId:se}).strict().optional(),effects:be(iS).default([])}).strict().superRefine((n,r)=>{O0(n.produces,r,["produces"]),O0(n.consumes,r,["consumes"]);const{maxLevel:a,purchase:i}=n;i.maxBulk!==void 0&&a!==void 0&&i.maxBulk>a&&r.addIssue({code:z.custom,path:["purchase","maxBulk"],message:"Bulk purchase limit cannot exceed generator max level."})}).transform(n=>({...n,tags:pC(n.tags),consumes:Object.freeze([...n.consumes]),produces:Object.freeze([...n.produces]),effects:Object.freeze([...n.effects])})),vC=be(oS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);u!==void 0?r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate generator id "${i.id}" also defined at index ${u}.`}):a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>yC(r,a)))),bC=Pt("kind",[Z({kind:ae("modifyGuildStorage"),storageId:se,operation:We(["add","multiply","set"]),value:Me}).strict(),Z({kind:ae("unlockGuildAutomation"),automationId:se}).strict()]),EC=Fc([iS,bC]),SC=Pt("kind",[Z({kind:ae("currency"),resourceId:se,amount:Me}).strict(),Z({kind:ae("metric"),metricId:se,amount:Me}).strict()]),_C=Z({id:se,name:tn,description:tn,category:We(["buff","utility","cosmetic"]),maxRank:On,effects:be(EC).min(1,{message:"Guild perks must define at least one effect."}),cost:SC,unlockCondition:bt.optional(),order:Ke.optional(),visibilityCondition:bt.optional()}).strict().transform(n=>({...n,effects:Object.freeze([...n.effects])})),TC=be(_C).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate guild perk id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),k0=160,Zm=n=>(r,a,i)=>{const o=new Map;r.forEach((u,f)=>{const m=o.get(u.packId);if(m!==void 0){a.addIssue({code:z.custom,path:[...i,f],message:`${n} entry for pack "${u.packId}" duplicates index ${m}.`});return}o.set(u.packId,f)})},A0=Z({packId:tu,version:XE.optional()}).strict(),wC=Z({packId:tu,message:Oe().trim().min(1,{message:"Conflict message must contain at least one character."}).max(k0,{message:`Conflict message must contain at most ${k0} characters.`}).optional()}).strict(),OC=se.describe("Capability identifiers mirror content id grammar for deterministic casing."),R0=n=>[...n].sort((r,a)=>{const i=r.packId.localeCompare(a.packId);if(i!==0)return i;const o=r.version??"",u=a.version??"";return o.localeCompare(u)}),kC=n=>Array.from(new Set(n)).sort((a,i)=>a.localeCompare(i)),AC=n=>[...n].sort((r,a)=>{const i=r.packId.localeCompare(a.packId);if(i!==0)return i;const o=r.message??"",u=a.message??"";return o.localeCompare(u)}),RC=Zm("requires"),CC=Zm("optional"),NC=Zm("conflict"),MC=Z({requires:be(A0).default([]),optional:be(A0).default([]),conflicts:be(wC).default([]),provides:be(OC).default([])}).strict().superRefine((n,r)=>{RC(n.requires,r,["requires"]),CC(n.optional,r,["optional"]),NC(n.conflicts,r,["conflicts"])}).transform(n=>({requires:Object.freeze(R0(n.requires)),optional:Object.freeze(R0(n.optional)),conflicts:Object.freeze(AC(n.conflicts)),provides:Object.freeze(kC(n.provides))})),C0=64,N0=24,M0=48,I0=32,IC=Oe().trim().min(1,{message:"Author names must contain at least one character."}).max(C0,{message:`Author names must contain at most ${C0} characters.`}),xC=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(N0,{message:`Tags must contain at most ${N0} characters.`}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),x0=Oe().trim().min(1,{message:"ISO date fields must not be empty."}).refine(n=>!Number.isNaN(Date.parse(n)),{message:"Date must follow ISO-8601 format."}),zC=Oe().trim().min(1,{message:"Link kind must contain at least one character."}).max(I0,{message:`Link kind must contain at most ${I0} characters.`}).regex(/^[a-z][a-z0-9-]*$/i,{message:'Link kind must be a slug (letters, numbers, and "-").'}).transform(n=>n.toLowerCase()),LC=Oe().trim().min(1,{message:"Link label must contain at least one character."}).max(M0,{message:`Link label must contain at most ${M0} characters.`}),DC=Z({kind:zC,label:LC,href:Oe().trim().url({message:"Links must provide a valid URL."})}).strict(),UC=n=>[...n].sort((r,a)=>r.localeCompare(a,void 0,{sensitivity:"base"})),ru=(n,r)=>{const a=new Set,i=[];for(const o of n){const u=r(o);a.has(u)||(a.add(u),i.push(o))}return i},jC=n=>[...n].sort((r,a)=>r.localeCompare(a,void 0,{numeric:!0})),$C=n=>Object.freeze(UC(ru(n,r=>r.toLowerCase()))),BC=n=>Object.freeze(ru(n,r=>r).sort((r,a)=>r.localeCompare(a))),qC=n=>Object.freeze(jC(ru(n,r=>r))),PC=n=>Object.freeze(ru(n,r=>r.href).sort((r,a)=>{const i=r.kind.localeCompare(a.kind);return i!==0?i:r.label.localeCompare(a.label)})),GC=(n,r,a)=>ys(n,{defaultLocale:r,supportedLocales:a,path:["title"]}),VC=(n,r,a)=>n?ys(n,{defaultLocale:r,supportedLocales:a,path:["summary"]}):void 0,HC=(n,r)=>{const a=new Set(n.supportedLocales),i=n.defaultLocale;a.has(i)||r.addIssue({code:z.custom,path:["supportedLocales"],message:`Supported locales must include default locale "${i}".`})},YC=(n,r)=>{const a=n.dependencies;if(!a)return;const i=n.id,{requires:o=[],optional:u=[],conflicts:f=[]}=a;[...o.filter(h=>h.packId===i).map(()=>"requires"),...u.filter(h=>h.packId===i).map(()=>"optional"),...f.filter(h=>h.packId===i).map(()=>"conflicts")].forEach(h=>{r.addIssue({code:z.custom,path:["dependencies",h],message:`Pack "${i}" cannot declare a ${h} dependency on itself.`})})},ZC=Z({id:tu,title:tn,summary:nu.optional(),version:SR,engine:XE,authors:be(IC).default([]),defaultLocale:Vr,supportedLocales:be(Vr).min(1,{message:"Supported locales must include at least one locale."}),tags:be(xC).default([]),links:be(DC).default([]),createdAt:x0.optional(),updatedAt:x0.optional(),visibility:We(["public","private","experimental"]).optional(),dependencies:MC.optional()}).strict().superRefine((n,r)=>{HC(n,r),YC(n,r)}),XC=ZC.transform(n=>{const r=qC(n.supportedLocales),a=GC(n.title,n.defaultLocale,r),i=VC(n.summary,n.defaultLocale,r);return{...n,title:a,summary:i,authors:$C(n.authors),supportedLocales:r,tags:BC(n.tags),links:PC(n.links)}}),z0=16,L0=3,D0=32,FC=/^[\x20-\x7E]*$/,QC=/^[a-z0-9][a-z0-9/_:-]*$/i,KC=Oe().trim().min(1,{message:"Metric attribute keys must contain at least one character."}).max(z0,{message:`Metric attribute keys must contain at most ${z0} characters.`}).regex(QC,{message:'Metric attribute keys must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),JC=Pt("kind",[Z({kind:ae("runtime")}).strict(),Z({kind:ae("script"),scriptId:qi}).strict(),Z({kind:ae("content")}).strict()]),WC=Oe().trim().max(D0,{message:`Metric units must contain at most ${D0} characters.`}).regex(FC,{message:"Metric units must contain printable ASCII characters."}).transform(n=>n.length===0?"1":n).default("1"),eN=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),tN=(n,r)=>{const a=n.order===void 0?Number.POSITIVE_INFINITY:n.order,i=r.order===void 0?Number.POSITIVE_INFINITY:r.order;return a!==i?a-i:n.id.localeCompare(r.id)},nN=Z({id:se,name:tn,description:nu.optional(),kind:We(["counter","gauge","histogram","upDownCounter"]),unit:WC,aggregation:We(["sum","delta","cumulative","distribution"]).optional(),attributes:be(KC).default([]),source:JC,order:Ke.optional()}).strict().superRefine((n,r)=>{n.kind==="histogram"&&n.aggregation===void 0&&r.addIssue({code:z.custom,path:["aggregation"],message:"Histogram metrics must declare an aggregation strategy."}),n.attributes.length>L0&&r.addIssue({code:z.custom,path:["attributes"],message:`Metrics may declare at most ${L0} attribute keys to preserve low-cardinality instrumentation.`})}).transform(n=>({...n,attributes:eN(n.attributes)})),rN=be(nN).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate metric id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>tN(r,a)))),U0=128,aN=Pt("kind",[Z({kind:ae("resource"),resourceId:se,amount:Me.optional()}).strict(),Z({kind:ae("upgrade"),upgradeId:se}).strict()]),sN=Z({resourceId:se,baseReward:Me,multiplierCurve:Me.optional()}).strict(),iN=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),cS=Z({id:se,name:tn,icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(U0,{message:`Icon paths must contain at most ${U0} characters.`}).optional(),summary:tn,resetTargets:be(se).min(1,{message:"Prestige layers must reset at least one resource."}),unlockCondition:bt,reward:sN,retention:be(aN).default([]),automation:Z({automationId:se}).strict().optional(),order:Ke.optional()}).strict().transform(n=>({...n,resetTargets:iN(n.resetTargets),retention:Object.freeze([...n.retention])})),oN=be(cS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate prestige layer id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),j0=1e-9,$0=.5,cN=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(24,{message:"Tags must contain at most 24 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>n.toLowerCase()),uN=n=>Object.freeze([...new Set(n)].sort((r,a)=>r.localeCompare(a))),lN=(n,r)=>{const a=n.order===void 0?Number.POSITIVE_INFINITY:n.order,i=r.order===void 0?Number.POSITIVE_INFINITY:r.order;return a!==i?a-i:n.id.localeCompare(r.id)},uS=Z({id:se,name:tn,category:We(["primary","prestige","automation","currency","misc"]),economyClassification:We(["hard","soft"]).default("soft"),tier:On,icon:Oe().trim().min(1,{message:"Icon paths must contain at least one character."}).max(128,{message:"Icon paths must contain at most 128 characters."}).optional(),startAmount:Ym.default(0),capacity:Fc([$A().finite({message:"Capacity must be a finite number."}).refine(n=>n>=0,{message:"Capacity must be greater than or equal to 0."}),ae(null)]).default(null),visible:Li().default(!0),unlocked:Li().default(!1),dirtyTolerance:Ke.refine(n=>n>=j0,{message:`Dirty tolerance must be at least ${j0}.`}).refine(n=>n<=$0,{message:`Dirty tolerance must be at most ${$0}.`}).optional(),order:Ke.optional(),unlockCondition:bt.optional(),visibilityCondition:bt.optional(),prestige:Z({layerId:se,resetRetention:Me.optional()}).strict().optional(),tags:be(cN).default([])}).strict().superRefine((n,r)=>{n.capacity!==null&&n.capacity<n.startAmount&&r.addIssue({code:z.custom,path:["capacity"],message:"Initial resource amount cannot exceed capacity."})}).transform(n=>({...n,tags:uN(n.tags)})),fN=be(uS).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);u!==void 0?r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate resource id "${i.id}" also defined at index ${u}.`}):a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>lN(r,a)))),lS=n=>n.trim().toLowerCase(),dN=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(32,{message:"Tags must contain at most 32 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}).transform(n=>lS(n)),mN=Oe().trim().min(1,{message:"Namespace must contain at least one character."}).max(32,{message:"Namespace must contain at most 32 characters."}).regex(/^[a-z0-9](?:[a-z0-9_-]*[a-z0-9])?$/i,{message:'Namespace must start and end with an alphanumeric character and may include "-", "_" in between.'}).transform(n=>n.toLowerCase()),hN=Oe().trim().min(1,{message:"Name must contain at least one character."}).max(48,{message:"Name must contain at most 48 characters."}).regex(/^[a-z0-9](?:[a-z0-9_-]*[a-z0-9])?$/i,{message:'Name must start and end with an alphanumeric character and may include "-", "_" in between.'}).transform(n=>n.toLowerCase()),pN=n=>n.replace(/\\/g,"/").replace(/\/{2,}/g,"/"),B0=Oe().trim().min(1,{message:"Schema path must not be empty."}).max(256,{message:"Schema path must contain at most 256 characters."}).transform(n=>pN(n)).superRefine((n,r)=>{if(n.startsWith("/")||n.startsWith("~")||n.startsWith("./")&&n==="./"||n==="."){r.addIssue({code:z.custom,message:"Schema path must be pack-relative and must not be absolute."});return}if(/^[a-zA-Z]:/.test(n)||n.startsWith("\\\\")){r.addIssue({code:z.custom,message:"Schema path must not use absolute drive references."});return}n.split("/").some(i=>i==="..")&&r.addIssue({code:z.custom,message:"Schema path must not traverse parent directories."})}),gN=Pt("kind",[Z({kind:ae("zod"),schemaPath:B0}).strict(),Z({kind:ae("json-schema"),schemaPath:B0}).strict()]),yN=Z({source:We(["achievement","upgrade","transform","script"]),id:se}).strict(),vN=n=>{const r=new Set,a=[];for(const i of n)r.has(i)||(r.add(i),a.push(i));return a.sort((i,o)=>i.localeCompare(o)),Object.freeze(a)},bN=(n,r)=>{const a=`${n.namespace}:${n.name}`,i=se.safeParse(a);return i.success?i.data:(i.error.issues.forEach(o=>{r.addIssue({...o,path:["namespace"]})}),null)},EN=Z({id:Oe().trim().min(1,{message:"Id must contain at least one character."}).max(128,{message:"Id must contain at most 128 characters."}).optional(),namespace:mN,name:hN,version:On,payload:gN,emits:be(yN).optional(),tags:be(dN).optional()}).strict().superRefine((n,r)=>{const a=bN(n,r);a&&n.id!==void 0&&n.id.trim().toLowerCase()!==a&&r.addIssue({code:z.custom,message:`Runtime event id must match the canonical namespace:name form "${a}".`,path:["id"]})}).transform(n=>{const r=se.parse(`${n.namespace}:${n.name}`),a=n.emits?Object.freeze(n.emits.map(u=>Object.freeze({source:u.source,id:u.id}))):Object.freeze([]),i=n.tags?vN(n.tags.map(u=>lS(u))):Object.freeze([]),o=n.payload.kind==="zod"?Object.freeze({kind:n.payload.kind,schemaPath:n.payload.schemaPath}):Object.freeze({kind:n.payload.kind,schemaPath:n.payload.schemaPath});return Object.freeze({id:r,namespace:n.namespace,name:n.name,version:n.version,payload:o,emits:a,tags:i})}),SN=be(EN).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate runtime event id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),_N=Oe().trim().min(1,{message:"Tags must contain at least one character."}).max(24,{message:"Tags must contain at most 24 characters."}).regex(/^[a-z0-9][a-z0-9/_:-]*$/i,{message:'Tags must start with an alphanumeric character and may include "-", "_", ":", or "/" thereafter.'}),q0=Z({resourceId:se,amount:Me}).strict(),TN=n=>Object.freeze([...new Set(n.map(r=>r.toLowerCase()))].sort((r,a)=>r.localeCompare(a))),wN=Z({id:se,name:tn,description:nu,mode:We(["instant","continuous","batch"]),inputs:be(q0).min(1,{message:"Transforms must consume at least one resource."}),outputs:be(q0).min(1,{message:"Transforms must produce at least one resource."}),duration:Me.optional(),cooldown:Me.optional(),trigger:Fc([Z({kind:ae("manual")}).strict(),Z({kind:ae("automation"),automationId:se}).strict(),Z({kind:ae("condition"),condition:bt}).strict(),Z({kind:ae("event"),eventId:se}).strict()]),unlockCondition:bt.optional(),visibilityCondition:bt.optional(),automation:Z({automationId:se}).strict().optional(),tags:be(_N).default([]),safety:Z({maxRunsPerTick:On.optional(),maxOutstandingBatches:On.optional()}).strict().optional(),order:Ke.optional()}).strict().superRefine((n,r)=>{if(n.mode==="batch"&&n.duration===void 0&&r.addIssue({code:z.custom,path:["duration"],message:"Batch transforms must declare a duration."}),n.trigger.kind==="automation"){if(!n.automation){r.addIssue({code:z.custom,path:["automation"],message:"Automation-triggered transforms must declare a matching automation reference."});return}n.automation.automationId!==n.trigger.automationId&&r.addIssue({code:z.custom,path:["automation","automationId"],message:"Automation id must match the trigger automation id."})}}).transform(n=>({...n,tags:TN(n.tags),inputs:Object.freeze([...n.inputs]),outputs:Object.freeze([...n.outputs])})),ON=be(wN).superRefine((n,r)=>{const a=new Map;n.forEach((i,o)=>{const u=a.get(i.id);if(u!==void 0){r.addIssue({code:z.custom,path:[o,"id"],message:`Duplicate transform id "${i.id}" also defined at index ${u}.`});return}a.set(i.id,o)})}).transform(n=>Object.freeze([...n].sort((r,a)=>r.id.localeCompare(a.id)))),wn=(n,r={})=>{switch(n.kind){case"constant":return n.value;case"linear":{const a=wi({type:"variable",name:"level"},r);return n.base+n.slope*a}case"exponential":{const a=wi({type:"variable",name:"level"},r),i=n.offset??0;return n.base*Math.pow(n.growth,a)+i}case"polynomial":{const a=wi({type:"variable",name:"level"},r);return n.coefficients.reduce((i,o,u)=>i+o*Math.pow(a,u),0)}case"piecewise":{const a=wi({type:"variable",name:"level"},r),i=CN(n.pieces,a);return wn(i.formula,r)}case"expression":return Di(n.expression,r);default:return Pi(n)}},Di=(n,r={})=>{switch(n.kind){case"literal":return n.value;case"ref":return wi(n.target,r);case"binary":return kN(n.op,n.left,n.right,r);case"unary":return AN(n.op,n.operand,r);case"call":return RN(n.name,n.args,r);default:return Pi(n)}},kN=(n,r,a,i)=>{const o=Di(r,i),u=Di(a,i);switch(n){case"add":return o+u;case"sub":return o-u;case"mul":return o*u;case"div":return o/u;case"pow":return Math.pow(o,u);case"min":return Math.min(o,u);case"max":return Math.max(o,u);default:return Pi(n)}},AN=(n,r,a)=>{const i=Di(r,a);switch(n){case"abs":return Math.abs(i);case"ceil":return Math.ceil(i);case"floor":return Math.floor(i);case"round":return Math.round(i);case"sqrt":return Math.sqrt(i);case"log10":return Math.log10(i);case"ln":return Math.log(i);default:return Pi(n)}},RN=(n,r,a)=>{switch(n){case"clamp":{const[i,o,u]=os(r,la.clamp,a),f=Math.min(o,u),m=Math.max(o,u);return Math.min(Math.max(i,f),m)}case"lerp":{const[i,o,u]=os(r,la.lerp,a);return i+(o-i)*u}case"min3":{const[i,o,u]=os(r,la.min3,a);return Math.min(i,o,u)}case"max3":{const[i,o,u]=os(r,la.max3,a);return Math.max(i,o,u)}case"pow10":{const[i]=os(r,la.pow10,a);return Math.pow(10,i)}case"root":{const[i,o]=os(r,la.root,a);return Math.pow(i,1/o)}default:return Pi(n)}},os=(n,r,a)=>{if(n.length!==r)throw new Error(`Function expects ${r} arguments, received ${n.length}.`);return n.map(i=>Di(i,a))},CN=(n,r)=>{for(const a of n)if(a.untilLevel===void 0||r<a.untilLevel)return a;return n[n.length-1]},wi=(n,r)=>{const a=r.getReferenceValue?.(n);return a!==void 0?a:n.type==="variable"?NN(n,r):MN(n,r)},NN=(n,r)=>{const a=r.variables?.[n.name];if(a===void 0)throw new Error(`Missing variable "${n.name}" in formula evaluation context.`);return a},MN=(n,r)=>{const a=r.entities?.[n.type];if(!a)throw new Error(`Missing entity lookup for type "${n.type}" while resolving "${n.id}".`);const i=IN(a,n.id);if(i===void 0)throw new Error(`Missing entity value for type "${n.type}" with id "${n.id}".`);return i},IN=(n,r)=>{if(typeof n=="function")return n(r);if(n instanceof Map)return n.get(r);if(xN(n))return Object.prototype.hasOwnProperty.call(n,r)?n[r]:void 0},xN=n=>typeof n=="object"&&n!==null&&!(n instanceof Map),Pi=n=>{throw new Error(`Unhandled value: ${String(n)}`)},zN=100,LN=20,ds=1e-9,Xm=(n,r)=>{const a=r===void 0?n:Math.min(n,r),i=[];for(let o=0;o<=a;o+=1)i.push(o);return i},DN=n=>({variables:{level:n,time:0,deltaTime:1},entities:{resource:()=>0,generator:()=>0,upgrade:()=>0,automation:()=>0,prestigeLayer:()=>0}}),vs=(n,r)=>{try{return{ok:!0,value:wn(n,DN(r))}}catch(a){return{ok:!1,error:a}}},Je=(n,r,a,i)=>{i?.(n),n.severity==="warning"?r.push(n):a.push(n)},UN=(n,r,a,i,o,u)=>{const f=(m,h,p)=>{for(const g of a){const v=vs(m,g);if(!v.ok){Je({code:"balance.rate.evaluationFailed",message:`Formula evaluation failed for "${p}" at level ${g} in generator "${n.id}".`,path:h,severity:"error",suggestion:"Ensure referenced variables/entities are available and formulas avoid invalid operations."},i,o,u);return}const b=v.value;if(!Number.isFinite(b)){Je({code:"balance.rate.nonFinite",message:`Rate for "${p}" in generator "${n.id}" is non-finite at level ${g}.`,path:h,severity:"error"},i,o,u);return}if(b<0){Je({code:"balance.rate.negative",message:`Rate for "${p}" in generator "${n.id}" is negative at level ${g}.`,path:h,severity:"error"},i,o,u);return}}};n.produces.forEach((m,h)=>f(m.rate,["generators",r,"produces",h,"rate"],m.resourceId)),n.consumes.forEach((m,h)=>f(m.rate,["generators",r,"consumes",h,"rate"],m.resourceId))},fS=(n,r,a,i,o)=>{if(n.values.length<=1)return;let u=n.values[0]??0;n.values.slice(1).forEach((f,m)=>{const h=m+1;f+ds<u&&Je({code:"balance.cost.nonMonotonic",message:`Cost for ${n.kind} "${n.entityId}" decreases between purchases ${h-1} and ${h}.`,path:n.path,severity:"error"},a,i,o);const p=Math.max(u,ds);f-p*r>ds&&Je({code:"balance.cost.exceedsGrowthCap",message:`Cost growth for ${n.kind} "${n.entityId}" exceeds ${r}x between purchases ${h-1} and ${h}.`,path:n.path,severity:"error"},a,i,o),u=f})},jN=(n,r,a,i,o,u,f)=>{const m=[];for(const h of a){const p=vs(n.purchase.costCurve,h);if(!p.ok){Je({code:"balance.cost.evaluationFailed",message:`Cost evaluation failed for generator "${n.id}" at purchase ${h}.`,path:["generators",r,"purchase","costCurve"],severity:"error"},o,u,f);break}const g=p.value;if(!Number.isFinite(g)){Je({code:"balance.cost.nonFinite",message:`Cost multiplier for generator "${n.id}" is non-finite at purchase ${h}.`,path:["generators",r,"purchase","costCurve"],severity:"error"},o,u,f);break}if(g<0){Je({code:"balance.cost.negative",message:`Cost multiplier for generator "${n.id}" is negative at purchase ${h}.`,path:["generators",r,"purchase","costCurve"],severity:"error"},o,u,f);break}const v=n.purchase.baseCost*g;if(!Number.isFinite(v)){Je({code:"balance.cost.nonFinite",message:`Computed cost for generator "${n.id}" is non-finite at purchase ${h}.`,path:["generators",r,"purchase","baseCost"],severity:"error"},o,u,f);break}if(v<0){Je({code:"balance.cost.negative",message:`Computed cost for generator "${n.id}" is negative at purchase ${h}.`,path:["generators",r,"purchase","baseCost"],severity:"error"},o,u,f);break}m.push(v)}fS({values:m,path:["generators",r,"purchase","costCurve"],entityId:n.id,kind:"generator"},i,o,u,f)},$N=(n,r,a,i,o,u)=>{const f=vs(n.cost.costCurve,a);if(!f.ok){Je({code:"balance.cost.evaluationFailed",message:`Base cost evaluation failed for upgrade "${n.id}" at purchase ${a}.`,path:["upgrades",r,"cost","costCurve"],severity:"error"},i,o,u);return}const m=f.value;if(!Number.isFinite(m)||m<0){Je({code:Number.isFinite(m)?"balance.cost.negative":"balance.cost.nonFinite",message:`Base cost multiplier for upgrade "${n.id}" is invalid at purchase ${a}.`,path:["upgrades",r,"cost","costCurve"],severity:"error"},i,o,u);return}let h=1;if(n.repeatable?.costCurve){const g=vs(n.repeatable.costCurve,a);if(!g.ok){Je({code:"balance.cost.evaluationFailed",message:`Repeatable cost evaluation failed for upgrade "${n.id}" at purchase ${a}.`,path:["upgrades",r,"repeatable","costCurve"],severity:"error"},i,o,u);return}if(h=g.value,!Number.isFinite(h)||h<0){Je({code:Number.isFinite(h)?"balance.cost.negative":"balance.cost.nonFinite",message:`Repeatable cost multiplier for upgrade "${n.id}" is invalid at purchase ${a}.`,path:["upgrades",r,"repeatable","costCurve"],severity:"error"},i,o,u);return}}const p=n.cost.baseCost*m*h;if(!Number.isFinite(p)||p<0){Je({code:Number.isFinite(p)?"balance.cost.negative":"balance.cost.nonFinite",message:`Computed cost for upgrade "${n.id}" is invalid at purchase ${a}.`,path:["upgrades",r,"cost","baseCost"],severity:"error"},i,o,u);return}return p},BN=(n,r,a,i,o,u,f)=>{const m=[];for(const h of a){const p=$N(n,r,h,o,u,f);if(p===void 0)break;m.push(p)}fS({values:m,path:["upgrades",r,"cost","costCurve"],entityId:n.id,kind:"upgrade"},i,o,u,f)},qN=(n,r,a,i,o,u)=>{const f=vs(n.reward.baseReward,a);if(!f.ok){Je({code:"balance.prestige.evaluationFailed",message:`Base reward evaluation failed for prestige layer "${n.id}" at index ${a}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},i,o,u);return}const m=f.value;if(!Number.isFinite(m)||m<0){Je({code:Number.isFinite(m)?"balance.prestige.negative":"balance.prestige.nonFinite",message:`Base reward for prestige layer "${n.id}" is invalid at index ${a}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},i,o,u);return}if(!n.reward.multiplierCurve)return m;const h=vs(n.reward.multiplierCurve,a);if(!h.ok){Je({code:"balance.prestige.evaluationFailed",message:`Multiplier evaluation failed for prestige layer "${n.id}" at index ${a}.`,path:["prestigeLayers",r,"reward","multiplierCurve"],severity:"error"},i,o,u);return}const p=h.value;if(!Number.isFinite(p)||p<0){Je({code:Number.isFinite(p)?"balance.prestige.negative":"balance.prestige.nonFinite",message:`Multiplier for prestige layer "${n.id}" is invalid at index ${a}.`,path:["prestigeLayers",r,"reward","multiplierCurve"],severity:"error"},i,o,u);return}const g=m*p;if(!Number.isFinite(g)||g<0){Je({code:Number.isFinite(g)?"balance.prestige.negative":"balance.prestige.nonFinite",message:`Computed reward for prestige layer "${n.id}" is invalid at index ${a}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},i,o,u);return}return g},PN=(n,r,a,i,o,u,f)=>{const m=[];for(const p of a){const g=qN(n,r,p,o,u,f);if(g===void 0)break;m.push(g)}if(m.length<=1)return;let h=m[0]??0;m.slice(1).forEach((p,g)=>{const v=g+1;p+ds<h&&Je({code:"balance.prestige.nonMonotonic",message:`Prestige rewards for "${n.id}" decrease between indices ${v-1} and ${v}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},o,u,f);const b=Math.max(h,ds);p-b*i>ds&&Je({code:"balance.prestige.exceedsGrowthCap",message:`Prestige rewards for "${n.id}" exceed ${i}x growth between indices ${v-1} and ${v}.`,path:["prestigeLayers",r,"reward","baseReward"],severity:"error"},o,u,f),h=p})},bm=(n,r)=>{if(!n)return!1;switch(n.kind){case"resourceThreshold":return n.resourceId===r;case"generatorLevel":case"upgradeOwned":case"prestigeUnlocked":case"flag":case"script":case"always":case"never":return!1;case"allOf":case"anyOf":return n.conditions.some(a=>bm(a,r));case"not":return bm(n.condition,r);default:return!1}},GN=n=>!(n.unlocked||!n.unlockCondition||n.unlockCondition.kind==="always"),Em=(n,r,a,i,o,u,f,m)=>{const h=o.get(n);h&&GN(h)&&(bm(r,n)||Je({code:"balance.unlock.ordering",message:`Resource "${n}" unlocks after dependent content "${i}". Gate the dependent unlock on the resource or unlock the resource earlier.`,path:a,severity:"warning"},u,f,m))},VN=(n,r,a,i,o,u)=>{n.generators.forEach((f,m)=>{UN(f,m,r,i,o,u),jN(f,m,r,a,i,o,u),Em(f.purchase.currencyId,f.baseUnlock,["generators",m,"purchase","currencyId"],f.id,n.lookup.resources,i,o,u),f.consumes.forEach((h,p)=>{Em(h.resourceId,f.baseUnlock,["generators",m,"consumes",p,"resourceId"],f.id,n.lookup.resources,i,o,u)})})},HN=(n,r,a,i,o,u)=>{n.upgrades.forEach((f,m)=>{const h=f.repeatable?f.repeatable.maxPurchases??r:0,p=Xm(r,h);BN(f,m,p,a,i,o,u),Em(f.cost.currencyId,f.unlockCondition,["upgrades",m,"cost","currencyId"],f.id,n.lookup.resources,i,o,u)})},YN=(n,r,a,i,o,u)=>{n.prestigeLayers.forEach((f,m)=>{const h=Xm(r,r);PN(f,m,h,a,i,o,u)})},P0=(n,r={},a)=>{const i=Math.max(0,Math.floor(r.sampleSize??zN)),o=r.maxGrowth??LN,u=[],f=[],m=Xm(i,i);return VN(n,m,o,u,f,a),HN(n,i,o,u,f,a),YN(n,i,o,u,f,a),{warnings:Object.freeze(u),errors:Object.freeze(f)}};class ZN extends Error{constructor(r="Content schema validation failed"){super(r),this.name="ContentSchemaError"}}class G0 extends ZN{constructor(r,a){super(r),Object.defineProperty(this,"issues",{enumerable:!0,configurable:!0,writable:!0,value:a}),this.name="BalanceValidationError"}}const XN=[{module:"automations",introducedIn:"0.2.0",docRef:"docs/idle-engine-design.md (9, 18)"},{module:"transforms",introducedIn:"0.3.0",docRef:"docs/idle-engine-design.md (6)"},{module:"runtimeEvents",introducedIn:"0.3.0",docRef:"docs/runtime-event-pubsub-design.md"},{module:"prestigeLayers",introducedIn:"0.4.0",docRef:"docs/idle-engine-design.md (6, 18)"},{module:"guildPerks",introducedIn:"0.5.0",docRef:"docs/idle-engine-design.md (18)"}],FN=n=>{if(!n)return null;const r=fs.valid(n);if(r)return r;const a=fs.clean(n);if(a)return a;const i=fs.coerce(n);return i?i.version:null},QN=(n,r)=>{const a=FN(n),i=[];return XN.forEach(o=>{if(!r[o.module])return;const u=`Module "${o.module}" requires runtime version ${o.introducedIn} or later (${o.docRef}).`;if(!a){i.push({module:o.module,requiredVersion:o.introducedIn,docRef:o.docRef,severity:"warning",message:`${u} Provide ContentSchemaOptions.runtimeVersion to enforce compatibility.`});return}fs.lt(a,o.introducedIn)&&i.push({module:o.module,requiredVersion:o.introducedIn,docRef:o.docRef,severity:"error",message:`${u} Current runtime version ${a} is too old.`})}),i},KN=2166136261,JN=16777619,WN=1,eM=n=>{let r=KN;for(let a=0;a<n.length;a+=1)r^=n.charCodeAt(a),r=Math.imul(r,JN),r>>>=0;return r>>>0},tM=n=>{const r={id:n.metadata.id,version:n.metadata.version,modules:{resources:n.resources.map(o=>o.id),generators:n.generators.map(o=>o.id),upgrades:n.upgrades.map(o=>o.id),metrics:n.metrics.map(o=>o.id),achievements:n.achievements.map(o=>o.id),automations:n.automations.map(o=>o.id),transforms:n.transforms.map(o=>o.id),prestigeLayers:n.prestigeLayers.map(o=>o.id),guildPerks:n.guildPerks.map(o=>o.id),runtimeEvents:n.runtimeEvents.map(o=>o.id)}},a=JSON.stringify(r),i=eM(a);return{version:WN,hash:`fnv1a-${i.toString(16).padStart(8,"0")}`}},In=n=>Object.freeze(n),Ut=n=>Object.freeze(n),xn=n=>Object.freeze(new Map(n.map(r=>[r.id,r]))),zn=n=>Object.freeze(Object.fromEntries(n.map(r=>[r.id,r]))),nM=Z({metadata:XC,resources:fN.default([]),generators:vC.default([]),upgrades:fC.default([]),metrics:rN.default([]),achievements:WR.default([]),automations:rC.default([]),transforms:ON.default([]),prestigeLayers:oN.default([]),guildPerks:TC.default([]),runtimeEvents:SN.default([])}).strict(),Fm=n=>n?Array.from(n):[],rM=se,De=n=>[...n],V0=(n,r,a,i,o)=>{const u=new Set,f=[];if(Fm(n).forEach((m,h)=>{const p=a.safeParse(m);if(!p.success){const g=[...o,h];if(r==="error"){p.error.issues.forEach(v=>{f.push({...v,path:De([...g,...v.path])})});return}i({code:r==="warning"?"allowlist.invalidSoftEntry":"allowlist.invalidEntry",message:`Allowlist entry "${m}" failed validation.`,path:De(g),severity:r,issues:p.error.issues});return}u.add(p.data)}),r==="error"&&f.length>0)throw new $n(f);return u},Qd=(n,r,a,i)=>({required:V0(n?.required,"error",r,a,[...i,"required"]),soft:V0(n?.soft,"warning",r,a,[...i,"soft"])}),aM=n=>new Set(Fm(n).map(r=>rM.parse(r))),sM=n=>new Set(Fm(n).map(r=>tu.parse(r))),iM=(n,r)=>{const a={defaultLocale:n.defaultLocale,supportedLocales:n.supportedLocales,warningSink:r};return{normalize:(u,f)=>ys(u,{...a,path:f}),normalizeOptional:(u,f)=>u?ys(u,{...a,path:f}):void 0}},oM=(n,r={})=>{const a={defaultLocale:n.metadata.defaultLocale,supportedLocales:n.metadata.supportedLocales,warningSink:r.warningSink},i=Ut({...n.metadata,title:ys(n.metadata.title,{...a,path:["metadata","title"]}),summary:n.metadata.summary?ys(n.metadata.summary,{...a,path:["metadata","summary"]}):n.metadata.summary}),{normalize:o,normalizeOptional:u}=iM(i,r.warningSink),f=In(n.resources.map((M,$)=>Ut({...M,name:o(M.name,["resources",$,"name"])}))),m=In(n.generators.map((M,$)=>Ut({...M,name:o(M.name,["generators",$,"name"])}))),h=In(n.upgrades.map((M,$)=>Ut({...M,name:o(M.name,["upgrades",$,"name"])}))),p=In(n.metrics.map((M,$)=>Ut({...M,name:o(M.name,["metrics",$,"name"]),description:u(M.description,["metrics",$,"description"])}))),g=In(n.achievements.map((M,$)=>Ut({...M,name:o(M.name,["achievements",$,"name"]),description:o(M.description,["achievements",$,"description"])}))),v=In(n.automations.map((M,$)=>Ut({...M,name:o(M.name,["automations",$,"name"]),description:o(M.description,["automations",$,"description"])}))),b=In(n.transforms.map((M,$)=>Ut({...M,name:o(M.name,["transforms",$,"name"]),description:o(M.description,["transforms",$,"description"])}))),T=In(n.prestigeLayers.map((M,$)=>Ut({...M,name:o(M.name,["prestigeLayers",$,"name"]),summary:o(M.summary,["prestigeLayers",$,"summary"])}))),w=In(n.guildPerks.map((M,$)=>Ut({...M,name:o(M.name,["guildPerks",$,"name"]),description:o(M.description,["guildPerks",$,"description"])}))),S=In(n.runtimeEvents.map(M=>Ut({...M}))),A={metadata:i,resources:f,generators:m,upgrades:h,metrics:p,achievements:g,automations:v,transforms:b,prestigeLayers:T,guildPerks:w,runtimeEvents:S},_=Ut({resources:xn(A.resources),generators:xn(A.generators),upgrades:xn(A.upgrades),metrics:xn(A.metrics),achievements:xn(A.achievements),automations:xn(A.automations),transforms:xn(A.transforms),prestigeLayers:xn(A.prestigeLayers),guildPerks:xn(A.guildPerks),runtimeEvents:xn(A.runtimeEvents)}),C=Ut({resourceById:zn(A.resources),generatorById:zn(A.generators),upgradeById:zn(A.upgrades),metricById:zn(A.metrics),achievementById:zn(A.achievements),automationById:zn(A.automations),transformById:zn(A.transforms),prestigeLayerById:zn(A.prestigeLayers),guildPerkById:zn(A.guildPerks),runtimeEventById:zn(A.runtimeEvents)}),N=tM(A);return Ut({...A,lookup:_,serializedLookup:C,digest:N})},cM=n=>({automations:n.automations.length>0,transforms:n.transforms.length>0,runtimeEvents:n.runtimeEvents.length>0,prestigeLayers:n.prestigeLayers.length>0,guildPerks:n.guildPerks.length>0}),Ln=(n,r,a,i,o,u,f)=>{if(n&&!(n.required.has(r)||n.soft.has(r))){if(n.soft.size>0&&!n.required.size){o({code:u,message:f,path:De(a),severity:"warning"});return}i.addIssue({code:z.custom,path:De(a),message:f})}},Fe=(n,r)=>{const a=o=>{switch(o.kind){case"constant":case"linear":case"exponential":case"polynomial":return;case"piecewise":o.pieces.forEach(u=>a(u.formula));return;case"expression":i(o.expression);return;default:return}},i=o=>{if(!o||typeof o!="object")return;const u=o;switch(u.kind){case"literal":return;case"ref":u.target?.type&&u.target.type!=="variable"&&r({type:u.target.type,id:u.target.id});return;case"binary":i(u.left),i(u.right);return;case"unary":i(u.operand);return;case"call":u.args?.forEach(f=>i(f));return;default:return}};a(n)},ir=n=>{const r=new Map;return n.forEach((a,i)=>{r.set(a.id,{index:i,value:a})}),r},uM=(n,r,a)=>{const i=ir(n.resources),o=ir(n.generators),u=ir(n.upgrades),f=ir(n.metrics),m=ir(n.achievements),h=ir(n.automations),p=ir(n.transforms),g=ir(n.prestigeLayers),v=ir(n.guildPerks),b=new Set(a.runtimeEventCatalogue);n.runtimeEvents.forEach(_=>{b.add(_.id)});const T=a.warningSink,w=(_,C,N)=>{if(!b.has(_)){if(N==="warning"){T({code:"runtimeEvent.unknown",message:`Runtime event "${_}" is not present in the known catalogue.`,path:De(C),severity:N});return}r.addIssue({code:z.custom,path:De(C),message:`Runtime event "${_}" must exist in the known event catalogue.`})}},S=(_,C,N,M)=>{_.has(C)||r.addIssue({code:z.custom,path:De(N),message:M})};n.runtimeEvents.forEach((_,C)=>{a.runtimeEventCatalogue.has(_.id)&&r.addIssue({code:z.custom,path:De(["runtimeEvents",C,"id"]),message:`Runtime event "${_.id}" collides with an existing catalogue entry.`}),_.emits.forEach((N,M)=>{switch(N.source){case"achievement":S(m,N.id,De(["runtimeEvents",C,"emits",M,"id"]),`Runtime event emitter references unknown achievement "${N.id}".`);break;case"upgrade":S(u,N.id,De(["runtimeEvents",C,"emits",M,"id"]),`Runtime event emitter references unknown upgrade "${N.id}".`);break;case"transform":S(p,N.id,De(["runtimeEvents",C,"emits",M,"id"]),`Runtime event emitter references unknown transform "${N.id}".`);break;case"script":Ln(a.allowlists.scripts,N.id,De(["runtimeEvents",C,"emits",M,"id"]),r,T,"allowlist.script.missing",`Script "${N.id}" is not declared in the scripts allowlist.`);break}})}),n.generators.forEach((_,C)=>{_.produces.forEach((N,M)=>{S(i,N.resourceId,["generators",C,"produces",M,"resourceId"],`Generator "${_.id}" produces unknown resource "${N.resourceId}".`),Fe(N.rate,$=>{Qe($,["generators",C,"produces",M,"rate"],r,i,o,u,h,g)})}),_.consumes.forEach((N,M)=>{S(i,N.resourceId,["generators",C,"consumes",M,"resourceId"],`Generator "${_.id}" consumes unknown resource "${N.resourceId}".`),Fe(N.rate,$=>{Qe($,["generators",C,"consumes",M,"rate"],r,i,o,u,h,g)})}),S(i,_.purchase.currencyId,["generators",C,"purchase","currencyId"],`Generator "${_.id}" references unknown currency "${_.purchase.currencyId}".`),Fe(_.purchase.costCurve,N=>{Qe(N,["generators",C,"purchase","costCurve"],r,i,o,u,h,g)}),_.automation&&S(h,_.automation.automationId,["generators",C,"automation","automationId"],`Generator "${_.id}" references unknown automation "${_.automation.automationId}".`),_.baseUnlock&&jt(_.baseUnlock,["generators",C,"baseUnlock"],r,a,i,o,u,g),_.visibilityCondition&&jt(_.visibilityCondition,["generators",C,"visibilityCondition"],r,a,i,o,u,g),_.effects.forEach((N,M)=>{Kd(N,["generators",C,"effects",M],r,a,i,o,u,h,g,b)})}),n.upgrades.forEach((_,C)=>{_.targets.forEach((N,M)=>{switch(N.kind){case"resource":S(i,N.id,["upgrades",C,"targets",M,"id"],`Upgrade "${_.id}" targets unknown resource "${N.id}".`);break;case"generator":S(o,N.id,["upgrades",C,"targets",M,"id"],`Upgrade "${_.id}" targets unknown generator "${N.id}".`);break;case"automation":S(h,N.id,["upgrades",C,"targets",M,"id"],`Upgrade "${_.id}" targets unknown automation "${N.id}".`);break;case"prestigeLayer":S(g,N.id,["upgrades",C,"targets",M,"id"],`Upgrade "${_.id}" targets unknown prestige layer "${N.id}".`);break;case"guildPerk":S(v,N.id,["upgrades",C,"targets",M,"id"],`Upgrade "${_.id}" targets unknown guild perk "${N.id}".`);break}}),S(i,_.cost.currencyId,["upgrades",C,"cost","currencyId"],`Upgrade "${_.id}" references unknown currency "${_.cost.currencyId}".`),Fe(_.cost.costCurve,N=>{Qe(N,["upgrades",C,"cost","costCurve"],r,i,o,u,h,g)}),_.effects.forEach((N,M)=>{Kd(N,["upgrades",C,"effects",M],r,a,i,o,u,h,g,b)}),_.prerequisites.forEach((N,M)=>{jt(N,["upgrades",C,"prerequisites",M],r,a,i,o,u,g)}),_.unlockCondition&&jt(_.unlockCondition,["upgrades",C,"unlockCondition"],r,a,i,o,u,g),_.visibilityCondition&&jt(_.visibilityCondition,["upgrades",C,"visibilityCondition"],r,a,i,o,u,g)}),n.metrics.forEach((_,C)=>{_.source.kind==="script"&&Ln(a.allowlists.scripts,_.source.scriptId,["metrics",C,"source","scriptId"],r,T,"allowlist.script.missing",`Metric "${_.id}" references script "${_.source.scriptId}" that is not in the scripts allowlist.`)}),n.achievements.forEach((_,C)=>{switch(_.track.kind){case"resource":S(i,_.track.resourceId,["achievements",C,"track","resourceId"],`Achievement "${_.id}" references unknown resource "${_.track.resourceId}".`),Fe(_.track.threshold,N=>{Qe(N,["achievements",C,"track","threshold"],r,i,o,u,h,g)});break;case"generator-level":S(o,_.track.generatorId,["achievements",C,"track","generatorId"],`Achievement "${_.id}" references unknown generator "${_.track.generatorId}".`),Fe(_.track.level,N=>{Qe(N,["achievements",C,"track","level"],r,i,o,u,h,g)});break;case"upgrade-owned":S(u,_.track.upgradeId,["achievements",C,"track","upgradeId"],`Achievement "${_.id}" references unknown upgrade "${_.track.upgradeId}".`),_.track.purchases&&Fe(_.track.purchases,N=>{Qe(N,["achievements",C,"track","purchases"],r,i,o,u,h,g)});break;case"flag":Ln(a.allowlists.flags,_.track.flagId,["achievements",C,"track","flagId"],r,T,"allowlist.flag.missing",`Achievement "${_.id}" references flag "${_.track.flagId}" that is not in the flags allowlist.`);break;case"script":Ln(a.allowlists.scripts,_.track.scriptId,["achievements",C,"track","scriptId"],r,T,"allowlist.script.missing",`Achievement "${_.id}" references script "${_.track.scriptId}" that is not in the scripts allowlist.`);break;case"custom-metric":S(f,_.track.metricId,["achievements",C,"track","metricId"],`Achievement "${_.id}" references unknown metric "${_.track.metricId}".`),Fe(_.track.threshold,N=>{Qe(N,["achievements",C,"track","threshold"],r,i,o,u,h,g)});break}if(_.reward)switch(_.reward.kind){case"grantResource":S(i,_.reward.resourceId,["achievements",C,"reward","resourceId"],`Achievement "${_.id}" grants unknown resource "${_.reward.resourceId}".`),Fe(_.reward.amount,N=>{Qe(N,["achievements",C,"reward","amount"],r,i,o,u,h,g)});break;case"grantUpgrade":S(u,_.reward.upgradeId,["achievements",C,"reward","upgradeId"],`Achievement "${_.id}" grants unknown upgrade "${_.reward.upgradeId}".`);break;case"grantGuildPerk":S(v,_.reward.perkId,["achievements",C,"reward","perkId"],`Achievement "${_.id}" grants unknown guild perk "${_.reward.perkId}".`);break;case"emitEvent":w(_.reward.eventId,["achievements",C,"reward","eventId"],a.runtimeEventCatalogue.size>0?"error":"warning");break;case"unlockAutomation":S(h,_.reward.automationId,["achievements",C,"reward","automationId"],`Achievement "${_.id}" unlocks unknown automation "${_.reward.automationId}".`);break;case"grantFlag":Ln(a.allowlists.flags,_.reward.flagId,["achievements",C,"reward","flagId"],r,T,"allowlist.flag.missing",`Achievement "${_.id}" grants flag "${_.reward.flagId}" that is not in the flags allowlist.`);break}_.unlockCondition&&jt(_.unlockCondition,["achievements",C,"unlockCondition"],r,a,i,o,u,g),_.visibilityCondition&&jt(_.visibilityCondition,["achievements",C,"visibilityCondition"],r,a,i,o,u,g),_.onUnlockEvents.forEach((N,M)=>{w(N,["achievements",C,"onUnlockEvents",M],a.runtimeEventCatalogue.size>0?"error":"warning")})}),n.automations.forEach((_,C)=>{switch(_.targetType==="generator"?_.targetId&&S(o,_.targetId,["automations",C,"targetId"],`Automation "${_.id}" references unknown generator "${_.targetId}".`):_.targetType==="upgrade"?_.targetId&&S(u,_.targetId,["automations",C,"targetId"],`Automation "${_.id}" references unknown upgrade "${_.targetId}".`):_.targetType==="system"&&_.systemTargetId&&Ln(a.allowlists.systemAutomationTargets,_.systemTargetId,["automations",C,"systemTargetId"],r,T,"allowlist.systemAutomationTarget.missing",`Automation "${_.id}" references system target "${_.systemTargetId}" not present in the allowlist.`),_.resourceCost&&(S(i,_.resourceCost.resourceId,["automations",C,"resourceCost","resourceId"],`Automation "${_.id}" references unknown resource "${_.resourceCost.resourceId}".`),Fe(_.resourceCost.rate,N=>{Qe(N,["automations",C,"resourceCost","rate"],r,i,o,u,h,g)})),_.trigger.kind){case"resourceThreshold":S(i,_.trigger.resourceId,["automations",C,"trigger","resourceId"],`Automation "${_.id}" trigger references unknown resource "${_.trigger.resourceId}".`),Fe(_.trigger.threshold,N=>{Qe(N,["automations",C,"trigger","threshold"],r,i,o,u,h,g)});break;case"event":w(_.trigger.eventId,["automations",C,"trigger","eventId"],a.runtimeEventCatalogue.size>0?"error":"warning");break}_.scriptId&&Ln(a.allowlists.scripts,_.scriptId,["automations",C,"scriptId"],r,T,"allowlist.script.missing",`Automation "${_.id}" references script "${_.scriptId}" that is not in the scripts allowlist.`),jt(_.unlockCondition,["automations",C,"unlockCondition"],r,a,i,o,u,g)}),n.transforms.forEach((_,C)=>{switch(_.inputs.forEach((N,M)=>{S(i,N.resourceId,["transforms",C,"inputs",M,"resourceId"],`Transform "${_.id}" consumes unknown resource "${N.resourceId}".`),Fe(N.amount,$=>{Qe($,["transforms",C,"inputs",M,"amount"],r,i,o,u,h,g)})}),_.outputs.forEach((N,M)=>{S(i,N.resourceId,["transforms",C,"outputs",M,"resourceId"],`Transform "${_.id}" produces unknown resource "${N.resourceId}".`),Fe(N.amount,$=>{Qe($,["transforms",C,"outputs",M,"amount"],r,i,o,u,h,g)})}),_.duration&&Fe(_.duration,N=>{Qe(N,["transforms",C,"duration"],r,i,o,u,h,g)}),_.cooldown&&Fe(_.cooldown,N=>{Qe(N,["transforms",C,"cooldown"],r,i,o,u,h,g)}),_.trigger.kind){case"automation":S(h,_.trigger.automationId,["transforms",C,"trigger","automationId"],`Transform "${_.id}" references unknown automation "${_.trigger.automationId}".`);break;case"condition":jt(_.trigger.condition,["transforms",C,"trigger","condition"],r,a,i,o,u,g);break;case"event":w(_.trigger.eventId,["transforms",C,"trigger","eventId"],a.runtimeEventCatalogue.size>0?"error":"warning");break}_.automation&&S(h,_.automation.automationId,["transforms",C,"automation","automationId"],`Transform "${_.id}" references unknown automation "${_.automation.automationId}".`),_.unlockCondition&&jt(_.unlockCondition,["transforms",C,"unlockCondition"],r,a,i,o,u,g),_.visibilityCondition&&jt(_.visibilityCondition,["transforms",C,"visibilityCondition"],r,a,i,o,u,g)}),n.prestigeLayers.forEach((_,C)=>{_.resetTargets.forEach((N,M)=>{S(i,N,["prestigeLayers",C,"resetTargets",M],`Prestige layer "${_.id}" resets unknown resource "${N}".`)}),S(i,_.reward.resourceId,["prestigeLayers",C,"reward","resourceId"],`Prestige layer "${_.id}" rewards unknown resource "${_.reward.resourceId}".`),Fe(_.reward.baseReward,N=>{Qe(N,["prestigeLayers",C,"reward","baseReward"],r,i,o,u,h,g)}),_.reward.multiplierCurve&&Fe(_.reward.multiplierCurve,N=>{Qe(N,["prestigeLayers",C,"reward","multiplierCurve"],r,i,o,u,h,g)}),_.retention.forEach((N,M)=>{N.kind==="resource"?S(i,N.resourceId,["prestigeLayers",C,"retention",M,"resourceId"],`Prestige layer "${_.id}" retains unknown resource "${N.resourceId}".`):N.kind==="upgrade"&&S(u,N.upgradeId,["prestigeLayers",C,"retention",M,"upgradeId"],`Prestige layer "${_.id}" retains unknown upgrade "${N.upgradeId}".`)}),_.automation&&S(h,_.automation.automationId,["prestigeLayers",C,"automation","automationId"],`Prestige layer "${_.id}" references unknown automation "${_.automation.automationId}".`),jt(_.unlockCondition,["prestigeLayers",C,"unlockCondition"],r,a,i,o,u,g)}),n.guildPerks.forEach((_,C)=>{switch(_.effects.forEach((N,M)=>{Kd(N,["guildPerks",C,"effects",M],r,a,i,o,u,h,g,b)}),_.cost.kind){case"currency":S(i,_.cost.resourceId,["guildPerks",C,"cost","resourceId"],`Guild perk "${_.id}" references unknown resource "${_.cost.resourceId}".`),Fe(_.cost.amount,N=>{Qe(N,["guildPerks",C,"cost","amount"],r,i,o,u,h,g)});break;case"metric":S(f,_.cost.metricId,["guildPerks",C,"cost","metricId"],`Guild perk "${_.id}" references unknown metric "${_.cost.metricId}".`),Fe(_.cost.amount,N=>{Qe(N,["guildPerks",C,"cost","amount"],r,i,o,u,h,g)});break}_.unlockCondition&&jt(_.unlockCondition,["guildPerks",C,"unlockCondition"],r,a,i,o,u,g),_.visibilityCondition&&jt(_.visibilityCondition,["guildPerks",C,"visibilityCondition"],r,a,i,o,u,g)}),lM(n,r,a),QN(a.runtimeVersion,cM(n)).forEach(_=>{_.severity==="error"?r.addIssue({code:z.custom,path:De(["metadata","version"]),message:_.message}):T({code:"runtime.featureGate",message:_.message,path:De(["metadata","version"]),severity:"warning"})}),dM(n,r),mM(n,r)},Qe=(n,r,a,i,o,u,f,m)=>{switch(n.type){case"resource":i.has(n.id)||a.addIssue({code:z.custom,path:De(r),message:`Formula references unknown resource "${n.id}".`});break;case"generator":o.has(n.id)||a.addIssue({code:z.custom,path:De(r),message:`Formula references unknown generator "${n.id}".`});break;case"upgrade":u.has(n.id)||a.addIssue({code:z.custom,path:De(r),message:`Formula references unknown upgrade "${n.id}".`});break;case"automation":f.has(n.id)||a.addIssue({code:z.custom,path:De(r),message:`Formula references unknown automation "${n.id}".`});break;case"prestigeLayer":m.has(n.id)||a.addIssue({code:z.custom,path:De(r),message:`Formula references unknown prestige layer "${n.id}".`});break}},Kd=(n,r,a,i,o,u,f,m,h,p)=>{const g=(v,b,T)=>{v.has(b)||a.addIssue({code:z.custom,path:De(r),message:T})};switch(n.kind){case"modifyResourceRate":case"unlockResource":case"alterDirtyTolerance":g(o,n.resourceId,`Effect references unknown resource "${n.resourceId}".`),"value"in n&&Fe(n.value,v=>{Qe(v,r,a,o,u,f,m,h)});break;case"modifyGeneratorRate":case"modifyGeneratorCost":case"unlockGenerator":g(u,n.generatorId,`Effect references unknown generator "${n.generatorId}".`),"value"in n&&Fe(n.value,v=>{Qe(v,r,a,o,u,f,m,h)});break;case"grantAutomation":g(m,n.automationId,`Effect references unknown automation "${n.automationId}".`);break;case"grantFlag":Ln(i.allowlists.flags,n.flagId,[...r,"flagId"],a,i.warningSink,"allowlist.flag.missing",`Effect references flag "${n.flagId}" that is not in the flags allowlist.`);break;case"emitEvent":p.has(n.eventId)||a.addIssue({code:z.custom,path:De(r),message:`Effect references unknown runtime event "${n.eventId}".`});break;case"unlockGuildAutomation":g(m,n.automationId,`Effect references unknown automation "${n.automationId}".`);break;case"modifyGuildStorage":g(o,n.storageId,`Effect references unknown resource "${n.storageId}".`),Fe(n.value,v=>{Qe(v,r,a,o,u,f,m,h)});break}},jt=(n,r,a,i,o,u,f,m)=>{if(!n)return;const h=(p,g)=>{switch(p.kind){case"resourceThreshold":o.has(p.resourceId)||a.addIssue({code:z.custom,path:De([...g,"resourceId"]),message:`Condition references unknown resource "${p.resourceId}".`}),Fe(p.amount,v=>{Qe(v,g,a,o,u,f,new Map,m)});break;case"generatorLevel":u.has(p.generatorId)||a.addIssue({code:z.custom,path:De([...g,"generatorId"]),message:`Condition references unknown generator "${p.generatorId}".`}),Fe(p.level,v=>{Qe(v,g,a,o,u,f,new Map,m)});break;case"upgradeOwned":f.has(p.upgradeId)||a.addIssue({code:z.custom,path:De([...g,"upgradeId"]),message:`Condition references unknown upgrade "${p.upgradeId}".`});break;case"prestigeUnlocked":m.has(p.prestigeLayerId)||a.addIssue({code:z.custom,path:De([...g,"prestigeLayerId"]),message:`Condition references unknown prestige layer "${p.prestigeLayerId}".`});break;case"flag":Ln(i.allowlists.flags,p.flagId,[...g,"flagId"],a,i.warningSink,"allowlist.flag.missing",`Condition references flag "${p.flagId}" that is not in the flags allowlist.`);break;case"script":Ln(i.allowlists.scripts,p.scriptId,[...g,"scriptId"],a,i.warningSink,"allowlist.script.missing",`Condition references script "${p.scriptId}" that is not in the scripts allowlist.`);break;case"allOf":case"anyOf":p.conditions.forEach((v,b)=>h(v,[...g,"conditions",b]));break;case"not":h(p.condition,[...g,"condition"]);break}};h(n,r)},lM=(n,r,a)=>{const i=n.metadata.dependencies;if(!i)return;const o=n.metadata.id;i.optional.forEach((g,v)=>{a.activePackIds.size!==0&&(a.activePackIds.has(g.packId)||a.warningSink({code:"dependencies.optionalMissing",message:`Optional dependency "${g.packId}" is not present in active pack set.`,path:De(["metadata","dependencies","optional",v]),severity:"warning"}))});const u=new Map,f=(g,v)=>{u.has(g)||u.set(g,new Set),u.get(g)?.add(v)};i.requires.forEach((g,v)=>{if(g.packId===o){r.addIssue({code:z.custom,path:De(["metadata","dependencies","requires",v,"packId"]),message:"Pack cannot depend on itself."});return}f(o,g.packId),a.knownPacks.has(g.packId)||a.warningSink({code:"dependencies.unknownPack",message:`Dependency "${g.packId}" is not present in known pack graph.`,path:De(["metadata","dependencies","requires",v,"packId"]),severity:"warning"})}),a.knownPacks.forEach(g=>{g.requires?.forEach(v=>{f(g.id,v.packId)})});const m=new Set,h=new Set,p=g=>{if(m.has(g))return!0;if(h.has(g))return!1;h.add(g),m.add(g);const v=u.get(g);if(v){for(const b of v)if(p(b))return!0}return m.delete(g),!1};p(o)&&r.addIssue({code:z.custom,path:De(["metadata","dependencies","requires"]),message:"Dependency graph contains a cycle involving this pack."})},fM=n=>{if(n.length<=1)return n.join("");const r=n.slice(0,-1);let a=0;for(let o=1;o<r.length;o++)r[o]<r[a]&&(a=o);const i=[...r.slice(a),...r.slice(0,a)];return i.push(i[0]),i.join("")},dS=(n,r,a=!0)=>{const i=new Set,o=new Set,u=[],f=[],m=new Set,h=p=>{if(o.has(p)){const v=u.indexOf(p),b=[...u.slice(v),p],T=fM(b);return!!(!m.has(T)&&(m.add(T),f.push(b),a))}if(i.has(p))return!1;i.add(p),o.add(p),u.push(p);const g=n.get(p);if(g){for(const v of g)if(h(v))return!0}return o.delete(p),u.pop(),!1};for(const p of r)if(!i.has(p)&&h(p))break;return f},dM=(n,r)=>{const a=new Map,i=new Map,o=new Map;n.transforms.forEach((f,m)=>{i.set(f.id,m),f.outputs.forEach(h=>{o.has(h.resourceId)||o.set(h.resourceId,new Set),o.get(h.resourceId)?.add(f.id)})}),n.transforms.forEach(f=>{f.inputs.forEach(m=>{const h=o.get(m.resourceId);h&&h.forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(f.id)})})});const u=dS(a,n.transforms.map(f=>f.id));for(const f of u){const m=f.join("  "),h=f[0],p=i.get(h),g=new Set;for(let T=0;T<f.length-1;T++){const w=f[T],S=f[T+1],A=n.transforms.find(C=>C.id===w),_=n.transforms.find(C=>C.id===S);A&&_&&A.outputs.forEach(C=>{_.inputs.some(N=>N.resourceId===C.resourceId)&&g.add(C.resourceId)})}const v=Array.from(g).sort().join(", "),b=g.size>0?` (involves resources: ${v})`:"";p!==void 0&&r.addIssue({code:z.custom,path:De(["transforms",p]),message:`Transform cycle detected: ${m}${b}. Consider breaking the cycle by: (1) introducing external resource sources via generators or initial grants, (2) converting to a linear transformation chain, or (3) adding intermediate resources to create a clear flow direction.`})}},mM=(n,r)=>{const a=new Map,i=new Map,o=m=>{const h=new Set;if(!m)return h;const p=g=>{switch(g.kind){case"resourceThreshold":h.add(g.resourceId);break;case"generatorLevel":h.add(g.generatorId);break;case"upgradeOwned":h.add(g.upgradeId);break;case"prestigeUnlocked":h.add(g.prestigeLayerId);break;case"allOf":case"anyOf":g.conditions.forEach(p);break;case"not":p(g.condition);break;case"always":case"never":case"flag":case"script":break;default:return g}};return p(m),h};n.resources.forEach((m,h)=>{i.set(m.id,{type:"resource",index:h})}),n.generators.forEach((m,h)=>{i.set(m.id,{type:"generator",index:h})}),n.upgrades.forEach((m,h)=>{i.set(m.id,{type:"upgrade",index:h})}),n.achievements.forEach((m,h)=>{i.set(m.id,{type:"achievement",index:h})}),n.transforms.forEach((m,h)=>{i.set(m.id,{type:"transform",index:h})}),n.prestigeLayers.forEach((m,h)=>{i.set(m.id,{type:"prestige",index:h})}),n.resources.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})}),n.generators.forEach(m=>{m.baseUnlock&&o(m.baseUnlock).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})}),n.upgrades.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)}),m.prerequisites.forEach(h=>{o(h).forEach(g=>{a.has(g)||a.set(g,new Set),a.get(g)?.add(m.id)})})}),n.achievements.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})}),n.transforms.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})}),n.prestigeLayers.forEach(m=>{m.unlockCondition&&o(m.unlockCondition).forEach(p=>{a.has(p)||a.set(p,new Set),a.get(p)?.add(m.id)})});const u={resource:"resources",generator:"generators",upgrade:"upgrades",achievement:"achievements",transform:"transforms",prestige:"prestigeLayers"},f=dS(a,i.keys());for(const m of f){const h=m.join("  "),p=m[0],g=i.get(p),v=new Set;m.forEach(w=>{const S=i.get(w);S&&v.add(S.type)});const b=Array.from(v).sort().join(", "),T=v.size>0?` (involves ${v.size===1?b:`entity types: ${b}`})`:"";if(g){const w=[u[g.type],g.index];r.addIssue({code:z.custom,path:De(w),message:`Unlock condition cycle detected: ${h}${T}. Consider fixing by: (1) introducing a base entity that both depend on, (2) removing one unlock condition to create a hierarchical progression, or (3) using a flag or other non-entity condition to break the cycle.`})}}},H0=(n,r)=>{const a=n.allowlists===void 0?{}:{...n.allowlists.flags?{flags:Qd(n.allowlists.flags,Bi,r,["options","allowlists","flags"])}:{},...n.allowlists.scripts?{scripts:Qd(n.allowlists.scripts,qi,r,["options","allowlists","scripts"])}:{},...n.allowlists.systemAutomationTargets?{systemAutomationTargets:Qd(n.allowlists.systemAutomationTargets,ZE,r,["options","allowlists","systemAutomationTargets"])}:{}},i=aM(n.runtimeEventCatalogue),o=sM(n.activePackIds),u=new Map;return n.knownPacks?.forEach(f=>{u.set(f.id,f)}),nM.superRefine((f,m)=>uM(f,m,{allowlists:a,warningSink:r,runtimeEventCatalogue:i,runtimeVersion:n.runtimeVersion,activePackIds:o,knownPacks:u})).transform(f=>oM(f,{runtimeVersion:n.runtimeVersion,warningSink:r}))},hM=(n={})=>({parse(r){const a=[],u=H0(n,h=>{a.push(h),n.warningSink?.(h)}).parse(r),f=n.balance??{},m=f.enabled===!1?{warnings:Object.freeze([]),errors:Object.freeze([])}:P0(u,f,n.warningSink);if(m.errors.length>0&&f.warnOnly!==!0)throw new G0("Balance validation failed.",m.errors);return{pack:u,warnings:a,balanceWarnings:m.warnings,balanceErrors:m.errors}},safeParse(r){const a=[],u=H0(n,f=>{a.push(f),n.warningSink?.(f)}).safeParse(r);if(u.success)try{const f=n.balance??{},m=f.enabled===!1?{warnings:Object.freeze([]),errors:Object.freeze([])}:P0(u.data,f,n.warningSink);if(m.errors.length>0&&f.warnOnly!==!0)throw new G0("Balance validation failed.",m.errors);return{success:!0,data:{pack:u.data,warnings:a,balanceWarnings:m.warnings,balanceErrors:m.errors}}}catch(f){return{success:!1,error:f}}return{success:!1,error:u.error}}}),pM=(n,r)=>hM(r).parse(n),_i=n=>n.map(r=>se.parse(r));_i(["resource/ore-vein","resource/copper","resource/energy-core"]),_i(["generator/ore-drill","generator/smelter"]),_i(["upgrade/miner-capacity","upgrade/smelter-efficiency"]),_i(["automation/logistics-bot","automation/smelter-daemon"]),_i(["prestige/main-loop","prestige/endgame"]);function gn(n){return uS.parse(n)}function fr(n){return oS.parse(n)}function Gt(n){return sS.parse(n)}function yn(n){return nS.parse(n)}function Sa(n){return rS.parse(n)}function gM(n){return cS.parse(n)}Object.freeze({"offline-catchup":St.OFFLINE_CATCHUP,"research-daemon":"RESEARCH_DAEMON"});function yM(n){const{layerId:r,resourceState:a,reward:i,resetTargets:o,retentionTargets:u}=n,f=a.getIndex(i.resourceId);f!==void 0&&i.amount>0?a.addAmount(f,i.amount):f===void 0&&i.amount>0&&J.recordWarning("PrestigeResetRewardSkipped",{layerId:r,resourceId:i.resourceId});for(const m of o){const h=a.getIndex(m.resourceId);if(h!==void 0){const p=Y0(m.resetToAmount);gv(a,h,p)}else J.recordWarning("PrestigeResetTargetSkipped",{layerId:r,resourceId:m.resourceId,targetType:"reset"})}for(const m of u){const h=a.getIndex(m.resourceId);if(h!==void 0){const p=Y0(m.retainedAmount);gv(a,h,p)}else J.recordWarning("PrestigeResetTargetSkipped",{layerId:r,resourceId:m.resourceId,targetType:"retention"})}J.recordProgress("prestige.reset_applied",{layerId:r,rewardResourceId:i.resourceId,rewardAmount:i.amount,resetCount:o.length,retentionCount:u.length})}function Y0(n){return Number.isFinite(n)?Math.max(0,Math.floor(n)):0}const vM="production";function Z0(n,r){const a=[];for(const{resourceId:i,rate:o}of n){if(!Number.isFinite(o)||o<=0)continue;const u=r.getIndex(i);u!==void 0&&a.push({resourceId:i,index:u,rate:o})}return a}function bM(n){const{generators:r,resourceState:a,getMultiplier:i,onTick:o}=n,u=n.systemId??vM,f=n.applyThreshold??1e-4;if(f<=0||!Number.isFinite(f))throw new Error("applyThreshold must be a positive finite number");const m=new Map;function h(g,v,b){return`${g}:${v}:${b}`}function p(g,v){const T=(m.get(g)??0)+v,w=f*1e-9,S=Math.floor((T+w)/f)*f;return{toApply:S,newTotal:T,commit:(A=1)=>{m.set(g,T-S*A)}}}return{id:u,tick:({deltaMs:g})=>{const v=g/1e3,b=r(),T=new Map,w=new Map;for(const S of b){if(ms()&&S.id.includes(":")&&console.warn(`Generator ID "${S.id}" contains ':' which may cause accumulator key collisions`),S.owned<=0)continue;const A=i?.(S.id)??1,_=S.owned*A,C=Z0(S.produces,a),N=Z0(S.consumes,a),M=[];let $=1,B=N.length===0;for(const{resourceId:q,index:X,rate:ue}of N){const me=ue*_*v,ke=h(S.id,"consume",q),Ue=p(ke,me);if(M.push({resourceId:q,index:X,result:Ue}),Ue.toApply>0){B=!0;const et=a.getAmount(X),W=Ue.newTotal>0?et/Ue.newTotal:1;$=Math.min($,W)}}for(const{resourceId:q,index:X,rate:ue}of C){const me=ue*_*v,ke=h(S.id,"produce",q),Ue=p(ke,me),et=B?$:0;Ue.commit(et);const W=Ue.toApply*et;W>0&&(a.addAmount(X,W),T.set(q,(T.get(q)??0)+W))}for(const{resourceId:q,index:X,result:ue}of M){ue.commit($);const me=ue.toApply*$;me>0&&(a.spendAmount(X,me,{systemId:u}),w.set(q,(w.get(q)??0)+me))}}o&&o({produced:T,consumed:w})},clearAccumulators:()=>{m.clear()},cleanupAccumulators:()=>{const g=f*1e-6;for(const[v,b]of m)Math.abs(b)<g&&m.delete(v)},clearGeneratorAccumulators:g=>{const v=`${g}:`;for(const b of m.keys())b.startsWith(v)&&m.delete(b)},exportAccumulators:()=>{const g={};for(const[v,b]of m)b!==0&&(g[v]=b);return{accumulators:g}},restoreAccumulators:g=>{if(m.clear(),!(!g||!g.accumulators))for(const[v,b]of Object.entries(g.accumulators))typeof b=="number"&&Number.isFinite(b)&&m.set(v,b)}}}const Gc=0,X0=100;function Jd(n,r,a,i){const o=new Error(`Condition "${a}" targeting "${i}" requires ConditionContext.${String(r)}()`);ms()?n.onError?.(o):console.warn(o.message)}function Br(n,r,a=0){if(!n)return!0;if(a>X0){const i=n?` (condition kind: "${n.kind}")`:"",o=new Error(`Condition evaluation exceeded maximum depth of ${X0} at recursion level ${a}${i}. Possible circular dependency detected. Check for conditions that reference each other in a cycle.`);return ms()?r.onError?.(o):console.warn(o.message),!1}switch(n.kind){case"always":return!0;case"never":return!1;case"resourceThreshold":{const i=r.getResourceAmount(n.resourceId),o=wn(n.amount,{variables:{level:Gc}});return F0(i,o,n.comparator,r)}case"generatorLevel":{const i=r.getGeneratorLevel(n.generatorId),o=wn(n.level,{variables:{level:Gc}});return F0(i,o,n.comparator,r)}case"upgradeOwned":return r.getUpgradePurchases(n.upgradeId)>=n.requiredPurchases;case"prestigeUnlocked":return r.hasPrestigeLayerUnlocked?r.hasPrestigeLayerUnlocked(n.prestigeLayerId):(Jd(r,"hasPrestigeLayerUnlocked",n.kind,n.prestigeLayerId),!1);case"flag":return r.isFlagSet?r.isFlagSet(n.flagId):(Jd(r,"isFlagSet",n.kind,n.flagId),!1);case"script":return r.evaluateScriptCondition?r.evaluateScriptCondition(n.scriptId):(Jd(r,"evaluateScriptCondition",n.kind,n.scriptId),!1);case"allOf":return n.conditions.every(i=>Br(i,r,a+1));case"anyOf":return n.conditions.some(i=>Br(i,r,a+1));case"not":return!Br(n.condition,r,a+1);default:{const i=n,o=new Error(`Unknown condition kind: ${i.kind}`);return ms()?r.onError?.(o):console.warn(o.message),!1}}}function F0(n,r,a,i){switch(a){case"gt":return n>r;case"gte":return n>=r;case"lt":return n<r;case"lte":return n<=r;default:{const o=a,u=new Error(`Unknown comparator: ${o}`);return ms()?i?.onError?.(u):console.warn(u.message),!1}}}function EM(n){if(n.length!==0)return n.length===1?n[0]:{kind:"allOf",conditions:[...n]}}function Ai(n){if(n)switch(n.kind){case"always":return;case"never":return"Unavailable in this build";case"resourceThreshold":{const r=wn(n.amount,{variables:{level:Gc}});return`Requires ${n.resourceId} ${Q0(n.comparator)} ${K0(r)}`}case"generatorLevel":{const r=wn(n.level,{variables:{level:Gc}});return`Requires ${n.generatorId} ${Q0(n.comparator)} ${K0(r)}`}case"upgradeOwned":return`Requires owning ${n.requiredPurchases} ${n.upgradeId}`;case"allOf":{const r=n.conditions.map(Ai).filter(a=>!!a);return r.length>0?r.join(", "):void 0}case"anyOf":{const r=n.conditions.map(Ai).filter(a=>!!a);return r.length>0?`Requires any of: ${r.join(" or ")}`:void 0}case"not":{const r=Ai(n.condition);return r?`Not (${r})`:void 0}default:return}}function Q0(n){switch(n){case"gt":return">";case"gte":return">=";case"lt":return"<";case"lte":return"<=";default:return n}}function K0(n){return Number.isFinite(n)?Math.abs(n)>=1||n===0?n.toFixed(2).replace(/\.00$/,""):n.toPrecision(2):"Infinity"}function SM(n){return new _M(n)}class _M{constructor(r){Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resourceState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generatorEvaluator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"upgradeEvaluator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prestigeEvaluator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resourceDefinitions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generators",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generatorList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"upgrades",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"upgradeList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prestigeLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prestigeLayerList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.onError=r.onError;const a=r.initialState?r.initialState:void 0,i=r.content.resources.map(b=>({id:b.id,startAmount:b.startAmount??0,capacity:b.capacity===null||b.capacity===void 0?void 0:b.capacity,unlocked:b.unlocked??!1,visible:b.visible??!0,dirtyTolerance:b.dirtyTolerance??void 0}));this.resourceDefinitions=i;const o=a?.resources?.state??void 0;this.resourceState=o??Sw(i),this.hydrateResources(a?.resources?.serialized);const u=AM(r.content.resources),f=a?.resources??{};f.state=this.resourceState,f.metadata=u,this.generators=new Map;const m=new Map((a?.generators??[]).map(b=>[b.id,b]));this.generatorList=r.content.generators.map(b=>{const T=OM(b,m.get(b.id));return this.generators.set(b.id,T),T}),this.upgrades=new Map;const h=new Map((a?.upgrades??[]).map(b=>[b.id,b]));this.upgradeList=r.content.upgrades.map(b=>{const T=kM(b,h.get(b.id));return this.upgrades.set(b.id,T),T});const p=r.content.prestigeLayers??[];this.prestigeLayers=new Map;const g=new Map((a?.prestigeLayers??[]).map(b=>[b.id,b]));this.prestigeLayerList=p.map(b=>{const T=CM(b,g.get(b.id));return this.prestigeLayers.set(b.id,T),T});for(const b of p){const T=`${b.id}-prestige-count`;if(this.resourceState.getIndex(T)===void 0)throw new Error(`Prestige layer "${b.id}" requires a resource named "${T}" to track prestige count. Add this resource to your content pack's resources array.`)}this.conditionContext={getResourceAmount:b=>{const T=this.resourceState.getIndex(b);return T===void 0?0:this.resourceState.getAmount(T)},getGeneratorLevel:b=>this.generators.get(b)?.state.owned??0,getUpgradePurchases:b=>this.upgrades.get(b)?.purchases??0,hasPrestigeLayerUnlocked:b=>this.prestigeLayers.get(b)?.state.isUnlocked??!1},this.generatorEvaluator=new TM(this),this.upgradeEvaluator=this.upgradeList.length>0?new wM(this):void 0,this.prestigeEvaluator=this.prestigeLayerList.length>0?new au(this):void 0;const v=a??{};v.stepDurationMs=r.stepDurationMs,v.resources=f,v.generatorPurchases=this.generatorEvaluator,v.generators=this.generatorList.map(b=>b.state),v.upgradePurchases=this.upgradeList.length>0?this.upgradeEvaluator:void 0,v.upgrades=this.upgradeList.map(b=>b.state),v.prestigeSystem=this.prestigeLayerList.length>0?this.prestigeEvaluator:void 0,v.prestigeLayers=this.prestigeLayerList.map(b=>b.state),this.state=v,this.updateForStep(0)}hydrateResources(r){r&&RM(this.resourceState,r,this.resourceDefinitions)}updateForStep(r){const a=this.state;a.stepDurationMs=Math.max(0,a.stepDurationMs);for(const i of this.generatorList){const o=Br(i.definition.baseUnlock,this.conditionContext),u=i.state.isUnlocked;!i.state.isUnlocked&&o&&(i.state.isUnlocked=!0),i.state.isVisible=this.evaluateVisibility(i.definition.visibilityCondition),Number.isFinite(i.state.nextPurchaseReadyAtStep)?!u&&i.state.isUnlocked&&(i.state.nextPurchaseReadyAtStep=r+1):i.state.nextPurchaseReadyAtStep=r+1,i.state.owned=W0(i.state.owned,i.definition.maxLevel)}for(const i of this.upgradeList){const o=this.resolveUpgradeStatus(i);i.state.status=o,i.state.isVisible=this.evaluateVisibility(i.definition.visibilityCondition),i.state.unlockHint=o==="locked"?Ai(i.definition.unlockCondition??EM(i.definition.prerequisites)):void 0,i.state.costs=this.computeUpgradeCosts(i),i.state.purchases=i.purchases}for(const i of this.prestigeLayerList){const o=Br(i.definition.unlockCondition,this.conditionContext);i.state.isUnlocked=o,i.state.isVisible=o,i.state.unlockHint=o?void 0:Ai(i.definition.unlockCondition)}}getResourceAmount(r){return this.conditionContext.getResourceAmount(r)}getGeneratorRecord(r){return this.generators.get(r)}getUpgradeRecord(r){return this.upgrades.get(r)}getPrestigeLayerRecord(r){return this.prestigeLayers.get(r)}incrementGeneratorOwned(r,a){const i=this.generators.get(r);if(!i)return;const o=W0(i.state.owned+a,i.definition.maxLevel);i.state.owned=o}incrementUpgradePurchases(r){const a=this.upgrades.get(r);if(!a)return;const i=a.definition.repeatable,o=i?.maxPurchases??(i?Number.POSITIVE_INFINITY:1),u=a.purchases+1;if(Number.isFinite(o)){const f=Math.max(0,Math.floor(o));a.purchases=Math.min(u,f)}else a.purchases=u;a.state.purchases=a.purchases}getResourceDefinition(r){return this.resourceDefinitions.find(a=>a.id===r)}computeGeneratorCost(r,a){const i=this.generators.get(r);if(!i){const m=new Error(`Generator cost calculation failed: generator "${r}" not found`);this.onError?.(m);return}const o=i.definition.purchase.baseCost;if(!Number.isFinite(o)||o<0){const m=new Error(`Generator cost calculation failed for "${r}": baseCost is invalid (${o})`);this.onError?.(m);return}const u=Wd(i.definition.purchase.costCurve,a);if(u===void 0||u<0){const m=new Error(`Generator cost calculation failed for "${r}" at purchase index ${a}: cost curve evaluation returned ${u}`);this.onError?.(m);return}const f=u*o;if(!Number.isFinite(f)||f<0){const m=new Error(`Generator cost calculation failed for "${r}" at purchase index ${a}: final cost is invalid (${f})`);this.onError?.(m);return}return f}computeUpgradeCosts(r){const a=[],i=r.purchases,o=r.definition.id,u=r.definition.cost.baseCost;if(!Number.isFinite(u)||u<0){const p=new Error(`Upgrade cost calculation failed for "${o}": baseCost is invalid (${u})`);this.onError?.(p);return}const f=Wd(r.definition.cost.costCurve,i);if(f===void 0||f<0){const p=new Error(`Upgrade cost calculation failed for "${o}" at purchase level ${i}: cost curve evaluation returned ${f}`);this.onError?.(p);return}let m=f*u;const h=r.definition.repeatable?.costCurve;if(h){const p=Wd(h,i);if(p===void 0||p<0){const g=new Error(`Upgrade cost calculation failed for "${o}" at purchase level ${i}: repeatable cost curve evaluation returned ${p}`);this.onError?.(g);return}m*=p}if(!Number.isFinite(m)||m<0){const p=new Error(`Upgrade cost calculation failed for "${o}" at purchase level ${i}: final amount is invalid (${m})`);this.onError?.(p);return}return a.push({resourceId:r.definition.cost.currencyId,amount:m}),a}evaluateVisibility(r){return r?Br(r,this.conditionContext):!0}resolveUpgradeStatus(r){const a=r.definition.repeatable?r.definition.repeatable.maxPurchases??Number.POSITIVE_INFINITY:1;if(r.purchases>=a)return"purchased";if(!r.definition.prerequisites.every(u=>Br(u,this.conditionContext)))return"locked";const o=r.definition.unlockCondition;return o?Br(o,this.conditionContext)?"available":"locked":"available"}}class TM{constructor(r){Object.defineProperty(this,"coordinator",{enumerable:!0,configurable:!0,writable:!0,value:r})}getPurchaseQuote(r,a){if(!Number.isInteger(a)||a<=0)return;const i=this.coordinator.getGeneratorRecord(r);if(!i||!i.state.isUnlocked||!i.state.isVisible||i.definition.purchase.maxBulk!==void 0&&a>i.definition.purchase.maxBulk||i.definition.maxLevel!==void 0&&i.state.owned>=i.definition.maxLevel)return;const o=i.definition.purchase.currencyId;let u=0;for(let m=0;m<a;m+=1){const h=i.state.owned+m;if(i.definition.maxLevel!==void 0&&h>=i.definition.maxLevel)return;const p=this.coordinator.computeGeneratorCost(r,h);if(p===void 0||!Number.isFinite(p)||p<0)return;u+=p}return{generatorId:r,costs:[{resourceId:o,amount:u}]}}applyPurchase(r,a){!Number.isInteger(a)||a<=0||this.coordinator.incrementGeneratorOwned(r,a)}}class wM{constructor(r){Object.defineProperty(this,"coordinator",{enumerable:!0,configurable:!0,writable:!0,value:r})}getPurchaseQuote(r){const a=this.coordinator.getUpgradeRecord(r);if(!a)return;const i=this.coordinator.resolveUpgradeStatus(a),o=this.coordinator.computeUpgradeCosts(a);if(i==="locked")return{upgradeId:r,status:i,costs:o??[]};const u=a.definition.repeatable?a.definition.repeatable.maxPurchases??Number.POSITIVE_INFINITY:1;if(a.purchases>=u)return{upgradeId:r,status:"purchased",costs:[]};if(o)return{upgradeId:r,status:i,costs:o}}applyPurchase(r){this.coordinator.incrementUpgradePurchases(r)}}function OM(n,r){const a=J0(n.produces),i=J0(n.consumes),o=r||{id:n.id,displayName:cr(n.name,n.id),owned:0,isUnlocked:!1,isVisible:!0,produces:a,consumes:i,nextPurchaseReadyAtStep:1};return o.id=n.id,o.displayName=cr(n.name,n.id),o.owned=Number.isFinite(o.owned)?o.owned:0,o.isUnlocked=!!o.isUnlocked,o.isVisible=o.isVisible??!0,o.produces=a,o.consumes=i,o.nextPurchaseReadyAtStep=Number.isFinite(o.nextPurchaseReadyAtStep)?o.nextPurchaseReadyAtStep:1,{definition:n,state:o}}function kM(n,r){const a=r||{id:n.id,displayName:cr(n.name,n.id),status:"locked",costs:void 0,unlockHint:void 0,isVisible:!0};a.id=n.id,a.displayName=cr(n.name,n.id),a.isVisible=!!a.isVisible,a.costs=Array.isArray(a.costs)?a.costs:void 0,a.status=a.status??"locked";const i=n.repeatable,o=i?.maxPurchases??(i?Number.POSITIVE_INFINITY:1),u=Number.isFinite(o)&&o>0?Math.max(0,Math.floor(o)):o,f=a.purchases,m=f!==void 0&&Number.isFinite(f)?Math.max(0,Math.floor(f)):void 0;let h;return m!==void 0?h=m:a.status==="purchased"?h=Number.isFinite(u)&&u>0?u:1:h=0,Number.isFinite(u)&&(h=Math.min(h,u)),h=Math.max(0,Math.floor(h)),a.purchases=h,{definition:n,state:a,purchases:h}}function AM(n){const r=new Map;for(const a of n)r.set(a.id,{displayName:cr(a.name,a.id)});return r}function J0(n){const r=[];for(const a of n){const i=wn(a.rate,{variables:{level:1}});Number.isFinite(i)&&r.push({resourceId:a.resourceId,rate:i})}return r}function RM(n,r,a){const i=Gw(r,a),{remap:o}=i,u=r.unlocked??[],f=r.visible??[];for(let m=0;m<o.length;m+=1){const h=o[m];if(h===void 0)continue;const p=r.capacities[m],g=p??Number.POSITIVE_INFINITY;n.setCapacity(h,g);const v=r.amounts[m]??0,b=n.getAmount(h);if(v>b)n.addAmount(h,v-b);else if(v<b){const T=b-v;T>0&&n.spendAmount(h,T)}u[m]&&n.unlock(h),f[m]&&n.grantVisibility(h)}n.snapshot({mode:"publish"})}function Wd(n,r){const a=wn(n,{variables:{level:r}});return Number.isFinite(a)?a:void 0}function W0(n,r){const a=Number.isFinite(n)?n:0;if(r===void 0)return Math.max(0,a);const i=Math.max(0,r);return Math.max(0,Math.min(a,i))}function cr(n,r){return typeof n=="string"?n:n?.default??r}function CM(n,r){const a=r||{id:n.id,displayName:cr(n.name,n.id),summary:cr(n.summary,""),isUnlocked:!1,isVisible:!1,unlockHint:void 0};return a.id=n.id,a.displayName=cr(n.name,n.id),a.summary=cr(n.summary,""),a.isUnlocked=!!a.isUnlocked,a.isVisible=!!a.isVisible,{definition:n,state:a}}class au{constructor(r){Object.defineProperty(this,"coordinator",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"usedTokens",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}getPrestigeQuote(r){const a=this.coordinator.getPrestigeLayerRecord(r);if(!a)return;const i=a.state.isUnlocked;let o;if(!i)o="locked";else{const f=`${r}-prestige-count`;o=this.coordinator.getResourceAmount(f)>=1?"completed":"available"}const u=this.computeRewardPreview(a);return{layerId:r,status:o,reward:u,resetTargets:a.definition.resetTargets,retainedTargets:this.computeRetainedTargets(a)}}applyPrestige(r,a){if(!a)throw new Error("Prestige operation requires a confirmation token");const i=Date.now();for(const[w,S]of this.usedTokens)i-S>au.TOKEN_EXPIRATION_MS&&this.usedTokens.delete(w);if(this.usedTokens.has(a))throw J.recordWarning("PrestigeResetDuplicateToken",{layerId:r}),new Error("Confirmation token has already been used");this.usedTokens.set(a,i);const o=this.coordinator.getPrestigeLayerRecord(r);if(!o)throw new Error(`Prestige layer "${r}" not found`);if(!o.state.isUnlocked)throw new Error(`Prestige layer "${r}" is locked`);J.recordProgress("PrestigeResetTokenReceived",{layerId:r,tokenLength:a.length});const u=this.coordinator.resourceState,f=o.definition.retention??[],m=this.buildFormulaContext(),h=this.computeRewardPreview(o,m),p=new Set;for(const w of f)w.kind==="resource"&&p.add(w.resourceId);const g=`${r}-prestige-count`;p.add(g);const v=[];for(const w of o.definition.resetTargets){if(p.has(w))continue;const S=this.coordinator.getResourceDefinition(w);S&&v.push({resourceId:w,resetToAmount:S.startAmount??0})}const b=[];for(const w of f)if(w.kind==="resource"&&w.amount){const S=wn(w.amount,m);b.push({resourceId:w.resourceId,retainedAmount:S})}yM({layerId:r,resourceState:u,reward:{resourceId:h.resourceId,amount:h.amount},resetTargets:v,retentionTargets:b});const T=u.getIndex(g);T!==void 0&&u.addAmount(T,1)}computeRewardPreview(r,a){const i=r.definition.reward,o=i.resourceId,u=a??this.buildFormulaContext(),f=wn(i.baseReward,u);let m=Number.isFinite(f)?f:0;if(i.multiplierCurve){const h=wn(i.multiplierCurve,u);Number.isFinite(h)&&(m*=h)}return{resourceId:o,amount:Math.max(0,Math.floor(m))}}computeRetainedTargets(r){const a=r.definition.retention??[],i=[];for(const o of a)o.kind==="resource"?i.push(o.resourceId):o.kind==="upgrade"&&i.push(o.upgradeId);return Object.freeze(i)}buildFormulaContext(){const r=this.coordinator.resourceState,a=r.snapshot({mode:"publish"}),i={level:1};for(let u=0;u<a.ids.length;u++){const f=a.ids[u];i[f]=a.amounts[u]??0}return{variables:i,entities:{resource:u=>{const f=r.getIndex(u);return f!==void 0?a.amounts[f]??0:void 0}}}}}Object.defineProperty(au,"TOKEN_EXPIRATION_MS",{enumerable:!0,configurable:!0,writable:!0,value:6e4});const NM=100,MM=50;class IM{constructor(r={}){Object.defineProperty(this,"systems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"accumulator",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"stepSizeMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxStepsPerFrame",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"commandQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"commandDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"eventBus",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"eventPublisher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentStep",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"nextExecutableStep",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"diagnostics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.stepSizeMs=r.stepSizeMs??NM,this.maxStepsPerFrame=r.maxStepsPerFrame??MM,this.commandQueue=r.commandQueue??new R1,this.commandDispatcher=r.commandDispatcher??new w1;const a=r.eventBusOptions??E1;this.eventBus=r.eventBus??new m1(a),this.eventPublisher=xM(this.eventBus),this.commandDispatcher.setEventPublisher(this.eventPublisher),this.diagnostics=uw(r.diagnostics,{stepSizeMs:this.stepSizeMs});const i=r.initialStep??0;Number.isFinite(i)&&i>=0&&(this.currentStep=i,this.nextExecutableStep=i)}addSystem(r){const a=[];if(typeof r.setup=="function"){const i={events:{on:(o,u,f)=>{const m=this.eventBus.on(o,u,{...f,label:f?.label??`system:${r.id}`});return a.push(m),m}}};try{r.setup(i)}catch(o){for(const u of a)u.unsubscribe();throw new Error(`System "${r.id}" failed to register event subscriptions: ${o instanceof Error?o.message:String(o)}`)}}this.systems.push({system:r,subscriptions:a})}getCommandQueue(){return this.commandQueue}getCommandDispatcher(){return this.commandDispatcher}getCurrentStep(){return this.currentStep}getNextExecutableStep(){return this.nextExecutableStep}getStepSizeMs(){return this.stepSizeMs}getMaxStepsPerFrame(){return this.maxStepsPerFrame}getEventBus(){return this.eventBus}getDiagnosticTimeline(){return this.diagnostics.timeline}getDiagnosticTimelineSnapshot(){return this.diagnostics.snapshot()}readDiagnosticsDelta(r){return this.diagnostics.readDelta(r)}enableDiagnostics(r){if(r===!1){this.diagnostics.disable();return}this.diagnostics.enable(r)}tick(r){if(r<=0)return;this.accumulator+=r;const a=Math.floor(this.accumulator/this.stepSizeMs),i=Math.min(a,this.maxStepsPerFrame);if(i!==0){this.accumulator-=i*this.stepSizeMs;for(let o=0;o<i;o+=1){const u=this.diagnostics.beginTick(this.currentStep),f=this.commandQueue.size;let m=f,h=0,p=0,g=0;try{this.eventBus.beginTick(this.currentStep,{resetOutbound:o===0}),this.nextExecutableStep=this.currentStep;const v=this.commandQueue.dequeueUpToStep(this.currentStep);h=v.length,this.nextExecutableStep=this.currentStep+1;for(const S of v){if(S.step!==this.currentStep){g+=1,J.recordError("CommandStepMismatch",{expectedStep:this.currentStep,commandStep:S.step,type:S.type});continue}this.commandDispatcher.execute(S),p+=1}const b={tick:this.currentStep};this.eventBus.dispatch(b);const T={deltaMs:this.stepSizeMs,step:this.currentStep,events:this.eventPublisher};for(const{system:S}of this.systems){const A=u.startSystem(S.id);try{S.tick(T),A.end()}catch(_){try{A.fail(_)}catch(C){J.recordError("SystemExecutionFailed",{systemId:S.id,error:C instanceof Error?C:new Error(String(C))})}}this.eventBus.dispatch(b)}m=this.commandQueue.size;const w=this.eventBus.getBackPressureSnapshot();u.recordEventMetrics(LM(w)),u.recordQueueMetrics({sizeBefore:f,sizeAfter:m,captured:h,executed:p,skipped:g}),u.setAccumulatorBacklogMs(this.accumulator),zM(w),this.currentStep+=1,this.nextExecutableStep=this.currentStep,J.recordTick(),u.complete()}catch(v){u.fail(v)}}}}}function xM(n){return{publish:n.publish.bind(n)}}function zM(n){J.recordCounters("events",{published:n.counters.published,softLimited:n.counters.softLimited,overflowed:n.counters.overflowed,subscribers:n.counters.subscribers});const r={};for(const a of n.channels)r[`channel:${a.channel}`]=a.cooldownTicksRemaining;J.recordCounters("events.cooldown_ticks",r)}function LM(n){return{counters:{published:n.counters.published,softLimited:n.counters.softLimited,overflowed:n.counters.overflowed,subscribers:n.counters.subscribers},channels:n.channels.map(r=>({channel:r.channel,subscribers:r.subscribers,remainingCapacity:r.remainingCapacity,cooldownTicksRemaining:r.cooldownTicksRemaining,softLimitBreaches:r.softLimitBreaches,eventsPerSecond:r.eventsPerSecond,softLimitActive:r.softLimitActive}))}}const DM=gn({id:"cosmic-bakery.flour",name:{default:"Flour",variants:{}},category:"primary",tier:1,startAmount:10,capacity:100,visible:!0,unlocked:!0}),UM=gn({id:"cosmic-bakery.sugar",name:{default:"Sugar",variants:{}},category:"primary",tier:1,capacity:100,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",amount:{kind:"constant",value:15}}}),jM=gn({id:"cosmic-bakery.dough",name:{default:"Dough",variants:{}},category:"primary",tier:1,capacity:500,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",amount:{kind:"constant",value:25}}}),$M=gn({id:"cosmic-bakery.stardust",name:{default:"Stardust",variants:{}},category:"primary",tier:2,capacity:250,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.dough",comparator:"gte",amount:{kind:"constant",value:50}}}),BM=gn({id:"cosmic-bakery.moon-cream",name:{default:"Moon Cream",variants:{}},category:"primary",tier:2,capacity:250,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",amount:{kind:"constant",value:25}}}),qM=gn({id:"cosmic-bakery.enchanted-pastries",name:{default:"Enchanted Pastries",variants:{}},category:"primary",tier:2,capacity:1e3,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",amount:{kind:"constant",value:50}}}),PM=gn({id:"cosmic-bakery.void-essence",name:{default:"Void Essence",variants:{}},category:"primary",tier:3,capacity:500,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",amount:{kind:"constant",value:100}}}),GM=gn({id:"cosmic-bakery.reality-dough",name:{default:"Reality Dough",variants:{}},category:"primary",tier:3,capacity:null,visible:!0,unlockCondition:{kind:"resourceThreshold",resourceId:"cosmic-bakery.void-essence",comparator:"gte",amount:{kind:"constant",value:50}}}),VM=gn({id:"cosmic-bakery.celestial-gems",name:{default:"Celestial Gems",variants:{}},category:"currency",economyClassification:"hard",tier:1,visible:!0,unlocked:!0}),HM=gn({id:"cosmic-bakery.ascension-stars",name:{default:"Ascension Stars",variants:{}},category:"prestige",tier:3,visible:!0,unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),YM=gn({id:"cosmic-bakery.cosmic-flour",name:{default:"Cosmic Flour",variants:{}},category:"prestige",tier:3,visible:!0,unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),ZM=gn({id:"cosmic-bakery.prestige-count",name:{default:"Prestige Count",variants:{}},category:"misc",tier:1,visible:!1}),XM=fr({id:"cosmic-bakery.hand-mixer",name:{default:"Hand Mixer",variants:{}},produces:[{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:1}}],consumes:[],purchase:{currencyId:"cosmic-bakery.flour",baseCost:10,costCurve:{kind:"exponential",base:10,growth:1.15,offset:0}},maxLevel:50,baseUnlock:{kind:"always"}}),FM=fr({id:"cosmic-bakery.sugar-mill",name:{default:"Sugar Mill",variants:{}},produces:[{resourceId:"cosmic-bakery.sugar",rate:{kind:"constant",value:.5}}],consumes:[],purchase:{currencyId:"cosmic-bakery.flour",baseCost:25,costCurve:{kind:"exponential",base:25,growth:1.2,offset:0}},maxLevel:40,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",amount:{kind:"constant",value:15}}}),QM=fr({id:"cosmic-bakery.kneading-station",name:{default:"Kneading Station",variants:{}},produces:[{resourceId:"cosmic-bakery.dough",rate:{kind:"constant",value:.25}}],consumes:[{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:.1}},{resourceId:"cosmic-bakery.sugar",rate:{kind:"constant",value:.05}}],purchase:{currencyId:"cosmic-bakery.flour",baseCost:50,costCurve:{kind:"exponential",base:50,growth:1.25,offset:0}},maxLevel:35,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",amount:{kind:"constant",value:25}}}),KM=fr({id:"cosmic-bakery.star-collector",name:{default:"Star Collector",variants:{}},produces:[{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:.1}}],consumes:[{resourceId:"cosmic-bakery.dough",rate:{kind:"constant",value:.2}}],purchase:{currencyId:"cosmic-bakery.dough",baseCost:100,costCurve:{kind:"exponential",base:100,growth:1.3,offset:0}},maxLevel:30,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.dough",comparator:"gte",amount:{kind:"constant",value:50}}}),JM=fr({id:"cosmic-bakery.moonbeam-churn",name:{default:"Moonbeam Churn",variants:{}},produces:[{resourceId:"cosmic-bakery.moon-cream",rate:{kind:"constant",value:.08}}],consumes:[{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:.15}}],purchase:{currencyId:"cosmic-bakery.stardust",baseCost:50,costCurve:{kind:"exponential",base:50,growth:1.35,offset:0}},maxLevel:25,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",amount:{kind:"constant",value:25}}}),WM=fr({id:"cosmic-bakery.enchanted-oven",name:{default:"Enchanted Oven",variants:{}},produces:[{resourceId:"cosmic-bakery.enchanted-pastries",rate:{kind:"constant",value:.05}}],consumes:[{resourceId:"cosmic-bakery.dough",rate:{kind:"constant",value:.1}},{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:.05}},{resourceId:"cosmic-bakery.moon-cream",rate:{kind:"constant",value:.03}}],purchase:{currencyId:"cosmic-bakery.stardust",baseCost:100,costCurve:{kind:"exponential",base:100,growth:1.4,offset:0}},maxLevel:25,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",amount:{kind:"constant",value:50}}}),eI=fr({id:"cosmic-bakery.void-portal",name:{default:"Void Portal",variants:{}},produces:[{resourceId:"cosmic-bakery.void-essence",rate:{kind:"constant",value:.03}}],consumes:[{resourceId:"cosmic-bakery.enchanted-pastries",rate:{kind:"constant",value:.08}}],purchase:{currencyId:"cosmic-bakery.enchanted-pastries",baseCost:200,costCurve:{kind:"exponential",base:200,growth:1.45,offset:0}},maxLevel:20,baseUnlock:{kind:"resourceThreshold",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",amount:{kind:"constant",value:100}}}),tI=fr({id:"cosmic-bakery.reality-forge",name:{default:"Reality Forge",variants:{}},produces:[{resourceId:"cosmic-bakery.reality-dough",rate:{kind:"constant",value:.02}}],consumes:[{resourceId:"cosmic-bakery.void-essence",rate:{kind:"constant",value:.05}},{resourceId:"cosmic-bakery.cosmic-flour",rate:{kind:"constant",value:.01}}],purchase:{currencyId:"cosmic-bakery.void-essence",baseCost:100,costCurve:{kind:"exponential",base:100,growth:1.5,offset:0}},maxLevel:15,baseUnlock:{kind:"allOf",conditions:[{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"},{kind:"resourceThreshold",resourceId:"cosmic-bakery.void-essence",comparator:"gte",amount:{kind:"constant",value:50}}]}}),nI=fr({id:"cosmic-bakery.celestial-bakery",name:{default:"Celestial Bakery",variants:{}},produces:[{resourceId:"cosmic-bakery.ascension-stars",rate:{kind:"constant",value:.01}}],consumes:[{resourceId:"cosmic-bakery.reality-dough",rate:{kind:"constant",value:.03}}],purchase:{currencyId:"cosmic-bakery.reality-dough",baseCost:50,costCurve:{kind:"exponential",base:50,growth:1.6,offset:0}},maxLevel:10,baseUnlock:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),rI=Gt({id:"cosmic-bakery.better-whisks",name:{default:"Better Whisks",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.hand-mixer"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:50,costCurve:{kind:"constant",value:50}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:1.25}}],unlockCondition:{kind:"always"}}),aI=Gt({id:"cosmic-bakery.refined-sugar",name:{default:"Refined Sugar",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.sugar-mill"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:75,costCurve:{kind:"constant",value:75}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.sugar-mill",operation:"multiply",value:{kind:"constant",value:1.25}}],unlockCondition:{kind:"upgradeOwned",upgradeId:"cosmic-bakery.better-whisks",requiredPurchases:1}}),sI=Gt({id:"cosmic-bakery.elastic-gluten",name:{default:"Elastic Gluten",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.kneading-station"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:100,costCurve:{kind:"constant",value:100}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.kneading-station",operation:"multiply",value:{kind:"constant",value:1.5}}],unlockCondition:{kind:"always"}}),iI=Gt({id:"cosmic-bakery.bulk-mixing",name:{default:"Bulk Mixing",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.hand-mixer"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:150,costCurve:{kind:"constant",value:150}},repeatable:{maxPurchases:5,costCurve:{kind:"linear",base:150,slope:50}},effects:[{kind:"modifyGeneratorCost",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:.9}}],unlockCondition:{kind:"always"}}),oI=Gt({id:"cosmic-bakery.double-batch",name:{default:"Double Batch",variants:{}},category:"global",targets:[{kind:"global"}],cost:{currencyId:"cosmic-bakery.flour",baseCost:200,costCurve:{kind:"constant",value:200}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:1.15}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.sugar-mill",operation:"multiply",value:{kind:"constant",value:1.15}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.kneading-station",operation:"multiply",value:{kind:"constant",value:1.15}}],unlockCondition:{kind:"always"}}),cI=Gt({id:"cosmic-bakery.stellar-alignment",name:{default:"Stellar Alignment",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.star-collector"}],cost:{currencyId:"cosmic-bakery.dough",baseCost:200,costCurve:{kind:"constant",value:200}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.star-collector",operation:"multiply",value:{kind:"constant",value:1.4}}],unlockCondition:{kind:"always"}}),uI=Gt({id:"cosmic-bakery.lunar-cycle-sync",name:{default:"Lunar Cycle Sync",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.moonbeam-churn"}],cost:{currencyId:"cosmic-bakery.stardust",baseCost:50,costCurve:{kind:"constant",value:50}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.moonbeam-churn",operation:"multiply",value:{kind:"constant",value:1.35}}],unlockCondition:{kind:"always"}}),lI=Gt({id:"cosmic-bakery.enchantment-mastery",name:{default:"Enchantment Mastery",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.enchanted-oven"}],cost:{currencyId:"cosmic-bakery.stardust",baseCost:100,costCurve:{kind:"constant",value:100}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.enchanted-oven",operation:"multiply",value:{kind:"constant",value:1.5}}],unlockCondition:{kind:"always"}}),fI=Gt({id:"cosmic-bakery.cosmic-resonance",name:{default:"Cosmic Resonance",variants:{}},category:"global",targets:[{kind:"global"}],cost:{currencyId:"cosmic-bakery.moon-cream",baseCost:150,costCurve:{kind:"constant",value:150}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.star-collector",operation:"multiply",value:{kind:"constant",value:1.2}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.moonbeam-churn",operation:"multiply",value:{kind:"constant",value:1.2}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.enchanted-oven",operation:"multiply",value:{kind:"constant",value:1.2}}],unlockCondition:{kind:"always"}}),dI=Gt({id:"cosmic-bakery.void-stabilizers",name:{default:"Void Stabilizers",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.void-portal"}],cost:{currencyId:"cosmic-bakery.void-essence",baseCost:50,costCurve:{kind:"constant",value:50}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.void-portal",operation:"multiply",value:{kind:"constant",value:1.3}}],unlockCondition:{kind:"always"}}),mI=Gt({id:"cosmic-bakery.reality-threads",name:{default:"Reality Threads",variants:{}},category:"generator",targets:[{kind:"generator",id:"cosmic-bakery.reality-forge"}],cost:{currencyId:"cosmic-bakery.reality-dough",baseCost:25,costCurve:{kind:"constant",value:25}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.reality-forge",operation:"multiply",value:{kind:"constant",value:1.25}}],unlockCondition:{kind:"always"}}),hI=Gt({id:"cosmic-bakery.remembered-recipes",name:{default:"Remembered Recipes",variants:{}},category:"resource",targets:[{kind:"resource",id:"cosmic-bakery.flour"}],cost:{currencyId:"cosmic-bakery.ascension-stars",baseCost:1,costCurve:{kind:"constant",value:1}},effects:[{kind:"modifyResourceRate",resourceId:"cosmic-bakery.flour",operation:"add",value:{kind:"constant",value:50}}],unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),pI=Gt({id:"cosmic-bakery.timeless-techniques",name:{default:"Timeless Techniques",variants:{}},category:"global",targets:[{kind:"global"}],cost:{currencyId:"cosmic-bakery.ascension-stars",baseCost:3,costCurve:{kind:"constant",value:3}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:1.1}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.sugar-mill",operation:"multiply",value:{kind:"constant",value:1.1}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.kneading-station",operation:"multiply",value:{kind:"constant",value:1.1}}],unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),gI=Gt({id:"cosmic-bakery.celestial-blessing",name:{default:"Celestial Blessing",variants:{}},category:"global",targets:[{kind:"global"}],cost:{currencyId:"cosmic-bakery.ascension-stars",baseCost:5,costCurve:{kind:"constant",value:5}},repeatable:{maxPurchases:10,costCurve:{kind:"linear",base:5,slope:5}},effects:[{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.hand-mixer",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.sugar-mill",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.kneading-station",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.star-collector",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.moonbeam-churn",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.enchanted-oven",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.void-portal",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.reality-forge",operation:"multiply",value:{kind:"constant",value:1.05}},{kind:"modifyGeneratorRate",generatorId:"cosmic-bakery.celestial-bakery",operation:"multiply",value:{kind:"constant",value:1.05}}],unlockCondition:{kind:"prestigeUnlocked",prestigeLayerId:"cosmic-bakery.celestial-ascension"}}),yI=yn({id:"cosmic-bakery.first-batch",name:{default:"First Batch",variants:{}},description:{default:"Purchase your first hand mixer",variants:{}},category:"progression",tier:"bronze",track:{kind:"generator-level",generatorId:"cosmic-bakery.hand-mixer",level:{kind:"constant",value:1}}}),vI=yn({id:"cosmic-bakery.sugar-rush",name:{default:"Sugar Rush",variants:{}},description:{default:"Unlock sugar production",variants:{}},category:"progression",tier:"bronze",track:{kind:"resource",resourceId:"cosmic-bakery.sugar",comparator:"gte",threshold:{kind:"constant",value:1}}}),bI=yn({id:"cosmic-bakery.rising-star",name:{default:"Rising Star",variants:{}},description:{default:"Unlock stardust production",variants:{}},category:"progression",tier:"bronze",track:{kind:"resource",resourceId:"cosmic-bakery.stardust",comparator:"gte",threshold:{kind:"constant",value:1}}}),EI=yn({id:"cosmic-bakery.enchanted-chef",name:{default:"Enchanted Chef",variants:{}},description:{default:"Create your first enchanted pastry",variants:{}},category:"progression",tier:"silver",track:{kind:"resource",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",threshold:{kind:"constant",value:1}}}),SI=yn({id:"cosmic-bakery.void-walker",name:{default:"Void Walker",variants:{}},description:{default:"Harness the power of void essence",variants:{}},category:"progression",tier:"silver",track:{kind:"resource",resourceId:"cosmic-bakery.void-essence",comparator:"gte",threshold:{kind:"constant",value:1}}}),_I=yn({id:"cosmic-bakery.reality-baker",name:{default:"Reality Baker",variants:{}},description:{default:"Forge your first reality dough",variants:{}},category:"progression",tier:"gold",track:{kind:"resource",resourceId:"cosmic-bakery.reality-dough",comparator:"gte",threshold:{kind:"constant",value:1}}}),TI=yn({id:"cosmic-bakery.flour-power",name:{default:"Flour Power",variants:{}},description:{default:"Own 10 hand mixers",variants:{}},category:"collection",tier:"bronze",track:{kind:"generator-level",generatorId:"cosmic-bakery.hand-mixer",level:{kind:"constant",value:10}}}),wI=yn({id:"cosmic-bakery.sweet-empire",name:{default:"Sweet Empire",variants:{}},description:{default:"Own 10 sugar mills",variants:{}},category:"collection",tier:"bronze",track:{kind:"generator-level",generatorId:"cosmic-bakery.sugar-mill",level:{kind:"constant",value:10}}}),OI=yn({id:"cosmic-bakery.master-kneader",name:{default:"Master Kneader",variants:{}},description:{default:"Own 10 kneading stations",variants:{}},category:"collection",tier:"silver",track:{kind:"generator-level",generatorId:"cosmic-bakery.kneading-station",level:{kind:"constant",value:10}}}),kI=yn({id:"cosmic-bakery.stargazer",name:{default:"Stargazer",variants:{}},description:{default:"Own 5 star collectors",variants:{}},category:"collection",tier:"silver",track:{kind:"generator-level",generatorId:"cosmic-bakery.star-collector",level:{kind:"constant",value:5}}}),AI=yn({id:"cosmic-bakery.moon-child",name:{default:"Moon Child",variants:{}},description:{default:"Own 5 moonbeam churns",variants:{}},category:"collection",tier:"gold",track:{kind:"generator-level",generatorId:"cosmic-bakery.moonbeam-churn",level:{kind:"constant",value:5}}}),RI=yn({id:"cosmic-bakery.oven-master",name:{default:"Oven Master",variants:{}},description:{default:"Own 10 enchanted ovens",variants:{}},category:"collection",tier:"gold",track:{kind:"generator-level",generatorId:"cosmic-bakery.enchanted-oven",level:{kind:"constant",value:10}}}),CI=Sa({id:"cosmic-bakery.auto-mixer",name:{default:"Auto Mixer",variants:{}},description:{default:"Automatically purchases hand mixers",variants:{}},targetType:"generator",targetId:"cosmic-bakery.hand-mixer",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",threshold:{kind:"constant",value:100}},resourceCost:{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:500}},unlockCondition:{kind:"always"}}),NI=Sa({id:"cosmic-bakery.auto-mill",name:{default:"Auto Mill",variants:{}},description:{default:"Automatically purchases sugar mills",variants:{}},targetType:"generator",targetId:"cosmic-bakery.sugar-mill",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",threshold:{kind:"constant",value:200}},resourceCost:{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:750}},unlockCondition:{kind:"always"}}),MI=Sa({id:"cosmic-bakery.auto-knead",name:{default:"Auto Knead",variants:{}},description:{default:"Automatically purchases kneading stations",variants:{}},targetType:"generator",targetId:"cosmic-bakery.kneading-station",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.flour",comparator:"gte",threshold:{kind:"constant",value:300}},resourceCost:{resourceId:"cosmic-bakery.flour",rate:{kind:"constant",value:1e3}},unlockCondition:{kind:"always"}}),II=Sa({id:"cosmic-bakery.stardust-collector",name:{default:"Stardust Collector",variants:{}},description:{default:"Automatically purchases star collectors",variants:{}},targetType:"generator",targetId:"cosmic-bakery.star-collector",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.dough",comparator:"gte",threshold:{kind:"constant",value:500}},resourceCost:{resourceId:"cosmic-bakery.dough",rate:{kind:"constant",value:2e3}},unlockCondition:{kind:"always"}}),xI=Sa({id:"cosmic-bakery.smart-churn",name:{default:"Smart Churn",variants:{}},description:{default:"Automatically purchases moonbeam churns",variants:{}},targetType:"generator",targetId:"cosmic-bakery.moonbeam-churn",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",threshold:{kind:"constant",value:200}},resourceCost:{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:500}},unlockCondition:{kind:"always"}}),zI=Sa({id:"cosmic-bakery.smart-oven",name:{default:"Smart Oven",variants:{}},description:{default:"Automatically purchases enchanted ovens",variants:{}},targetType:"generator",targetId:"cosmic-bakery.enchanted-oven",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.stardust",comparator:"gte",threshold:{kind:"constant",value:500}},resourceCost:{resourceId:"cosmic-bakery.stardust",rate:{kind:"constant",value:1e3}},unlockCondition:{kind:"always"}}),LI=Sa({id:"cosmic-bakery.void-automator",name:{default:"Void Automator",variants:{}},description:{default:"Automatically purchases void portals",variants:{}},targetType:"generator",targetId:"cosmic-bakery.void-portal",trigger:{kind:"resourceThreshold",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",threshold:{kind:"constant",value:1e3}},resourceCost:{resourceId:"cosmic-bakery.enchanted-pastries",rate:{kind:"constant",value:5e3}},unlockCondition:{kind:"always"}}),DI=gM({id:"cosmic-bakery.celestial-ascension",name:{default:"Celestial Ascension",variants:{}},summary:{default:"Ascend to the celestial realm and gain powerful bonuses",variants:{}},unlockCondition:{kind:"allOf",conditions:[{kind:"resourceThreshold",resourceId:"cosmic-bakery.enchanted-pastries",comparator:"gte",amount:{kind:"constant",value:500}},{kind:"generatorLevel",generatorId:"cosmic-bakery.enchanted-oven",comparator:"gte",level:{kind:"constant",value:10}}]},resetTargets:["cosmic-bakery.flour","cosmic-bakery.sugar","cosmic-bakery.dough","cosmic-bakery.stardust","cosmic-bakery.moon-cream","cosmic-bakery.enchanted-pastries","cosmic-bakery.void-essence"],retention:[{kind:"resource",resourceId:"cosmic-bakery.ascension-stars"},{kind:"resource",resourceId:"cosmic-bakery.cosmic-flour"},{kind:"resource",resourceId:"cosmic-bakery.celestial-gems"}],reward:{resourceId:"cosmic-bakery.ascension-stars",baseReward:{kind:"expression",expression:{kind:"call",name:"clamp",args:[{kind:"binary",op:"max",left:{kind:"binary",op:"div",left:{kind:"ref",target:{type:"resource",id:"cosmic-bakery.enchanted-pastries"}},right:{kind:"literal",value:100}},right:{kind:"literal",value:1}},{kind:"literal",value:1},{kind:"literal",value:1e3}]}}}}),Sm=pM({metadata:{id:"@idle-engine/cosmic-bakery",title:{default:"Cosmic Bakery",variants:{}},summary:{default:"A whimsical idle game about cosmic baking",variants:{}},version:"0.1.0",engine:">=0.4.0 <1.0.0",authors:["Idle Engine Team"],defaultLocale:"en-US",supportedLocales:["en-US"],tags:["game","cosmic","bakery"],links:[]},resources:[DM,UM,jM,$M,BM,qM,PM,GM,VM,HM,YM,ZM],generators:[XM,FM,QM,KM,JM,WM,eI,tI,nI],upgrades:[rI,aI,sI,iI,oI,cI,uI,lI,fI,dI,mI,hI,pI,gI],achievements:[yI,vI,bI,EI,SI,_I,TI,wI,OI,kI,AI,RI],automations:[CI,NI,MI,II,xI,zI,LI],prestigeLayers:[DI],metrics:[],transforms:[],guildPerks:[],runtimeEvents:[]});if(Sm.balanceErrors.length>0)throw new Error(`Content pack validation failed: ${JSON.stringify(Sm.balanceErrors,null,2)}`);const UI=Sm.pack;function jI(){const n=Ur.useRef(null),r=Ur.useRef(null),[a,i]=Ur.useState({resources:new Map,generators:new Map,upgrades:new Map,ready:!1});Ur.useEffect(()=>{const h=SM({content:UI,stepDurationMs:100});r.current=h;const p=new IM({stepSizeMs:100});n.current=p,rO({dispatcher:p.getCommandDispatcher(),resources:h.resourceState,generatorPurchases:h.generatorEvaluator,upgradePurchases:h.upgradeEvaluator});const g=bM({resourceState:h.resourceState,generators:()=>(h.state.generators??[]).map(S=>({id:S.id,owned:S.owned,produces:S.produces??[],consumes:S.consumes??[]}))});p.addSystem(g),h.updateForStep(0);const v=Sv(0,performance.now(),h.state);o(v),i(S=>({...S,ready:!0}));let b=performance.now(),T;const w=S=>{const A=S-b;b=S;const _=p.getCurrentStep();p.tick(A);const C=p.getCurrentStep();if(C>_){h.updateForStep(C);const N=Sv(C,S,h.state);o(N)}T=requestAnimationFrame(w)};return T=requestAnimationFrame(w),()=>{cancelAnimationFrame(T)}},[]);const o=Ur.useCallback(m=>{const h=new Map;for(const v of m.resources)h.set(v.id,{amount:v.amount,capacity:v.capacity??null,rate:v.perTick*10});const p=new Map;for(const v of m.generators??[])p.set(v.id,{level:v.owned,unlocked:v.isUnlocked});const g=new Map;for(const v of m.upgrades??[]){const b=v.status==="purchased"?1:0,T=v.isVisible;g.set(v.id,{purchased:b,unlocked:T})}i(v=>({...v,resources:h,generators:p,upgrades:g}))},[]),u=Ur.useCallback(m=>{n.current&&n.current.getCommandDispatcher().execute({type:"PURCHASE_GENERATOR",payload:{generatorId:m,count:1},step:n.current.getCurrentStep(),priority:1,timestamp:performance.now()})},[]),f=Ur.useCallback(m=>{n.current&&n.current.getCommandDispatcher().execute({type:"PURCHASE_UPGRADE",payload:{upgradeId:m},step:n.current.getCurrentStep(),priority:1,timestamp:performance.now()})},[]);return{state:a,buyGenerator:u,buyUpgrade:f}}const $I={"cosmic-bakery.flour":"Flour","cosmic-bakery.sugar":"Sugar","cosmic-bakery.dough":"Dough","cosmic-bakery.stardust":"Stardust","cosmic-bakery.moon-cream":"Moon Cream","cosmic-bakery.enchanted-pastries":"Enchanted Pastries","cosmic-bakery.void-essence":"Void Essence","cosmic-bakery.reality-dough":"Reality Dough","cosmic-bakery.ascension-stars":"Ascension Stars","cosmic-bakery.celestial-gems":"Celestial Gems","cosmic-bakery.cosmic-flour":"Cosmic Flour"},BI=["cosmic-bakery.flour","cosmic-bakery.sugar","cosmic-bakery.dough","cosmic-bakery.stardust","cosmic-bakery.moon-cream","cosmic-bakery.enchanted-pastries","cosmic-bakery.void-essence","cosmic-bakery.reality-dough","cosmic-bakery.ascension-stars","cosmic-bakery.celestial-gems","cosmic-bakery.cosmic-flour"];function em(n){return n>=1e9?(n/1e9).toFixed(2)+"B":n>=1e6?(n/1e6).toFixed(2)+"M":n>=1e3?(n/1e3).toFixed(2)+"K":n.toFixed(1)}function qI({resources:n}){const r=BI.filter(a=>{const i=n.get(a);return i&&i.amount>0});return r.length===0?null:qe.jsxs("div",{className:"bg-cosmic-900/50 rounded-lg p-4 backdrop-blur-sm border border-cosmic-700",children:[qe.jsx("h2",{className:"text-gold-400 font-display text-xl mb-3",children:"Resources"}),qe.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:r.map(a=>{const i=n.get(a),o=$I[a]||a,u=i.capacity?Math.min(100,i.amount/i.capacity*100):null;return qe.jsxs("div",{className:"bg-cosmic-800/60 rounded p-3",children:[qe.jsx("div",{className:"text-cosmic-200 text-sm font-semibold",children:o}),qe.jsxs("div",{className:"text-gold-300 text-lg font-bold",children:[em(i.amount),i.capacity&&qe.jsxs("span",{className:"text-cosmic-400 text-sm",children:["/",em(i.capacity)]})]}),i.rate!==0&&qe.jsxs("div",{className:`text-xs ${i.rate>0?"text-green-400":"text-red-400"}`,children:[i.rate>0?"+":"",em(i.rate),"/s"]}),u!==null&&qe.jsx("div",{className:"mt-1 h-1 bg-cosmic-700 rounded-full overflow-hidden",children:qe.jsx("div",{className:"h-full bg-gold-500 transition-all",style:{width:`${u}%`}})})]},a)})})]})}const mS={"cosmic-bakery.hand-mixer":{name:"Hand Mixer",produces:"Flour",cost:{resource:"cosmic-bakery.flour",base:10,growth:1.15}},"cosmic-bakery.sugar-mill":{name:"Sugar Mill",produces:"Sugar",cost:{resource:"cosmic-bakery.flour",base:25,growth:1.2}},"cosmic-bakery.kneading-station":{name:"Kneading Station",produces:"Dough",cost:{resource:"cosmic-bakery.flour",base:50,growth:1.25}},"cosmic-bakery.star-collector":{name:"Star Collector",produces:"Stardust",cost:{resource:"cosmic-bakery.dough",base:100,growth:1.3}},"cosmic-bakery.moonbeam-churn":{name:"Moonbeam Churn",produces:"Moon Cream",cost:{resource:"cosmic-bakery.stardust",base:50,growth:1.35}},"cosmic-bakery.enchanted-oven":{name:"Enchanted Oven",produces:"Pastries",cost:{resource:"cosmic-bakery.stardust",base:100,growth:1.4}},"cosmic-bakery.void-portal":{name:"Void Portal",produces:"Void Essence",cost:{resource:"cosmic-bakery.enchanted-pastries",base:200,growth:1.45}},"cosmic-bakery.reality-forge":{name:"Reality Forge",produces:"Reality Dough",cost:{resource:"cosmic-bakery.void-essence",base:100,growth:1.5}},"cosmic-bakery.celestial-bakery":{name:"Celestial Bakery",produces:"Stars",cost:{resource:"cosmic-bakery.reality-dough",base:50,growth:1.6}}},PI=Object.keys(mS);function GI(n){return n>=1e9?(n/1e9).toFixed(2)+"B":n>=1e6?(n/1e6).toFixed(2)+"M":n>=1e3?(n/1e3).toFixed(2)+"K":n.toFixed(0)}function VI(n,r,a){return Math.floor(n*Math.pow(r,a))}function HI({generators:n,resources:r,onBuy:a}){const i=PI.filter(o=>n.get(o)?.unlocked);return i.length===0?null:qe.jsxs("div",{className:"bg-cosmic-900/50 rounded-lg p-4 backdrop-blur-sm border border-cosmic-700",children:[qe.jsx("h2",{className:"text-gold-400 font-display text-xl mb-3",children:"Generators"}),qe.jsx("div",{className:"space-y-2",children:i.map(o=>{const u=n.get(o),f=mS[o],m=VI(f.cost.base,f.cost.growth,u.level),h=r.get(f.cost.resource),p=h&&h.amount>=m;return qe.jsxs("div",{className:"bg-cosmic-800/60 rounded p-3 flex items-center justify-between",children:[qe.jsxs("div",{children:[qe.jsx("div",{className:"text-cosmic-100 font-semibold",children:f.name}),qe.jsxs("div",{className:"text-cosmic-400 text-sm",children:["Level ",u.level,"  Produces ",f.produces]})]}),qe.jsx("button",{onClick:()=>a(o),disabled:!p,className:`px-4 py-2 rounded font-semibold transition-all ${p?"bg-gold-500 text-cosmic-950 hover:bg-gold-400":"bg-cosmic-700 text-cosmic-500 cursor-not-allowed"}`,children:GI(m)})]},o)})})]})}function YI(){const{state:n,buyGenerator:r}=jI();return n.ready?qe.jsxs("div",{className:"min-h-screen p-4",children:[qe.jsxs("header",{className:"text-center mb-8",children:[qe.jsx("h1",{className:"font-display text-5xl text-gold-400 drop-shadow-lg",children:"Cosmic Bakery"}),qe.jsx("p",{className:"text-cosmic-200 mt-2",children:"Bake your way across the cosmos!"})]}),qe.jsxs("main",{className:"max-w-6xl mx-auto space-y-6",children:[qe.jsx(qI,{resources:n.resources}),qe.jsx(HI,{generators:n.generators,resources:n.resources,onBuy:r})]})]}):qe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:qe.jsx("div",{className:"text-gold-400 font-display text-2xl animate-pulse",children:"Loading Cosmic Bakery..."})})}ZT.createRoot(document.getElementById("root")).render(qe.jsx(Ur.StrictMode,{children:qe.jsx(YI,{})}));
