# @idle-engine/content-sample

Sample content pack used by the prototype milestone. The definitions here will ultimately be generated by the content DSL compiler and referenced by automated validation tests.

## Content validation

- Authoring sources live in `content/pack.json`. Run `pnpm generate` after editing content to rebuild the compiled artifacts under `content/compiled/` and `src/generated/`.
- The generated module (`src/generated/sample-pack.generated.ts`) rehydrates a frozen `NormalizedContentPack`, exposes digest and artifact hash metadata, and ships positional indices so runtime consumers avoid recomputing lookup tables.
- `src/index.ts` re-exports the generated pack, digest, indices, and summary. It throws during import when the compiler recorded schema warnings, keeping the sample pack warning-free by default.
- The compiler emits structured `content_pack.*` log lines; treat any new warning as a regression and resolve it before committing.

## Runtime event manifests

Custom runtime events for the sample pack live in `content/event-types.json`. After editing the manifest (or associated schema files) run `pnpm generate` from the repository root to regenerate:

- the consolidated manifest hash used by the command recorder
- `packages/core/src/events/runtime-event-manifest.generated.ts`
- the `ContentRuntimeEventType` union exported by `@idle-engine/core`

`sampleEventDefinitions` and `sampleEventTypes` in `src/index.ts` mirror the generated output to keep tests and examples in sync with the manifest. If you add new event schemas, regenerate the manifest and commit the updated compiler artifacts alongside the changes.
