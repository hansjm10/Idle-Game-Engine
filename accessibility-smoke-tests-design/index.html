<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-accessibility-smoke-tests-design" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Automated Accessibility Smoke Tests | Idle Engine Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hansjm10.github.io/Idle-Game-Engine/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hansjm10.github.io/Idle-Game-Engine/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hansjm10.github.io/Idle-Game-Engine/accessibility-smoke-tests-design"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Automated Accessibility Smoke Tests | Idle Engine Docs"><meta data-rh="true" name="description" content="Document Control"><meta data-rh="true" property="og:description" content="Document Control"><link data-rh="true" rel="icon" href="/Idle-Game-Engine/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hansjm10.github.io/Idle-Game-Engine/accessibility-smoke-tests-design"><link data-rh="true" rel="alternate" href="https://hansjm10.github.io/Idle-Game-Engine/accessibility-smoke-tests-design" hreflang="en"><link data-rh="true" rel="alternate" href="https://hansjm10.github.io/Idle-Game-Engine/accessibility-smoke-tests-design" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Automated Accessibility Smoke Tests","item":"https://hansjm10.github.io/Idle-Game-Engine/accessibility-smoke-tests-design"}]}</script><link rel="stylesheet" href="/Idle-Game-Engine/assets/css/styles.ddf7989c.css">
<script src="/Idle-Game-Engine/assets/js/runtime~main.3dc4ceeb.js" defer="defer"></script>
<script src="/Idle-Game-Engine/assets/js/main.f7253bbf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Idle-Game-Engine/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_li4T" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Idle-Game-Engine/"><div class="navbar__logo"><img src="/Idle-Game-Engine/img/logo.svg" alt="Idle Engine Logo" class="themedComponent_wqtB themedComponent--light_vaEm"><img src="/Idle-Game-Engine/img/logo.svg" alt="Idle Engine Logo" class="themedComponent_wqtB themedComponent--dark_axH8"></div><b class="navbar__title text--truncate">Idle Engine</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Idle-Game-Engine/">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/hansjm10/Idle-Game-Engine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_cYRj"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle__Exw colorModeToggle_Lslw"><button class="clean-btn toggleButton_AMBK toggleButtonDisabled_p4Bd" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_uZx1 lightToggleIcon_p2sk"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_uZx1 darkToggleIcon_B2qX"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_uZx1 systemToggleIcon_PWgn"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_RKai"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_nqaE"><div class="docsWrapper_CSLE"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sOWX" type="button"></button><div class="docRoot_qxtV"><aside class="theme-doc-sidebar-container docSidebarContainer_Xlvo"><div class="sidebarViewport_tjEA"><div class="sidebar_ubOv"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_CfkH"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/Idle-Game-Engine/"><span title="Getting Started" class="categoryLinkLabel_ebxo">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/"><span title="Overview" class="linkLabel_KsAJ">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/contributor-handbook"><span title="Contributor Handbook" class="linkLabel_KsAJ">Contributor Handbook</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/role-index"><span title="Role Index" class="linkLabel_KsAJ">Role Index</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/design-document-template"><span title="Design Document Template" class="linkLabel_KsAJ">Design Document Template</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Idle-Game-Engine/idle-engine-design"><span title="Core Runtime" class="categoryLinkLabel_ebxo">Core Runtime</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Idle-Game-Engine/content-dsl-schema-design"><span title="Content Pipeline" class="categoryLinkLabel_ebxo">Content Pipeline</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Idle-Game-Engine/accessibility-smoke-tests-design"><span title="Shell Integration" class="categoryLinkLabel_ebxo">Shell Integration</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Idle-Game-Engine/accessibility-smoke-tests-design"><span title="Automated Accessibility Smoke Tests" class="linkLabel_KsAJ">Automated Accessibility Smoke Tests</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Idle-Game-Engine/worker-bridge-extension-tutorial"><span title="Worker Bridge Extension Tutorial" class="linkLabel_KsAJ">Worker Bridge Extension Tutorial</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Idle-Game-Engine/coverage/"><span title="Diagnostics &amp; Quality" class="categoryLinkLabel_ebxo">Diagnostics &amp; Quality</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ziOL menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Idle-Game-Engine/implementation-plan"><span title="Operations &amp; Process" class="categoryLinkLabel_ebxo">Operations &amp; Process</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_tfRv"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_hyci"><div class="docItemContainer_tcAC"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_bxbs" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Idle-Game-Engine/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_p1A9"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Shell Integration</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Automated Accessibility Smoke Tests</span></li></ul></nav><div class="tocCollapsible_WMbj theme-doc-toc-mobile tocMobile_wI3e"><button type="button" class="clean-btn tocCollapsibleButton_rjEa">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Automated Accessibility Smoke Tests</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="document-control">Document Control<a href="#document-control" class="hash-link" aria-label="Direct link to Document Control" title="Direct link to Document Control" translate="no">​</a></h2>
<ul>
<li class=""><strong>Title</strong>: Automated Accessibility Smoke Tests</li>
<li class=""><strong>Authors</strong>: Jordan Hans</li>
<li class=""><strong>Reviewers</strong>: TODO – Assign accessibility QA reviewer</li>
<li class=""><strong>Status</strong>: In Review</li>
<li class=""><strong>Last Updated</strong>: 2025-10-23</li>
<li class=""><strong>Related Issues</strong>: <a href="https://github.com/hansjm10/Idle-Game-Engine/issues/191" target="_blank" rel="noopener noreferrer" class="">#191</a>, <a href="https://github.com/hansjm10/Idle-Game-Engine/issues/5" target="_blank" rel="noopener noreferrer" class="">#5</a></li>
<li class=""><strong>Execution Mode</strong>: AI-led</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="1-summary">1. Summary<a href="#1-summary" class="hash-link" aria-label="Direct link to 1. Summary" title="Direct link to 1. Summary" translate="no">​</a></h2>
<p>The Idle Engine web shell currently ships without automated accessibility coverage, creating a risk that regressions slip past manual testing. This design introduces a Playwright- and Axe-powered smoke test that exercises the production build of <code>@idle-engine/shell-web</code>, emits actionable violation data, and fits inside existing <code>pnpm test:ci</code> pipelines. The plan scopes the technical approach, agent workflows, and follow-up work so autonomous contributors can deliver and maintain the suite with minimal friction.</p>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="2-context--problem-statement">2. Context &amp; Problem Statement<a href="#2-context--problem-statement" class="hash-link" aria-label="Direct link to 2. Context &amp; Problem Statement" title="Direct link to 2. Context &amp; Problem Statement" translate="no">​</a></h2>
<ul>
<li class=""><strong>Background</strong>: The repository relies on <code>pnpm</code>, Lefthook, and GitHub Actions to enforce lint, unit tests, and build steps. No integration or browser-based tests run today, and developers manually inspect the shell UI for WCAG coverage.</li>
<li class=""><strong>Problem</strong>: Accessibility smoke checks are easy to defer, go stale as UI surfaces change, and lack machine-readable failure data. Without automation, accessibility regressions may ship unnoticed and force rework.</li>
<li class=""><strong>Forces</strong>: (1) Feedback must complete in under one minute to remain viable locally and in CI. (2) Reports need machine-readable selectors and WCAG rule IDs so agents can auto-triage failures. (3) The solution must scale to future UI surfaces without rewriting tooling.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="3-goals--non-goals">3. Goals &amp; Non-Goals<a href="#3-goals--non-goals" class="hash-link" aria-label="Direct link to 3. Goals &amp; Non-Goals" title="Direct link to 3. Goals &amp; Non-Goals" translate="no">​</a></h2>
<ul>
<li class=""><strong>Goals</strong>:<!-- -->
<ul>
<li class="">Deliver a deterministic accessibility smoke test that blocks WCAG 2.1 A/AA failures on the primary shell experience.</li>
<li class="">Keep the workflow compatible with <code>pnpm test:a11y</code> locally and <code>pnpm test:ci</code> in CI, with sub-minute runtime after browsers are cached.</li>
<li class="">Produce violation summaries that downstream agents can parse and act on without manual context.</li>
<li class="">Set up reusable scaffolding so additional shell routes or overlays can be covered incrementally.</li>
</ul>
</li>
<li class=""><strong>Non-Goals</strong>:<!-- -->
<ul>
<li class="">Comprehensive accessibility audits or visual regression coverage.</li>
<li class="">Backend or non-web client accessibility testing.</li>
<li class="">Enforcing design token contrast rules (handled by the design system).</li>
<li class="">Replacing Vitest unit suites or component-level tests.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="4-stakeholders-agents--impacted-surfaces">4. Stakeholders, Agents &amp; Impacted Surfaces<a href="#4-stakeholders-agents--impacted-surfaces" class="hash-link" aria-label="Direct link to 4. Stakeholders, Agents &amp; Impacted Surfaces" title="Direct link to 4. Stakeholders, Agents &amp; Impacted Surfaces" translate="no">​</a></h2>
<ul>
<li class=""><strong>Primary Stakeholders</strong>: Shell Web squad, QA &amp; Accessibility maintainers, Docs &amp; Tooling working group.</li>
<li class=""><strong>Agent Roles</strong>:<!-- -->
<ul>
<li class=""><em>Docs Agent</em>: Maintains this design, context packets, and changelog.</li>
<li class=""><em>A11y Automation Agent</em>: Implements and updates Playwright/Axe suites.</li>
<li class=""><em>CI Integration Agent</em>: Keeps <code>pnpm test:ci</code> and GitHub Actions wiring aligned with the smoke tests.</li>
</ul>
</li>
<li class=""><strong>Affected Packages/Services</strong>: <code>packages/shell-web</code>, <code>packages/core</code>, <code>tools/a11y-smoke-tests</code>, <code>.github/workflows/ci.yml</code>, <code>lefthook.yml</code>.</li>
<li class=""><strong>Compatibility Considerations</strong>: Avoid breaking existing build/test contracts, respect workspace boundaries, and ensure Playwright installs do not impact environments with <code>PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1</code>.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="5-current-state">5. Current State<a href="#5-current-state" class="hash-link" aria-label="Direct link to 5. Current State" title="Direct link to 5. Current State" translate="no">​</a></h2>
<p><code>@idle-engine/shell-web</code> renders a landing page without automated browser coverage. Lefthook runs <code>pnpm lint</code>, <code>pnpm test:ci</code>, and <code>pnpm build</code>, but no package exports an accessibility test target. GitHub Actions executes the same commands, leaving accessibility gaps unaddressed. Contributors must rely on ad-hoc manual audits that drift quickly as UI evolves.</p>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="6-proposed-solution">6. Proposed Solution<a href="#6-proposed-solution" class="hash-link" aria-label="Direct link to 6. Proposed Solution" title="Direct link to 6. Proposed Solution" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="61-architecture-overview">6.1 Architecture Overview<a href="#61-architecture-overview" class="hash-link" aria-label="Direct link to 6.1 Architecture Overview" title="Direct link to 6.1 Architecture Overview" translate="no">​</a></h3>
<p>Adopt a dedicated workspace under <code>tools/a11y-smoke-tests</code> that runs Playwright against the production build of the shell. Playwright launches Vite’s preview server after building dependencies, Axe audits the rendered landing page, and violations fail the run with structured output. The suite integrates with existing <code>pnpm</code> scripts so CI picks it up automatically.</p>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="62-detailed-design">6.2 Detailed Design<a href="#62-detailed-design" class="hash-link" aria-label="Direct link to 6.2 Detailed Design" title="Direct link to 6.2 Detailed Design" translate="no">​</a></h3>
<ul>
<li class=""><strong>Runtime Changes</strong>: None. The runtime remains untouched; only build/test orchestration changes.</li>
<li class=""><strong>Data &amp; Schemas</strong>: Optional JSON artifacts may be emitted under <code>artifacts/accessibility/</code> during CI for future diffing; no schema changes today.</li>
<li class=""><strong>APIs &amp; Contracts</strong>:<!-- -->
<ul>
<li class="">Author <code>pnpm test:a11y</code> (workspace root) to invoke the Playwright suite.</li>
<li class="">Ensure <code>pnpm test:ci</code> recursively runs the smoke tests without double execution.</li>
<li class="">Guard scripts against unsupported flags (e.g., reject <code>pnpm test:a11y -- --ui</code>).</li>
</ul>
</li>
<li class=""><strong>Tooling &amp; Automation</strong>:<!-- -->
<ul>
<li class="">Create <code>tools/a11y-smoke-tests</code> with dependencies: <code>@playwright/test</code>, <code>@axe-core/playwright</code>, <code>cross-env</code>, <code>start-server-and-test</code>, <code>typescript</code>, <code>ts-node</code>.</li>
<li class="">Provide <code>playwright.config.ts</code> that declares the Chromium preview/dev projects and their base URLs; server lifecycle is handled externally.</li>
<li class="">Implement <code>scripts/run-playwright.cjs</code> so it sequentially starts the preview server (<code>vite preview</code>) and dev server (<code>vite dev</code>) via <code>start-server-and-test</code>, waits for the requested host/port (defaults to <code>127.0.0.1:4173</code> / <code>127.0.0.1:5173</code>), and invokes the matching Playwright project with the line reporter in CI.</li>
<li class="">Add <code>playwright.global-setup.ts</code> to ping the configured base URLs up front and fail fast with guidance (<code>pnpm test:a11y</code>) when contributors invoke <code>playwright test</code> without running the harness or manually starting servers (advanced users can override via <code>PLAYWRIGHT_A11Y_SKIP_SERVER_CHECK=1</code>).</li>
<li class="">Implement <code>tests/landing-page.a11y.spec.ts</code> that waits for the <code>&lt;main&gt;</code> landmark, runs Axe with <code>wcag2a</code> and <code>wcag2aa</code> tags, and asserts zero violations while logging actionable summaries on failure.</li>
<li class="">Write <code>scripts/install-playwright.cjs</code> to manage browser installs and keep the harness air-gap friendly.</li>
<li class="">Update <code>.gitignore</code> to exclude Playwright’s output directories and optional Axe artifacts.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="64-initial-test-cases">6.4 Initial Test Cases<a href="#64-initial-test-cases" class="hash-link" aria-label="Direct link to 6.4 Initial Test Cases" title="Direct link to 6.4 Initial Test Cases" translate="no">​</a></h3>
<ul>
<li class="">Landing page Axe audit: validate the primary shell route has no blocking WCAG A/AA violations.</li>
<li class="">Diagnostics toggle stability: repeatedly click the “Show/Hide Diagnostics” button and assert the console does not contain React depth-limit errors (&quot;Maximum update depth exceeded&quot;). This guards against cleanup-time state updates in diagnostics subscription flows.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="63-operational-considerations">6.3 Operational Considerations<a href="#63-operational-considerations" class="hash-link" aria-label="Direct link to 6.3 Operational Considerations" title="Direct link to 6.3 Operational Considerations" translate="no">​</a></h3>
<ul>
<li class=""><strong>Deployment</strong>: GitHub Actions already runs <code>pnpm test:ci</code>; once the new workspace is in the dependency graph, the a11y suite runs automatically. Consider caching <code>~/.cache/ms-playwright</code> for faster reruns, rely on <code>start-server-and-test</code> logs to debug failed startups, and export <code>PLAYWRIGHT_A11Y_SKIP_BUILD=1</code> locally when reusing an already-running dev/preview server so the <code>pretest</code> hook can skip redundant builds.</li>
<li class=""><strong>Telemetry &amp; Observability</strong>: Use Playwright reporters for console summaries. Future enhancements may upload Axe JSON artifacts or integrate GitHub annotations.</li>
<li class=""><strong>Security &amp; Compliance</strong>: No PII or authenticated flows; ensure preview servers bind to <code>127.0.0.1</code> to avoid cross-network exposure. Respect <code>PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1</code> for air-gapped installs.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="7-work-breakdown--delivery-plan">7. Work Breakdown &amp; Delivery Plan<a href="#7-work-breakdown--delivery-plan" class="hash-link" aria-label="Direct link to 7. Work Breakdown &amp; Delivery Plan" title="Direct link to 7. Work Breakdown &amp; Delivery Plan" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="71-issue-map">7.1 Issue Map<a href="#71-issue-map" class="hash-link" aria-label="Direct link to 7.1 Issue Map" title="Direct link to 7.1 Issue Map" translate="no">​</a></h3>
<table><thead><tr><th>Issue Title</th><th>Scope Summary</th><th>Proposed Assignee/Agent</th><th>Dependencies</th><th>Acceptance Criteria</th></tr></thead><tbody><tr><td>docs: migrate Accessibility Smoke Tests design to template</td><td>Align doc with standard template, add agent guidance and changelog</td><td>Docs Agent</td><td>Template approved</td><td>Document merged; context packets ready for agents</td></tr><tr><td>feat(tools): scaffold Playwright a11y smoke tests workspace</td><td>Create workspace, scripts, initial landing-page spec</td><td>A11y Automation Agent</td><td>Doc sign-off</td><td><code>pnpm test:a11y</code> passes locally; browsers cached; repo scripts updated</td></tr><tr><td>ci: integrate a11y smoke tests into pipelines</td><td>Wire Lefthook and GitHub Actions to run the suite reliably</td><td>CI Integration Agent</td><td>Workspace scaffold</td><td>CI run shows Playwright job passing; flakes under 2% week-over-week</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="72-milestones">7.2 Milestones<a href="#72-milestones" class="hash-link" aria-label="Direct link to 7.2 Milestones" title="Direct link to 7.2 Milestones" translate="no">​</a></h3>
<ul>
<li class=""><strong>Phase 1</strong>: Approve design, scaffold workspace, land initial smoke test (target under one week).</li>
<li class=""><strong>Phase 2</strong>: Extend coverage to overlays/modals and publish Axe artifacts in CI (target one week after Phase 1).</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_EdDC" id="73-coordination-notes">7.3 Coordination Notes<a href="#73-coordination-notes" class="hash-link" aria-label="Direct link to 7.3 Coordination Notes" title="Direct link to 7.3 Coordination Notes" translate="no">​</a></h3>
<ul>
<li class=""><strong>Hand-off Package</strong>: Share this doc, <code>pnpm-workspace.yaml</code>, <code>packages/shell-web/README.md</code>, and latest CI logs with incoming agents.</li>
<li class=""><strong>Communication Cadence</strong>: Async updates on issue #191 thrice weekly; escalate blockers in the Docs &amp; Tooling channel.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="8-agent-guidance--guardrails">8. Agent Guidance &amp; Guardrails<a href="#8-agent-guidance--guardrails" class="hash-link" aria-label="Direct link to 8. Agent Guidance &amp; Guardrails" title="Direct link to 8. Agent Guidance &amp; Guardrails" translate="no">​</a></h2>
<ul>
<li class=""><strong>Context Packets</strong>: <code>docs/accessibility-smoke-tests-design.md</code>, <code>docs/implementation-plan.md</code>, <code>pnpm-workspace.yaml</code>, <code>.github/workflows/ci.yml</code>, <code>packages/shell-web/README.md</code>.</li>
<li class=""><strong>Prompting &amp; Constraints</strong>: Reference this document when implementing scripts; follow Conventional Commits; keep runtime deterministic; avoid introducing unsupported Playwright flags.</li>
<li class=""><strong>Safety Rails</strong>: Do not modify <code>dist/</code> artifacts directly; avoid <code>git reset --hard</code>; respect <code>LEFTHOOK</code> hooks unless coordinating overrides; keep server host <code>127.0.0.1</code>.</li>
<li class=""><strong>Validation Hooks</strong>: Run <code>pnpm install</code>, <code>pnpm test:a11y</code>, and <code>pnpm test:ci</code> before marking work complete; attach violation logs when failures occur.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="9-alternatives-considered">9. Alternatives Considered<a href="#9-alternatives-considered" class="hash-link" aria-label="Direct link to 9. Alternatives Considered" title="Direct link to 9. Alternatives Considered" translate="no">​</a></h2>
<ul>
<li class=""><strong>Cypress + axe-core plugin</strong>: Rejected due to heavier runtime, slower CI cold starts, and limited first-class TypeScript tooling compared to Playwright.</li>
<li class=""><strong>Puppeteer with custom Axe integration</strong>: Rejected; would require more glue code, lacks built-in test runner ergonomics, and duplicates functionality Playwright already offers.</li>
<li class=""><strong>Storybook-driven accessibility checks</strong>: Deferred; Storybook is not in use for the shell today and would add setup overhead before tests can run.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="10-testing--validation-plan">10. Testing &amp; Validation Plan<a href="#10-testing--validation-plan" class="hash-link" aria-label="Direct link to 10. Testing &amp; Validation Plan" title="Direct link to 10. Testing &amp; Validation Plan" translate="no">​</a></h2>
<ul>
<li class=""><strong>Unit / Integration</strong>: Maintain Playwright specs under <code>tools/a11y-smoke-tests/tests</code>. Future unit tests can validate helper utilities (e.g., violation formatters).</li>
<li class=""><strong>Performance</strong>: Track total runtime; target ≤ 60s per run after browser cache warm-up. Investigate when durations exceed 90s.</li>
<li class=""><strong>Tooling / A11y</strong>: Execute <code>pnpm test:a11y</code> locally and in CI. When modifying shell UI, rerun the suite and capture failure artifacts for review.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="11-risks--mitigations">11. Risks &amp; Mitigations<a href="#11-risks--mitigations" class="hash-link" aria-label="Direct link to 11. Risks &amp; Mitigations" title="Direct link to 11. Risks &amp; Mitigations" translate="no">​</a></h2>
<ul>
<li class=""><strong>Initial browser download slows installs</strong>: Cache Playwright artifacts and short-circuit the installer when <code>PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1</code> is set.</li>
<li class=""><strong>Flaky server startup causes false failures</strong>: Let <code>start-server-and-test</code> own preview/dev boot with strict ports so connection issues surface before Playwright launches.</li>
<li class=""><strong>Dynamic content triggers false positives</strong>: Wait for UI stabilization (loading indicators resolved) before running Axe; selectively suppress known-safe animations.</li>
<li class=""><strong>Pre-commit friction</strong>: Monitor Lefthook timings; consider a lighter <code>test:fast</code> hook if contributors report unacceptable delays.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="12-rollout-plan">12. Rollout Plan<a href="#12-rollout-plan" class="hash-link" aria-label="Direct link to 12. Rollout Plan" title="Direct link to 12. Rollout Plan" translate="no">​</a></h2>
<ul>
<li class=""><strong>Milestones</strong>: Land workspace scaffolding, integrate with CI, document usage in README, monitor first two weeks of runs.</li>
<li class=""><strong>Migration Strategy</strong>: Introduce the new package via standard PR; ensure <code>pnpm install</code> succeeds on clean clones; document opt-out instructions (<code>LEFTHOOK=0</code>).</li>
<li class=""><strong>Communication</strong>: Announce availability in the Shell Web release notes and internal tooling updates; highlight how to rerun the suite locally.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="13-open-questions">13. Open Questions<a href="#13-open-questions" class="hash-link" aria-label="Direct link to 13. Open Questions" title="Direct link to 13. Open Questions" translate="no">​</a></h2>
<ul>
<li class="">Should future social-service UI routes receive dedicated smoke tests with authenticated flows?</li>
<li class="">Do we want to publish Axe violation artifacts (JSON) as CI attachments in the first iteration?</li>
<li class="">Will additional shells (e.g., native/Tauri) require analogous tests, and should they reuse this workspace?</li>
<li class="">Who will serve as the long-term reviewer/approver for accessibility automation changes?</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="14-follow-up-work">14. Follow-Up Work<a href="#14-follow-up-work" class="hash-link" aria-label="Direct link to 14. Follow-Up Work" title="Direct link to 14. Follow-Up Work" translate="no">​</a></h2>
<ul>
<li class="">Draft issues for expanding coverage to overlays and modals once they ship.</li>
<li class="">Evaluate GitHub annotation integration for Axe violations.</li>
<li class="">Audit other documentation that references the legacy accessibility plan and update links accordingly.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="15-references">15. References<a href="#15-references" class="hash-link" aria-label="Direct link to 15. References" title="Direct link to 15. References" translate="no">​</a></h2>
<ul>
<li class=""><code>docs/design-document-template.md</code></li>
<li class=""><code>pnpm-workspace.yaml</code></li>
<li class=""><code>.github/workflows/ci.yml</code></li>
<li class=""><code>packages/shell-web/src/modules/App.tsx</code></li>
<li class=""><a href="https://playwright.dev/" target="_blank" rel="noopener noreferrer" class="">Playwright Docs</a></li>
<li class=""><a href="https://www.deque.com/axe/" target="_blank" rel="noopener noreferrer" class="">Axe Core Accessibility Testing</a></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="appendix-a--glossary">Appendix A — Glossary<a href="#appendix-a--glossary" class="hash-link" aria-label="Direct link to Appendix A — Glossary" title="Direct link to Appendix A — Glossary" translate="no">​</a></h2>
<ul>
<li class=""><strong>Axe</strong>: Deque’s accessibility engine that audits pages for WCAG compliance.</li>
<li class=""><strong>Playwright</strong>: Microsoft’s browser automation framework used for end-to-end testing.</li>
<li class=""><strong>Smoke Test</strong>: A lightweight test ensuring core functionality works before deeper validation.</li>
<li class=""><strong>WCAG</strong>: Web Content Accessibility Guidelines, the standard for accessibility compliance.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_EdDC" id="appendix-b--change-log">Appendix B — Change Log<a href="#appendix-b--change-log" class="hash-link" aria-label="Direct link to Appendix B — Change Log" title="Direct link to Appendix B — Change Log" translate="no">​</a></h2>
<table><thead><tr><th>Date</th><th>Author</th><th>Change Summary</th></tr></thead><tbody><tr><td>2025-10-23</td><td>Jordan Hans</td><td>Migrated document to standard template; added agent guidance and delivery plan</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_QKxP"><a href="https://github.com/hansjm10/Idle-Game-Engine/edit/main/docs/../../docs/accessibility-smoke-tests-design.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_wOWh" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_Basj"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Idle-Game-Engine/content-validation-cli-design"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Content Validation CLI Design Document</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Idle-Game-Engine/worker-bridge-extension-tutorial"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Worker Bridge Extension Tutorial</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_AUZ0 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#document-control" class="table-of-contents__link toc-highlight">Document Control</a></li><li><a href="#1-summary" class="table-of-contents__link toc-highlight">1. Summary</a></li><li><a href="#2-context--problem-statement" class="table-of-contents__link toc-highlight">2. Context &amp; Problem Statement</a></li><li><a href="#3-goals--non-goals" class="table-of-contents__link toc-highlight">3. Goals &amp; Non-Goals</a></li><li><a href="#4-stakeholders-agents--impacted-surfaces" class="table-of-contents__link toc-highlight">4. Stakeholders, Agents &amp; Impacted Surfaces</a></li><li><a href="#5-current-state" class="table-of-contents__link toc-highlight">5. Current State</a></li><li><a href="#6-proposed-solution" class="table-of-contents__link toc-highlight">6. Proposed Solution</a><ul><li><a href="#61-architecture-overview" class="table-of-contents__link toc-highlight">6.1 Architecture Overview</a></li><li><a href="#62-detailed-design" class="table-of-contents__link toc-highlight">6.2 Detailed Design</a></li><li><a href="#64-initial-test-cases" class="table-of-contents__link toc-highlight">6.4 Initial Test Cases</a></li><li><a href="#63-operational-considerations" class="table-of-contents__link toc-highlight">6.3 Operational Considerations</a></li></ul></li><li><a href="#7-work-breakdown--delivery-plan" class="table-of-contents__link toc-highlight">7. Work Breakdown &amp; Delivery Plan</a><ul><li><a href="#71-issue-map" class="table-of-contents__link toc-highlight">7.1 Issue Map</a></li><li><a href="#72-milestones" class="table-of-contents__link toc-highlight">7.2 Milestones</a></li><li><a href="#73-coordination-notes" class="table-of-contents__link toc-highlight">7.3 Coordination Notes</a></li></ul></li><li><a href="#8-agent-guidance--guardrails" class="table-of-contents__link toc-highlight">8. Agent Guidance &amp; Guardrails</a></li><li><a href="#9-alternatives-considered" class="table-of-contents__link toc-highlight">9. Alternatives Considered</a></li><li><a href="#10-testing--validation-plan" class="table-of-contents__link toc-highlight">10. Testing &amp; Validation Plan</a></li><li><a href="#11-risks--mitigations" class="table-of-contents__link toc-highlight">11. Risks &amp; Mitigations</a></li><li><a href="#12-rollout-plan" class="table-of-contents__link toc-highlight">12. Rollout Plan</a></li><li><a href="#13-open-questions" class="table-of-contents__link toc-highlight">13. Open Questions</a></li><li><a href="#14-follow-up-work" class="table-of-contents__link toc-highlight">14. Follow-Up Work</a></li><li><a href="#15-references" class="table-of-contents__link toc-highlight">15. References</a></li><li><a href="#appendix-a--glossary" class="table-of-contents__link toc-highlight">Appendix A — Glossary</a></li><li><a href="#appendix-b--change-log" class="table-of-contents__link toc-highlight">Appendix B — Change Log</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Idle-Game-Engine/">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/Idle-Game-Engine/contributor-handbook">Contributor Handbook</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hansjm10/Idle-Game-Engine/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issue Tracker<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_cYRj"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hansjm10/Idle-Game-Engine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_cYRj"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Idle Engine.</div></div></div></footer></div>
</body>
</html>